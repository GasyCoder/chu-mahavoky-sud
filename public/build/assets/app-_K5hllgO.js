function bJ(p,S){return function(){return p.apply(S,arguments)}}const{toString:lee}=Object.prototype,{getPrototypeOf:uK}=Object,FF=(p=>S=>{const O=lee.call(S);return p[O]||(p[O]=O.slice(8,-1).toLowerCase())})(Object.create(null)),Mh=p=>(p=p.toLowerCase(),S=>FF(S)===p),HF=p=>S=>typeof S===p,{isArray:b4}=Array,OM=HF("undefined");function uee(p){return p!==null&&!OM(p)&&p.constructor!==null&&!OM(p.constructor)&&_f(p.constructor.isBuffer)&&p.constructor.isBuffer(p)}const vJ=Mh("ArrayBuffer");function dee(p){let S;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?S=ArrayBuffer.isView(p):S=p&&p.buffer&&vJ(p.buffer),S}const mee=HF("string"),_f=HF("function"),yJ=HF("number"),zF=p=>p!==null&&typeof p=="object",fee=p=>p===!0||p===!1,AF=p=>{if(FF(p)!=="object")return!1;const S=uK(p);return(S===null||S===Object.prototype||Object.getPrototypeOf(S)===null)&&!(Symbol.toStringTag in p)&&!(Symbol.iterator in p)},gee=Mh("Date"),hee=Mh("File"),pee=Mh("Blob"),bee=Mh("FileList"),vee=p=>zF(p)&&_f(p.pipe),yee=p=>{let S;return p&&(typeof FormData=="function"&&p instanceof FormData||_f(p.append)&&((S=FF(p))==="formdata"||S==="object"&&_f(p.toString)&&p.toString()==="[object FormData]"))},Cee=Mh("URLSearchParams"),[wee,See,xee,Eee]=["ReadableStream","Request","Response","Headers"].map(Mh),Tee=p=>p.trim?p.trim():p.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function DM(p,S,{allOwnKeys:O=!1}={}){if(p===null||typeof p>"u")return;let P,F;if(typeof p!="object"&&(p=[p]),b4(p))for(P=0,F=p.length;P<F;P++)S.call(null,p[P],P,p);else{const Z=O?Object.getOwnPropertyNames(p):Object.keys(p),q=Z.length;let se;for(P=0;P<q;P++)se=Z[P],S.call(null,p[se],se,p)}}function CJ(p,S){S=S.toLowerCase();const O=Object.keys(p);let P=O.length,F;for(;P-- >0;)if(F=O[P],S===F.toLowerCase())return F;return null}const nS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wJ=p=>!OM(p)&&p!==nS;function zG(){const{caseless:p}=wJ(this)&&this||{},S={},O=(P,F)=>{const Z=p&&CJ(S,F)||F;AF(S[Z])&&AF(P)?S[Z]=zG(S[Z],P):AF(P)?S[Z]=zG({},P):b4(P)?S[Z]=P.slice():S[Z]=P};for(let P=0,F=arguments.length;P<F;P++)arguments[P]&&DM(arguments[P],O);return S}const _ee=(p,S,O,{allOwnKeys:P}={})=>(DM(S,(F,Z)=>{O&&_f(F)?p[Z]=bJ(F,O):p[Z]=F},{allOwnKeys:P}),p),kee=p=>(p.charCodeAt(0)===65279&&(p=p.slice(1)),p),Aee=(p,S,O,P)=>{p.prototype=Object.create(S.prototype,P),p.prototype.constructor=p,Object.defineProperty(p,"super",{value:S.prototype}),O&&Object.assign(p.prototype,O)},Oee=(p,S,O,P)=>{let F,Z,q;const se={};if(S=S||{},p==null)return S;do{for(F=Object.getOwnPropertyNames(p),Z=F.length;Z-- >0;)q=F[Z],(!P||P(q,p,S))&&!se[q]&&(S[q]=p[q],se[q]=!0);p=O!==!1&&uK(p)}while(p&&(!O||O(p,S))&&p!==Object.prototype);return S},Ree=(p,S,O)=>{p=String(p),(O===void 0||O>p.length)&&(O=p.length),O-=S.length;const P=p.indexOf(S,O);return P!==-1&&P===O},Dee=p=>{if(!p)return null;if(b4(p))return p;let S=p.length;if(!yJ(S))return null;const O=new Array(S);for(;S-- >0;)O[S]=p[S];return O},Mee=(p=>S=>p&&S instanceof p)(typeof Uint8Array<"u"&&uK(Uint8Array)),Nee=(p,S)=>{const P=(p&&p[Symbol.iterator]).call(p);let F;for(;(F=P.next())&&!F.done;){const Z=F.value;S.call(p,Z[0],Z[1])}},Pee=(p,S)=>{let O;const P=[];for(;(O=p.exec(S))!==null;)P.push(O);return P},Bee=Mh("HTMLFormElement"),$ee=p=>p.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(O,P,F){return P.toUpperCase()+F}),hX=(({hasOwnProperty:p})=>(S,O)=>p.call(S,O))(Object.prototype),Iee=Mh("RegExp"),SJ=(p,S)=>{const O=Object.getOwnPropertyDescriptors(p),P={};DM(O,(F,Z)=>{let q;(q=S(F,Z,p))!==!1&&(P[Z]=q||F)}),Object.defineProperties(p,P)},Lee=p=>{SJ(p,(S,O)=>{if(_f(p)&&["arguments","caller","callee"].indexOf(O)!==-1)return!1;const P=p[O];if(_f(P)){if(S.enumerable=!1,"writable"in S){S.writable=!1;return}S.set||(S.set=()=>{throw Error("Can not rewrite read-only method '"+O+"'")})}})},Fee=(p,S)=>{const O={},P=F=>{F.forEach(Z=>{O[Z]=!0})};return b4(p)?P(p):P(String(p).split(S)),O},Hee=()=>{},zee=(p,S)=>p!=null&&Number.isFinite(p=+p)?p:S;function Vee(p){return!!(p&&_f(p.append)&&p[Symbol.toStringTag]==="FormData"&&p[Symbol.iterator])}const Uee=p=>{const S=new Array(10),O=(P,F)=>{if(zF(P)){if(S.indexOf(P)>=0)return;if(!("toJSON"in P)){S[F]=P;const Z=b4(P)?[]:{};return DM(P,(q,se)=>{const Ee=O(q,F+1);!OM(Ee)&&(Z[se]=Ee)}),S[F]=void 0,Z}}return P};return O(p,0)},Wee=Mh("AsyncFunction"),Zee=p=>p&&(zF(p)||_f(p))&&_f(p.then)&&_f(p.catch),xJ=((p,S)=>p?setImmediate:S?((O,P)=>(nS.addEventListener("message",({source:F,data:Z})=>{F===nS&&Z===O&&P.length&&P.shift()()},!1),F=>{P.push(F),nS.postMessage(O,"*")}))(`axios@${Math.random()}`,[]):O=>setTimeout(O))(typeof setImmediate=="function",_f(nS.postMessage)),jee=typeof queueMicrotask<"u"?queueMicrotask.bind(nS):typeof process<"u"&&process.nextTick||xJ,ft={isArray:b4,isArrayBuffer:vJ,isBuffer:uee,isFormData:yee,isArrayBufferView:dee,isString:mee,isNumber:yJ,isBoolean:fee,isObject:zF,isPlainObject:AF,isReadableStream:wee,isRequest:See,isResponse:xee,isHeaders:Eee,isUndefined:OM,isDate:gee,isFile:hee,isBlob:pee,isRegExp:Iee,isFunction:_f,isStream:vee,isURLSearchParams:Cee,isTypedArray:Mee,isFileList:bee,forEach:DM,merge:zG,extend:_ee,trim:Tee,stripBOM:kee,inherits:Aee,toFlatObject:Oee,kindOf:FF,kindOfTest:Mh,endsWith:Ree,toArray:Dee,forEachEntry:Nee,matchAll:Pee,isHTMLForm:Bee,hasOwnProperty:hX,hasOwnProp:hX,reduceDescriptors:SJ,freezeMethods:Lee,toObjectSet:Fee,toCamelCase:$ee,noop:Hee,toFiniteNumber:zee,findKey:CJ,global:nS,isContextDefined:wJ,isSpecCompliantForm:Vee,toJSONObject:Uee,isAsyncFn:Wee,isThenable:Zee,setImmediate:xJ,asap:jee};function Ho(p,S,O,P,F){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=p,this.name="AxiosError",S&&(this.code=S),O&&(this.config=O),P&&(this.request=P),F&&(this.response=F,this.status=F.status?F.status:null)}ft.inherits(Ho,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ft.toJSONObject(this.config),code:this.code,status:this.status}}});const EJ=Ho.prototype,TJ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(p=>{TJ[p]={value:p}});Object.defineProperties(Ho,TJ);Object.defineProperty(EJ,"isAxiosError",{value:!0});Ho.from=(p,S,O,P,F,Z)=>{const q=Object.create(EJ);return ft.toFlatObject(p,q,function(Ee){return Ee!==Error.prototype},se=>se!=="isAxiosError"),Ho.call(q,p.message,S,O,P,F),q.cause=p,q.name=p.name,Z&&Object.assign(q,Z),q};const qee=null;function VG(p){return ft.isPlainObject(p)||ft.isArray(p)}function _J(p){return ft.endsWith(p,"[]")?p.slice(0,-2):p}function pX(p,S,O){return p?p.concat(S).map(function(F,Z){return F=_J(F),!O&&Z?"["+F+"]":F}).join(O?".":""):S}function Gee(p){return ft.isArray(p)&&!p.some(VG)}const Kee=ft.toFlatObject(ft,{},null,function(S){return/^is[A-Z]/.test(S)});function VF(p,S,O){if(!ft.isObject(p))throw new TypeError("target must be an object");S=S||new FormData,O=ft.toFlatObject(O,{metaTokens:!0,dots:!1,indexes:!1},!1,function(cn,Ae){return!ft.isUndefined(Ae[cn])});const P=O.metaTokens,F=O.visitor||Fe,Z=O.dots,q=O.indexes,Ee=(O.Blob||typeof Blob<"u"&&Blob)&&ft.isSpecCompliantForm(S);if(!ft.isFunction(F))throw new TypeError("visitor must be a function");function Le(ln){if(ln===null)return"";if(ft.isDate(ln))return ln.toISOString();if(!Ee&&ft.isBlob(ln))throw new Ho("Blob is not supported. Use a Buffer instead.");return ft.isArrayBuffer(ln)||ft.isTypedArray(ln)?Ee&&typeof Blob=="function"?new Blob([ln]):Buffer.from(ln):ln}function Fe(ln,cn,Ae){let On=ln;if(ln&&!Ae&&typeof ln=="object"){if(ft.endsWith(cn,"{}"))cn=P?cn:cn.slice(0,-2),ln=JSON.stringify(ln);else if(ft.isArray(ln)&&Gee(ln)||(ft.isFileList(ln)||ft.endsWith(cn,"[]"))&&(On=ft.toArray(ln)))return cn=_J(cn),On.forEach(function(le,Ot){!(ft.isUndefined(le)||le===null)&&S.append(q===!0?pX([cn],Ot,Z):q===null?cn:cn+"[]",Le(le))}),!1}return VG(ln)?!0:(S.append(pX(Ae,cn,Z),Le(ln)),!1)}const ut=[],en=Object.assign(Kee,{defaultVisitor:Fe,convertValue:Le,isVisitable:VG});function Mn(ln,cn){if(!ft.isUndefined(ln)){if(ut.indexOf(ln)!==-1)throw Error("Circular reference detected in "+cn.join("."));ut.push(ln),ft.forEach(ln,function(On,Tt){(!(ft.isUndefined(On)||On===null)&&F.call(S,On,ft.isString(Tt)?Tt.trim():Tt,cn,en))===!0&&Mn(On,cn?cn.concat(Tt):[Tt])}),ut.pop()}}if(!ft.isObject(p))throw new TypeError("data must be an object");return Mn(p),S}function bX(p){const S={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(p).replace(/[!'()~]|%20|%00/g,function(P){return S[P]})}function dK(p,S){this._pairs=[],p&&VF(p,this,S)}const kJ=dK.prototype;kJ.append=function(S,O){this._pairs.push([S,O])};kJ.toString=function(S){const O=S?function(P){return S.call(this,P,bX)}:bX;return this._pairs.map(function(F){return O(F[0])+"="+O(F[1])},"").join("&")};function Yee(p){return encodeURIComponent(p).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function AJ(p,S,O){if(!S)return p;const P=O&&O.encode||Yee;ft.isFunction(O)&&(O={serialize:O});const F=O&&O.serialize;let Z;if(F?Z=F(S,O):Z=ft.isURLSearchParams(S)?S.toString():new dK(S,O).toString(P),Z){const q=p.indexOf("#");q!==-1&&(p=p.slice(0,q)),p+=(p.indexOf("?")===-1?"?":"&")+Z}return p}class vX{constructor(){this.handlers=[]}use(S,O,P){return this.handlers.push({fulfilled:S,rejected:O,synchronous:P?P.synchronous:!1,runWhen:P?P.runWhen:null}),this.handlers.length-1}eject(S){this.handlers[S]&&(this.handlers[S]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(S){ft.forEach(this.handlers,function(P){P!==null&&S(P)})}}const OJ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xee=typeof URLSearchParams<"u"?URLSearchParams:dK,Jee=typeof FormData<"u"?FormData:null,Qee=typeof Blob<"u"?Blob:null,ete={isBrowser:!0,classes:{URLSearchParams:Xee,FormData:Jee,Blob:Qee},protocols:["http","https","file","blob","url","data"]},mK=typeof window<"u"&&typeof document<"u",UG=typeof navigator=="object"&&navigator||void 0,tte=mK&&(!UG||["ReactNative","NativeScript","NS"].indexOf(UG.product)<0),nte=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ote=mK&&window.location.href||"http://localhost",ste=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mK,hasStandardBrowserEnv:tte,hasStandardBrowserWebWorkerEnv:nte,navigator:UG,origin:ote},Symbol.toStringTag,{value:"Module"})),Bu={...ste,...ete};function rte(p,S){return VF(p,new Bu.classes.URLSearchParams,Object.assign({visitor:function(O,P,F,Z){return Bu.isNode&&ft.isBuffer(O)?(this.append(P,O.toString("base64")),!1):Z.defaultVisitor.apply(this,arguments)}},S))}function ate(p){return ft.matchAll(/\w+|\[(\w*)]/g,p).map(S=>S[0]==="[]"?"":S[1]||S[0])}function cte(p){const S={},O=Object.keys(p);let P;const F=O.length;let Z;for(P=0;P<F;P++)Z=O[P],S[Z]=p[Z];return S}function RJ(p){function S(O,P,F,Z){let q=O[Z++];if(q==="__proto__")return!0;const se=Number.isFinite(+q),Ee=Z>=O.length;return q=!q&&ft.isArray(F)?F.length:q,Ee?(ft.hasOwnProp(F,q)?F[q]=[F[q],P]:F[q]=P,!se):((!F[q]||!ft.isObject(F[q]))&&(F[q]=[]),S(O,P,F[q],Z)&&ft.isArray(F[q])&&(F[q]=cte(F[q])),!se)}if(ft.isFormData(p)&&ft.isFunction(p.entries)){const O={};return ft.forEachEntry(p,(P,F)=>{S(ate(P),F,O,0)}),O}return null}function ite(p,S,O){if(ft.isString(p))try{return(S||JSON.parse)(p),ft.trim(p)}catch(P){if(P.name!=="SyntaxError")throw P}return(O||JSON.stringify)(p)}const MM={transitional:OJ,adapter:["xhr","http","fetch"],transformRequest:[function(S,O){const P=O.getContentType()||"",F=P.indexOf("application/json")>-1,Z=ft.isObject(S);if(Z&&ft.isHTMLForm(S)&&(S=new FormData(S)),ft.isFormData(S))return F?JSON.stringify(RJ(S)):S;if(ft.isArrayBuffer(S)||ft.isBuffer(S)||ft.isStream(S)||ft.isFile(S)||ft.isBlob(S)||ft.isReadableStream(S))return S;if(ft.isArrayBufferView(S))return S.buffer;if(ft.isURLSearchParams(S))return O.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),S.toString();let se;if(Z){if(P.indexOf("application/x-www-form-urlencoded")>-1)return rte(S,this.formSerializer).toString();if((se=ft.isFileList(S))||P.indexOf("multipart/form-data")>-1){const Ee=this.env&&this.env.FormData;return VF(se?{"files[]":S}:S,Ee&&new Ee,this.formSerializer)}}return Z||F?(O.setContentType("application/json",!1),ite(S)):S}],transformResponse:[function(S){const O=this.transitional||MM.transitional,P=O&&O.forcedJSONParsing,F=this.responseType==="json";if(ft.isResponse(S)||ft.isReadableStream(S))return S;if(S&&ft.isString(S)&&(P&&!this.responseType||F)){const q=!(O&&O.silentJSONParsing)&&F;try{return JSON.parse(S)}catch(se){if(q)throw se.name==="SyntaxError"?Ho.from(se,Ho.ERR_BAD_RESPONSE,this,null,this.response):se}}return S}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Bu.classes.FormData,Blob:Bu.classes.Blob},validateStatus:function(S){return S>=200&&S<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ft.forEach(["delete","get","head","post","put","patch"],p=>{MM.headers[p]={}});const lte=ft.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ute=p=>{const S={};let O,P,F;return p&&p.split(`
`).forEach(function(q){F=q.indexOf(":"),O=q.substring(0,F).trim().toLowerCase(),P=q.substring(F+1).trim(),!(!O||S[O]&&lte[O])&&(O==="set-cookie"?S[O]?S[O].push(P):S[O]=[P]:S[O]=S[O]?S[O]+", "+P:P)}),S},yX=Symbol("internals");function SM(p){return p&&String(p).trim().toLowerCase()}function OF(p){return p===!1||p==null?p:ft.isArray(p)?p.map(OF):String(p)}function dte(p){const S=Object.create(null),O=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let P;for(;P=O.exec(p);)S[P[1]]=P[2];return S}const mte=p=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(p.trim());function MG(p,S,O,P,F){if(ft.isFunction(P))return P.call(this,S,O);if(F&&(S=O),!!ft.isString(S)){if(ft.isString(P))return S.indexOf(P)!==-1;if(ft.isRegExp(P))return P.test(S)}}function fte(p){return p.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(S,O,P)=>O.toUpperCase()+P)}function gte(p,S){const O=ft.toCamelCase(" "+S);["get","set","has"].forEach(P=>{Object.defineProperty(p,P+O,{value:function(F,Z,q){return this[P].call(this,S,F,Z,q)},configurable:!0})})}let Em=class{constructor(S){S&&this.set(S)}set(S,O,P){const F=this;function Z(se,Ee,Le){const Fe=SM(Ee);if(!Fe)throw new Error("header name must be a non-empty string");const ut=ft.findKey(F,Fe);(!ut||F[ut]===void 0||Le===!0||Le===void 0&&F[ut]!==!1)&&(F[ut||Ee]=OF(se))}const q=(se,Ee)=>ft.forEach(se,(Le,Fe)=>Z(Le,Fe,Ee));if(ft.isPlainObject(S)||S instanceof this.constructor)q(S,O);else if(ft.isString(S)&&(S=S.trim())&&!mte(S))q(ute(S),O);else if(ft.isHeaders(S))for(const[se,Ee]of S.entries())Z(Ee,se,P);else S!=null&&Z(O,S,P);return this}get(S,O){if(S=SM(S),S){const P=ft.findKey(this,S);if(P){const F=this[P];if(!O)return F;if(O===!0)return dte(F);if(ft.isFunction(O))return O.call(this,F,P);if(ft.isRegExp(O))return O.exec(F);throw new TypeError("parser must be boolean|regexp|function")}}}has(S,O){if(S=SM(S),S){const P=ft.findKey(this,S);return!!(P&&this[P]!==void 0&&(!O||MG(this,this[P],P,O)))}return!1}delete(S,O){const P=this;let F=!1;function Z(q){if(q=SM(q),q){const se=ft.findKey(P,q);se&&(!O||MG(P,P[se],se,O))&&(delete P[se],F=!0)}}return ft.isArray(S)?S.forEach(Z):Z(S),F}clear(S){const O=Object.keys(this);let P=O.length,F=!1;for(;P--;){const Z=O[P];(!S||MG(this,this[Z],Z,S,!0))&&(delete this[Z],F=!0)}return F}normalize(S){const O=this,P={};return ft.forEach(this,(F,Z)=>{const q=ft.findKey(P,Z);if(q){O[q]=OF(F),delete O[Z];return}const se=S?fte(Z):String(Z).trim();se!==Z&&delete O[Z],O[se]=OF(F),P[se]=!0}),this}concat(...S){return this.constructor.concat(this,...S)}toJSON(S){const O=Object.create(null);return ft.forEach(this,(P,F)=>{P!=null&&P!==!1&&(O[F]=S&&ft.isArray(P)?P.join(", "):P)}),O}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([S,O])=>S+": "+O).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(S){return S instanceof this?S:new this(S)}static concat(S,...O){const P=new this(S);return O.forEach(F=>P.set(F)),P}static accessor(S){const P=(this[yX]=this[yX]={accessors:{}}).accessors,F=this.prototype;function Z(q){const se=SM(q);P[se]||(gte(F,q),P[se]=!0)}return ft.isArray(S)?S.forEach(Z):Z(S),this}};Em.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ft.reduceDescriptors(Em.prototype,({value:p},S)=>{let O=S[0].toUpperCase()+S.slice(1);return{get:()=>p,set(P){this[O]=P}}});ft.freezeMethods(Em);function NG(p,S){const O=this||MM,P=S||O,F=Em.from(P.headers);let Z=P.data;return ft.forEach(p,function(se){Z=se.call(O,Z,F.normalize(),S?S.status:void 0)}),F.normalize(),Z}function DJ(p){return!!(p&&p.__CANCEL__)}function v4(p,S,O){Ho.call(this,p??"canceled",Ho.ERR_CANCELED,S,O),this.name="CanceledError"}ft.inherits(v4,Ho,{__CANCEL__:!0});function MJ(p,S,O){const P=O.config.validateStatus;!O.status||!P||P(O.status)?p(O):S(new Ho("Request failed with status code "+O.status,[Ho.ERR_BAD_REQUEST,Ho.ERR_BAD_RESPONSE][Math.floor(O.status/100)-4],O.config,O.request,O))}function hte(p){const S=/^([-+\w]{1,25})(:?\/\/|:)/.exec(p);return S&&S[1]||""}function pte(p,S){p=p||10;const O=new Array(p),P=new Array(p);let F=0,Z=0,q;return S=S!==void 0?S:1e3,function(Ee){const Le=Date.now(),Fe=P[Z];q||(q=Le),O[F]=Ee,P[F]=Le;let ut=Z,en=0;for(;ut!==F;)en+=O[ut++],ut=ut%p;if(F=(F+1)%p,F===Z&&(Z=(Z+1)%p),Le-q<S)return;const Mn=Fe&&Le-Fe;return Mn?Math.round(en*1e3/Mn):void 0}}function bte(p,S){let O=0,P=1e3/S,F,Z;const q=(Le,Fe=Date.now())=>{O=Fe,F=null,Z&&(clearTimeout(Z),Z=null),p.apply(null,Le)};return[(...Le)=>{const Fe=Date.now(),ut=Fe-O;ut>=P?q(Le,Fe):(F=Le,Z||(Z=setTimeout(()=>{Z=null,q(F)},P-ut)))},()=>F&&q(F)]}const NF=(p,S,O=3)=>{let P=0;const F=pte(50,250);return bte(Z=>{const q=Z.loaded,se=Z.lengthComputable?Z.total:void 0,Ee=q-P,Le=F(Ee),Fe=q<=se;P=q;const ut={loaded:q,total:se,progress:se?q/se:void 0,bytes:Ee,rate:Le||void 0,estimated:Le&&se&&Fe?(se-q)/Le:void 0,event:Z,lengthComputable:se!=null,[S?"download":"upload"]:!0};p(ut)},O)},CX=(p,S)=>{const O=p!=null;return[P=>S[0]({lengthComputable:O,total:p,loaded:P}),S[1]]},wX=p=>(...S)=>ft.asap(()=>p(...S)),vte=Bu.hasStandardBrowserEnv?((p,S)=>O=>(O=new URL(O,Bu.origin),p.protocol===O.protocol&&p.host===O.host&&(S||p.port===O.port)))(new URL(Bu.origin),Bu.navigator&&/(msie|trident)/i.test(Bu.navigator.userAgent)):()=>!0,yte=Bu.hasStandardBrowserEnv?{write(p,S,O,P,F,Z){const q=[p+"="+encodeURIComponent(S)];ft.isNumber(O)&&q.push("expires="+new Date(O).toGMTString()),ft.isString(P)&&q.push("path="+P),ft.isString(F)&&q.push("domain="+F),Z===!0&&q.push("secure"),document.cookie=q.join("; ")},read(p){const S=document.cookie.match(new RegExp("(^|;\\s*)("+p+")=([^;]*)"));return S?decodeURIComponent(S[3]):null},remove(p){this.write(p,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Cte(p){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(p)}function wte(p,S){return S?p.replace(/\/?\/$/,"")+"/"+S.replace(/^\/+/,""):p}function NJ(p,S,O){let P=!Cte(S);return p&&(P||O==!1)?wte(p,S):S}const SX=p=>p instanceof Em?{...p}:p;function lS(p,S){S=S||{};const O={};function P(Le,Fe,ut,en){return ft.isPlainObject(Le)&&ft.isPlainObject(Fe)?ft.merge.call({caseless:en},Le,Fe):ft.isPlainObject(Fe)?ft.merge({},Fe):ft.isArray(Fe)?Fe.slice():Fe}function F(Le,Fe,ut,en){if(ft.isUndefined(Fe)){if(!ft.isUndefined(Le))return P(void 0,Le,ut,en)}else return P(Le,Fe,ut,en)}function Z(Le,Fe){if(!ft.isUndefined(Fe))return P(void 0,Fe)}function q(Le,Fe){if(ft.isUndefined(Fe)){if(!ft.isUndefined(Le))return P(void 0,Le)}else return P(void 0,Fe)}function se(Le,Fe,ut){if(ut in S)return P(Le,Fe);if(ut in p)return P(void 0,Le)}const Ee={url:Z,method:Z,data:Z,baseURL:q,transformRequest:q,transformResponse:q,paramsSerializer:q,timeout:q,timeoutMessage:q,withCredentials:q,withXSRFToken:q,adapter:q,responseType:q,xsrfCookieName:q,xsrfHeaderName:q,onUploadProgress:q,onDownloadProgress:q,decompress:q,maxContentLength:q,maxBodyLength:q,beforeRedirect:q,transport:q,httpAgent:q,httpsAgent:q,cancelToken:q,socketPath:q,responseEncoding:q,validateStatus:se,headers:(Le,Fe,ut)=>F(SX(Le),SX(Fe),ut,!0)};return ft.forEach(Object.keys(Object.assign({},p,S)),function(Fe){const ut=Ee[Fe]||F,en=ut(p[Fe],S[Fe],Fe);ft.isUndefined(en)&&ut!==se||(O[Fe]=en)}),O}const PJ=p=>{const S=lS({},p);let{data:O,withXSRFToken:P,xsrfHeaderName:F,xsrfCookieName:Z,headers:q,auth:se}=S;S.headers=q=Em.from(q),S.url=AJ(NJ(S.baseURL,S.url,S.allowAbsoluteUrls),p.params,p.paramsSerializer),se&&q.set("Authorization","Basic "+btoa((se.username||"")+":"+(se.password?unescape(encodeURIComponent(se.password)):"")));let Ee;if(ft.isFormData(O)){if(Bu.hasStandardBrowserEnv||Bu.hasStandardBrowserWebWorkerEnv)q.setContentType(void 0);else if((Ee=q.getContentType())!==!1){const[Le,...Fe]=Ee?Ee.split(";").map(ut=>ut.trim()).filter(Boolean):[];q.setContentType([Le||"multipart/form-data",...Fe].join("; "))}}if(Bu.hasStandardBrowserEnv&&(P&&ft.isFunction(P)&&(P=P(S)),P||P!==!1&&vte(S.url))){const Le=F&&Z&&yte.read(Z);Le&&q.set(F,Le)}return S},Ste=typeof XMLHttpRequest<"u",xte=Ste&&function(p){return new Promise(function(O,P){const F=PJ(p);let Z=F.data;const q=Em.from(F.headers).normalize();let{responseType:se,onUploadProgress:Ee,onDownloadProgress:Le}=F,Fe,ut,en,Mn,ln;function cn(){Mn&&Mn(),ln&&ln(),F.cancelToken&&F.cancelToken.unsubscribe(Fe),F.signal&&F.signal.removeEventListener("abort",Fe)}let Ae=new XMLHttpRequest;Ae.open(F.method.toUpperCase(),F.url,!0),Ae.timeout=F.timeout;function On(){if(!Ae)return;const le=Em.from("getAllResponseHeaders"in Ae&&Ae.getAllResponseHeaders()),Io={data:!se||se==="text"||se==="json"?Ae.responseText:Ae.response,status:Ae.status,statusText:Ae.statusText,headers:le,config:p,request:Ae};MJ(function(ae){O(ae),cn()},function(ae){P(ae),cn()},Io),Ae=null}"onloadend"in Ae?Ae.onloadend=On:Ae.onreadystatechange=function(){!Ae||Ae.readyState!==4||Ae.status===0&&!(Ae.responseURL&&Ae.responseURL.indexOf("file:")===0)||setTimeout(On)},Ae.onabort=function(){Ae&&(P(new Ho("Request aborted",Ho.ECONNABORTED,p,Ae)),Ae=null)},Ae.onerror=function(){P(new Ho("Network Error",Ho.ERR_NETWORK,p,Ae)),Ae=null},Ae.ontimeout=function(){let Ot=F.timeout?"timeout of "+F.timeout+"ms exceeded":"timeout exceeded";const Io=F.transitional||OJ;F.timeoutErrorMessage&&(Ot=F.timeoutErrorMessage),P(new Ho(Ot,Io.clarifyTimeoutError?Ho.ETIMEDOUT:Ho.ECONNABORTED,p,Ae)),Ae=null},Z===void 0&&q.setContentType(null),"setRequestHeader"in Ae&&ft.forEach(q.toJSON(),function(Ot,Io){Ae.setRequestHeader(Io,Ot)}),ft.isUndefined(F.withCredentials)||(Ae.withCredentials=!!F.withCredentials),se&&se!=="json"&&(Ae.responseType=F.responseType),Le&&([en,ln]=NF(Le,!0),Ae.addEventListener("progress",en)),Ee&&Ae.upload&&([ut,Mn]=NF(Ee),Ae.upload.addEventListener("progress",ut),Ae.upload.addEventListener("loadend",Mn)),(F.cancelToken||F.signal)&&(Fe=le=>{Ae&&(P(!le||le.type?new v4(null,p,Ae):le),Ae.abort(),Ae=null)},F.cancelToken&&F.cancelToken.subscribe(Fe),F.signal&&(F.signal.aborted?Fe():F.signal.addEventListener("abort",Fe)));const Tt=hte(F.url);if(Tt&&Bu.protocols.indexOf(Tt)===-1){P(new Ho("Unsupported protocol "+Tt+":",Ho.ERR_BAD_REQUEST,p));return}Ae.send(Z||null)})},Ete=(p,S)=>{const{length:O}=p=p?p.filter(Boolean):[];if(S||O){let P=new AbortController,F;const Z=function(Le){if(!F){F=!0,se();const Fe=Le instanceof Error?Le:this.reason;P.abort(Fe instanceof Ho?Fe:new v4(Fe instanceof Error?Fe.message:Fe))}};let q=S&&setTimeout(()=>{q=null,Z(new Ho(`timeout ${S} of ms exceeded`,Ho.ETIMEDOUT))},S);const se=()=>{p&&(q&&clearTimeout(q),q=null,p.forEach(Le=>{Le.unsubscribe?Le.unsubscribe(Z):Le.removeEventListener("abort",Z)}),p=null)};p.forEach(Le=>Le.addEventListener("abort",Z));const{signal:Ee}=P;return Ee.unsubscribe=()=>ft.asap(se),Ee}},Tte=function*(p,S){let O=p.byteLength;if(O<S){yield p;return}let P=0,F;for(;P<O;)F=P+S,yield p.slice(P,F),P=F},_te=async function*(p,S){for await(const O of kte(p))yield*Tte(O,S)},kte=async function*(p){if(p[Symbol.asyncIterator]){yield*p;return}const S=p.getReader();try{for(;;){const{done:O,value:P}=await S.read();if(O)break;yield P}}finally{await S.cancel()}},xX=(p,S,O,P)=>{const F=_te(p,S);let Z=0,q,se=Ee=>{q||(q=!0,P&&P(Ee))};return new ReadableStream({async pull(Ee){try{const{done:Le,value:Fe}=await F.next();if(Le){se(),Ee.close();return}let ut=Fe.byteLength;if(O){let en=Z+=ut;O(en)}Ee.enqueue(new Uint8Array(Fe))}catch(Le){throw se(Le),Le}},cancel(Ee){return se(Ee),F.return()}},{highWaterMark:2})},UF=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",BJ=UF&&typeof ReadableStream=="function",Ate=UF&&(typeof TextEncoder=="function"?(p=>S=>p.encode(S))(new TextEncoder):async p=>new Uint8Array(await new Response(p).arrayBuffer())),$J=(p,...S)=>{try{return!!p(...S)}catch{return!1}},Ote=BJ&&$J(()=>{let p=!1;const S=new Request(Bu.origin,{body:new ReadableStream,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!S}),EX=64*1024,WG=BJ&&$J(()=>ft.isReadableStream(new Response("").body)),PF={stream:WG&&(p=>p.body)};UF&&(p=>{["text","arrayBuffer","blob","formData","stream"].forEach(S=>{!PF[S]&&(PF[S]=ft.isFunction(p[S])?O=>O[S]():(O,P)=>{throw new Ho(`Response type '${S}' is not supported`,Ho.ERR_NOT_SUPPORT,P)})})})(new Response);const Rte=async p=>{if(p==null)return 0;if(ft.isBlob(p))return p.size;if(ft.isSpecCompliantForm(p))return(await new Request(Bu.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(ft.isArrayBufferView(p)||ft.isArrayBuffer(p))return p.byteLength;if(ft.isURLSearchParams(p)&&(p=p+""),ft.isString(p))return(await Ate(p)).byteLength},Dte=async(p,S)=>{const O=ft.toFiniteNumber(p.getContentLength());return O??Rte(S)},Mte=UF&&(async p=>{let{url:S,method:O,data:P,signal:F,cancelToken:Z,timeout:q,onDownloadProgress:se,onUploadProgress:Ee,responseType:Le,headers:Fe,withCredentials:ut="same-origin",fetchOptions:en}=PJ(p);Le=Le?(Le+"").toLowerCase():"text";let Mn=Ete([F,Z&&Z.toAbortSignal()],q),ln;const cn=Mn&&Mn.unsubscribe&&(()=>{Mn.unsubscribe()});let Ae;try{if(Ee&&Ote&&O!=="get"&&O!=="head"&&(Ae=await Dte(Fe,P))!==0){let Io=new Request(S,{method:"POST",body:P,duplex:"half"}),kn;if(ft.isFormData(P)&&(kn=Io.headers.get("content-type"))&&Fe.setContentType(kn),Io.body){const[ae,bn]=CX(Ae,NF(wX(Ee)));P=xX(Io.body,EX,ae,bn)}}ft.isString(ut)||(ut=ut?"include":"omit");const On="credentials"in Request.prototype;ln=new Request(S,{...en,signal:Mn,method:O.toUpperCase(),headers:Fe.normalize().toJSON(),body:P,duplex:"half",credentials:On?ut:void 0});let Tt=await fetch(ln);const le=WG&&(Le==="stream"||Le==="response");if(WG&&(se||le&&cn)){const Io={};["status","statusText","headers"].forEach(Xo=>{Io[Xo]=Tt[Xo]});const kn=ft.toFiniteNumber(Tt.headers.get("content-length")),[ae,bn]=se&&CX(kn,NF(wX(se),!0))||[];Tt=new Response(xX(Tt.body,EX,ae,()=>{bn&&bn(),cn&&cn()}),Io)}Le=Le||"text";let Ot=await PF[ft.findKey(PF,Le)||"text"](Tt,p);return!le&&cn&&cn(),await new Promise((Io,kn)=>{MJ(Io,kn,{data:Ot,headers:Em.from(Tt.headers),status:Tt.status,statusText:Tt.statusText,config:p,request:ln})})}catch(On){throw cn&&cn(),On&&On.name==="TypeError"&&/fetch/i.test(On.message)?Object.assign(new Ho("Network Error",Ho.ERR_NETWORK,p,ln),{cause:On.cause||On}):Ho.from(On,On&&On.code,p,ln)}}),ZG={http:qee,xhr:xte,fetch:Mte};ft.forEach(ZG,(p,S)=>{if(p){try{Object.defineProperty(p,"name",{value:S})}catch{}Object.defineProperty(p,"adapterName",{value:S})}});const TX=p=>`- ${p}`,Nte=p=>ft.isFunction(p)||p===null||p===!1,IJ={getAdapter:p=>{p=ft.isArray(p)?p:[p];const{length:S}=p;let O,P;const F={};for(let Z=0;Z<S;Z++){O=p[Z];let q;if(P=O,!Nte(O)&&(P=ZG[(q=String(O)).toLowerCase()],P===void 0))throw new Ho(`Unknown adapter '${q}'`);if(P)break;F[q||"#"+Z]=P}if(!P){const Z=Object.entries(F).map(([se,Ee])=>`adapter ${se} `+(Ee===!1?"is not supported by the environment":"is not available in the build"));let q=S?Z.length>1?`since :
`+Z.map(TX).join(`
`):" "+TX(Z[0]):"as no adapter specified";throw new Ho("There is no suitable adapter to dispatch the request "+q,"ERR_NOT_SUPPORT")}return P},adapters:ZG};function PG(p){if(p.cancelToken&&p.cancelToken.throwIfRequested(),p.signal&&p.signal.aborted)throw new v4(null,p)}function _X(p){return PG(p),p.headers=Em.from(p.headers),p.data=NG.call(p,p.transformRequest),["post","put","patch"].indexOf(p.method)!==-1&&p.headers.setContentType("application/x-www-form-urlencoded",!1),IJ.getAdapter(p.adapter||MM.adapter)(p).then(function(P){return PG(p),P.data=NG.call(p,p.transformResponse,P),P.headers=Em.from(P.headers),P},function(P){return DJ(P)||(PG(p),P&&P.response&&(P.response.data=NG.call(p,p.transformResponse,P.response),P.response.headers=Em.from(P.response.headers))),Promise.reject(P)})}const LJ="1.8.4",WF={};["object","boolean","number","function","string","symbol"].forEach((p,S)=>{WF[p]=function(P){return typeof P===p||"a"+(S<1?"n ":" ")+p}});const kX={};WF.transitional=function(S,O,P){function F(Z,q){return"[Axios v"+LJ+"] Transitional option '"+Z+"'"+q+(P?". "+P:"")}return(Z,q,se)=>{if(S===!1)throw new Ho(F(q," has been removed"+(O?" in "+O:"")),Ho.ERR_DEPRECATED);return O&&!kX[q]&&(kX[q]=!0,console.warn(F(q," has been deprecated since v"+O+" and will be removed in the near future"))),S?S(Z,q,se):!0}};WF.spelling=function(S){return(O,P)=>(console.warn(`${P} is likely a misspelling of ${S}`),!0)};function Pte(p,S,O){if(typeof p!="object")throw new Ho("options must be an object",Ho.ERR_BAD_OPTION_VALUE);const P=Object.keys(p);let F=P.length;for(;F-- >0;){const Z=P[F],q=S[Z];if(q){const se=p[Z],Ee=se===void 0||q(se,Z,p);if(Ee!==!0)throw new Ho("option "+Z+" must be "+Ee,Ho.ERR_BAD_OPTION_VALUE);continue}if(O!==!0)throw new Ho("Unknown option "+Z,Ho.ERR_BAD_OPTION)}}const RF={assertOptions:Pte,validators:WF},b1=RF.validators;let sS=class{constructor(S){this.defaults=S,this.interceptors={request:new vX,response:new vX}}async request(S,O){try{return await this._request(S,O)}catch(P){if(P instanceof Error){let F={};Error.captureStackTrace?Error.captureStackTrace(F):F=new Error;const Z=F.stack?F.stack.replace(/^.+\n/,""):"";try{P.stack?Z&&!String(P.stack).endsWith(Z.replace(/^.+\n.+\n/,""))&&(P.stack+=`
`+Z):P.stack=Z}catch{}}throw P}}_request(S,O){typeof S=="string"?(O=O||{},O.url=S):O=S||{},O=lS(this.defaults,O);const{transitional:P,paramsSerializer:F,headers:Z}=O;P!==void 0&&RF.assertOptions(P,{silentJSONParsing:b1.transitional(b1.boolean),forcedJSONParsing:b1.transitional(b1.boolean),clarifyTimeoutError:b1.transitional(b1.boolean)},!1),F!=null&&(ft.isFunction(F)?O.paramsSerializer={serialize:F}:RF.assertOptions(F,{encode:b1.function,serialize:b1.function},!0)),O.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?O.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:O.allowAbsoluteUrls=!0),RF.assertOptions(O,{baseUrl:b1.spelling("baseURL"),withXsrfToken:b1.spelling("withXSRFToken")},!0),O.method=(O.method||this.defaults.method||"get").toLowerCase();let q=Z&&ft.merge(Z.common,Z[O.method]);Z&&ft.forEach(["delete","get","head","post","put","patch","common"],ln=>{delete Z[ln]}),O.headers=Em.concat(q,Z);const se=[];let Ee=!0;this.interceptors.request.forEach(function(cn){typeof cn.runWhen=="function"&&cn.runWhen(O)===!1||(Ee=Ee&&cn.synchronous,se.unshift(cn.fulfilled,cn.rejected))});const Le=[];this.interceptors.response.forEach(function(cn){Le.push(cn.fulfilled,cn.rejected)});let Fe,ut=0,en;if(!Ee){const ln=[_X.bind(this),void 0];for(ln.unshift.apply(ln,se),ln.push.apply(ln,Le),en=ln.length,Fe=Promise.resolve(O);ut<en;)Fe=Fe.then(ln[ut++],ln[ut++]);return Fe}en=se.length;let Mn=O;for(ut=0;ut<en;){const ln=se[ut++],cn=se[ut++];try{Mn=ln(Mn)}catch(Ae){cn.call(this,Ae);break}}try{Fe=_X.call(this,Mn)}catch(ln){return Promise.reject(ln)}for(ut=0,en=Le.length;ut<en;)Fe=Fe.then(Le[ut++],Le[ut++]);return Fe}getUri(S){S=lS(this.defaults,S);const O=NJ(S.baseURL,S.url,S.allowAbsoluteUrls);return AJ(O,S.params,S.paramsSerializer)}};ft.forEach(["delete","get","head","options"],function(S){sS.prototype[S]=function(O,P){return this.request(lS(P||{},{method:S,url:O,data:(P||{}).data}))}});ft.forEach(["post","put","patch"],function(S){function O(P){return function(Z,q,se){return this.request(lS(se||{},{method:S,headers:P?{"Content-Type":"multipart/form-data"}:{},url:Z,data:q}))}}sS.prototype[S]=O(),sS.prototype[S+"Form"]=O(!0)});let Bte=class FJ{constructor(S){if(typeof S!="function")throw new TypeError("executor must be a function.");let O;this.promise=new Promise(function(Z){O=Z});const P=this;this.promise.then(F=>{if(!P._listeners)return;let Z=P._listeners.length;for(;Z-- >0;)P._listeners[Z](F);P._listeners=null}),this.promise.then=F=>{let Z;const q=new Promise(se=>{P.subscribe(se),Z=se}).then(F);return q.cancel=function(){P.unsubscribe(Z)},q},S(function(Z,q,se){P.reason||(P.reason=new v4(Z,q,se),O(P.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(S){if(this.reason){S(this.reason);return}this._listeners?this._listeners.push(S):this._listeners=[S]}unsubscribe(S){if(!this._listeners)return;const O=this._listeners.indexOf(S);O!==-1&&this._listeners.splice(O,1)}toAbortSignal(){const S=new AbortController,O=P=>{S.abort(P)};return this.subscribe(O),S.signal.unsubscribe=()=>this.unsubscribe(O),S.signal}static source(){let S;return{token:new FJ(function(F){S=F}),cancel:S}}};function $te(p){return function(O){return p.apply(null,O)}}function Ite(p){return ft.isObject(p)&&p.isAxiosError===!0}const jG={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jG).forEach(([p,S])=>{jG[S]=p});function HJ(p){const S=new sS(p),O=bJ(sS.prototype.request,S);return ft.extend(O,sS.prototype,S,{allOwnKeys:!0}),ft.extend(O,S,null,{allOwnKeys:!0}),O.create=function(F){return HJ(lS(p,F))},O}const Gc=HJ(MM);Gc.Axios=sS;Gc.CanceledError=v4;Gc.CancelToken=Bte;Gc.isCancel=DJ;Gc.VERSION=LJ;Gc.toFormData=VF;Gc.AxiosError=Ho;Gc.Cancel=Gc.CanceledError;Gc.all=function(S){return Promise.all(S)};Gc.spread=$te;Gc.isAxiosError=Ite;Gc.mergeConfig=lS;Gc.AxiosHeaders=Em;Gc.formToJSON=p=>RJ(ft.isHTMLForm(p)?new FormData(p):p);Gc.getAdapter=IJ.getAdapter;Gc.HttpStatusCode=jG;Gc.default=Gc;const{Axios:vse,AxiosError:yse,CanceledError:Cse,isCancel:wse,CancelToken:Sse,VERSION:xse,all:Ese,Cancel:Tse,isAxiosError:_se,spread:kse,toFormData:Ase,AxiosHeaders:Ose,HttpStatusCode:Rse,formToJSON:Dse,getAdapter:Mse,mergeConfig:Nse}=Gc;window.axios=Gc;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var qG=!1,GG=!1,rS=[],KG=-1;function Lte(p){Fte(p)}function Fte(p){rS.includes(p)||rS.push(p),zte()}function Hte(p){let S=rS.indexOf(p);S!==-1&&S>KG&&rS.splice(S,1)}function zte(){!GG&&!qG&&(qG=!0,queueMicrotask(Vte))}function Vte(){qG=!1,GG=!0;for(let p=0;p<rS.length;p++)rS[p](),KG=p;rS.length=0,KG=-1,GG=!1}var y4,dS,C4,zJ,YG=!0;function Ute(p){YG=!1,p(),YG=!0}function Wte(p){y4=p.reactive,C4=p.release,dS=S=>p.effect(S,{scheduler:O=>{YG?Lte(O):O()}}),zJ=p.raw}function AX(p){dS=p}function Zte(p){let S=()=>{};return[P=>{let F=dS(P);return p._x_effects||(p._x_effects=new Set,p._x_runEffects=()=>{p._x_effects.forEach(Z=>Z())}),p._x_effects.add(F),S=()=>{F!==void 0&&(p._x_effects.delete(F),C4(F))},F},()=>{S()}]}function VJ(p,S){let O=!0,P,F=dS(()=>{let Z=p();JSON.stringify(Z),O?P=Z:queueMicrotask(()=>{S(Z,P),P=Z}),O=!1});return()=>C4(F)}var UJ=[],WJ=[],ZJ=[];function jte(p){ZJ.push(p)}function fK(p,S){typeof S=="function"?(p._x_cleanups||(p._x_cleanups=[]),p._x_cleanups.push(S)):(S=p,WJ.push(S))}function jJ(p){UJ.push(p)}function qJ(p,S,O){p._x_attributeCleanups||(p._x_attributeCleanups={}),p._x_attributeCleanups[S]||(p._x_attributeCleanups[S]=[]),p._x_attributeCleanups[S].push(O)}function GJ(p,S){p._x_attributeCleanups&&Object.entries(p._x_attributeCleanups).forEach(([O,P])=>{(S===void 0||S.includes(O))&&(P.forEach(F=>F()),delete p._x_attributeCleanups[O])})}function qte(p){var S,O;for((S=p._x_effects)==null||S.forEach(Hte);(O=p._x_cleanups)!=null&&O.length;)p._x_cleanups.pop()()}var gK=new MutationObserver(vK),hK=!1;function pK(){gK.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),hK=!0}function KJ(){Gte(),gK.disconnect(),hK=!1}var xM=[];function Gte(){let p=gK.takeRecords();xM.push(()=>p.length>0&&vK(p));let S=xM.length;queueMicrotask(()=>{if(xM.length===S)for(;xM.length>0;)xM.shift()()})}function dc(p){if(!hK)return p();KJ();let S=p();return pK(),S}var bK=!1,BF=[];function Kte(){bK=!0}function Yte(){bK=!1,vK(BF),BF=[]}function vK(p){if(bK){BF=BF.concat(p);return}let S=[],O=new Set,P=new Map,F=new Map;for(let Z=0;Z<p.length;Z++)if(!p[Z].target._x_ignoreMutationObserver&&(p[Z].type==="childList"&&(p[Z].removedNodes.forEach(q=>{q.nodeType===1&&q._x_marker&&O.add(q)}),p[Z].addedNodes.forEach(q=>{if(q.nodeType===1){if(O.has(q)){O.delete(q);return}q._x_marker||S.push(q)}})),p[Z].type==="attributes")){let q=p[Z].target,se=p[Z].attributeName,Ee=p[Z].oldValue,Le=()=>{P.has(q)||P.set(q,[]),P.get(q).push({name:se,value:q.getAttribute(se)})},Fe=()=>{F.has(q)||F.set(q,[]),F.get(q).push(se)};q.hasAttribute(se)&&Ee===null?Le():q.hasAttribute(se)?(Fe(),Le()):Fe()}F.forEach((Z,q)=>{GJ(q,Z)}),P.forEach((Z,q)=>{UJ.forEach(se=>se(q,Z))});for(let Z of O)S.some(q=>q.contains(Z))||WJ.forEach(q=>q(Z));for(let Z of S)Z.isConnected&&ZJ.forEach(q=>q(Z));S=null,O=null,P=null,F=null}function YJ(p){return PM(h4(p))}function NM(p,S,O){return p._x_dataStack=[S,...h4(O||p)],()=>{p._x_dataStack=p._x_dataStack.filter(P=>P!==S)}}function h4(p){return p._x_dataStack?p._x_dataStack:typeof ShadowRoot=="function"&&p instanceof ShadowRoot?h4(p.host):p.parentNode?h4(p.parentNode):[]}function PM(p){return new Proxy({objects:p},Xte)}var Xte={ownKeys({objects:p}){return Array.from(new Set(p.flatMap(S=>Object.keys(S))))},has({objects:p},S){return S==Symbol.unscopables?!1:p.some(O=>Object.prototype.hasOwnProperty.call(O,S)||Reflect.has(O,S))},get({objects:p},S,O){return S=="toJSON"?Jte:Reflect.get(p.find(P=>Reflect.has(P,S))||{},S,O)},set({objects:p},S,O,P){const F=p.find(q=>Object.prototype.hasOwnProperty.call(q,S))||p[p.length-1],Z=Object.getOwnPropertyDescriptor(F,S);return Z!=null&&Z.set&&(Z!=null&&Z.get)?Z.set.call(P,O)||!0:Reflect.set(F,S,O)}};function Jte(){return Reflect.ownKeys(this).reduce((S,O)=>(S[O]=Reflect.get(this,O),S),{})}function XJ(p){let S=P=>typeof P=="object"&&!Array.isArray(P)&&P!==null,O=(P,F="")=>{Object.entries(Object.getOwnPropertyDescriptors(P)).forEach(([Z,{value:q,enumerable:se}])=>{if(se===!1||q===void 0||typeof q=="object"&&q!==null&&q.__v_skip)return;let Ee=F===""?Z:`${F}.${Z}`;typeof q=="object"&&q!==null&&q._x_interceptor?P[Z]=q.initialize(p,Ee,Z):S(q)&&q!==P&&!(q instanceof Element)&&O(q,Ee)})};return O(p)}function JJ(p,S=()=>{}){let O={initialValue:void 0,_x_interceptor:!0,initialize(P,F,Z){return p(this.initialValue,()=>Qte(P,F),q=>XG(P,F,q),F,Z)}};return S(O),P=>{if(typeof P=="object"&&P!==null&&P._x_interceptor){let F=O.initialize.bind(O);O.initialize=(Z,q,se)=>{let Ee=P.initialize(Z,q,se);return O.initialValue=Ee,F(Z,q,se)}}else O.initialValue=P;return O}}function Qte(p,S){return S.split(".").reduce((O,P)=>O[P],p)}function XG(p,S,O){if(typeof S=="string"&&(S=S.split(".")),S.length===1)p[S[0]]=O;else{if(S.length===0)throw error;return p[S[0]]||(p[S[0]]={}),XG(p[S[0]],S.slice(1),O)}}var QJ={};function Nh(p,S){QJ[p]=S}function JG(p,S){let O=ene(S);return Object.entries(QJ).forEach(([P,F])=>{Object.defineProperty(p,`$${P}`,{get(){return F(S,O)},enumerable:!1})}),p}function ene(p){let[S,O]=rQ(p),P={interceptor:JJ,...S};return fK(p,O),P}function tne(p,S,O,...P){try{return O(...P)}catch(F){RM(F,p,S)}}function RM(p,S,O=void 0){p=Object.assign(p??{message:"No error message given."},{el:S,expression:O}),console.warn(`Alpine Expression Error: ${p.message}

${O?'Expression: "'+O+`"

`:""}`,S),setTimeout(()=>{throw p},0)}var DF=!0;function eQ(p){let S=DF;DF=!1;let O=p();return DF=S,O}function aS(p,S,O={}){let P;return Ed(p,S)(F=>P=F,O),P}function Ed(...p){return tQ(...p)}var tQ=nQ;function nne(p){tQ=p}function nQ(p,S){let O={};JG(O,p);let P=[O,...h4(p)],F=typeof S=="function"?one(P,S):rne(P,S,p);return tne.bind(null,p,S,F)}function one(p,S){return(O=()=>{},{scope:P={},params:F=[]}={})=>{let Z=S.apply(PM([P,...p]),F);$F(O,Z)}}var BG={};function sne(p,S){if(BG[p])return BG[p];let O=Object.getPrototypeOf(async function(){}).constructor,P=/^[\n\s]*if.*\(.*\)/.test(p.trim())||/^(let|const)\s/.test(p.trim())?`(async()=>{ ${p} })()`:p,Z=(()=>{try{let q=new O(["__self","scope"],`with (scope) { __self.result = ${P} }; __self.finished = true; return __self.result;`);return Object.defineProperty(q,"name",{value:`[Alpine] ${p}`}),q}catch(q){return RM(q,S,p),Promise.resolve()}})();return BG[p]=Z,Z}function rne(p,S,O){let P=sne(S,O);return(F=()=>{},{scope:Z={},params:q=[]}={})=>{P.result=void 0,P.finished=!1;let se=PM([Z,...p]);if(typeof P=="function"){let Ee=P(P,se).catch(Le=>RM(Le,O,S));P.finished?($F(F,P.result,se,q,O),P.result=void 0):Ee.then(Le=>{$F(F,Le,se,q,O)}).catch(Le=>RM(Le,O,S)).finally(()=>P.result=void 0)}}}function $F(p,S,O,P,F){if(DF&&typeof S=="function"){let Z=S.apply(O,P);Z instanceof Promise?Z.then(q=>$F(p,q,O,P)).catch(q=>RM(q,F,S)):p(Z)}else typeof S=="object"&&S instanceof Promise?S.then(Z=>p(Z)):p(S)}var yK="x-";function w4(p=""){return yK+p}function ane(p){yK=p}var IF={};function gi(p,S){return IF[p]=S,{before(O){if(!IF[O]){console.warn(String.raw`Cannot find directive \`${O}\`. \`${p}\` will use the default order of execution`);return}const P=oS.indexOf(O);oS.splice(P>=0?P:oS.indexOf("DEFAULT"),0,p)}}}function cne(p){return Object.keys(IF).includes(p)}function CK(p,S,O){if(S=Array.from(S),p._x_virtualDirectives){let Z=Object.entries(p._x_virtualDirectives).map(([se,Ee])=>({name:se,value:Ee})),q=oQ(Z);Z=Z.map(se=>q.find(Ee=>Ee.name===se.name)?{name:`x-bind:${se.name}`,value:`"${se.value}"`}:se),S=S.concat(Z)}let P={};return S.map(iQ((Z,q)=>P[Z]=q)).filter(uQ).map(une(P,O)).sort(dne).map(Z=>lne(p,Z))}function oQ(p){return Array.from(p).map(iQ()).filter(S=>!uQ(S))}var QG=!1,_M=new Map,sQ=Symbol();function ine(p){QG=!0;let S=Symbol();sQ=S,_M.set(S,[]);let O=()=>{for(;_M.get(S).length;)_M.get(S).shift()();_M.delete(S)},P=()=>{QG=!1,O()};p(O),P()}function rQ(p){let S=[],O=se=>S.push(se),[P,F]=Zte(p);return S.push(F),[{Alpine:BM,effect:P,cleanup:O,evaluateLater:Ed.bind(Ed,p),evaluate:aS.bind(aS,p)},()=>S.forEach(se=>se())]}function lne(p,S){let O=()=>{},P=IF[S.type]||O,[F,Z]=rQ(p);qJ(p,S.original,Z);let q=()=>{p._x_ignore||p._x_ignoreSelf||(P.inline&&P.inline(p,S,F),P=P.bind(P,p,S,F),QG?_M.get(sQ).push(P):P())};return q.runCleanups=Z,q}var aQ=(p,S)=>({name:O,value:P})=>(O.startsWith(p)&&(O=O.replace(p,S)),{name:O,value:P}),cQ=p=>p;function iQ(p=()=>{}){return({name:S,value:O})=>{let{name:P,value:F}=lQ.reduce((Z,q)=>q(Z),{name:S,value:O});return P!==S&&p(P,S),{name:P,value:F}}}var lQ=[];function wK(p){lQ.push(p)}function uQ({name:p}){return dQ().test(p)}var dQ=()=>new RegExp(`^${yK}([^:^.]+)\\b`);function une(p,S){return({name:O,value:P})=>{let F=O.match(dQ()),Z=O.match(/:([a-zA-Z0-9\-_:]+)/),q=O.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],se=S||p[O]||O;return{type:F?F[1]:null,value:Z?Z[1]:null,modifiers:q.map(Ee=>Ee.replace(".","")),expression:P,original:se}}}var eK="DEFAULT",oS=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",eK,"teleport"];function dne(p,S){let O=oS.indexOf(p.type)===-1?eK:p.type,P=oS.indexOf(S.type)===-1?eK:S.type;return oS.indexOf(O)-oS.indexOf(P)}function kM(p,S,O={}){p.dispatchEvent(new CustomEvent(S,{detail:O,bubbles:!0,composed:!0,cancelable:!0}))}function uS(p,S){if(typeof ShadowRoot=="function"&&p instanceof ShadowRoot){Array.from(p.children).forEach(F=>uS(F,S));return}let O=!1;if(S(p,()=>O=!0),O)return;let P=p.firstElementChild;for(;P;)uS(P,S),P=P.nextElementSibling}function Eg(p,...S){console.warn(`Alpine Warning: ${p}`,...S)}var OX=!1;function mne(){OX&&Eg("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),OX=!0,document.body||Eg("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),kM(document,"alpine:init"),kM(document,"alpine:initializing"),pK(),jte(S=>d0(S,uS)),fK(S=>x4(S)),jJ((S,O)=>{CK(S,O).forEach(P=>P())});let p=S=>!ZF(S.parentElement,!0);Array.from(document.querySelectorAll(gQ().join(","))).filter(p).forEach(S=>{d0(S)}),kM(document,"alpine:initialized"),setTimeout(()=>{pne()})}var SK=[],mQ=[];function fQ(){return SK.map(p=>p())}function gQ(){return SK.concat(mQ).map(p=>p())}function hQ(p){SK.push(p)}function pQ(p){mQ.push(p)}function ZF(p,S=!1){return S4(p,O=>{if((S?gQ():fQ()).some(F=>O.matches(F)))return!0})}function S4(p,S){if(p){if(S(p))return p;if(p._x_teleportBack&&(p=p._x_teleportBack),!!p.parentElement)return S4(p.parentElement,S)}}function fne(p){return fQ().some(S=>p.matches(S))}var bQ=[];function gne(p){bQ.push(p)}var hne=1;function d0(p,S=uS,O=()=>{}){S4(p,P=>P._x_ignore)||ine(()=>{S(p,(P,F)=>{P._x_marker||(O(P,F),bQ.forEach(Z=>Z(P,F)),CK(P,P.attributes).forEach(Z=>Z()),P._x_ignore||(P._x_marker=hne++),P._x_ignore&&F())})})}function x4(p,S=uS){S(p,O=>{qte(O),GJ(O),delete O._x_marker})}function pne(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([S,O,P])=>{cne(O)||P.some(F=>{if(document.querySelector(F))return Eg(`found "${F}", but missing ${S} plugin`),!0})})}var tK=[],xK=!1;function EK(p=()=>{}){return queueMicrotask(()=>{xK||setTimeout(()=>{nK()})}),new Promise(S=>{tK.push(()=>{p(),S()})})}function nK(){for(xK=!1;tK.length;)tK.shift()()}function bne(){xK=!0}function TK(p,S){return Array.isArray(S)?RX(p,S.join(" ")):typeof S=="object"&&S!==null?vne(p,S):typeof S=="function"?TK(p,S()):RX(p,S)}function RX(p,S){let O=F=>F.split(" ").filter(Z=>!p.classList.contains(Z)).filter(Boolean),P=F=>(p.classList.add(...F),()=>{p.classList.remove(...F)});return S=S===!0?S="":S||"",P(O(S))}function vne(p,S){let O=se=>se.split(" ").filter(Boolean),P=Object.entries(S).flatMap(([se,Ee])=>Ee?O(se):!1).filter(Boolean),F=Object.entries(S).flatMap(([se,Ee])=>Ee?!1:O(se)).filter(Boolean),Z=[],q=[];return F.forEach(se=>{p.classList.contains(se)&&(p.classList.remove(se),q.push(se))}),P.forEach(se=>{p.classList.contains(se)||(p.classList.add(se),Z.push(se))}),()=>{q.forEach(se=>p.classList.add(se)),Z.forEach(se=>p.classList.remove(se))}}function jF(p,S){return typeof S=="object"&&S!==null?yne(p,S):Cne(p,S)}function yne(p,S){let O={};return Object.entries(S).forEach(([P,F])=>{O[P]=p.style[P],P.startsWith("--")||(P=wne(P)),p.style.setProperty(P,F)}),setTimeout(()=>{p.style.length===0&&p.removeAttribute("style")}),()=>{jF(p,O)}}function Cne(p,S){let O=p.getAttribute("style",S);return p.setAttribute("style",S),()=>{p.setAttribute("style",O||"")}}function wne(p){return p.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function oK(p,S=()=>{}){let O=!1;return function(){O?S.apply(this,arguments):(O=!0,p.apply(this,arguments))}}gi("transition",(p,{value:S,modifiers:O,expression:P},{evaluate:F})=>{typeof P=="function"&&(P=F(P)),P!==!1&&(!P||typeof P=="boolean"?xne(p,O,S):Sne(p,P,S))});function Sne(p,S,O){vQ(p,TK,""),{enter:F=>{p._x_transition.enter.during=F},"enter-start":F=>{p._x_transition.enter.start=F},"enter-end":F=>{p._x_transition.enter.end=F},leave:F=>{p._x_transition.leave.during=F},"leave-start":F=>{p._x_transition.leave.start=F},"leave-end":F=>{p._x_transition.leave.end=F}}[O](S)}function xne(p,S,O){vQ(p,jF);let P=!S.includes("in")&&!S.includes("out")&&!O,F=P||S.includes("in")||["enter"].includes(O),Z=P||S.includes("out")||["leave"].includes(O);S.includes("in")&&!P&&(S=S.filter((On,Tt)=>Tt<S.indexOf("out"))),S.includes("out")&&!P&&(S=S.filter((On,Tt)=>Tt>S.indexOf("out")));let q=!S.includes("opacity")&&!S.includes("scale"),se=q||S.includes("opacity"),Ee=q||S.includes("scale"),Le=se?0:1,Fe=Ee?EM(S,"scale",95)/100:1,ut=EM(S,"delay",0)/1e3,en=EM(S,"origin","center"),Mn="opacity, transform",ln=EM(S,"duration",150)/1e3,cn=EM(S,"duration",75)/1e3,Ae="cubic-bezier(0.4, 0.0, 0.2, 1)";F&&(p._x_transition.enter.during={transformOrigin:en,transitionDelay:`${ut}s`,transitionProperty:Mn,transitionDuration:`${ln}s`,transitionTimingFunction:Ae},p._x_transition.enter.start={opacity:Le,transform:`scale(${Fe})`},p._x_transition.enter.end={opacity:1,transform:"scale(1)"}),Z&&(p._x_transition.leave.during={transformOrigin:en,transitionDelay:`${ut}s`,transitionProperty:Mn,transitionDuration:`${cn}s`,transitionTimingFunction:Ae},p._x_transition.leave.start={opacity:1,transform:"scale(1)"},p._x_transition.leave.end={opacity:Le,transform:`scale(${Fe})`})}function vQ(p,S,O={}){p._x_transition||(p._x_transition={enter:{during:O,start:O,end:O},leave:{during:O,start:O,end:O},in(P=()=>{},F=()=>{}){sK(p,S,{during:this.enter.during,start:this.enter.start,end:this.enter.end},P,F)},out(P=()=>{},F=()=>{}){sK(p,S,{during:this.leave.during,start:this.leave.start,end:this.leave.end},P,F)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(p,S,O,P){const F=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let Z=()=>F(O);if(S){p._x_transition&&(p._x_transition.enter||p._x_transition.leave)?p._x_transition.enter&&(Object.entries(p._x_transition.enter.during).length||Object.entries(p._x_transition.enter.start).length||Object.entries(p._x_transition.enter.end).length)?p._x_transition.in(O):Z():p._x_transition?p._x_transition.in(O):Z();return}p._x_hidePromise=p._x_transition?new Promise((q,se)=>{p._x_transition.out(()=>{},()=>q(P)),p._x_transitioning&&p._x_transitioning.beforeCancel(()=>se({isFromCancelledTransition:!0}))}):Promise.resolve(P),queueMicrotask(()=>{let q=yQ(p);q?(q._x_hideChildren||(q._x_hideChildren=[]),q._x_hideChildren.push(p)):F(()=>{let se=Ee=>{let Le=Promise.all([Ee._x_hidePromise,...(Ee._x_hideChildren||[]).map(se)]).then(([Fe])=>Fe==null?void 0:Fe());return delete Ee._x_hidePromise,delete Ee._x_hideChildren,Le};se(p).catch(Ee=>{if(!Ee.isFromCancelledTransition)throw Ee})})})};function yQ(p){let S=p.parentNode;if(S)return S._x_hidePromise?S:yQ(S)}function sK(p,S,{during:O,start:P,end:F}={},Z=()=>{},q=()=>{}){if(p._x_transitioning&&p._x_transitioning.cancel(),Object.keys(O).length===0&&Object.keys(P).length===0&&Object.keys(F).length===0){Z(),q();return}let se,Ee,Le;Ene(p,{start(){se=S(p,P)},during(){Ee=S(p,O)},before:Z,end(){se(),Le=S(p,F)},after:q,cleanup(){Ee(),Le()}})}function Ene(p,S){let O,P,F,Z=oK(()=>{dc(()=>{O=!0,P||S.before(),F||(S.end(),nK()),S.after(),p.isConnected&&S.cleanup(),delete p._x_transitioning})});p._x_transitioning={beforeCancels:[],beforeCancel(q){this.beforeCancels.push(q)},cancel:oK(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();Z()}),finish:Z},dc(()=>{S.start(),S.during()}),bne(),requestAnimationFrame(()=>{if(O)return;let q=Number(getComputedStyle(p).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,se=Number(getComputedStyle(p).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;q===0&&(q=Number(getComputedStyle(p).animationDuration.replace("s",""))*1e3),dc(()=>{S.before()}),P=!0,requestAnimationFrame(()=>{O||(dc(()=>{S.end()}),nK(),setTimeout(p._x_transitioning.finish,q+se),F=!0)})})}function EM(p,S,O){if(p.indexOf(S)===-1)return O;const P=p[p.indexOf(S)+1];if(!P||S==="scale"&&isNaN(P))return O;if(S==="duration"||S==="delay"){let F=P.match(/([0-9]+)ms/);if(F)return F[1]}return S==="origin"&&["top","right","left","center","bottom"].includes(p[p.indexOf(S)+2])?[P,p[p.indexOf(S)+2]].join(" "):P}var Sy=!1;function Ey(p,S=()=>{}){return(...O)=>Sy?S(...O):p(...O)}function Tne(p){return(...S)=>Sy&&p(...S)}var CQ=[];function qF(p){CQ.push(p)}function _ne(p,S){CQ.forEach(O=>O(p,S)),Sy=!0,wQ(()=>{d0(S,(O,P)=>{P(O,()=>{})})}),Sy=!1}var rK=!1;function kne(p,S){S._x_dataStack||(S._x_dataStack=p._x_dataStack),Sy=!0,rK=!0,wQ(()=>{Ane(S)}),Sy=!1,rK=!1}function Ane(p){let S=!1;d0(p,(P,F)=>{uS(P,(Z,q)=>{if(S&&fne(Z))return q();S=!0,F(Z,q)})})}function wQ(p){let S=dS;AX((O,P)=>{let F=S(O);return C4(F),()=>{}}),p(),AX(S)}function SQ(p,S,O,P=[]){switch(p._x_bindings||(p._x_bindings=y4({})),p._x_bindings[S]=O,S=P.includes("camel")?$ne(S):S,S){case"value":One(p,O);break;case"style":Dne(p,O);break;case"class":Rne(p,O);break;case"selected":case"checked":Mne(p,S,O);break;default:xQ(p,S,O);break}}function One(p,S){if(_Q(p))p.attributes.value===void 0&&(p.value=S),window.fromModel&&(typeof S=="boolean"?p.checked=MF(p.value)===S:p.checked=DX(p.value,S));else if(_K(p))Number.isInteger(S)?p.value=S:!Array.isArray(S)&&typeof S!="boolean"&&![null,void 0].includes(S)?p.value=String(S):Array.isArray(S)?p.checked=S.some(O=>DX(O,p.value)):p.checked=!!S;else if(p.tagName==="SELECT")Bne(p,S);else{if(p.value===S)return;p.value=S===void 0?"":S}}function Rne(p,S){p._x_undoAddedClasses&&p._x_undoAddedClasses(),p._x_undoAddedClasses=TK(p,S)}function Dne(p,S){p._x_undoAddedStyles&&p._x_undoAddedStyles(),p._x_undoAddedStyles=jF(p,S)}function Mne(p,S,O){xQ(p,S,O),Pne(p,S,O)}function xQ(p,S,O){[null,void 0,!1].includes(O)&&Lne(S)?p.removeAttribute(S):(EQ(S)&&(O=S),Nne(p,S,O))}function Nne(p,S,O){p.getAttribute(S)!=O&&p.setAttribute(S,O)}function Pne(p,S,O){p[S]!==O&&(p[S]=O)}function Bne(p,S){const O=[].concat(S).map(P=>P+"");Array.from(p.options).forEach(P=>{P.selected=O.includes(P.value)})}function $ne(p){return p.toLowerCase().replace(/-(\w)/g,(S,O)=>O.toUpperCase())}function DX(p,S){return p==S}function MF(p){return[1,"1","true","on","yes",!0].includes(p)?!0:[0,"0","false","off","no",!1].includes(p)?!1:p?!!p:null}var Ine=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function EQ(p){return Ine.has(p)}function Lne(p){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(p)}function Fne(p,S,O){return p._x_bindings&&p._x_bindings[S]!==void 0?p._x_bindings[S]:TQ(p,S,O)}function Hne(p,S,O,P=!0){if(p._x_bindings&&p._x_bindings[S]!==void 0)return p._x_bindings[S];if(p._x_inlineBindings&&p._x_inlineBindings[S]!==void 0){let F=p._x_inlineBindings[S];return F.extract=P,eQ(()=>aS(p,F.expression))}return TQ(p,S,O)}function TQ(p,S,O){let P=p.getAttribute(S);return P===null?typeof O=="function"?O():O:P===""?!0:EQ(S)?!![S,"true"].includes(P):P}function _K(p){return p.type==="checkbox"||p.localName==="ui-checkbox"||p.localName==="ui-switch"}function _Q(p){return p.type==="radio"||p.localName==="ui-radio"}function kQ(p,S){var O;return function(){var P=this,F=arguments,Z=function(){O=null,p.apply(P,F)};clearTimeout(O),O=setTimeout(Z,S)}}function AQ(p,S){let O;return function(){let P=this,F=arguments;O||(p.apply(P,F),O=!0,setTimeout(()=>O=!1,S))}}function OQ({get:p,set:S},{get:O,set:P}){let F=!0,Z,q=dS(()=>{let se=p(),Ee=O();if(F)P($G(se)),F=!1;else{let Le=JSON.stringify(se),Fe=JSON.stringify(Ee);Le!==Z?P($G(se)):Le!==Fe&&S($G(Ee))}Z=JSON.stringify(p()),JSON.stringify(O())});return()=>{C4(q)}}function $G(p){return typeof p=="object"?JSON.parse(JSON.stringify(p)):p}function zne(p){(Array.isArray(p)?p:[p]).forEach(O=>O(BM))}var tS={},MX=!1;function Vne(p,S){if(MX||(tS=y4(tS),MX=!0),S===void 0)return tS[p];tS[p]=S,XJ(tS[p]),typeof S=="object"&&S!==null&&S.hasOwnProperty("init")&&typeof S.init=="function"&&tS[p].init()}function Une(){return tS}var RQ={};function Wne(p,S){let O=typeof S!="function"?()=>S:S;return p instanceof Element?DQ(p,O()):(RQ[p]=O,()=>{})}function Zne(p){return Object.entries(RQ).forEach(([S,O])=>{Object.defineProperty(p,S,{get(){return(...P)=>O(...P)}})}),p}function DQ(p,S,O){let P=[];for(;P.length;)P.pop()();let F=Object.entries(S).map(([q,se])=>({name:q,value:se})),Z=oQ(F);return F=F.map(q=>Z.find(se=>se.name===q.name)?{name:`x-bind:${q.name}`,value:`"${q.value}"`}:q),CK(p,F,O).map(q=>{P.push(q.runCleanups),q()}),()=>{for(;P.length;)P.pop()()}}var MQ={};function jne(p,S){MQ[p]=S}function qne(p,S){return Object.entries(MQ).forEach(([O,P])=>{Object.defineProperty(p,O,{get(){return(...F)=>P.bind(S)(...F)},enumerable:!1})}),p}var Gne={get reactive(){return y4},get release(){return C4},get effect(){return dS},get raw(){return zJ},version:"3.14.9",flushAndStopDeferringMutations:Yte,dontAutoEvaluateFunctions:eQ,disableEffectScheduling:Ute,startObservingMutations:pK,stopObservingMutations:KJ,setReactivityEngine:Wte,onAttributeRemoved:qJ,onAttributesAdded:jJ,closestDataStack:h4,skipDuringClone:Ey,onlyDuringClone:Tne,addRootSelector:hQ,addInitSelector:pQ,interceptClone:qF,addScopeToNode:NM,deferMutations:Kte,mapAttributes:wK,evaluateLater:Ed,interceptInit:gne,setEvaluator:nne,mergeProxies:PM,extractProp:Hne,findClosest:S4,onElRemoved:fK,closestRoot:ZF,destroyTree:x4,interceptor:JJ,transition:sK,setStyles:jF,mutateDom:dc,directive:gi,entangle:OQ,throttle:AQ,debounce:kQ,evaluate:aS,initTree:d0,nextTick:EK,prefixed:w4,prefix:ane,plugin:zne,magic:Nh,store:Vne,start:mne,clone:kne,cloneNode:_ne,bound:Fne,$data:YJ,watch:VJ,walk:uS,data:jne,bind:Wne},BM=Gne;function Kne(p,S){const O=Object.create(null),P=p.split(",");for(let F=0;F<P.length;F++)O[P[F]]=!0;return F=>!!O[F]}var Yne=Object.freeze({}),Xne=Object.prototype.hasOwnProperty,GF=(p,S)=>Xne.call(p,S),cS=Array.isArray,AM=p=>NQ(p)==="[object Map]",Jne=p=>typeof p=="string",kK=p=>typeof p=="symbol",KF=p=>p!==null&&typeof p=="object",Qne=Object.prototype.toString,NQ=p=>Qne.call(p),PQ=p=>NQ(p).slice(8,-1),AK=p=>Jne(p)&&p!=="NaN"&&p[0]!=="-"&&""+parseInt(p,10)===p,eoe=p=>{const S=Object.create(null);return O=>S[O]||(S[O]=p(O))},toe=eoe(p=>p.charAt(0).toUpperCase()+p.slice(1)),BQ=(p,S)=>p!==S&&(p===p||S===S),aK=new WeakMap,TM=[],v1,iS=Symbol("iterate"),cK=Symbol("Map key iterate");function noe(p){return p&&p._isEffect===!0}function ooe(p,S=Yne){noe(p)&&(p=p.raw);const O=aoe(p,S);return S.lazy||O(),O}function soe(p){p.active&&($Q(p),p.options.onStop&&p.options.onStop(),p.active=!1)}var roe=0;function aoe(p,S){const O=function(){if(!O.active)return p();if(!TM.includes(O)){$Q(O);try{return ioe(),TM.push(O),v1=O,p()}finally{TM.pop(),IQ(),v1=TM[TM.length-1]}}};return O.id=roe++,O.allowRecurse=!!S.allowRecurse,O._isEffect=!0,O.active=!0,O.raw=p,O.deps=[],O.options=S,O}function $Q(p){const{deps:S}=p;if(S.length){for(let O=0;O<S.length;O++)S[O].delete(p);S.length=0}}var p4=!0,OK=[];function coe(){OK.push(p4),p4=!1}function ioe(){OK.push(p4),p4=!0}function IQ(){const p=OK.pop();p4=p===void 0?!0:p}function Dh(p,S,O){if(!p4||v1===void 0)return;let P=aK.get(p);P||aK.set(p,P=new Map);let F=P.get(O);F||P.set(O,F=new Set),F.has(v1)||(F.add(v1),v1.deps.push(F),v1.options.onTrack&&v1.options.onTrack({effect:v1,target:p,type:S,key:O}))}function xy(p,S,O,P,F,Z){const q=aK.get(p);if(!q)return;const se=new Set,Ee=Fe=>{Fe&&Fe.forEach(ut=>{(ut!==v1||ut.allowRecurse)&&se.add(ut)})};if(S==="clear")q.forEach(Ee);else if(O==="length"&&cS(p))q.forEach((Fe,ut)=>{(ut==="length"||ut>=P)&&Ee(Fe)});else switch(O!==void 0&&Ee(q.get(O)),S){case"add":cS(p)?AK(O)&&Ee(q.get("length")):(Ee(q.get(iS)),AM(p)&&Ee(q.get(cK)));break;case"delete":cS(p)||(Ee(q.get(iS)),AM(p)&&Ee(q.get(cK)));break;case"set":AM(p)&&Ee(q.get(iS));break}const Le=Fe=>{Fe.options.onTrigger&&Fe.options.onTrigger({effect:Fe,target:p,key:O,type:S,newValue:P,oldValue:F,oldTarget:Z}),Fe.options.scheduler?Fe.options.scheduler(Fe):Fe()};se.forEach(Le)}var loe=Kne("__proto__,__v_isRef,__isVue"),LQ=new Set(Object.getOwnPropertyNames(Symbol).map(p=>Symbol[p]).filter(kK)),uoe=FQ(),doe=FQ(!0),NX=moe();function moe(){const p={};return["includes","indexOf","lastIndexOf"].forEach(S=>{p[S]=function(...O){const P=$a(this);for(let Z=0,q=this.length;Z<q;Z++)Dh(P,"get",Z+"");const F=P[S](...O);return F===-1||F===!1?P[S](...O.map($a)):F}}),["push","pop","shift","unshift","splice"].forEach(S=>{p[S]=function(...O){coe();const P=$a(this)[S].apply(this,O);return IQ(),P}}),p}function FQ(p=!1,S=!1){return function(P,F,Z){if(F==="__v_isReactive")return!p;if(F==="__v_isReadonly")return p;if(F==="__v_raw"&&Z===(p?S?_oe:UQ:S?Toe:VQ).get(P))return P;const q=cS(P);if(!p&&q&&GF(NX,F))return Reflect.get(NX,F,Z);const se=Reflect.get(P,F,Z);return(kK(F)?LQ.has(F):loe(F))||(p||Dh(P,"get",F),S)?se:iK(se)?!q||!AK(F)?se.value:se:KF(se)?p?WQ(se):NK(se):se}}var foe=goe();function goe(p=!1){return function(O,P,F,Z){let q=O[P];if(!p&&(F=$a(F),q=$a(q),!cS(O)&&iK(q)&&!iK(F)))return q.value=F,!0;const se=cS(O)&&AK(P)?Number(P)<O.length:GF(O,P),Ee=Reflect.set(O,P,F,Z);return O===$a(Z)&&(se?BQ(F,q)&&xy(O,"set",P,F,q):xy(O,"add",P,F)),Ee}}function hoe(p,S){const O=GF(p,S),P=p[S],F=Reflect.deleteProperty(p,S);return F&&O&&xy(p,"delete",S,void 0,P),F}function poe(p,S){const O=Reflect.has(p,S);return(!kK(S)||!LQ.has(S))&&Dh(p,"has",S),O}function boe(p){return Dh(p,"iterate",cS(p)?"length":iS),Reflect.ownKeys(p)}var voe={get:uoe,set:foe,deleteProperty:hoe,has:poe,ownKeys:boe},yoe={get:doe,set(p,S){return console.warn(`Set operation on key "${String(S)}" failed: target is readonly.`,p),!0},deleteProperty(p,S){return console.warn(`Delete operation on key "${String(S)}" failed: target is readonly.`,p),!0}},RK=p=>KF(p)?NK(p):p,DK=p=>KF(p)?WQ(p):p,MK=p=>p,YF=p=>Reflect.getPrototypeOf(p);function xF(p,S,O=!1,P=!1){p=p.__v_raw;const F=$a(p),Z=$a(S);S!==Z&&!O&&Dh(F,"get",S),!O&&Dh(F,"get",Z);const{has:q}=YF(F),se=P?MK:O?DK:RK;if(q.call(F,S))return se(p.get(S));if(q.call(F,Z))return se(p.get(Z));p!==F&&p.get(S)}function EF(p,S=!1){const O=this.__v_raw,P=$a(O),F=$a(p);return p!==F&&!S&&Dh(P,"has",p),!S&&Dh(P,"has",F),p===F?O.has(p):O.has(p)||O.has(F)}function TF(p,S=!1){return p=p.__v_raw,!S&&Dh($a(p),"iterate",iS),Reflect.get(p,"size",p)}function PX(p){p=$a(p);const S=$a(this);return YF(S).has.call(S,p)||(S.add(p),xy(S,"add",p,p)),this}function BX(p,S){S=$a(S);const O=$a(this),{has:P,get:F}=YF(O);let Z=P.call(O,p);Z?zQ(O,P,p):(p=$a(p),Z=P.call(O,p));const q=F.call(O,p);return O.set(p,S),Z?BQ(S,q)&&xy(O,"set",p,S,q):xy(O,"add",p,S),this}function $X(p){const S=$a(this),{has:O,get:P}=YF(S);let F=O.call(S,p);F?zQ(S,O,p):(p=$a(p),F=O.call(S,p));const Z=P?P.call(S,p):void 0,q=S.delete(p);return F&&xy(S,"delete",p,void 0,Z),q}function IX(){const p=$a(this),S=p.size!==0,O=AM(p)?new Map(p):new Set(p),P=p.clear();return S&&xy(p,"clear",void 0,void 0,O),P}function _F(p,S){return function(P,F){const Z=this,q=Z.__v_raw,se=$a(q),Ee=S?MK:p?DK:RK;return!p&&Dh(se,"iterate",iS),q.forEach((Le,Fe)=>P.call(F,Ee(Le),Ee(Fe),Z))}}function kF(p,S,O){return function(...P){const F=this.__v_raw,Z=$a(F),q=AM(Z),se=p==="entries"||p===Symbol.iterator&&q,Ee=p==="keys"&&q,Le=F[p](...P),Fe=O?MK:S?DK:RK;return!S&&Dh(Z,"iterate",Ee?cK:iS),{next(){const{value:ut,done:en}=Le.next();return en?{value:ut,done:en}:{value:se?[Fe(ut[0]),Fe(ut[1])]:Fe(ut),done:en}},[Symbol.iterator](){return this}}}}function wy(p){return function(...S){{const O=S[0]?`on key "${S[0]}" `:"";console.warn(`${toe(p)} operation ${O}failed: target is readonly.`,$a(this))}return p==="delete"?!1:this}}function Coe(){const p={get(Z){return xF(this,Z)},get size(){return TF(this)},has:EF,add:PX,set:BX,delete:$X,clear:IX,forEach:_F(!1,!1)},S={get(Z){return xF(this,Z,!1,!0)},get size(){return TF(this)},has:EF,add:PX,set:BX,delete:$X,clear:IX,forEach:_F(!1,!0)},O={get(Z){return xF(this,Z,!0)},get size(){return TF(this,!0)},has(Z){return EF.call(this,Z,!0)},add:wy("add"),set:wy("set"),delete:wy("delete"),clear:wy("clear"),forEach:_F(!0,!1)},P={get(Z){return xF(this,Z,!0,!0)},get size(){return TF(this,!0)},has(Z){return EF.call(this,Z,!0)},add:wy("add"),set:wy("set"),delete:wy("delete"),clear:wy("clear"),forEach:_F(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(Z=>{p[Z]=kF(Z,!1,!1),O[Z]=kF(Z,!0,!1),S[Z]=kF(Z,!1,!0),P[Z]=kF(Z,!0,!0)}),[p,O,S,P]}var[woe,Soe,Pse,Bse]=Coe();function HQ(p,S){const O=p?Soe:woe;return(P,F,Z)=>F==="__v_isReactive"?!p:F==="__v_isReadonly"?p:F==="__v_raw"?P:Reflect.get(GF(O,F)&&F in P?O:P,F,Z)}var xoe={get:HQ(!1)},Eoe={get:HQ(!0)};function zQ(p,S,O){const P=$a(O);if(P!==O&&S.call(p,P)){const F=PQ(p);console.warn(`Reactive ${F} contains both the raw and reactive versions of the same object${F==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var VQ=new WeakMap,Toe=new WeakMap,UQ=new WeakMap,_oe=new WeakMap;function koe(p){switch(p){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Aoe(p){return p.__v_skip||!Object.isExtensible(p)?0:koe(PQ(p))}function NK(p){return p&&p.__v_isReadonly?p:ZQ(p,!1,voe,xoe,VQ)}function WQ(p){return ZQ(p,!0,yoe,Eoe,UQ)}function ZQ(p,S,O,P,F){if(!KF(p))return console.warn(`value cannot be made reactive: ${String(p)}`),p;if(p.__v_raw&&!(S&&p.__v_isReactive))return p;const Z=F.get(p);if(Z)return Z;const q=Aoe(p);if(q===0)return p;const se=new Proxy(p,q===2?P:O);return F.set(p,se),se}function $a(p){return p&&$a(p.__v_raw)||p}function iK(p){return!!(p&&p.__v_isRef===!0)}Nh("nextTick",()=>EK);Nh("dispatch",p=>kM.bind(kM,p));Nh("watch",(p,{evaluateLater:S,cleanup:O})=>(P,F)=>{let Z=S(P),se=VJ(()=>{let Ee;return Z(Le=>Ee=Le),Ee},F);O(se)});Nh("store",Une);Nh("data",p=>YJ(p));Nh("root",p=>ZF(p));Nh("refs",p=>(p._x_refs_proxy||(p._x_refs_proxy=PM(Ooe(p))),p._x_refs_proxy));function Ooe(p){let S=[];return S4(p,O=>{O._x_refs&&S.push(O._x_refs)}),S}var IG={};function jQ(p){return IG[p]||(IG[p]=0),++IG[p]}function Roe(p,S){return S4(p,O=>{if(O._x_ids&&O._x_ids[S])return!0})}function Doe(p,S){p._x_ids||(p._x_ids={}),p._x_ids[S]||(p._x_ids[S]=jQ(S))}Nh("id",(p,{cleanup:S})=>(O,P=null)=>{let F=`${O}${P?`-${P}`:""}`;return Moe(p,F,S,()=>{let Z=Roe(p,O),q=Z?Z._x_ids[O]:jQ(O);return P?`${O}-${q}-${P}`:`${O}-${q}`})});qF((p,S)=>{p._x_id&&(S._x_id=p._x_id)});function Moe(p,S,O,P){if(p._x_id||(p._x_id={}),p._x_id[S])return p._x_id[S];let F=P();return p._x_id[S]=F,O(()=>{delete p._x_id[S]}),F}Nh("el",p=>p);qQ("Focus","focus","focus");qQ("Persist","persist","persist");function qQ(p,S,O){Nh(S,P=>Eg(`You can't use [$${S}] without first installing the "${p}" plugin here: https://alpinejs.dev/plugins/${O}`,P))}gi("modelable",(p,{expression:S},{effect:O,evaluateLater:P,cleanup:F})=>{let Z=P(S),q=()=>{let Fe;return Z(ut=>Fe=ut),Fe},se=P(`${S} = __placeholder`),Ee=Fe=>se(()=>{},{scope:{__placeholder:Fe}}),Le=q();Ee(Le),queueMicrotask(()=>{if(!p._x_model)return;p._x_removeModelListeners.default();let Fe=p._x_model.get,ut=p._x_model.set,en=OQ({get(){return Fe()},set(Mn){ut(Mn)}},{get(){return q()},set(Mn){Ee(Mn)}});F(en)})});gi("teleport",(p,{modifiers:S,expression:O},{cleanup:P})=>{p.tagName.toLowerCase()!=="template"&&Eg("x-teleport can only be used on a <template> tag",p);let F=LX(O),Z=p.content.cloneNode(!0).firstElementChild;p._x_teleport=Z,Z._x_teleportBack=p,p.setAttribute("data-teleport-template",!0),Z.setAttribute("data-teleport-target",!0),p._x_forwardEvents&&p._x_forwardEvents.forEach(se=>{Z.addEventListener(se,Ee=>{Ee.stopPropagation(),p.dispatchEvent(new Ee.constructor(Ee.type,Ee))})}),NM(Z,{},p);let q=(se,Ee,Le)=>{Le.includes("prepend")?Ee.parentNode.insertBefore(se,Ee):Le.includes("append")?Ee.parentNode.insertBefore(se,Ee.nextSibling):Ee.appendChild(se)};dc(()=>{q(Z,F,S),Ey(()=>{d0(Z)})()}),p._x_teleportPutBack=()=>{let se=LX(O);dc(()=>{q(p._x_teleport,se,S)})},P(()=>dc(()=>{Z.remove(),x4(Z)}))});var Noe=document.createElement("div");function LX(p){let S=Ey(()=>document.querySelector(p),()=>Noe)();return S||Eg(`Cannot find x-teleport element for selector: "${p}"`),S}var GQ=()=>{};GQ.inline=(p,{modifiers:S},{cleanup:O})=>{S.includes("self")?p._x_ignoreSelf=!0:p._x_ignore=!0,O(()=>{S.includes("self")?delete p._x_ignoreSelf:delete p._x_ignore})};gi("ignore",GQ);gi("effect",Ey((p,{expression:S},{effect:O})=>{O(Ed(p,S))}));function lK(p,S,O,P){let F=p,Z=Ee=>P(Ee),q={},se=(Ee,Le)=>Fe=>Le(Ee,Fe);if(O.includes("dot")&&(S=Poe(S)),O.includes("camel")&&(S=Boe(S)),O.includes("passive")&&(q.passive=!0),O.includes("capture")&&(q.capture=!0),O.includes("window")&&(F=window),O.includes("document")&&(F=document),O.includes("debounce")){let Ee=O[O.indexOf("debounce")+1]||"invalid-wait",Le=LF(Ee.split("ms")[0])?Number(Ee.split("ms")[0]):250;Z=kQ(Z,Le)}if(O.includes("throttle")){let Ee=O[O.indexOf("throttle")+1]||"invalid-wait",Le=LF(Ee.split("ms")[0])?Number(Ee.split("ms")[0]):250;Z=AQ(Z,Le)}return O.includes("prevent")&&(Z=se(Z,(Ee,Le)=>{Le.preventDefault(),Ee(Le)})),O.includes("stop")&&(Z=se(Z,(Ee,Le)=>{Le.stopPropagation(),Ee(Le)})),O.includes("once")&&(Z=se(Z,(Ee,Le)=>{Ee(Le),F.removeEventListener(S,Z,q)})),(O.includes("away")||O.includes("outside"))&&(F=document,Z=se(Z,(Ee,Le)=>{p.contains(Le.target)||Le.target.isConnected!==!1&&(p.offsetWidth<1&&p.offsetHeight<1||p._x_isShown!==!1&&Ee(Le))})),O.includes("self")&&(Z=se(Z,(Ee,Le)=>{Le.target===p&&Ee(Le)})),(Ioe(S)||KQ(S))&&(Z=se(Z,(Ee,Le)=>{Loe(Le,O)||Ee(Le)})),F.addEventListener(S,Z,q),()=>{F.removeEventListener(S,Z,q)}}function Poe(p){return p.replace(/-/g,".")}function Boe(p){return p.toLowerCase().replace(/-(\w)/g,(S,O)=>O.toUpperCase())}function LF(p){return!Array.isArray(p)&&!isNaN(p)}function $oe(p){return[" ","_"].includes(p)?p:p.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Ioe(p){return["keydown","keyup"].includes(p)}function KQ(p){return["contextmenu","click","mouse"].some(S=>p.includes(S))}function Loe(p,S){let O=S.filter(Z=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(Z));if(O.includes("debounce")){let Z=O.indexOf("debounce");O.splice(Z,LF((O[Z+1]||"invalid-wait").split("ms")[0])?2:1)}if(O.includes("throttle")){let Z=O.indexOf("throttle");O.splice(Z,LF((O[Z+1]||"invalid-wait").split("ms")[0])?2:1)}if(O.length===0||O.length===1&&FX(p.key).includes(O[0]))return!1;const F=["ctrl","shift","alt","meta","cmd","super"].filter(Z=>O.includes(Z));return O=O.filter(Z=>!F.includes(Z)),!(F.length>0&&F.filter(q=>((q==="cmd"||q==="super")&&(q="meta"),p[`${q}Key`])).length===F.length&&(KQ(p.type)||FX(p.key).includes(O[0])))}function FX(p){if(!p)return[];p=$oe(p);let S={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return S[p]=p,Object.keys(S).map(O=>{if(S[O]===p)return O}).filter(O=>O)}gi("model",(p,{modifiers:S,expression:O},{effect:P,cleanup:F})=>{let Z=p;S.includes("parent")&&(Z=p.parentNode);let q=Ed(Z,O),se;typeof O=="string"?se=Ed(Z,`${O} = __placeholder`):typeof O=="function"&&typeof O()=="string"?se=Ed(Z,`${O()} = __placeholder`):se=()=>{};let Ee=()=>{let en;return q(Mn=>en=Mn),HX(en)?en.get():en},Le=en=>{let Mn;q(ln=>Mn=ln),HX(Mn)?Mn.set(en):se(()=>{},{scope:{__placeholder:en}})};typeof O=="string"&&p.type==="radio"&&dc(()=>{p.hasAttribute("name")||p.setAttribute("name",O)});var Fe=p.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(p.type)||S.includes("lazy")?"change":"input";let ut=Sy?()=>{}:lK(p,Fe,S,en=>{Le(LG(p,S,en,Ee()))});if(S.includes("fill")&&([void 0,null,""].includes(Ee())||_K(p)&&Array.isArray(Ee())||p.tagName.toLowerCase()==="select"&&p.multiple)&&Le(LG(p,S,{target:p},Ee())),p._x_removeModelListeners||(p._x_removeModelListeners={}),p._x_removeModelListeners.default=ut,F(()=>p._x_removeModelListeners.default()),p.form){let en=lK(p.form,"reset",[],Mn=>{EK(()=>p._x_model&&p._x_model.set(LG(p,S,{target:p},Ee())))});F(()=>en())}p._x_model={get(){return Ee()},set(en){Le(en)}},p._x_forceModelUpdate=en=>{en===void 0&&typeof O=="string"&&O.match(/\./)&&(en=""),window.fromModel=!0,dc(()=>SQ(p,"value",en)),delete window.fromModel},P(()=>{let en=Ee();S.includes("unintrusive")&&document.activeElement.isSameNode(p)||p._x_forceModelUpdate(en)})});function LG(p,S,O,P){return dc(()=>{if(O instanceof CustomEvent&&O.detail!==void 0)return O.detail!==null&&O.detail!==void 0?O.detail:O.target.value;if(_K(p))if(Array.isArray(P)){let F=null;return S.includes("number")?F=FG(O.target.value):S.includes("boolean")?F=MF(O.target.value):F=O.target.value,O.target.checked?P.includes(F)?P:P.concat([F]):P.filter(Z=>!Foe(Z,F))}else return O.target.checked;else{if(p.tagName.toLowerCase()==="select"&&p.multiple)return S.includes("number")?Array.from(O.target.selectedOptions).map(F=>{let Z=F.value||F.text;return FG(Z)}):S.includes("boolean")?Array.from(O.target.selectedOptions).map(F=>{let Z=F.value||F.text;return MF(Z)}):Array.from(O.target.selectedOptions).map(F=>F.value||F.text);{let F;return _Q(p)?O.target.checked?F=O.target.value:F=P:F=O.target.value,S.includes("number")?FG(F):S.includes("boolean")?MF(F):S.includes("trim")?F.trim():F}}})}function FG(p){let S=p?parseFloat(p):null;return Hoe(S)?S:p}function Foe(p,S){return p==S}function Hoe(p){return!Array.isArray(p)&&!isNaN(p)}function HX(p){return p!==null&&typeof p=="object"&&typeof p.get=="function"&&typeof p.set=="function"}gi("cloak",p=>queueMicrotask(()=>dc(()=>p.removeAttribute(w4("cloak")))));pQ(()=>`[${w4("init")}]`);gi("init",Ey((p,{expression:S},{evaluate:O})=>typeof S=="string"?!!S.trim()&&O(S,{},!1):O(S,{},!1)));gi("text",(p,{expression:S},{effect:O,evaluateLater:P})=>{let F=P(S);O(()=>{F(Z=>{dc(()=>{p.textContent=Z})})})});gi("html",(p,{expression:S},{effect:O,evaluateLater:P})=>{let F=P(S);O(()=>{F(Z=>{dc(()=>{p.innerHTML=Z,p._x_ignoreSelf=!0,d0(p),delete p._x_ignoreSelf})})})});wK(aQ(":",cQ(w4("bind:"))));var YQ=(p,{value:S,modifiers:O,expression:P,original:F},{effect:Z,cleanup:q})=>{if(!S){let Ee={};Zne(Ee),Ed(p,P)(Fe=>{DQ(p,Fe,F)},{scope:Ee});return}if(S==="key")return zoe(p,P);if(p._x_inlineBindings&&p._x_inlineBindings[S]&&p._x_inlineBindings[S].extract)return;let se=Ed(p,P);Z(()=>se(Ee=>{Ee===void 0&&typeof P=="string"&&P.match(/\./)&&(Ee=""),dc(()=>SQ(p,S,Ee,O))})),q(()=>{p._x_undoAddedClasses&&p._x_undoAddedClasses(),p._x_undoAddedStyles&&p._x_undoAddedStyles()})};YQ.inline=(p,{value:S,modifiers:O,expression:P})=>{S&&(p._x_inlineBindings||(p._x_inlineBindings={}),p._x_inlineBindings[S]={expression:P,extract:!1})};gi("bind",YQ);function zoe(p,S){p._x_keyExpression=S}hQ(()=>`[${w4("data")}]`);gi("data",(p,{expression:S},{cleanup:O})=>{if(Voe(p))return;S=S===""?"{}":S;let P={};JG(P,p);let F={};qne(F,P);let Z=aS(p,S,{scope:F});(Z===void 0||Z===!0)&&(Z={}),JG(Z,p);let q=y4(Z);XJ(q);let se=NM(p,q);q.init&&aS(p,q.init),O(()=>{q.destroy&&aS(p,q.destroy),se()})});qF((p,S)=>{p._x_dataStack&&(S._x_dataStack=p._x_dataStack,S.setAttribute("data-has-alpine-state",!0))});function Voe(p){return Sy?rK?!0:p.hasAttribute("data-has-alpine-state"):!1}gi("show",(p,{modifiers:S,expression:O},{effect:P})=>{let F=Ed(p,O);p._x_doHide||(p._x_doHide=()=>{dc(()=>{p.style.setProperty("display","none",S.includes("important")?"important":void 0)})}),p._x_doShow||(p._x_doShow=()=>{dc(()=>{p.style.length===1&&p.style.display==="none"?p.removeAttribute("style"):p.style.removeProperty("display")})});let Z=()=>{p._x_doHide(),p._x_isShown=!1},q=()=>{p._x_doShow(),p._x_isShown=!0},se=()=>setTimeout(q),Ee=oK(ut=>ut?q():Z(),ut=>{typeof p._x_toggleAndCascadeWithTransitions=="function"?p._x_toggleAndCascadeWithTransitions(p,ut,q,Z):ut?se():Z()}),Le,Fe=!0;P(()=>F(ut=>{!Fe&&ut===Le||(S.includes("immediate")&&(ut?se():Z()),Ee(ut),Le=ut,Fe=!1)}))});gi("for",(p,{expression:S},{effect:O,cleanup:P})=>{let F=Woe(S),Z=Ed(p,F.items),q=Ed(p,p._x_keyExpression||"index");p._x_prevKeys=[],p._x_lookup={},O(()=>Uoe(p,F,Z,q)),P(()=>{Object.values(p._x_lookup).forEach(se=>dc(()=>{x4(se),se.remove()})),delete p._x_prevKeys,delete p._x_lookup})});function Uoe(p,S,O,P){let F=q=>typeof q=="object"&&!Array.isArray(q),Z=p;O(q=>{Zoe(q)&&q>=0&&(q=Array.from(Array(q).keys(),Ae=>Ae+1)),q===void 0&&(q=[]);let se=p._x_lookup,Ee=p._x_prevKeys,Le=[],Fe=[];if(F(q))q=Object.entries(q).map(([Ae,On])=>{let Tt=zX(S,On,Ae,q);P(le=>{Fe.includes(le)&&Eg("Duplicate key on x-for",p),Fe.push(le)},{scope:{index:Ae,...Tt}}),Le.push(Tt)});else for(let Ae=0;Ae<q.length;Ae++){let On=zX(S,q[Ae],Ae,q);P(Tt=>{Fe.includes(Tt)&&Eg("Duplicate key on x-for",p),Fe.push(Tt)},{scope:{index:Ae,...On}}),Le.push(On)}let ut=[],en=[],Mn=[],ln=[];for(let Ae=0;Ae<Ee.length;Ae++){let On=Ee[Ae];Fe.indexOf(On)===-1&&Mn.push(On)}Ee=Ee.filter(Ae=>!Mn.includes(Ae));let cn="template";for(let Ae=0;Ae<Fe.length;Ae++){let On=Fe[Ae],Tt=Ee.indexOf(On);if(Tt===-1)Ee.splice(Ae,0,On),ut.push([cn,Ae]);else if(Tt!==Ae){let le=Ee.splice(Ae,1)[0],Ot=Ee.splice(Tt-1,1)[0];Ee.splice(Ae,0,Ot),Ee.splice(Tt,0,le),en.push([le,Ot])}else ln.push(On);cn=On}for(let Ae=0;Ae<Mn.length;Ae++){let On=Mn[Ae];On in se&&(dc(()=>{x4(se[On]),se[On].remove()}),delete se[On])}for(let Ae=0;Ae<en.length;Ae++){let[On,Tt]=en[Ae],le=se[On],Ot=se[Tt],Io=document.createElement("div");dc(()=>{Ot||Eg('x-for ":key" is undefined or invalid',Z,Tt,se),Ot.after(Io),le.after(Ot),Ot._x_currentIfEl&&Ot.after(Ot._x_currentIfEl),Io.before(le),le._x_currentIfEl&&le.after(le._x_currentIfEl),Io.remove()}),Ot._x_refreshXForScope(Le[Fe.indexOf(Tt)])}for(let Ae=0;Ae<ut.length;Ae++){let[On,Tt]=ut[Ae],le=On==="template"?Z:se[On];le._x_currentIfEl&&(le=le._x_currentIfEl);let Ot=Le[Tt],Io=Fe[Tt],kn=document.importNode(Z.content,!0).firstElementChild,ae=y4(Ot);NM(kn,ae,Z),kn._x_refreshXForScope=bn=>{Object.entries(bn).forEach(([Xo,Nn])=>{ae[Xo]=Nn})},dc(()=>{le.after(kn),Ey(()=>d0(kn))()}),typeof Io=="object"&&Eg("x-for key cannot be an object, it must be a string or an integer",Z),se[Io]=kn}for(let Ae=0;Ae<ln.length;Ae++)se[ln[Ae]]._x_refreshXForScope(Le[Fe.indexOf(ln[Ae])]);Z._x_prevKeys=Fe})}function Woe(p){let S=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,O=/^\s*\(|\)\s*$/g,P=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,F=p.match(P);if(!F)return;let Z={};Z.items=F[2].trim();let q=F[1].replace(O,"").trim(),se=q.match(S);return se?(Z.item=q.replace(S,"").trim(),Z.index=se[1].trim(),se[2]&&(Z.collection=se[2].trim())):Z.item=q,Z}function zX(p,S,O,P){let F={};return/^\[.*\]$/.test(p.item)&&Array.isArray(S)?p.item.replace("[","").replace("]","").split(",").map(q=>q.trim()).forEach((q,se)=>{F[q]=S[se]}):/^\{.*\}$/.test(p.item)&&!Array.isArray(S)&&typeof S=="object"?p.item.replace("{","").replace("}","").split(",").map(q=>q.trim()).forEach(q=>{F[q]=S[q]}):F[p.item]=S,p.index&&(F[p.index]=O),p.collection&&(F[p.collection]=P),F}function Zoe(p){return!Array.isArray(p)&&!isNaN(p)}function XQ(){}XQ.inline=(p,{expression:S},{cleanup:O})=>{let P=ZF(p);P._x_refs||(P._x_refs={}),P._x_refs[S]=p,O(()=>delete P._x_refs[S])};gi("ref",XQ);gi("if",(p,{expression:S},{effect:O,cleanup:P})=>{p.tagName.toLowerCase()!=="template"&&Eg("x-if can only be used on a <template> tag",p);let F=Ed(p,S),Z=()=>{if(p._x_currentIfEl)return p._x_currentIfEl;let se=p.content.cloneNode(!0).firstElementChild;return NM(se,{},p),dc(()=>{p.after(se),Ey(()=>d0(se))()}),p._x_currentIfEl=se,p._x_undoIf=()=>{dc(()=>{x4(se),se.remove()}),delete p._x_currentIfEl},se},q=()=>{p._x_undoIf&&(p._x_undoIf(),delete p._x_undoIf)};O(()=>F(se=>{se?Z():q()})),P(()=>p._x_undoIf&&p._x_undoIf())});gi("id",(p,{expression:S},{evaluate:O})=>{O(S).forEach(F=>Doe(p,F))});qF((p,S)=>{p._x_ids&&(S._x_ids=p._x_ids)});wK(aQ("@",cQ(w4("on:"))));gi("on",Ey((p,{value:S,modifiers:O,expression:P},{cleanup:F})=>{let Z=P?Ed(p,P):()=>{};p.tagName.toLowerCase()==="template"&&(p._x_forwardEvents||(p._x_forwardEvents=[]),p._x_forwardEvents.includes(S)||p._x_forwardEvents.push(S));let q=lK(p,S,O,se=>{Z(()=>{},{scope:{$event:se},params:[se]})});F(()=>q())}));XF("Collapse","collapse","collapse");XF("Intersect","intersect","intersect");XF("Focus","trap","focus");XF("Mask","mask","mask");function XF(p,S,O){gi(S,P=>Eg(`You can't use [x-${S}] without first installing the "${p}" plugin here: https://alpinejs.dev/plugins/${O}`,P))}BM.setEvaluator(nQ);BM.setReactivityEngine({reactive:NK,effect:ooe,release:soe,raw:$a});var joe=BM,JQ=joe,HG={exports:{}},VX;function qoe(){return VX||(VX=1,function(p){(function(){var S=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},O=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},P=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},F=function(e,n){return Z(function(o,r){return e.eq(n(o),n(r))})},Z=function(e){return{eq:e}},q=Z(function(e,n){return e===n}),se=q,Ee=function(e){return Z(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},Le=function(e,n){return F(Ee(e),function(o){return P(o,n)})},Fe=function(e){return Z(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!Le(se).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var v=r[f];if(!e.eq(n[v],o[v]))return!1}return!0})},ut=Z(function(e,n){if(e===n)return!0;var o=S(e),r=S(n);return o!==r?!1:O(o)?e===n:o==="array"?Ee(ut).eq(e,n):o==="object"?Fe(ut).eq(e,n):!1});const en=Object.getPrototypeOf,Mn=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},ln=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Mn(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},cn=e=>n=>ln(n)===e,Ae=e=>n=>typeof n===e,On=e=>n=>e===n,Tt=(e,n)=>Ot(e)&&Mn(e,n,(o,r)=>en(o)===r),le=cn("string"),Ot=cn("object"),Io=e=>Tt(e,Object),kn=cn("array"),ae=On(null),bn=Ae("boolean"),Xo=On(void 0),Nn=e=>e==null,We=e=>!Nn(e),pe=Ae("function"),_s=Ae("number"),fo=(e,n)=>{if(kn(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Ut=()=>{},D=(e,n)=>(...o)=>e(n.apply(null,o)),_o=(e,n)=>o=>e(n(o)),vt=e=>()=>e,Jo=e=>e,fn=(e,n)=>e===n;function Je(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const zo=e=>n=>!e(n),wr=e=>()=>{throw new Error(e)},Co=e=>e(),Sr=e=>{e()},Ge=vt(!1),pt=vt(!0);class U{constructor(n,o){this.tag=n,this.value=o}static some(n){return new U(!0,n)}static none(){return U.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?U.some(n(this.value)):U.none()}bind(n){return this.tag?n(this.value):U.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:U.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return We(n)?U.some(n):U.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}U.singletonNone=new U(!1);const pl=Array.prototype.slice,ko=Array.prototype.indexOf,gs=Array.prototype.push,Vo=(e,n)=>ko.call(e,n),kf=(e,n)=>{const o=Vo(e,n);return o===-1?U.none():U.some(o)},gn=(e,n)=>Vo(e,n)>-1,vo=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},hn=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},Te=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Ja=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},nr=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},Qt=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},hi=(e,n,o)=>(Ja(e,(r,c)=>{o=n(o,r,c)}),o),cs=(e,n,o)=>(Te(e,(r,c)=>{o=n(o,r,c)}),o),bl=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return U.some(u);if(o(u,r))break}return U.none()},Cs=(e,n)=>bl(e,n,Ge),Pr=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return U.some(o)}return U.none()},Zl=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!kn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);gs.apply(n,e[o])}return n},Ca=(e,n)=>Zl(hn(e,n)),ks=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},Uo=e=>{const n=pl.call(e,0);return n.reverse(),n},Mc=(e,n)=>Qt(e,o=>!gn(n,o)),As=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},To=(e,n)=>{const o=pl.call(e,0);return o.sort(n),o},jl=(e,n)=>n>=0&&n<e.length?U.some(e[n]):U.none(),to=e=>jl(e,0),xr=e=>jl(e,e.length-1),Br=pe(Array.from)?Array.from:e=>pl.call(e),vl=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return U.none()},ql=(e,n)=>{const o=[],r=pe(n)?c=>vo(o,u=>n(u,c)):c=>gn(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},is=Object.keys,Tm=Object.hasOwnProperty,bt=(e,n)=>{const o=is(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},Yn=(e,n)=>Ur(e,(o,r)=>({k:r,v:n(o,r)})),Ur=(e,n)=>{const o={};return bt(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},Wr=e=>(n,o)=>{e[o]=n},Nc=(e,n,o,r)=>{bt(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},pi=(e,n)=>{const o={},r={};return Nc(e,n,Wr(o),Wr(r)),{t:o,f:r}},Wo=(e,n)=>{const o={};return Nc(e,n,Wr(o),Ut),o},mc=(e,n)=>{const o=[];return bt(e,(r,c)=>{o.push(n(r,c))}),o},Ii=e=>mc(e,Jo),Mo=(e,n)=>an(e,n)?U.from(e[n]):U.none(),an=(e,n)=>Tm.call(e,n),ur=(e,n)=>an(e,n)&&e[n]!==void 0&&e[n]!==null,bi=(e,n,o=ut)=>Fe(o).eq(e,n),$u=e=>{const n={};return Te(e,o=>{n[o]={}}),is(n)},_m=e=>e.length!==void 0,Er=Array.isArray,hs=e=>{if(Er(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Os=(e,n,o)=>{if(!e)return!1;if(o=o||e,_m(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(an(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},fc=(e,n)=>{const o=[];return Os(e,(r,c)=>{o.push(n(r,c,e))}),o},Iu=(e,n)=>{const o=[];return Os(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},vi=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Tr=(e,n,o,r)=>{let c=Xo(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},Zo=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},gc=e=>e[e.length-1],Zr=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},km=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),v=f||r("(pointer:coarse)"),C=c||!u&&f&&r("(min-device-width:768px)"),T=u||f&&!C,B=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,I=!T&&!C&&!B;return{isiPad:vt(c),isiPhone:vt(u),isTablet:vt(C),isPhone:vt(T),isTouch:vt(v),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:vt(B),isDesktop:vt(I)}},Af=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Kc=(e,n)=>{const o=Af(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return ct(r(1),r(2))},yl=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?Et():Kc(e,o)},Et=()=>ct(0,0),ct=(e,n)=>({major:e,minor:n}),Cl={nu:ct,detect:yl,unknown:Et},Tg=(e,n)=>vl(n.brands,o=>{const r=o.brand.toLowerCase();return Cs(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:Cl.nu(parseInt(o.version,10),0)}))}),Td=(e,n)=>{const o=String(n).toLowerCase();return Cs(e,r=>r.search(o))},Qo=(e,n)=>Td(e,n).map(o=>{const r=Cl.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Am=(e,n)=>Td(e,n).map(o=>{const r=Cl.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Li=(e,n)=>e.substring(n),wl=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Ia=(e,n)=>Ws(e,n)?Li(e,n.length):e,or=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?Xo(r)?!0:c+n.length<=r:!1},Ws=(e,n)=>wl(e,n,0),wa=(e,n)=>wl(e,n,e.length-n.length),Gl=e=>n=>n.replace(e,""),Bs=Gl(/^\s+|\s+$/g),Kl=Gl(/^\s+/g),Qa=Gl(/\s+$/g),No=e=>e.length>0,Rs=e=>!No(e),dr=(e,n)=>n<=0?"":new Array(n+1).join(e),Yc=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?U.none():U.some(o)},ec=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ca=e=>n=>or(n,e),jo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>or(e,"edge/")&&or(e,"chrome")&&or(e,"safari")&&or(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ec],search:e=>or(e,"chrome")&&!or(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>or(e,"msie")||or(e,"trident")},{name:"Opera",versionRegexes:[ec,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ca("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ca("firefox")},{name:"Safari",versionRegexes:[ec,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(or(e,"safari")||or(e,"mobile/"))&&or(e,"applewebkit")}],Om=[{name:"Windows",search:ca("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>or(e,"iphone")||or(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ca("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ca("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ca("linux"),versionRegexes:[]},{name:"Solaris",search:ca("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ca("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ca("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Fi={browsers:vt(jo),oses:vt(Om)},_d="Edge",Xn="Chromium",Hi="IE",Es="Opera",Rm="Firefox",Xc="Safari",zi=()=>$r({current:void 0,version:Cl.unknown()}),$r=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(_d),isChromium:r(Xn),isIE:r(Hi),isOpera:r(Es),isFirefox:r(Rm),isSafari:r(Xc)}},Lu={unknown:zi,nu:$r},Jc="Windows",kd="iOS",Dm="Android",Mm="Linux",mr="macOS",Vi="Solaris",Yl="FreeBSD",Fu="ChromeOS",Nm=()=>Qc({current:void 0,version:Cl.unknown()}),Qc=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(Jc),isiOS:r(kd),isAndroid:r(Dm),isMacOS:r(mr),isLinux:r(Mm),isSolaris:r(Vi),isFreeBSD:r(Yl),isChromeOS:r(Fu)}},Ys={unknown:Nm,nu:Qc},hc={detect:(e,n,o)=>{const r=Fi.browsers(),c=Fi.oses(),u=n.bind(C=>Tg(r,C)).orThunk(()=>Qo(r,e)).fold(Lu.unknown,Lu.nu),f=Am(c,e).fold(Ys.unknown,Ys.nu),v=km(f,u,e,o);return{browser:u,os:f,deviceType:v}}},Hu=e=>window.matchMedia(e).matches;let Ad=Zr(()=>hc.detect(window.navigator.userAgent,U.from(window.navigator.userAgentData),Hu));const ia=()=>Ad(),K=window.navigator.userAgent,ce=ia(),be=ce.browser,Ve=ce.os,lt=ce.deviceType,je=K.indexOf("Windows Phone")!==-1,Vt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:be.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!be.isIE(),windowsPhone:je,browser:{current:be.current,version:be.version,isChromium:be.isChromium,isEdge:be.isEdge,isFirefox:be.isFirefox,isIE:be.isIE,isOpera:be.isOpera,isSafari:be.isSafari},os:{current:Ve.current,version:Ve.version,isAndroid:Ve.isAndroid,isChromeOS:Ve.isChromeOS,isFreeBSD:Ve.isFreeBSD,isiOS:Ve.isiOS,isLinux:Ve.isLinux,isMacOS:Ve.isMacOS,isSolaris:Ve.isSolaris,isWindows:Ve.isWindows},deviceType:{isDesktop:lt.isDesktop,isiPad:lt.isiPad,isiPhone:lt.isiPhone,isPhone:lt.isPhone,isTablet:lt.isTablet,isTouch:lt.isTouch,isWebView:lt.isWebView}},$n=/^\s*|\s*$/g,En=e=>Nn(e)?"":(""+e).replace($n,""),Zs=(e,n)=>n?n==="array"&&Er(e)?!0:typeof e===n:e!==void 0,zn=(e,n,o={})=>{const r=le(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},Xl=an,la=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(an(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Ui=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Os(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Ui(c,n,o,r),!0)))},Qe={trim:En,isArray:Er,is:Zs,toArray:hs,makeMap:zn,each:Os,map:fc,grep:Iu,inArray:vi,hasOwn:Xl,extend:la,walk:Ui,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>kn(e)?e:e===""?[]:fc(e.split(n||","),En),_addCacheSuffix:e=>{const n=Vt.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Sl=(e,n,o=fn)=>e.exists(r=>o(r,n)),$s=(e,n,o=fn)=>Is(e,n,o).getOr(e.isNone()&&n.isNone()),Bm=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Is=(e,n,o)=>e.isSome()&&n.isSome()?U.some(o(e.getOrDie(),n.getOrDie())):U.none(),Zn=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?U.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):U.none(),tc=(e,n)=>e?U.some(n):U.none(),Ir=typeof window<"u"?window:Function("return this;")(),Od=(e,n)=>{let o=n??Ir;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},sr=(e,n)=>{const o=e.split(".");return Od(o,n)},zu=(e,n)=>sr(e,n),Ph=(e,n)=>{const o=zu(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},y1=Object.getPrototypeOf,qo=e=>Ph("HTMLElement",e),xl=e=>{const n=sr("ownerDocument.defaultView",e);return Ot(e)&&(qo(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(y1(e).constructor.name))},gr=8,qr=9,La=11,Jl=1,Of=3,Rn=e=>e.dom.nodeName.toLowerCase(),Wi=e=>e.dom.nodeType,El=e=>n=>Wi(n)===e,Tl=e=>Wi(e)===gr||Rn(e)==="#comment",$m=e=>es(e)&&xl(e.dom),es=El(Jl),_r=El(Of),Vu=El(qr),_g=El(La),_l=e=>n=>es(n)&&Rn(n)===e,Fa=(e,n,o)=>{if(le(o)||bn(o)||_s(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},kr=(e,n,o)=>{Fa(e.dom,n,o)},ua=(e,n)=>{const o=e.dom;bt(n,(r,c)=>{Fa(o,c,r)})},Sa=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},js=(e,n)=>U.from(Sa(e,n)),Uu=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},ts=(e,n)=>{e.dom.removeAttribute(n)},Rd=e=>{const n=e.dom.attributes;return n==null||n.length===0},Im=e=>cs(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),kl=(e,n)=>{const o=Sa(e,n);return o===void 0||o===""?[]:o.split(" ")},Dd=(e,n,o)=>{const c=kl(e,n).concat([o]);return kr(e,n,c.join(" ")),!0},Md=(e,n,o)=>{const r=Qt(kl(e,n),c=>c!==o);return r.length>0?kr(e,n,r.join(" ")):ts(e,n),!1},Wu=e=>e.dom.classList!==void 0,Zu=e=>kl(e,"class"),Pc=(e,n)=>Dd(e,"class",n),xa=(e,n)=>Md(e,"class",n),Bh=(e,n)=>gn(Zu(e),n)?xa(e,n):Pc(e,n),Zi=(e,n)=>{Wu(e)?e.dom.classList.add(n):Pc(e,n)},Rf=e=>{(Wu(e)?e.dom.classList:Zu(e)).length===0&&ts(e,"class")},Nd=(e,n)=>{Wu(e)?e.dom.classList.remove(n):xa(e,n),Rf(e)},kg=(e,n)=>{const o=Wu(e)?e.dom.classList.toggle(n):Bh(e,n);return Rf(e),o},Df=(e,n)=>Wu(e)&&e.dom.classList.contains(n),Pd=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return ju(r.childNodes[0])},Mf=(e,n)=>{const r=(n||document).createElement(e);return ju(r)},Ag=(e,n)=>{const r=(n||document).createTextNode(e);return ju(r)},ju=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},de={fromHtml:Pd,fromTag:Mf,fromText:Ag,fromDom:ju,fromPoint:(e,n,o)=>U.from(e.dom.elementFromPoint(n,o)).map(ju)},qu=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Ha=(e,n)=>{const o=e.dom;if(o.nodeType!==Jl)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},C1=e=>e.nodeType!==Jl&&e.nodeType!==qr&&e.nodeType!==La||e.childElementCount===0,$h=(e,n)=>{const o=n===void 0?document:n.dom;return C1(o)?[]:hn(o.querySelectorAll(e),de.fromDom)},Ql=(e,n)=>{const o=n===void 0?document:n.dom;return C1(o)?U.none():U.from(o.querySelector(e)).map(de.fromDom)},oo=(e,n)=>e.dom===n.dom,Ts=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Gr=e=>de.fromDom(e.dom.ownerDocument),Al=e=>Vu(e)?e:Gr(e),Rg=e=>de.fromDom(Al(e).dom.documentElement),Gu=e=>de.fromDom(Al(e).dom.defaultView),Ea=e=>U.from(e.dom.parentNode).map(de.fromDom),Nf=e=>U.from(e.dom.parentElement).map(de.fromDom),Pf=(e,n)=>{const o=pe(n)?n:Ge;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=de.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},eu=e=>{const n=o=>Qt(o,r=>!oo(e,r));return Ea(e).map(Lr).map(n).getOr([])},tu=e=>U.from(e.dom.previousSibling).map(de.fromDom),Lm=e=>U.from(e.dom.nextSibling).map(de.fromDom),Bc=e=>Uo(qu(e,tu)),Fm=e=>qu(e,Lm),Lr=e=>hn(e.dom.childNodes,de.fromDom),nu=(e,n)=>{const o=e.dom.childNodes;return U.from(o[n]).map(de.fromDom)},yi=e=>nu(e,0),Ta=e=>nu(e,e.dom.childNodes.length-1),Ku=e=>e.dom.childNodes.length,w1=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return de.fromDom(n)},Bf=e=>_g(e)&&We(e.dom.host),ji=e=>de.fromDom(e.dom.getRootNode()),Bd=e=>Bf(e)?e:w1(Al(e)),Ih=e=>Bf(e)?e:de.fromDom(Al(e).dom.body),$f=e=>{const n=ji(e);return Bf(n)?U.some(n):U.none()},Lh=e=>de.fromDom(e.dom.host),Fh=e=>{if(We(e.target)){const n=de.fromDom(e.target);if(es(n)&&Hh(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return to(o)}}return U.from(e.target)},Hh=e=>We(e.dom.shadowRoot),qi=e=>{const n=_r(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return $f(de.fromDom(n)).fold(()=>o.body.contains(n),_o(qi,Lh))};var Dg=(e,n,o,r,c)=>e(o,r)?U.some(o):pe(c)&&c(o)?U.none():n(o,r,c);const Ci=(e,n,o)=>{let r=e.dom;const c=pe(o)?o:Ge;for(;r.parentNode;){r=r.parentNode;const u=de.fromDom(r);if(n(u))return U.some(u);if(c(u))break}return U.none()},ws=(e,n,o)=>Dg((c,u)=>u(c),Ci,e,n,o),Xs=(e,n)=>{const o=e.dom;return o.parentNode?pc(de.fromDom(o.parentNode),r=>!oo(e,r)&&n(r)):U.none()},pc=(e,n)=>{const o=c=>n(de.fromDom(c));return Cs(e.dom.childNodes,o).map(de.fromDom)},$d=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=de.fromDom(r.childNodes[c]);if(n(u))return U.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return U.none()};return o(e.dom)},Id=(e,n,o)=>Ci(e,r=>Ha(r,n),o),hr=(e,n)=>Ql(n,e),Wt=(e,n,o)=>Dg((c,u)=>Ha(c,u),Id,e,n,o),Mg=e=>Wt(e,"[contenteditable]"),wi=(e,n=!1)=>qi(e)?e.dom.isContentEditable:Mg(e).fold(vt(n),o=>bc(o)==="true"),bc=e=>e.dom.contentEditable,go=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Yu=e=>e.style!==void 0&&pe(e.style.getPropertyValue),Hm=(e,n,o)=>{if(!le(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Yu(e)&&e.style.setProperty(n,o)},zm=(e,n)=>{Yu(e)&&e.style.removeProperty(n)},zh=(e,n,o)=>{const r=e.dom;Hm(r,n,o)},Tn=(e,n)=>{const o=e.dom;bt(n,(r,c)=>{Hm(o,c,r)})},Ls=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!qi(e)?Ld(o,n):c},Ld=(e,n)=>Yu(e)?e.style.getPropertyValue(n):"",nc=(e,n)=>{const o=e.dom,r=Ld(o,n);return U.from(r).filter(c=>c.length>0)},_a=e=>{const n={},o=e.dom;if(Yu(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},vc=(e,n)=>{const o=e.dom;zm(o,n),Sl(js(e,"style").map(Bs),"")&&ts(e,"style")},Ar=e=>e.dom.offsetWidth,za=(e,n)=>{Ea(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},$c=(e,n)=>{Lm(e).fold(()=>{Ea(e).each(c=>{ps(c,n)})},r=>{za(r,n)})},Fd=(e,n)=>{yi(e).fold(()=>{ps(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},ps=(e,n)=>{e.dom.appendChild(n.dom)},If=(e,n)=>{za(e,n),ps(n,e)},qs=(e,n)=>{Te(n,(o,r)=>{const c=r===0?e:n[r-1];$c(c,o)})},Gi=(e,n)=>{Te(n,o=>{ps(e,o)})},Ki=e=>{e.dom.textContent="",Te(Lr(e),n=>{Ao(n)})},Ao=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},oc=e=>{const n=Lr(e);n.length>0&&qs(e,n),Ao(e)},Vm=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Lr(de.fromDom(r))},Xu=e=>hn(e,de.fromDom),ns=e=>e.dom.innerHTML,ou=(e,n)=>{const r=Gr(e).dom,c=de.fromDom(r.createDocumentFragment()),u=Vm(n,r);Gi(c,u),Ki(e),ps(e,c)},Si=e=>{const n=de.fromTag("div"),o=de.fromDom(e.dom.cloneNode(!0));return ps(n,o),ns(n)},Vn=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),Hd=e=>{const n=de.fromDom(Fh(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=D(r,o);return Vn(n,e.clientX,e.clientY,o,r,c,e)},Lf=(e,n)=>o=>{e(o)&&n(Hd(o))},_=(e,n,o,r,c)=>{const u=Lf(o,r);return e.dom.addEventListener(n,u,c),{unbind:Je(j,e,n,u,c)}},$=(e,n,o,r)=>_(e,n,o,r,!1),j=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},ue=(e,n)=>({left:e,top:n,translate:(r,c)=>ue(e+r,n+c)}),ge=ue,tt=e=>{const n=e.getBoundingClientRect();return ge(n.left,n.top)},sn=(e,n)=>e!==void 0?e:n!==void 0?n:0,Dn=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return ge(o.offsetLeft,o.offsetTop);const u=sn(r==null?void 0:r.pageYOffset,c.scrollTop),f=sn(r==null?void 0:r.pageXOffset,c.scrollLeft),v=sn(c.clientTop,o.clientTop),C=sn(c.clientLeft,o.clientLeft);return An(e).translate(f-C,u-v)},An=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?ge(r.offsetLeft,r.offsetTop):qi(e)?tt(n):ge(0,0)},Zt=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return ge(o,r)},os=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},Ds=(e,n)=>{ia().browser.isSafari()&&pe(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Ic=e=>{const n=e===void 0?window:e;return ia().browser.isFirefox()?U.none():U.from(n.visualViewport)},yc=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Vh=e=>{const n=e===void 0?window:e,o=n.document,r=Zt(de.fromDom(o));return Ic(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return yc(r.left,r.top,u,f)},c=>yc(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},Um=(e,n)=>Qt(Lr(e),n),Ng=(e,n)=>{let o=[];return Te(Lr(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Ng(r,n))}),o},ka=(e,n)=>$h(n,e),Uh=(e,n,o)=>Ci(e,n,o).isSome(),Ty=(e,n)=>Xs(e,n).isSome(),Wh=(e,n)=>$d(e,n).isSome();class da{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Zh="\uFEFF",rr="",Ff=e=>e===Zh,Aa=e=>e.replace(/\uFEFF/g,""),mn=/^[ \t\r\n]*$/,xi=e=>mn.test(e),zd=e=>{for(const n of e)if(!Ff(n))return!1;return!0},jh=e=>" \f	\v".indexOf(e)!==-1,m0=e=>e===`
`||e==="\r",qh=(e,n)=>n<e.length&&n>=0?m0(e[n]):!1,Yi=(e,n=4,o=!0,r=!0)=>{const c=dr(" ",n),u=e.replace(/\t/g,c);return cs(u,(v,C)=>jh(C)||C===rr?v.pcIsSpace||v.str===""&&o||v.str.length===u.length-1&&r||qh(u,v.str.length+1)?{pcIsSpace:!1,str:v.str+rr}:{pcIsSpace:!0,str:v.str+" "}:{pcIsSpace:m0(C),str:v.str+C},{pcIsSpace:!1,str:""}).str},su=e=>n=>!!n&&n.nodeType===e,Vd=e=>!!e&&!Object.getPrototypeOf(e),_t=su(1),Ei=e=>_t(e)&&$m(de.fromDom(e)),S1=e=>_t(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Wm=e=>{const n=e.toLowerCase();return o=>We(o)&&o.nodeName.toLowerCase()===n},Xi=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return gn(n,r)}return!1}},Pg=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(_t(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},Ud=e=>n=>_t(n)&&n.hasAttribute(e),Zm=e=>_t(e)&&e.hasAttribute("data-mce-bogus"),Bg=e=>_t(e)&&e.getAttribute("data-mce-bogus")==="all",Ol=e=>_t(e)&&e.tagName==="TABLE",f0=e=>n=>!!(Ei(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Ss=Xi(["textarea","input"]),rt=su(3),sc=su(4),Rl=su(7),Or=su(8),Hf=su(9),Rr=su(11),co=Wm("br"),Gh=Wm("img"),Ze=f0("true"),io=f0("false"),x1=e=>Ei(e)&&e.isContentEditable&&We(e.parentElement)&&!e.parentElement.isContentEditable,Gs=Xi(["td","th"]),Ji=Xi(["td","th","caption"]),Kr=Xi(["video","audio","object","embed"]),_y=Wm("li"),ru=Wm("details"),g0=Wm("summary"),Cc={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},lo=(e,n,o)=>{const r=de.fromDom(n),c=de.fromDom(e),u=o.getWhitespaceElements();return Uh(c,v=>an(u,Rn(v)),Je(oo,r))},au=e=>_t(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),$g=(e,n)=>_t(e)&&an(n.getNonEmptyElements(),e.nodeName),Ms=Ud("data-mce-bookmark"),Kh=e=>Nf(de.fromDom(e)).exists(n=>!wi(n)),Ju=(e,n,o)=>xi(e.data)&&!lo(e,n,o),E1=(e,n,o,r)=>rt(e)&&!Ju(e,n,o)&&(!r.includeZwsp||!zd(e.data)),Oa=(e,n,o,r)=>pe(r.isContent)&&r.isContent(n)||$g(n,e)||Ms(n)||au(n)||E1(n,o,e,r)||io(n)||Ze(n)&&Kh(n),ei=(e,n,o)=>{const r={...Cc,...o};if(r.checkRootAsContent&&Oa(e,n,n,r))return!1;let c=n.firstChild,u=0;if(!c)return!0;const f=new da(c,n);do{if(r.skipBogus&&_t(c)){const v=c.getAttribute("data-mce-bogus");if(v){c=f.next(v==="all");continue}}if(Or(c)){c=f.next(!0);continue}if(co(c)){u++,c=f.next();continue}if(Oa(e,c,n,r))return!1;c=f.next()}while(c);return u<=1},Se=(e,n,o)=>ei(e,n.dom,{checkRootAsContent:!0,...o}),ti=(e,n,o)=>Oa(e,n,n,{includeZwsp:Cc.includeZwsp,...o}),Dr=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},ss=e=>{const n=Dr(U.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(U.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:v=>{o(),n.set(U.some(v))}}},Qi=e=>{const n=Dr(U.none()),o=()=>n.get().each(v=>clearInterval(v));return{clear:()=>{o(),n.set(U.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:v=>{o(),n.set(U.some(setInterval(v,e)))}}},Fs=()=>{const e=ss(Ut);return{...e,on:o=>e.get().each(o)}},Po=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},E=e=>Po(e)!=="html",R=e=>E(e.nodeName),V=e=>Po(e.nodeName),te=["svg","math"],he=()=>{const e=Fs(),n=()=>e.get().map(V).getOr("html");return{track:c=>(R(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},Ue="data-mce-block",gt=e=>Qt(is(e),n=>!/[A-Z]/.test(n)),Ht=e=>hn(gt(e),n=>{const o=CSS.escape(n);return`${o}:`+hn(te,r=>`not(${r} ${o})`).join(":")}).join(","),wn=(e,n)=>We(n.querySelector(e))?(n.setAttribute(Ue,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Ue),!1),Bn=(e,n)=>{const o=Ht(e.getTransparentElements()),r=Ht(e.getBlockElements());return Qt(n.querySelectorAll(o),c=>wn(r,c))},wo=(e,n,o)=>{var r;const c=o?"lastChild":"firstChild";for(let u=n[c];u;u=u[c])if(ei(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},So=(e,n,o)=>{const r=document.createRange(),c=n.parentNode;if(c){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();wo(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();wo(e,f,!1),ei(e,u,{checkRootAsContent:!0})||c.insertBefore(u,n),ei(e,o,{checkRootAsContent:!0})||c.insertBefore(o,n),ei(e,f,{checkRootAsContent:!0})||c.insertBefore(f,n),c.removeChild(n)}},bs=(e,n,o)=>{const r=e.getBlockElements(),c=de.fromDom(n),u=v=>Rn(v)in r,f=v=>oo(v,c);Te(Xu(o),v=>{Ci(v,u,f).each(C=>{const T=Um(v,B=>u(B)&&!e.isValidChild(Rn(C),Rn(B)));if(T.length>0){const B=Nf(C);Te(T,I=>{Ci(I,u,f).each(H=>{So(e,H.dom,I.dom)})}),B.each(I=>Bn(e,I.dom))}})})},wc=(e,n,o)=>{Te([...o,...rc(e,n)?[n]:[]],r=>Te(ka(de.fromDom(r),r.nodeName.toLowerCase()),c=>{Yh(e,c.dom)&&oc(c)}))},Ti=(e,n)=>{const o=Bn(e,n);bs(e,n,o),wc(e,n,o)},Qu=(e,n)=>{if(qm(e,n)){const o=Ht(e.getBlockElements());wn(o,n)}},Lc=(e,n,o)=>{const r=u=>oo(u,de.fromDom(n)),c=Pf(de.fromDom(o),r);jl(c,c.length-2).filter(es).fold(()=>Ti(e,n),u=>Ti(e,u.dom))},Wd=e=>e.hasAttribute(Ue),jm=(e,n)=>an(e.getTransparentElements(),n),qm=(e,n)=>_t(n)&&jm(e,n.nodeName),rc=(e,n)=>qm(e,n)&&Wd(n),Yh=(e,n)=>qm(e,n)&&!Wd(n),Gm=(e,n)=>n.type===1&&jm(e,n.name)&&le(n.attr(Ue)),Xh=ia().browser,h0=e=>Cs(e,es),Fr=e=>Xh.isFirefox()&&Rn(e)==="table"?h0(Lr(e)).filter(n=>Rn(n)==="caption").bind(n=>h0(Fm(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,jn=(e,n)=>e.children&&gn(e.children,n),ls=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Ls(de.fromDom(e),"position")==="static"){const v=n.getBoundingClientRect();return r=v.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=v.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!jn(f,o);){const v=f;r+=v.offsetLeft||0,c+=v.offsetTop||0,f=v.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!jn(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=Fr(de.fromDom(n))}return{x:r,y:c}},pr=(e,n={})=>{let o=0;const r={},c=de.fromDom(e),u=Al(c),f=me=>{n.referrerPolicy=me},v=me=>{n.contentCssCors=me},C=me=>{ps(Bd(c),me)},T=me=>{const Ce=Bd(c);hr(Ce,"#"+me).each(Ao)},B=me=>Mo(r,me).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),I=me=>new Promise((Ce,xe)=>{let Oe;const Ke=Qe._addCacheSuffix(me),mt=B(Ke);r[Ke]=mt,mt.count++;const Ct=(Bt,Yt)=>{Te(Bt,Sr),mt.status=Yt,mt.passed=[],mt.failed=[],Oe&&(Oe.onload=null,Oe.onerror=null,Oe=null)},He=()=>Ct(mt.passed,2),Be=()=>Ct(mt.failed,3);if(Ce&&mt.passed.push(Ce),xe&&mt.failed.push(xe),mt.status===1)return;if(mt.status===2){He();return}if(mt.status===3){Be();return}mt.status=1;const Xe=de.fromTag("link",u.dom);ua(Xe,{rel:"stylesheet",type:"text/css",id:mt.id}),n.contentCssCors&&kr(Xe,"crossOrigin","anonymous"),n.referrerPolicy&&kr(Xe,"referrerpolicy",n.referrerPolicy),Oe=Xe.dom,Oe.onload=He,Oe.onerror=Be,C(Xe),kr(Xe,"href",Ke)}),H=(me,Ce)=>{const xe=B(me);r[me]=xe,xe.count++;const Oe=de.fromTag("style",u.dom);ua(Oe,{rel:"stylesheet",type:"text/css",id:xe.id,"data-mce-key":me}),Oe.dom.innerHTML=Ce,C(Oe)},G=me=>Promise.allSettled(hn(me,xe=>I(xe).then(vt(xe)))).then(xe=>{const Oe=nr(xe,Ke=>Ke.status==="fulfilled");return Oe.fail.length>0?Promise.reject(hn(Oe.fail,Ke=>Ke.reason)):hn(Oe.pass,Ke=>Ke.value)}),ee=me=>{const Ce=Qe._addCacheSuffix(me);Mo(r,Ce).each(xe=>{--xe.count===0&&(delete r[Ce],T(xe.id))})};return{load:I,loadRawCss:H,loadAll:G,unload:ee,unloadRawCss:me=>{Mo(r,me).each(Ce=>{--Ce.count===0&&(delete r[me],T(Ce.id))})},unloadAll:me=>{Te(me,Ce=>{ee(Ce)})},_setReferrerPolicy:f,_setContentCssCors:v}},Fc=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=ji(o).dom;return U.from(e.get(u)).getOrThunk(()=>{const f=pr(u,r);return e.set(u,f),f})}}})(),Jh=e=>e.nodeName.toLowerCase()==="span",Zd=(e,n)=>We(e)&&(ti(n,e)||n.isInline(e.nodeName.toLowerCase())),jd=(e,n,o)=>{const r=new da(e,n).prev(!1),c=new da(e,n).next(!1),u=Xo(r)||Zd(r,o),f=Xo(c)||Zd(c,o);return u&&f},cu=e=>Jh(e)&&e.getAttribute("data-mce-type")==="bookmark",iu=(e,n,o)=>rt(e)&&e.data.length>0&&jd(e,n,o),mS=e=>_t(e)?e.childNodes.length>0:!1,Va=e=>Rr(e)||Hf(e),p0=(e,n,o,r)=>{var c;const u=r||n;if(_t(n)&&cu(n))return n;const f=n.childNodes;for(let v=f.length-1;v>=0;v--)p0(e,f[v],o,u);if(_t(n)){const v=n.childNodes;v.length===1&&cu(v[0])&&((c=n.parentNode)===null||c===void 0||c.insertBefore(v[0],n))}return!Va(n)&&!ti(o,n)&&!mS(n)&&!iu(n,u,o)&&e.remove(n),n},qd=Qe.makeMap,Km=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gd=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,E4=/[<>&\"\']/g,Qh=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,T4={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},zf={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Js={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},fS=e=>{const n=de.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Kd=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!zf[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},Ym=Kd("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ig=(e,n)=>e.replace(n?Km:Gd,o=>zf[o]||o),lu=e=>(""+e).replace(E4,n=>zf[n]||n),ac=(e,n)=>e.replace(n?Km:Gd,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":zf[o]||"&#"+o.charCodeAt(0)+";"),Lg=(e,n,o)=>{const r=o||Ym;return e.replace(n?Km:Gd,c=>zf[c]||r[c]||c)},Yd={encodeRaw:Ig,encodeAllRaw:lu,encodeNumeric:ac,encodeNamed:Lg,getEncodeFunc:(e,n)=>{const o=Kd(n)||Ym,r=(f,v)=>f.replace(v?Km:Gd,C=>zf[C]!==void 0?zf[C]:o[C]!==void 0?o[C]:C.length>1?"&#"+((C.charCodeAt(0)-55296)*1024+(C.charCodeAt(1)-56320)+65536)+";":"&#"+C.charCodeAt(0)+";"),c=(f,v)=>Lg(f,v,o),u=qd(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:Lg:u.numeric?ac:Ig},decode:e=>e.replace(Qh,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):T4[o]||String.fromCharCode(o)):Js[n]||Ym[n]||fS(n))},Ra=(e,n)=>(e=Qe.trim(e),e?e.split(n||" "):[]),_1=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),_4=e=>Ot(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",k4=e=>{const n=o=>kn(o)?hn(o,n):_4(o)?new RegExp(o.source,o.flags):Ot(o)?Yn(o,n):o;return n(e)},ky=e=>{const n=/^(~)?(.+)$/;return Ca(Ra(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},ep=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),uu=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},du=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=uu(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(n),phrasingContent:c(o),flowContent:c(r)})},Vf={html4:Zr(()=>du("html4")),html5:Zr(()=>du("html5")),"html5-strict":Zr(()=>du("html5-strict"))},Fg=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=Vf[e]();return n==="blocks"?U.some(o):n==="phrasing"?U.some(r):n==="flow"?U.some(c):U.none()},k1=e=>{const n=ep(e),{phrasingContent:o,flowContent:r}=uu(e),c={},u=(C,T,B)=>{c[C]={attributes:As(T,vt({})),attributesOrder:T,children:As(B,vt({}))}},f=(C,T="",B="")=>{const I=Ra(B),H=Ra(C);let G=H.length;const ee=[...n,...Ra(T)];for(;G--;)u(H[G],ee.slice(),I)},v=(C,T)=>{const B=Ra(C),I=Ra(T);let H=B.length;for(;H--;){const G=c[B[H]];for(let ee=0,J=I.length;ee<J;ee++)G.attributes[I[ee]]={},G.attributesOrder.push(I[ee])}};return e!=="html5-strict"&&(Te(Ra("acronym applet basefont big font strike tt"),B=>{f(B,"",o)}),Te(Ra("center dir isindex noframes"),B=>{f(B,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(v("script","language xml:space"),v("style","xml:space"),v("object","declare classid code codebase codetype archive standby align border hspace vspace"),v("embed","align name hspace vspace"),v("param","valuetype type"),v("a","charset name rev shape coords"),v("br","clear"),v("applet","codebase archive code object alt name width height align hspace vspace"),v("img","name longdesc align border hspace vspace"),v("iframe","longdesc frameborder marginwidth marginheight scrolling align"),v("font basefont","size color face"),v("input","usemap align"),v("select"),v("textarea"),v("h1 h2 h3 h4 h5 h6 div p legend caption","align"),v("ul","type compact"),v("li","type"),v("ol dl menu dir","compact"),v("pre","width xml:space"),v("hr","align noshade size width"),v("isindex","prompt"),v("table","summary width frame rules cellspacing cellpadding align bgcolor"),v("col","width align char charoff valign"),v("colgroup","width align char charoff valign"),v("thead","align char charoff valign"),v("tr","align char charoff valign bgcolor"),v("th","axis align char charoff valign nowrap bgcolor width height"),v("form","accept"),v("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),v("tfoot","align char charoff valign"),v("tbody","align char charoff valign"),v("area","nohref"),v("body","background bgcolor text link vlink alink")),e!=="html4"&&(v("input button select textarea","autofocus"),v("input textarea","placeholder"),v("a","download"),v("link script img","crossorigin"),v("img","loading"),v("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&Te([c.video,c.audio],C=>{delete C.children.audio,delete C.children.video}),Te(Ra("a form meter progress dfn"),C=>{c[C]&&delete c[C].children[C]}),delete c.caption.children.table,delete c.script,c},tp=e=>e==="-"?"remove":"add",Xm=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return U.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},Uf=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Ca(Ra(e,","),o=>{const r=n.exec(o);if(r){const c=r[1],u=c?tp(c):"replace",f=r[2],v=Ca(Ra(r[3],"|"),C=>Xm(C).toArray());return[{operation:u,name:f,validChildren:v}]}else return[]})},A1=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=n;return Te(Ra(e,"|"),f=>{const v=o.exec(f);if(v){const C={},T=v[1],B=v[2].replace(/[\\:]:/g,":"),I=v[3],H=v[4];if(T==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(B),C.required=!0),T==="-"){delete c[B],u.splice(Qe.inArray(u,B),1);return}if(I&&(I==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:B,value:H}),C.defaultValue=H):I==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:B,value:H}),C.forcedValue=H):I==="<"&&(C.validValues=Qe.makeMap(H,"?"))),r.test(B)){const G=C;n.attributePatterns=n.attributePatterns||[],G.pattern=_1(B),n.attributePatterns.push(G)}else c[B]||u.push(B),c[B]=C}})},b0=(e,n)=>{bt(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},v0=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Ca(Ra(n,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],v=c[3],C=c[4],T=c[5],B={attributes:{},attributesOrder:[]};if(e.each(I=>b0(I,B)),u==="#"?B.paddEmpty=!0:u==="-"&&(B.removeEmpty=!0),C==="!"&&(B.removeEmptyAttrs=!0),T&&A1(T,B),v&&(B.outputName=f),f==="@")if(e.isNone())e=U.some(B);else return[];return[v?{name:f,element:B,aliasName:v}:{name:f,element:B}]}else return[]})},Un={},Kt=Qe.makeMap,Hc=Qe.each,y0=Qe.extend,C0=Qe.explode,w0=(e,n={})=>{const o=Kt(e," ",Kt(e.toUpperCase()," "));return y0(o,n)},Ay=e=>w0("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),rs=(e,n)=>{if(e){const o={};return le(e)&&(e={"*":e}),Hc(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?Kt(r,/[, ]/):C0(r,/[, ]/)}),o}else return},Jm=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},v=(tn,ao,er)=>{const ra=e[tn];if(ra)return Kt(ra,/[, ]/,Kt(ra.toUpperCase(),/[, ]/));{let ya=Un[tn];return ya||(ya=w0(ao,er),Un[tn]=ya),ya}},C=(n=e.schema)!==null&&n!==void 0?n:"html5",T=k1(C);e.verify_html===!1&&(e.valid_elements="*[*]");const B=rs(e.valid_styles),I=rs(e.invalid_styles,"map"),H=rs(e.valid_classes,"map"),G=v("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ee=v("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),J=v("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),re=v("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),me="td th iframe video audio object script code",Ce=v("non_empty_elements",me+" pre svg textarea summary",J),xe=v("move_caret_before_on_enter_elements",me+" table",J),Oe="h1 h2 h3 h4 h5 h6",Ke=v("text_block_elements",Oe+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),mt=v("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Ke),Ct=v("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),He=v("transparent_elements","a ins del canvas map"),Be=v("wrap_block_elements","pre "+Oe);Hc("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),tn=>{f[tn]=new RegExp("</"+tn+"[^>]*>","gi")});const Xe=tn=>{const ao=U.from(o["@"]),er=/[*?+]/;Te(v0(ao,tn??""),({name:ra,element:ya,aliasName:Vr})=>{if(Vr&&(o[Vr]=ya),er.test(ra)){const zs=ya;zs.pattern=_1(ra),c.push(zs)}else o[ra]=ya})},Bt=tn=>{c=[],Te(is(o),ao=>{delete o[ao]}),Xe(tn)},Yt=(tn,ao)=>{var er,ra;delete Un.text_block_elements,delete Un.block_elements;const ya=ao.extends?!di(ao.extends):!1,Vr=ao.extends;if(r[tn]=Vr?r[Vr]:{},u[tn]=Vr??tn,Ce[tn.toUpperCase()]={},Ce[tn]={},ya||(mt[tn.toUpperCase()]={},mt[tn]={}),Vr&&!o[tn]&&o[Vr]){const zs=k4(o[Vr]);delete zs.removeEmptyAttrs,delete zs.removeEmpty,o[tn]=zs}else o[tn]={attributesOrder:[],attributes:{}};if(kn(ao.attributes)){const zs=qc=>{Vs.attributesOrder.push(qc),Vs.attributes[qc]={}},Vs=(er=o[tn])!==null&&er!==void 0?er:{};delete Vs.attributesDefault,delete Vs.attributesForced,delete Vs.attributePatterns,delete Vs.attributesRequired,Vs.attributesOrder=[],Vs.attributes={},Te(ao.attributes,qc=>{const wd=ep(C);Xm(qc).each(({preset:xf,name:wm})=>{xf?wm==="global"&&Te(wd,zs):zs(wm)})}),o[tn]=Vs}if(bn(ao.padEmpty)){const zs=(ra=o[tn])!==null&&ra!==void 0?ra:{};zs.paddEmpty=ao.padEmpty,o[tn]=zs}if(kn(ao.children)){const zs={},Vs=wd=>{zs[wd]={}},qc=wd=>{Fg(C,wd).each(xf=>{Te(xf,Vs)})};Te(ao.children,wd=>{Xm(wd).each(({preset:xf,name:wm})=>{xf?qc(wm):Vs(wm)})}),r[tn]=zs}Vr&&bt(r,(zs,Vs)=>{zs[Vr]&&(r[Vs]=zs=y0({},r[Vs]),zs[tn]=zs[Vr])})},Fn=tn=>{Te(ky(tn??""),({name:ao,cloneName:er})=>{Yt(ao,{extends:er})})},Wn=tn=>{Ot(tn)?bt(tn,(ao,er)=>Yt(er,ao)):le(tn)&&Fn(tn)},yo=tn=>{Te(Uf(tn??""),({operation:ao,name:er,validChildren:ra})=>{const ya=ao==="replace"?{"#comment":{}}:r[er],Vr=Vs=>{ao==="remove"?delete ya[Vs]:ya[Vs]={}},zs=Vs=>{Fg(C,Vs).each(qc=>{Te(qc,Vr)})};Te(ra,({preset:Vs,name:qc})=>{Vs?zs(qc):Vr(qc)}),r[er]=ya})},Ro=tn=>{const ao=o[tn];if(ao)return ao;let er=c.length;for(;er--;){const ra=c[er];if(ra.pattern.test(tn))return ra}},Cr=()=>{e.valid_elements?(Bt(e.valid_elements),Hc(T,(tn,ao)=>{r[ao]=tn.children})):(Hc(T,(tn,ao)=>{o[ao]={attributes:tn.attributes,attributesOrder:tn.attributesOrder},r[ao]=tn.children}),Hc(Ra("strong/b em/i"),tn=>{const ao=Ra(tn,"/");o[ao[1]].outputName=ao[0]}),Hc(Ct,(tn,ao)=>{o[ao]&&(e.padd_empty_block_inline_children&&(o[ao].paddInEmptyBlock=!0),o[ao].removeEmpty=!0)}),Hc(Ra("ol ul blockquote a table tbody"),tn=>{o[tn]&&(o[tn].removeEmpty=!0)}),Hc(Ra("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),tn=>{o[tn]&&(o[tn].paddEmpty=!0)}),Hc(Ra("span"),tn=>{o[tn].removeEmptyAttrs=!0})),delete o.svg,Wn(e.custom_elements),yo(e.valid_children),Xe(e.extended_valid_elements),yo("+ol[ul|ol],+ul[ul|ol]"),Hc({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(tn,ao)=>{o[ao]&&(o[ao].parentsRequired=Ra(tn))}),e.invalid_elements&&Hc(C0(e.invalid_elements),tn=>{o[tn]&&delete o[tn]}),Ro("span")||Xe("span[!data-mce-type|*]")},Pa=vt(B),Ba=vt(I),St=vt(H),Xt=vt(re),bo=vt(mt),It=vt(Ke),Ye=vt(Ct),Nt=vt(Object.seal(J)),yn=vt(ee),Lo=vt(Ce),Jn=vt(xe),Ya=vt(G),dl=vt(He),Cm=vt(Be),$i=vt(Object.seal(f)),yd=(tn,ao)=>{const er=r[tn.toLowerCase()];return!!(er&&er[ao.toLowerCase()])},Ul=(tn,ao)=>{const er=Ro(tn);if(er)if(ao){if(er.attributes[ao])return!0;const ra=er.attributePatterns;if(ra){let ya=ra.length;for(;ya--;)if(ra[ya].pattern.test(ao))return!0}}else return!0;return!1},di=tn=>an(bo(),tn),mi=tn=>!Ws(tn,"#")&&Ul(tn)&&!di(tn),Cd=tn=>an(Cm(),tn)||mi(tn),u1=vt(u);return Cr(),{type:C,children:r,elements:o,getValidStyles:Pa,getValidClasses:St,getBlockElements:bo,getInvalidStyles:Ba,getVoidElements:Nt,getTextBlockElements:It,getTextInlineElements:Ye,getBoolAttrs:Xt,getElementRule:Ro,getSelfClosingElements:yn,getNonEmptyElements:Lo,getMoveCaretBeforeOnEnterElements:Jn,getWhitespaceElements:Ya,getTransparentElements:dl,getSpecialElements:$i,isValidChild:yd,isValid:Ul,isBlock:di,isInline:mi,isWrapper:Cd,getCustomElements:u1,addValidElements:Xe,setValidElements:Bt,addCustomElements:Wn,addValidChildren:yo}},A4=e=>({value:gS(e)}),gS=e=>Ia(e,"#").toUpperCase(),ze=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Oy=e=>{const n=ze(e.red)+ze(e.green)+ze(e.blue);return A4(n)},Ry=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,np=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,O4=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Hg=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),v=parseFloat(r);return O4(c,u,f,v)},O1=e=>Ry.test(e)?"rgb":np.test(e)?"rgba":"other",Wf=e=>{const n=Ry.exec(e);if(n!==null)return U.some(Hg(n[1],n[2],n[3],"1"));const o=np.exec(e);return o!==null?U.some(Hg(o[1],o[2],o[3],o[4])):U.none()},S0=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Xd=e=>Wf(e).map(Oy).map(n=>"#"+n.value).getOr(e),Bo=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,v;const C=Zh;n&&(f=n.getValidStyles(),v=n.getInvalidStyles());const T=(`\\" \\' \\; \\: ; : `+C).split(" ");for(let I=0;I<T.length;I++)u[T[I]]=C+I,u[C+I]=T[I];const B={parse:I=>{const H={};let G=!1;const ee=e.url_converter,J=e.url_converter_scope||B,re=(He,Be,Xe)=>{const Bt=H[He+"-top"+Be];if(!Bt)return;const Yt=H[He+"-right"+Be];if(!Yt)return;const Fn=H[He+"-bottom"+Be];if(!Fn)return;const Wn=H[He+"-left"+Be];if(!Wn)return;const yo=[Bt,Yt,Fn,Wn];let Ro=yo.length-1;for(;Ro--&&yo[Ro]===yo[Ro+1];);Ro>-1&&Xe||(H[He+Be]=Ro===-1?yo[0]:yo.join(" "),delete H[He+"-top"+Be],delete H[He+"-right"+Be],delete H[He+"-bottom"+Be],delete H[He+"-left"+Be])},me=He=>{const Be=H[He];if(!Be)return;const Xe=Be.indexOf(",")>-1?[Be]:Be.split(" ");let Bt=Xe.length;for(;Bt--;)if(Xe[Bt]!==Xe[0])return!1;return H[He]=Xe[0],!0},Ce=(He,Be,Xe,Bt)=>{me(Be)&&me(Xe)&&me(Bt)&&(H[He]=H[Be]+" "+H[Xe]+" "+H[Bt],delete H[Be],delete H[Xe],delete H[Bt])},xe=He=>(G=!0,u[He]),Oe=(He,Be)=>(G&&(He=He.replace(/\uFEFF[0-9]/g,Xe=>u[Xe])),Be||(He=He.replace(/\\([\'\";:])/g,"$1")),He),Ke=He=>String.fromCharCode(parseInt(He.slice(1),16)),mt=He=>He.replace(/\\[0-9a-f]+/gi,Ke),Ct=(He,Be,Xe,Bt,Yt,Fn)=>{if(Yt=Yt||Fn,Yt)return Yt=Oe(Yt),"'"+Yt.replace(/\'/g,"\\'")+"'";if(Be=Oe(Be||Xe||Bt||""),!e.allow_script_urls){const Wn=Be.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Wn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Wn))return""}return ee&&(Be=ee.call(J,Be,"style")),"url('"+Be.replace(/\'/g,"\\'")+"')"};if(I){I=I.replace(/[\u0000-\u001F]/g,""),I=I.replace(/\\[\"\';:\uFEFF]/g,xe).replace(/\"[^\"]+\"|\'[^\']+\'/g,Be=>Be.replace(/[;:]/g,xe));let He;for(;He=r.exec(I);){r.lastIndex=He.index+He[0].length;let Be=He[1].replace(c,"").toLowerCase(),Xe=He[2].replace(c,"");if(Be&&Xe){if(Be=mt(Be),Xe=mt(Xe),Be.indexOf(C)!==-1||Be.indexOf('"')!==-1||!e.allow_script_urls&&(Be==="behavior"||/expression\s*\(|\/\*|\*\//.test(Xe)))continue;Be==="font-weight"&&Xe==="700"?Xe="bold":(Be==="color"||Be==="background-color")&&(Xe=Xe.toLowerCase()),O1(Xe)==="rgb"&&Wf(Xe).each(Bt=>{Xe=Xd(S0(Bt)).toLowerCase()}),Xe=Xe.replace(o,Ct),H[Be]=G?Oe(Xe,!0):Xe}}re("border","",!0),re("border","-width"),re("border","-color"),re("border","-style"),re("padding",""),re("margin",""),Ce("border","border-width","border-style","border-color"),H.border==="medium none"&&delete H.border,H["border-image"]==="none"&&delete H["border-image"]}return H},serialize:(I,H)=>{let G="";const ee=(re,me)=>{const Ce=me[re];if(Ce)for(let xe=0,Oe=Ce.length;xe<Oe;xe++){const Ke=Ce[xe],mt=I[Ke];mt&&(G+=(G.length>0?" ":"")+Ke+": "+mt+";")}},J=(re,me)=>{if(!v||!me)return!0;let Ce=v["*"];return Ce&&Ce[re]?!1:(Ce=v[me],!(Ce&&Ce[re]))};return H&&f?(ee("*",f),ee(H,f)):bt(I,(re,me)=>{re&&J(me,H)&&(G+=(G.length>0?" ":"")+me+": "+re+";")}),G}};return B},ed={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},hS=e=>e instanceof Event||pe(e.initEvent),Qm=e=>e.isDefaultPrevented===pt||e.isDefaultPrevented===Ge,R4=e=>Nn(e.preventDefault)||hS(e),x0=(e,n)=>{const o=n??{};for(const r in e)an(ed,r)||(o[r]=e[r]);return We(e.composedPath)&&(o.composedPath=()=>e.composedPath()),We(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),We(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},R1=(e,n,o,r)=>{var c;const u=x0(n,r);return u.type=e,Nn(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),R4(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=pt,pe(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=pt,pe(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=pt,u.stopPropagation()},Qm(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?pt:Ge,u.isPropagationStopped=u.cancelBubble===!0?pt:Ge,u.isImmediatePropagationStopped=Ge)),u},D4="mce-data-",mu=/^(?:mouse|contextmenu)|click/,E0=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},op=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},Dy=e=>We(e)&&mu.test(e.type),zg=(e,n)=>{const o=R1(e.type,e,document,n);if(Dy(e)&&Xo(e.pageX)&&!Xo(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},T0=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{op(e,"DOMContentLoaded",f),op(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():E0(e,"DOMContentLoaded",f),o.domLoaded||E0(e,"load",f)};class ef{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=D4+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const v=window,C=H=>{u.executeHandlers(zg(H||v.event),T)};if(!n||rt(n)||Or(n))return r;let T;n[u.expando]?T=n[u.expando]:(T=u.count++,n[u.expando]=T,u.events[T]={}),c=c||n;const B=o.split(" ");let I=B.length;for(;I--;){let H=B[I],G=C,ee=!1,J=!1;if(H==="DOMContentLoaded"&&(H="ready"),u.domLoaded&&H==="ready"&&n.readyState==="complete"){r.call(c,zg({type:H}));continue}!u.hasFocusIn&&(H==="focusin"||H==="focusout")&&(ee=!0,J=H==="focusin"?"focus":"blur",G=re=>{const me=zg(re||v.event);me.type=me.type==="focus"?"focusin":"focusout",u.executeHandlers(me,T)}),f=u.events[T][H],f?H==="ready"&&u.domLoaded?r(zg({type:H})):f.push({func:r,scope:c}):(u.events[T][H]=f=[{func:r,scope:c}],f.fakeName=J,f.capture=ee,f.nativeHandler=G,H==="ready"?T0(n,G,u):E0(n,J||H,G,ee))}return n=f=null,r}unbind(n,o,r){if(!n||rt(n)||Or(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let v=f.length;for(;v--;){const C=f[v],T=u[C];if(T){if(r){let B=T.length;for(;B--;)if(T[B].func===r){const I=T.nativeHandler,H=T.fakeName,G=T.capture,ee=T.slice(0,B).concat(T.slice(B+1));ee.nativeHandler=I,ee.fakeName=H,ee.capture=G,u[C]=ee}}(!r||T.length===0)&&(delete u[C],op(n,T.fakeName||C,T.nativeHandler,T.capture))}}}else bt(u,(f,v)=>{op(n,f.fakeName||v,f.nativeHandler,f.capture)}),u={};for(const f in u)if(an(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||rt(n)||Or(n))return this;const c=zg({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||rt(n)||Or(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const v=c[u];if(v&&v.func.call(v.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}ef.Event=new ef;const My=Qe.each,Ny=Qe.grep,Dl="data-mce-style",el=Qe.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),at=(e,n,o)=>{Nn(o)||o===""?ts(e,n):kr(e,n,o)},pS=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),ar=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&rt(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},bS=(e,n)=>{const o=Sa(n,"style"),r=e.serialize(e.parse(o),Rn(n));at(n,Dl,r)},vS=(e,n)=>_s(e)?an(el,n)?e+"":e+"px":e,D1=(e,n,o)=>{const r=pS(n);Nn(o)||o===""?vc(e,r):zh(e,r,vS(o,r))},Py=(e,n,o)=>{const r=n.keep_values,c={set:(f,v,C)=>{const T=de.fromDom(f);pe(n.url_converter)&&We(v)&&(v=n.url_converter.call(n.url_converter_scope||o(),String(v),C,f));const B="data-mce-"+C;at(T,B,v),at(T,C,v)},get:(f,v)=>{const C=de.fromDom(f);return Sa(C,"data-mce-"+v)||Sa(C,v)}},u={style:{set:(f,v)=>{const C=de.fromDom(f);r&&at(C,Dl,v),ts(C,"style"),le(v)&&Tn(C,e.parse(v))},get:f=>{const v=de.fromDom(f),C=Sa(v,Dl)||Sa(v,"style");return e.serialize(e.parse(C),Rn(v))}}};return r&&(u.href=u.src=c),u},vs=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,v=!0,C=Fc.forElement(de.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),T=[],B=n.schema?n.schema:Jm({}),I=Bo({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),H=n.ownEvents?new ef:ef.Event,G=B.getBlockElements(),ee=ke=>le(ke)?an(G,ke):_t(ke)&&(an(G,ke.nodeName)||rc(B,ke)),J=ke=>ke&&e&&le(ke)?e.getElementById(ke):ke,re=ke=>{const De=J(ke);return We(De)?de.fromDom(De):null},me=(ke,De,wt="")=>{let ht;const un=re(ke);if(We(un)&&es(un)){const uo=Qw[De];uo&&uo.get?ht=uo.get(un.dom,De):ht=Sa(un,De)}return We(ht)?ht:wt},Ce=ke=>{const De=J(ke);return Nn(De)?[]:De.attributes},xe=(ke,De,wt)=>{Xt(ke,ht=>{if(_t(ht)){const un=de.fromDom(ht),uo=wt===""?null:wt,tr=Sa(un,De),Ef=Qw[De];Ef&&Ef.set?Ef.set(un.dom,uo,De):at(un,De,uo),tr!==uo&&n.onSetAttrib&&n.onSetAttrib({attrElm:un.dom,attrName:De,attrValue:uo})}})},Oe=(ke,De)=>ke.cloneNode(De),Ke=()=>n.root_element||e.body,mt=ke=>{const De=Vh(ke);return{x:De.x,y:De.y,w:De.width,h:De.height}},Ct=(ke,De)=>ls(e.body,J(ke),De),He=(ke,De,wt)=>{Xt(ke,ht=>{const un=de.fromDom(ht);D1(un,De,wt),n.update_styles&&bS(I,un)})},Be=(ke,De)=>{Xt(ke,wt=>{const ht=de.fromDom(wt);bt(De,(un,uo)=>{D1(ht,uo,un)}),n.update_styles&&bS(I,ht)})},Xe=(ke,De,wt)=>{const ht=J(ke);if(!(Nn(ht)||!Ei(ht)&&!S1(ht)))return wt?Ls(de.fromDom(ht),pS(De)):(De=De.replace(/-(\D)/g,(un,uo)=>uo.toUpperCase()),De==="float"&&(De="cssFloat"),ht.style?ht.style[De]:void 0)},Bt=ke=>{const De=J(ke);if(!De)return{w:0,h:0};let wt=Xe(De,"width"),ht=Xe(De,"height");return(!wt||wt.indexOf("px")===-1)&&(wt="0"),(!ht||ht.indexOf("px")===-1)&&(ht="0"),{w:parseInt(wt,10)||De.offsetWidth||De.clientWidth,h:parseInt(ht,10)||De.offsetHeight||De.clientHeight}},Yt=ke=>{const De=J(ke),wt=Ct(De),ht=Bt(De);return{x:wt.x,y:wt.y,w:ht.w,h:ht.h}},Fn=(ke,De)=>{if(!ke)return!1;const wt=kn(ke)?ke:[ke];return vo(wt,ht=>Ha(de.fromDom(ht),De))},Wn=(ke,De,wt,ht)=>{const un=[];let uo=J(ke);ht=ht===void 0;const tr=wt||(Ke().nodeName!=="BODY"?Ke().parentNode:null);if(le(De))if(De==="*")De=_t;else{const Ef=De;De=xd=>Fn(xd,Ef)}for(;uo&&!(uo===tr||Nn(uo.nodeType)||Hf(uo)||Rr(uo));){if(!De||De(uo))if(ht)un.push(uo);else return[uo];uo=uo.parentNode}return ht?un:null},yo=(ke,De,wt)=>{const ht=Wn(ke,De,wt,!1);return ht&&ht.length>0?ht[0]:null},Ro=(ke,De,wt)=>{let ht=De;if(ke){le(De)&&(ht=un=>Fn(un,De));for(let un=ke[wt];un;un=un[wt])if(pe(ht)&&ht(un))return un}return null},Cr=(ke,De)=>Ro(ke,De,"nextSibling"),Pa=(ke,De)=>Ro(ke,De,"previousSibling"),Ba=ke=>pe(ke.querySelectorAll),St=(ke,De)=>{var wt,ht;const un=(ht=(wt=J(De))!==null&&wt!==void 0?wt:n.root_element)!==null&&ht!==void 0?ht:e;return Ba(un)?Br(un.querySelectorAll(ke)):[]},Xt=function(ke,De,wt){const ht=wt??this;if(kn(ke)){const un=[];return My(ke,(uo,tr)=>{const Ef=J(uo);Ef&&un.push(De.call(ht,Ef,tr))}),un}else{const un=J(ke);return un?De.call(ht,un):!1}},bo=(ke,De)=>{Xt(ke,wt=>{bt(De,(ht,un)=>{xe(wt,un,ht)})})},It=(ke,De)=>{Xt(ke,wt=>{const ht=de.fromDom(wt);ou(ht,De)})},Ye=(ke,De,wt,ht,un)=>Xt(ke,uo=>{const tr=le(De)?e.createElement(De):De;return We(wt)&&bo(tr,wt),ht&&(!le(ht)&&ht.nodeType?tr.appendChild(ht):le(ht)&&It(tr,ht)),un?tr:uo.appendChild(tr)}),Nt=(ke,De,wt)=>Ye(e.createElement(ke),ke,De,wt,!0),yn=Yd.decode,Lo=Yd.encodeAllRaw,Jn=(ke,De,wt="")=>{let ht="<"+ke;for(const un in De)ur(De,un)&&(ht+=" "+un+'="'+Lo(De[un])+'"');return Rs(wt)&&an(B.getVoidElements(),ke)?ht+" />":ht+">"+wt+"</"+ke+">"},Ya=ke=>{const De=e.createElement("div"),wt=e.createDocumentFragment();wt.appendChild(De),ke&&(De.innerHTML=ke);let ht;for(;ht=De.firstChild;)wt.appendChild(ht);return wt.removeChild(De),wt},dl=(ke,De)=>Xt(ke,wt=>{const ht=de.fromDom(wt);return De&&Te(Lr(ht),un=>{_r(un)&&un.dom.length===0?Ao(un):za(ht,un)}),Ao(ht),ht.dom}),Cm=ke=>Xt(ke,De=>{const wt=De.attributes;for(let ht=wt.length-1;ht>=0;ht--)De.removeAttributeNode(wt.item(ht))}),$i=ke=>I.parse(ke),yd=(ke,De)=>I.serialize(ke,De),Ul=ke=>{if(wg!==vs.DOM&&e===document){if(o[ke])return;o[ke]=!0}let De=e.getElementById("mceDefaultStyles");if(!De){De=e.createElement("style"),De.id="mceDefaultStyles",De.type="text/css";const wt=e.head;wt.firstChild?wt.insertBefore(De,wt.firstChild):wt.appendChild(De)}De.styleSheet?De.styleSheet.cssText+=ke:De.appendChild(e.createTextNode(ke))},di=ke=>{ke||(ke=""),Te(ke.split(","),De=>{c[De]=!0,C.load(De).catch(Ut)})},mi=(ke,De,wt)=>{Xt(ke,ht=>{if(_t(ht)){const un=de.fromDom(ht),uo=De.split(" ");Te(uo,tr=>{We(wt)?(wt?Zi:Nd)(un,tr):kg(un,tr)})}})},Cd=(ke,De)=>{mi(ke,De,!0)},u1=(ke,De)=>{mi(ke,De,!1)},tn=(ke,De)=>{const wt=re(ke),ht=De.split(" ");return We(wt)&&ks(ht,un=>Df(wt,un))},ao=ke=>{Xt(ke,De=>vc(de.fromDom(De),"display"))},er=ke=>{Xt(ke,De=>zh(de.fromDom(De),"display","none"))},ra=ke=>{const De=re(ke);return We(De)&&Sl(nc(De,"display"),"none")},ya=ke=>(ke||"mce_")+u++,Vr=ke=>{const De=re(ke);return We(De)?_t(De.dom)?De.dom.outerHTML:Si(De):""},zs=(ke,De)=>{Xt(ke,wt=>{_t(wt)&&(wt.outerHTML=De)})},Vs=(ke,De)=>{const wt=J(De);return Xt(ke,ht=>{const un=wt==null?void 0:wt.parentNode,uo=wt==null?void 0:wt.nextSibling;return un&&(uo?un.insertBefore(ht,uo):un.appendChild(ht)),ht})},qc=(ke,De,wt)=>Xt(De,ht=>{var un;const uo=kn(De)?ke.cloneNode(!0):ke;return wt&&My(Ny(ht.childNodes),tr=>{uo.appendChild(tr)}),(un=ht.parentNode)===null||un===void 0||un.replaceChild(uo,ht),ht}),wd=(ke,De)=>{if(ke.nodeName!==De.toUpperCase()){const wt=Nt(De);return My(Ce(ke),ht=>{xe(wt,ht.nodeName,me(ke,ht.nodeName))}),qc(wt,ke,!0),wt}else return ke},xf=(ke,De)=>{let wt=ke;for(;wt;){let ht=De;for(;ht&&wt!==ht;)ht=ht.parentNode;if(wt===ht)break;wt=wt.parentNode}return!wt&&ke.ownerDocument?ke.ownerDocument.documentElement:wt},wm=(ke,De,wt)=>Io(De)?ei(B,ke,{...wt,isContent:un=>{const uo=un.nodeName.toLowerCase();return!!De[uo]}}):ei(B,ke,wt),by=()=>e.createRange(),vy=(ke,De,wt)=>{let ht=by(),un,uo;if(ke&&De&&ke.parentNode&&De.parentNode){const tr=ke.parentNode;return ht.setStart(tr,ar(ke)),ht.setEnd(De.parentNode,ar(De)),un=ht.extractContents(),ht=by(),ht.setStart(De.parentNode,ar(De)+1),ht.setEnd(tr,ar(ke)+1),uo=ht.extractContents(),tr.insertBefore(p0(wg,un,B),ke),wt?tr.insertBefore(wt,ke):tr.insertBefore(De,ke),tr.insertBefore(p0(wg,uo,B),ke),dl(ke),wt||De}else return},d1=(ke,De,wt,ht)=>{if(kn(ke)){let un=ke.length;const uo=[];for(;un--;)uo[un]=d1(ke[un],De,wt,ht);return uo}else return n.collect&&(ke===e||ke===r)&&T.push([ke,De,wt,ht]),H.bind(ke,De,wt,ht||wg)},Sd=(ke,De,wt)=>{if(kn(ke)){let ht=ke.length;const un=[];for(;ht--;)un[ht]=Sd(ke[ht],De,wt);return un}else{if(T.length>0&&(ke===e||ke===r)){let ht=T.length;for(;ht--;){const[un,uo,tr]=T[ht];ke===un&&(!De||De===uo)&&(!wt||wt===tr)&&H.unbind(un,uo,tr)}}return H.unbind(ke,De,wt)}},Rh=(ke,De,wt)=>H.dispatch(ke,De,wt),yy=(ke,De,wt)=>H.dispatch(ke,De,wt),m1=ke=>{if(ke&&Ei(ke)){const De=ke.getAttribute("data-mce-contenteditable");return De&&De!=="inherit"?De:ke.contentEditable!=="inherit"?ke.contentEditable:null}else return null},wg={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:v,styleSheetLoader:C,boundEvents:T,styles:I,schema:B,events:H,isBlock:ee,root:null,clone:Oe,getRoot:Ke,getViewPort:mt,getRect:Yt,getSize:Bt,getParent:yo,getParents:Wn,get:J,getNext:Cr,getPrev:Pa,select:St,is:Fn,add:Ye,create:Nt,createHTML:Jn,createFragment:Ya,remove:dl,setStyle:He,getStyle:Xe,setStyles:Be,removeAllAttribs:Cm,setAttrib:xe,setAttribs:bo,getAttrib:me,getPos:Ct,parseStyle:$i,serializeStyle:yd,addStyle:Ul,loadCSS:di,addClass:Cd,removeClass:u1,hasClass:tn,toggleClass:mi,show:ao,hide:er,isHidden:ra,uniqueId:ya,setHTML:It,getOuterHTML:Vr,setOuterHTML:zs,decode:yn,encode:Lo,insertAfter:Vs,replace:qc,rename:wd,findCommonAncestor:xf,run:Xt,getAttribs:Ce,isEmpty:wm,createRng:by,nodeIndex:ar,split:vy,bind:d1,unbind:Sd,fire:yy,dispatch:Rh,getContentEditable:m1,getContentEditableParent:ke=>{const De=Ke();let wt=null;for(let ht=ke;ht&&ht!==De&&(wt=m1(ht),wt===null);ht=ht.parentNode);return wt},isEditable:ke=>{if(We(ke)){const De=_t(ke)?ke:ke.parentElement;return We(De)&&Ei(De)&&wi(de.fromDom(De))}else return!1},destroy:()=>{if(T.length>0){let ke=T.length;for(;ke--;){const[De,wt,ht]=T[ke];H.unbind(De,wt,ht)}}bt(c,(ke,De)=>{C.unload(De),delete c[De]})},isChildOf:(ke,De)=>ke===De||De.contains(ke),dumpRng:ke=>"startContainer: "+ke.startContainer.nodeName+", startOffset: "+ke.startOffset+", endContainer: "+ke.endContainer.nodeName+", endOffset: "+ke.endOffset},Qw=Py(I,n,vt(wg));return wg};vs.DOM=vs(document),vs.nodeIndex=ar;const By=vs.DOM,sp=0,M1=1,N1=2,$y=3;class ki{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=By;let u;const f=()=>{c.remove(T),u&&(u.onerror=u.onload=u=null)},v=()=>{f(),o()},C=()=>{f(),r("Failed to load script: "+n)},T=c.uniqueId();u=document.createElement("script"),u.id=T,u.type="text/javascript",u.src=Qe._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=v,u.onerror=C,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===N1}markDone(n){this.states[n]=N1}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=sp),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(C,T)=>{Mo(o.scriptLoadedCallbacks,T).each(B=>{Te(B,I=>I[C](T))}),delete o.scriptLoadedCallbacks[T]},c=C=>{const T=Qt(C,B=>B.status==="rejected");return T.length>0?Promise.reject(Ca(T,({reason:B})=>kn(B)?B:[B])):Promise.resolve()},u=C=>Promise.allSettled(hn(C,T=>o.states[T]===N1?(r("resolve",T),Promise.resolve()):o.states[T]===$y?(r("reject",T),Promise.reject(T)):(o.states[T]=M1,o.loadScript(T).then(()=>{o.states[T]=N1,r("resolve",T);const B=o.queue;return B.length>0?(o.queue=[],u(B).then(c)):Promise.resolve()},()=>(o.states[T]=$y,r("reject",T),Promise.reject(T)))))),f=C=>(o.loading=!0,u(C).then(T=>{o.loading=!1;const B=o.queueLoadedCallbacks.shift();return U.from(B).each(Sr),c(T)})),v=$u(n);return o.loading?new Promise((C,T)=>{o.queueLoadedCallbacks.push(()=>{f(v).then(C,T)})}):f(v)}}ki.ScriptLoader=new ki;const Ks=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},yS=e=>Ot(e)&&an(e,"raw"),Qs=e=>kn(e)&&e.length>1,P1={},cc=Dr("en"),Zf=()=>Mo(P1,cc.get()),ni={getData:()=>Yn(P1,e=>({...e})),setCode:e=>{e&&cc.set(e)},getCode:()=>cc.get(),add:(e,n)=>{let o=P1[e];o||(P1[e]=o={});const r=hn(is(n),c=>c.toLowerCase());bt(n,(c,u)=>{const f=u.toLowerCase();f!==u&&Ks(r,f)?(an(n,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const n=Zf().getOr({}),o=f=>pe(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const v=o(f);return an(n,v)?o(n[v]):Mo(n,v.toLowerCase()).map(o).getOr(v)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(yS(e))return o(e.raw);if(Qs(e)){const f=e.slice(1),v=c(e[0]).replace(/\{([0-9]+)\}/g,(C,T)=>an(f,T)?o(f[T]):C);return u(v)}return u(c(e))},isRtl:()=>Zf().bind(e=>Mo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>an(P1,e)},Ua=()=>{const e=[],n={},o={},r=[],c=(J,re)=>{const me=Qt(r,Ce=>Ce.name===J&&Ce.state===re);Te(me,Ce=>Ce.resolve())},u=J=>an(n,J),f=J=>an(o,J),v=J=>{if(o[J])return o[J].instance},C=(J,re)=>{const me=ni.getCode(),Ce=","+(re||"")+",";!me||re&&Ce.indexOf(","+me+",")===-1||ki.ScriptLoader.add(n[J]+"/langs/"+me+".js")},T=(J,re)=>{Ua.languageLoad!==!1&&(u(J)?C(J,re):ee(J,"loaded").then(()=>C(J,re)))},B=(J,re)=>(e.push(re),o[J]={instance:re},c(J,"added"),re),I=J=>{delete n[J],delete o[J]},H=(J,re)=>le(re)?le(J)?{prefix:"",resource:re,suffix:""}:{prefix:J.prefix,resource:re,suffix:J.suffix}:re,G=(J,re)=>{if(n[J])return Promise.resolve();let me=le(re)?re:re.prefix+re.resource+re.suffix;me.indexOf("/")!==0&&me.indexOf("://")===-1&&(me=Ua.baseURL+"/"+me),n[J]=me.substring(0,me.lastIndexOf("/"));const Ce=()=>(c(J,"loaded"),Promise.resolve());return o[J]?Ce():ki.ScriptLoader.add(me).then(Ce)},ee=(J,re="added")=>re==="added"&&f(J)||re==="loaded"&&u(J)?Promise.resolve():new Promise(me=>{r.push({name:J,state:re,resolve:me})});return{items:e,urls:n,lookup:o,get:v,requireLangPack:T,add:B,remove:I,createUrl:H,load:G,waitFor:ee}};Ua.languageLoad=!0,Ua.baseURL="",Ua.PluginManager=Ua(),Ua.ThemeManager=Ua(),Ua.ModelManager=Ua();const rp=(e,n)=>{let o=null;return{cancel:()=>{ae(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{ae(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},_0=(e,n)=>{let o=null;const r=()=>{ae(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},N4=(e,n,o)=>Id(e,n,o).isSome(),B1=vt("mce-annotation"),jf=vt("data-mce-annotation"),Vg=vt("data-mce-annotation-uid"),Jd=vt("data-mce-annotation-active"),qf=vt("data-mce-annotation-classes"),Gf=vt("data-mce-annotation-attrs"),$1=e=>n=>oo(n,e),CS=(e,n)=>{const o=e.selection.getRng(),r=de.fromDom(o.startContainer),c=de.fromDom(e.getBody()),u=n.fold(()=>"."+B1(),C=>`[${jf()}="${C}"]`),f=nu(r,o.startOffset).getOr(r);return Wt(f,u,$1(c)).bind(C=>js(C,`${Vg()}`).bind(T=>js(C,`${jf()}`).map(B=>{const I=Ug(e,T);return{uid:T,name:B,elements:I}})))},wS=e=>es(e)&&Df(e,B1()),k0=(e,n)=>Uu(e,"data-mce-bogus")||N4(e,'[data-mce-bogus="all"]',$1(n)),Ug=(e,n)=>{const o=de.fromDom(e.getBody()),r=ka(o,`[${Vg()}="${n}"]`);return Qt(r,c=>!k0(c,o))},ap=(e,n)=>{const o=de.fromDom(e.getBody()),r=ka(o,`[${jf()}="${n}"]`),c={};return Te(r,u=>{if(!k0(u,o)){const f=Sa(u,Vg()),v=Mo(c,f).getOr([]);c[f]=v.concat([u])}}),c},A0=(e,n)=>{const o=Dr({}),r=()=>({listeners:[],previous:Fs()}),c=(I,H)=>{u(I,G=>(H(G),G))},u=(I,H)=>{const G=o.get(),ee=Mo(G,I).getOrThunk(r),J=H(ee);G[I]=J,o.set(G)},f=(I,H,G)=>{c(I,ee=>{Te(ee.listeners,J=>J(!0,I,{uid:H,nodes:hn(G,re=>re.dom)}))})},v=I=>{c(I,H=>{Te(H.listeners,G=>G(!1,I))})},C=(I,H)=>{Te(Ug(e,I),G=>{H?kr(G,Jd(),"true"):ts(G,Jd())})},T=_0(()=>{const I=To(n.getNames());Te(I,H=>{u(H,G=>{const ee=G.previous.get();return CS(e,U.some(H)).fold(()=>{ee.each(J=>{v(H),G.previous.clear(),C(J,!1)})},({uid:J,name:re,elements:me})=>{Sl(ee,J)||(ee.each(Ce=>C(Ce,!1)),f(re,J,me),G.previous.set(J),C(J,!0))}),{previous:G.previous,listeners:G.listeners}})})},30);return e.on("remove",()=>{T.cancel()}),e.on("NodeChange",()=>{T.throttle()}),{addListener:(I,H)=>{u(I,G=>({previous:G.previous,listeners:G.listeners.concat([H])}))}}},SS=(e,n)=>{const o=jf(),r=u=>U.from(u.attr(o)).bind(n.lookup),c=u=>{var f,v;u.attr(Vg(),null),u.attr(jf(),null),u.attr(Jd(),null);const C=U.from(u.attr(Gf())).map(H=>H.split(",")).getOr([]),T=U.from(u.attr(qf())).map(H=>H.split(",")).getOr([]);Te(C,H=>u.attr(H,null));const B=(v=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&v!==void 0?v:[],I=Mc(B,[B1()].concat(T));u.attr("class",I.length>0?I.join(" "):null),u.attr(qf(),null),u.attr(Gf(),null)};e.serializer.addTempAttr(Jd()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(v=>{v.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},xS=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>Mo(e,c).map(u=>u.settings),getNames:()=>is(e)}},I1=(e,n,o)=>Math.min(Math.max(e,n),o),ES=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let TS=0;const Wg=e=>{const o=new Date().getTime(),r=Math.floor(ES()*1e9);return TS++,e+"_"+r+TS+String(o)},Iy=(e,n)=>{Te(n,o=>{Zi(e,o)})},_S=(e,n)=>{Te(n,o=>{Nd(e,o)})},O0=(e,n)=>de.fromDom(e.dom.cloneNode(n)),Qd=e=>O0(e,!1),kS=e=>O0(e,!0),P4=(e,n)=>{const o=de.fromTag(n),r=Im(e);return ua(o,r),o},L1=(e,n)=>{const o=P4(e,n);$c(e,o);const r=Lr(e);return Gi(o,r),Ao(e),o},cp=(e,n,o=Ge)=>{const r=new da(e,n),c=u=>{let f;do f=r[u]();while(f&&!rt(f)&&!o(f));return U.from(f).filter(rt)};return{current:()=>U.from(r.current()).filter(rt),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},Kf=(e,n)=>{const o=n||(f=>e.isBlock(f)||co(f)||io(f)),r=(f,v,C,T)=>{if(rt(f)){const B=T(f,v,f.data);if(B!==-1)return U.some({container:f,offset:B})}return C().bind(B=>r(B.container,B.offset,C,T))};return{backwards:(f,v,C,T)=>{const B=cp(f,T??e.getRoot(),o);return r(f,v,()=>B.prev().map(I=>({container:I,offset:I.length})),C).getOrNull()},forwards:(f,v,C,T)=>{const B=cp(f,T??e.getRoot(),o);return r(f,v,()=>B.next().map(I=>({container:I,offset:0})),C).getOrNull()}}},R0=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?U.from(u.dom.nodeValue):U.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(_r,"text"),ip=e=>R0.get(e),B4=e=>R0.getOption(e),AS=(e,n)=>R0.set(e,n),$4=["td","th"],HM=["thead","tbody","tfoot"],zM=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],F1=["li","dd","dt"],VM=["ul","ol","dl"],D0=["pre","script","textarea","style"],Yf=e=>{let n;return o=>(n=n||As(e,pt),an(n,Rn(o)))},H1=e=>Rn(e)==="table",Ns=e=>es(e)&&Rn(e)==="br",OS=Yf(zM),lp=Yf(VM),up=Yf(F1),I4=Yf(HM),oi=Yf($4),si=Yf(D0),RS=e=>{const n=[];let o=e.dom;for(;o;)n.push(de.fromDom(o)),o=o.lastChild;return n},Zg=e=>{const n=ka(e,"br"),o=Qt(RS(e).slice(-1),Ns);n.length===o.length&&Te(o,Ao)},Xf=()=>{const e=de.fromTag("br");return kr(e,"data-mce-bogus","1"),e},Jf=e=>{Ki(e),ps(e,Xf())},L4=(e,n)=>{Ta(e).each(o=>{tu(o).each(r=>{n.isBlock(Rn(e))&&Ns(o)&&n.isBlock(Rn(r))&&Ao(o)})})},Yr=Zh,M0=Ff,tl=Aa,Fy=e=>e.insertContent(Yr,{preserve_zwsp:!0}),DS=_t,Qf=rt,jg=e=>(Qf(e)&&(e=e.parentNode),DS(e)&&e.hasAttribute("data-mce-caret")),nd=e=>Qf(e)&&M0(e.data),Nl=e=>jg(e)||nd(e),Hy=e=>e.firstChild!==e.lastChild||!co(e.firstChild),z1=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Yr),u=e.parentNode;if(n){const f=e.previousSibling;if(Qf(f)){if(Nl(f))return f;if(nl(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(Qf(f)){if(Nl(f))return f;if(Sc(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},od=e=>{const n=e.container();return rt(n)?n.data.charAt(e.offset())===Yr||e.isAtStart()&&nd(n.previousSibling):!1},dp=e=>{const n=e.container();return rt(n)?n.data.charAt(e.offset()-1)===Yr||e.isAtEnd()&&nd(n.nextSibling):!1},so=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Xf().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},Sc=e=>Qf(e)&&e.data[0]===Yr,nl=e=>Qf(e)&&e.data[e.data.length-1]===Yr,zy=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Zm(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},us=e=>e&&e.hasAttribute("data-mce-caret")?(zy(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Vy=e=>jg(e.startContainer),eg=Math.round,qg=e=>e?{left:eg(e.left),top:eg(e.top),bottom:eg(e.bottom),right:eg(e.right),width:eg(e.width),height:eg(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},MS=(e,n)=>(e=qg(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),NS=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,ys=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,mp=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:ys(n.top-e.bottom,e,n)},V1=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:ys(n.bottom-e.top,e,n),PS=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,fp=e=>cs(e,(n,o)=>n.fold(()=>U.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),v=Math.max(o.bottom,r.bottom);return U.some({top:u,right:f,bottom:v,left:c,width:f-c,height:v-u})}),U.none()),Pl=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},F4=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),U1=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Mt=(e,n)=>{if(_t(e)&&e.hasChildNodes()){const o=e.childNodes,r=I1(n,0,o.length-1);return o[r]}else return e},H4=(e,n)=>{if(!(n<0&&_t(e)&&e.hasChildNodes()))return Mt(e,n)},z4=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),Uy=e=>le(e)&&e.charCodeAt(0)>=768&&z4.test(e),BS=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},V4=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},W1=Ze,Gg=io,Kg=co,U4=rt,Z1=Xi(["script","style","textarea"]),$S=Xi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),j1=Xi(["table"]),W4=Nl,zc=e=>W4(e)?!1:U4(e)?!Z1(e.parentNode):$S(e)||Kg(e)||j1(e)||sd(e),Z4=e=>_t(e)&&e.getAttribute("unselectable")==="true",sd=e=>!Z4(e)&&Gg(e),j4=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(sd(o))return!1;if(W1(o))return!0}return!0},q4=e=>sd(e)?!cs(Br(e.getElementsByTagName("*")),(n,o)=>n||W1(o),!1):!1,G4=e=>$S(e)||q4(e),Wy=(e,n)=>zc(e)&&j4(e,n),IS=_t,K4=zc,LS=Pg("display","block table"),Y4=Pg("float","left right"),Yg=V4(IS,K4,zo(Y4)),N0=zo(Pg("white-space","pre pre-line pre-wrap")),gp=rt,Zy=co,FS=vs.nodeIndex,nf=H4,P0=e=>e?e.createRange():vs.DOM.createRng(),B0=e=>le(e)&&/[\r\n\t ]/.test(e),jy=e=>!!e.setStart&&!!e.setEnd,qy=e=>{const n=e.startContainer,o=e.startOffset;if(B0(e.toString())&&N0(n.parentNode)&&rt(n)){const r=n.data;if(B0(r[o-1])||B0(r[o+1]))return!0}return!1},Xg=e=>{const n=e.ownerDocument,o=P0(n),r=n.createTextNode(rr),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=qg(o.getBoundingClientRect());return c.removeChild(r),u},X4=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&rt(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Jg(u)}else return null},Gy=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Jg=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=qg(r[0]):o=qg(e.getBoundingClientRect()),!jy(e)&&Zy(e)&&Gy(o)?Xg(e):Gy(o)&&jy(e)&&(n=X4(e))!==null&&n!==void 0?n:o},Da=(e,n)=>{const o=MS(e,n);return o.width=1,o.right=o.left+1,o},J4=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&NS(f,n[n.length-1])||n.push(f))},r=(f,v)=>{const C=P0(f.ownerDocument);if(v<f.data.length){if(Uy(f.data[v]))return;if(Uy(f.data[v-1])&&(C.setStart(f,v),C.setEnd(f,v+1),!qy(C))){o(Da(Jg(C),!1));return}}v>0&&(C.setStart(f,v-1),C.setEnd(f,v),qy(C)||o(Da(Jg(C),!1))),v<f.data.length&&(C.setStart(f,v),C.setEnd(f,v+1),qy(C)||o(Da(Jg(C),!0)))},c=e.container(),u=e.offset();if(gp(c))return r(c,u),n;if(IS(c))if(e.isAtEnd()){const f=nf(c,u);gp(f)&&r(f,f.data.length),Yg(f)&&!Zy(f)&&o(Da(Jg(f),!1))}else{const f=nf(c,u);if(gp(f)&&r(f,0),Yg(f)&&e.isAtEnd())return o(Da(Jg(f),!1)),n;const v=nf(e.container(),e.offset()-1);Yg(v)&&!Zy(v)&&(LS(v)||LS(f)||!Yg(f))&&o(Da(Jg(v),!1)),Yg(f)&&o(Da(Jg(f),!0))}return n},Ie=(e,n,o)=>{const r=()=>(gp(e),n===0),c=()=>gp(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const B=P0(e.ownerDocument);return B.setStart(e,n),B.setEnd(e,n),B},f=()=>(o||(o=J4(Ie(e,n))),o),v=()=>f().length>0,C=B=>B&&e===B.container()&&n===B.offset(),T=B=>nf(e,B?n-1:n);return{container:vt(e),offset:vt(n),toRange:u,getClientRects:f,isVisible:v,isAtStart:r,isAtEnd:c,isEqual:C,getNode:T}};Ie.fromRangeStart=e=>Ie(e.startContainer,e.startOffset),Ie.fromRangeEnd=e=>Ie(e.endContainer,e.endOffset),Ie.after=e=>Ie(e.parentNode,FS(e)+1),Ie.before=e=>Ie(e.parentNode,FS(e)),Ie.isAbove=(e,n)=>Is(to(n.getClientRects()),xr(e.getClientRects()),mp).getOr(!1),Ie.isBelow=(e,n)=>Is(xr(n.getClientRects()),to(e.getClientRects()),V1).getOr(!1),Ie.isAtStart=e=>e?e.isAtStart():!1,Ie.isAtEnd=e=>e?e.isAtEnd():!1,Ie.isTextPosition=e=>e?rt(e.container()):!1,Ie.isElementPosition=e=>!Ie.isTextPosition(e);const em=(e,n)=>{rt(n)&&n.data.length===0&&e.remove(n)},Q4=(e,n,o)=>{n.insertNode(o),em(e,o.previousSibling),em(e,o.nextSibling)},$0=(e,n,o)=>{const r=U.from(o.firstChild),c=U.from(o.lastChild);n.insertNode(o),r.each(u=>em(e,u.previousSibling)),c.each(u=>em(e,u.nextSibling))},hp=(e,n,o)=>{Rr(o)?$0(e,n,o):Q4(e,n,o)},fu=rt,HS=Zm,zS=vs.nodeIndex,I0=e=>{const n=e.parentNode;return HS(n)?I0(n):n},L0=e=>e?Tr(e.childNodes,(n,o)=>(HS(o)&&o.nodeName!=="BR"?n=n.concat(L0(o)):n.push(o),n),[]):[],F0=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&fu(o);)n+=o.data.length;return n},VS=e=>n=>e===n,ek=e=>{let n,o;n=L0(I0(e)),o=Zo(n,VS(e),e),n=n.slice(0,o+1);const r=Tr(n,(c,u,f)=>(fu(u)&&fu(n[f-1])&&c++,c),0);return n=Iu(n,Xi([e.nodeName])),o=Zo(n,VS(e),e),o-r},Vc=e=>(fu(e)?"text()":e.nodeName.toLowerCase())+"["+ek(e)+"]",H0=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},US=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(fu(r))u=F0(r,c);else{const v=r.childNodes;c>=v.length?(u="after",c=v.length-1):u="before",r=v[c]}o.push(Vc(r));let f=H0(e,r);return f=Iu(f,zo(Zm)),o=o.concat(fc(f,v=>Vc(v))),o.reverse().join("/")+","+u},tk=(e,n,o)=>{let r=L0(e);return r=Iu(r,(c,u)=>!fu(c)||!fu(r[u-1])),r=Iu(r,Xi([n])),r[o]},nk=(e,n)=>{let o=e,r=0;for(;fu(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!fu(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return fu(e)&&n>e.data.length&&(n=e.data.length),Ie(e,n)},WS=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=Tr(r,(f,v)=>{const C=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(v);return C?(C[1]==="text()"&&(C[1]="#text"),tk(f,C[1],parseInt(C[2],10))):null},e);if(!u)return null;if(!fu(u)&&u.parentNode){let f;return c==="after"?f=zS(u)+1:f=zS(u),Ie(u.parentNode,f)}return nk(u,parseInt(c,10))},z0=io,ok=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&rt(c);c=c.previousSibling)r+=e(c.data).length;return r},ZS=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const v=[],C=e.getRoot();if(rt(u))v.push(o?ok(n,u,f):f);else{let T=0;const B=u.childNodes;f>=B.length&&B.length&&(T=1,f=Math.max(0,B.length-1)),v.push(e.nodeIndex(B[f],o)+T)}for(let T=u;T&&T!==C;T=T.parentNode)v.push(e.nodeIndex(T,o));return v},xs=(e,n,o,r)=>{const c=n.dom,u=ZS(c,e,o,r,!0),f=n.isForward(),v=Vy(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...v};{const C=ZS(c,e,o,r,!1);return{start:u,end:C,forward:f,...v}}},pp=(e,n,o)=>{let r=0;return Qe.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},jS=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(_t(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},qS=e=>(jS(e,!0),jS(e,!1),e),V0=(e,n)=>{if(_t(e)&&(e=Mt(e,n),z0(e)))return e;if(Nl(e)){rt(e)&&jg(e)&&(e=e.parentNode);let o=e.previousSibling;if(z0(o)||(o=e.nextSibling,z0(o)))return o}},ic=e=>V0(e.startContainer,e.startOffset)||V0(e.endContainer,e.endOffset),Ai=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||z0(r)){const f=r.nodeName;return{name:f,index:pp(o.dom,f,r)}}const u=ic(c);if(u){const f=u.tagName;return{name:f,index:pp(o.dom,f,u)}}return xs(e,o,n,c)},GS=e=>{const n=e.getRng();return{start:US(e.dom.getRoot(),Ie.fromRangeStart(n)),end:US(e.dom.getRoot(),Ie.fromRangeEnd(n)),forward:e.isForward()}},KS=e=>({rng:e.getRng(),forward:e.isForward()}),Ky=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},q1=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),v=f.nodeName,C=e.isForward();if(v==="IMG")return{name:v,index:pp(o,v,f)};const T=qS(r.cloneRange());if(!u){T.collapse(!1);const I=Ky(o,c+"_end",n);hp(o,T,I)}r=qS(r),r.collapse(!0);const B=Ky(o,c+"_start",n);return hp(o,r,B),e.moveToBookmark({id:c,keep:!0,forward:C}),{id:c,forward:C}},YS=(e,n,o=!1)=>n===2?Ai(tl,o,e):n===3?GS(e):n?KS(e):q1(e,!1),Yy=Je(Ai,Jo,!0),Xy=e=>{const n=u=>u(e),o=vt(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:pt,isError:Ge,map:u=>ri.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>U.some(e)};return c},XS=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:Ge,isError:pt,map:n,mapError:r=>ri.error(r(e)),bind:n,exists:Ge,forall:pt,getOr:Jo,or:Jo,getOrThunk:Co,orThunk:Co,getOrDie:wr(String(e)),each:Ut,toOptional:U.none};return o},ri={value:Xy,error:XS,fromOption:(e,n)=>e.fold(()=>XS(n),Xy)},ho={generate:e=>{if(!kn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return Te(e,(r,c)=>{const u=is(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],v=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!kn(v))throw new Error("case arguments must be an array");n.push(f),o[f]=(...C)=>{const T=C.length;if(T!==v.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+v.length+" ("+v+"), got "+T);return{fold:(...I)=>{if(I.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+I.length);return I[c].apply(null,C)},match:I=>{const H=is(I);if(n.length!==H.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+H.join(","));if(!ks(n,ee=>gn(H,ee)))throw new Error("Not all branches were specified when using match. Specified: "+H.join(", ")+`
Required: `+n.join(", "));return I[f].apply(null,C)},log:I=>{console.log(I,{constructors:n,constructor:f,params:C})}}}}),o}};ho.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const gu=e=>{const n=[],o=[];return Te(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},bp=e=>e.type==="inline-command"||e.type==="inline-format",QS=e=>e.type==="block-command"||e.type==="block-format",Jy=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,ex=e=>{var n;const o=c=>ri.error({message:c,pattern:e}),r=(c,u,f)=>{if(e.format!==void 0){let v;if(kn(e.format)){if(!ks(e.format,le))return o(c+" pattern has non-string items in the `format` array");v=e.format}else if(le(e.format))v=[e.format];else return o(c+" pattern has non-string `format` parameter");return ri.value(u(v))}else return e.cmd!==void 0?le(e.cmd)?ri.value(f(e.cmd,e.value)):o(c+" pattern has non-string `cmd` parameter"):o(c+" pattern is missing both `format` and `cmd` parameters")};if(!Ot(e))return o("Raw pattern is not an object");if(!le(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!le(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let c=e.start,u=e.end;return u.length===0&&(u=c,c=""),r("Inline",f=>({type:"inline-format",start:c,end:u,format:f}),(f,v)=>({type:"inline-command",start:c,end:u,cmd:f,value:v}))}else{if(e.replacement!==void 0)return le(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):ri.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const c=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:c}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:c}))}}},tg=e=>Qt(e,QS),ma=e=>Qt(e,bp),nm=(e,n)=>({inlinePatterns:ma(e),blockPatterns:tg(e),dynamicPatternsLookup:n}),vp=(e,n)=>({...e,blockPatterns:Qt(e.blockPatterns,o=>Jy(o,n))}),tx=e=>{const n=gu(hn(e,ex));return Te(n.errors,o=>console.error(o.message,o.pattern)),n.values},sk=e=>n=>{const o=e(n);return tx(o)},U0=(e,n)=>e.dispatch("PreProcess",n),Qy=(e,n)=>e.dispatch("PostProcess",n),e2=e=>{e.dispatch("remove")},t2=e=>{e.dispatch("detach")},nx=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},ox=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},sx=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},rx=e=>{e.dispatch("PreInit")},rk=e=>{e.dispatch("PostRender")},Wa=e=>{e.dispatch("Init")},ak=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},of=(e,n,o)=>{e.dispatch(n,o)},n2=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},o2=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},ax=(e,n)=>e.dispatch("BeforeSetContent",n),W0=(e,n)=>e.dispatch("SetContent",n),s2=(e,n)=>e.dispatch("BeforeGetContent",n),r2=(e,n)=>e.dispatch("GetContent",n),ck=(e,n)=>{e.dispatch("AutocompleterStart",n)},ik=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},br=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},Mr=e=>{e.dispatch("AutocompleterEnd")},Ma=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),vr=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),Xr=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Hr=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),a2=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),G1=ia().deviceType,K1=G1.isTouch(),fa=vs.DOM,cx=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return cs(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[Bs(u)]=Bs(f),o},{})},Z0=e=>Tt(e,RegExp),Lt=e=>n=>n.options.get(e),Qg=e=>le(e)||Ot(e),c2=(e,n="")=>o=>{const r=le(o);if(r)if(o.indexOf("=")!==-1){const c=cx(o);return{value:Mo(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},UM=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:c2(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:c2(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=le(o)&&No(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=gn(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>bn(o)?{valid:!0,value:o}:le(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||le(o)||fo(o,le);return r?le(o)?{value:hn(o.split(","),Bs),valid:r}:kn(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Q1(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=le(o)||fo(o,le);return r?{value:kn(o)?o:hn(o.split(","),Bs),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=bn(o)||le(o);return r?o===!1||G1.isiPhone()||G1.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!K1}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||le(o)||pe(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||le(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>bn(o)?(e.initialized&&sg(e)!==o&&Promise.resolve().then(()=>{a2(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=fo(o,le);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:Qg}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Qg}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Qg}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Qg}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>le(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>fo(o,Ot)||o===!1?{value:tx(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>pe(o)?{value:sk(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>fo(o,Z0)?{value:o,valid:!0}:Z0(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=gn(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=gn(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:ni.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:fa.getAttrib(e.getElement(),"placeholder")})})},lk=Lt("iframe_attrs"),uk=Lt("doctype"),ai=Lt("document_base_url"),j0=Lt("body_id"),ix=Lt("body_class"),xc=Lt("content_security_policy"),om=Lt("br_in_pre"),Jr=Lt("forced_root_block"),Bl=Lt("forced_root_block_attrs"),Ec=Lt("newline_behavior"),i2=Lt("br_newline_selector"),q0=Lt("no_newline_selector"),l2=Lt("keep_styles"),lx=Lt("end_container_on_empty_block"),G0=Lt("automatic_uploads"),ux=Lt("images_reuse_filename"),dx=Lt("images_replace_blob_uris"),mx=Lt("icons"),dk=Lt("icons_url"),mk=Lt("images_upload_url"),fk=Lt("images_upload_base_path"),u2=Lt("images_upload_credentials"),K0=Lt("images_upload_handler"),fx=Lt("content_css_cors"),Y1=Lt("referrer_policy"),yp=Lt("language"),ng=Lt("language_url"),Y0=Lt("indent_use_margin"),gk=Lt("indentation"),gx=Lt("content_css"),hk=Lt("content_style"),hx=Lt("font_css"),px=Lt("directionality"),Uc=Lt("inline_boundaries_selector"),X0=Lt("object_resizing"),bx=Lt("resize_img_proportional"),d2=Lt("placeholder"),X1=Lt("event_root"),pk=Lt("service_message"),Cp=Lt("theme"),bk=Lt("theme_url"),m2=Lt("model"),vk=Lt("model_url"),J1=Lt("inline_boundaries"),yk=Lt("formats"),Ck=Lt("preview_styles"),J0=Lt("format_empty_lines"),vx=Lt("format_noneditable_selector"),f2=Lt("custom_ui_selector"),Q1=Lt("inline"),yx=Lt("hidden_input"),g2=Lt("submit_patch"),h2=Lt("add_form_submit_trigger"),p2=Lt("add_unload_trigger"),eh=Lt("custom_undo_redo_levels"),Cx=Lt("disable_nodechange"),b2=Lt("readonly"),wx=Lt("editable_root"),Sx=Lt("content_css_cors"),Wc=Lt("plugins"),Q0=Lt("external_plugins"),ev=Lt("block_unsupported_drop"),v2=Lt("visual"),y2=Lt("visual_table_class"),sm=Lt("visual_anchor_class"),tv=Lt("iframe_aria_text"),wk=Lt("setup"),og=Lt("init_instance_callback"),nv=Lt("urlconverter_callback"),Zc=Lt("auto_focus"),WM=Lt("browser_spellcheck"),wp=Lt("protect"),Sk=Lt("paste_block_drop"),eb=Lt("paste_data_images"),xk=Lt("paste_preprocess"),Ek=Lt("paste_postprocess"),xx=Lt("newdocument_content"),Ex=Lt("paste_webkit_styles"),ov=Lt("paste_remove_styles_if_webkit"),Tk=Lt("paste_merge_formats"),_k=Lt("smart_paste"),tb=Lt("paste_as_text"),C2=Lt("paste_tab_spaces"),w2=Lt("allow_html_data_urls"),Tx=Lt("text_patterns"),_x=Lt("text_patterns_lookup"),sv=Lt("noneditable_class"),ZM=Lt("editable_class"),Sp=Lt("noneditable_regexp"),JF=Lt("preserve_cdata"),nb=Lt("highlight_on_focus"),ob=Lt("xss_sanitization"),rv=Lt("init_content_sync"),kk=e=>e.options.isSet("text_patterns_lookup"),kx=e=>Qe.explode(e.options.get("font_size_style_values")),Ak=e=>Qe.explode(e.options.get("font_size_classes")),S2=e=>e.options.get("encoding")==="xml",x2=e=>Qe.explode(e.options.get("images_file_types")),sf=Lt("table_tab_navigation"),sb=Lt("details_initial_state"),Ok=Lt("details_serialized_state"),E2=Lt("sandbox_iframes"),Ax=e=>e.options.get("sandbox_iframes_exclusions"),jM=Lt("convert_unsafe_embeds"),Ox=Lt("license_key"),T2=Lt("api_key"),sg=Lt("disabled"),Rk=_t,_2=rt,k2=e=>{const n=e.parentNode;n&&n.removeChild(e)},A2=e=>{const n=tl(e);return{count:e.length-n.length,text:n}},av=e=>{let n;for(;(n=e.data.lastIndexOf(Yr))!==-1;)e.deleteData(n,1)},O2=(e,n)=>(th(e),n),cv=(e,n)=>{const o=A2(e.data.substr(0,n.offset())),r=A2(e.data.substr(n.offset()));return(o.text+r.text).length>0?(av(e),Ie(e,n.offset()-o.count)):n},xp=(e,n)=>{const o=n.container(),r=kf(Br(o.childNodes),e).map(c=>c<n.offset()?Ie(o,n.offset()-1):n).getOr(n);return th(e),r},R2=(e,n)=>_2(e)&&n.container()===e?cv(e,n):O2(e,n),Dk=(e,n)=>n.container()===e.parentNode?xp(e,n):O2(e,n),Mk=(e,n)=>Ie.isTextPosition(n)?R2(e,n):Dk(e,n),th=e=>{Rk(e)&&Nl(e)&&(Hy(e)?e.removeAttribute("data-mce-caret"):k2(e)),_2(e)&&(av(e),e.data.length===0&&k2(e))},rb=io,Rx=Kr,jc=Gs,qM="*[contentEditable=false],video,audio,embed,object",Nk=(e,n,o)=>{const r=MS(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const v=e.ownerDocument.documentElement;c=e.scrollLeft||v.scrollLeft,u=e.scrollTop||v.scrollTop}else{const v=e.getBoundingClientRect();c=e.scrollLeft-v.left,u=e.scrollTop-v.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},Ep=e=>{var n,o;const r=ka(de.fromDom(e),qM);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(nl(f)){const v=f.data;v.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(v.length-1,1)}f=u.nextSibling,Sc(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},Dx=(e,n,o,r)=>{const c=Fs();let u,f;const v=Jr(e),C=e.dom,T=(J,re)=>{let me;if(B(),jc(re))return null;if(o(re)){const Ce=so(v,re,J),xe=Nk(n,re,J);C.setStyle(Ce,"top",xe.top),C.setStyle(Ce,"caret-color","transparent"),f=Ce;const Oe=C.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});C.setStyles(Oe,{...xe}),C.add(n,Oe),c.set({caret:Oe,element:re,before:J}),J&&C.addClass(Oe,"mce-visual-caret-before"),I(),me=re.ownerDocument.createRange(),me.setStart(Ce,0),me.setEnd(Ce,0)}else return f=z1(re,J),me=re.ownerDocument.createRange(),ab(f.nextSibling)?(me.setStart(f,0),me.setEnd(f,0)):(me.setStart(f,1),me.setEnd(f,1)),me;return me},B=()=>{Ep(n),f&&(th(f),f=null),c.on(J=>{C.remove(J.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},I=()=>{u=setInterval(()=>{c.on(J=>{r()?C.toggleClass(J.caret,"mce-visual-caret-hidden"):C.addClass(J.caret,"mce-visual-caret-hidden")})},500)};return{show:T,hide:B,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(J=>{const re=Nk(n,J.element,J.before);C.setStyles(J.caret,{...re})})},destroy:()=>clearInterval(u)}},Mx=()=>Vt.browser.isFirefox(),ab=e=>rb(e)||Rx(e),rg=e=>(ab(e)||Ol(e)&&Mx())&&Nf(de.fromDom(e)).exists(wi),D2=Ze,Nx=io,Pk=Kr,Px=Pg("display","block table table-cell table-row table-caption list-item"),cb=Nl,Bx=jg,ib=_t,Tp=rt,M2=zc,_p=e=>e===1,nh=e=>e===-1,oh=(e,n)=>{let o;for(;o=e(n);)if(!Bx(o))return o;return null},rf=(e,n,o,r,c)=>{const u=new da(e,r),f=Nx(e)||Bx(e);let v;if(nh(n)){if(f&&(v=oh(u.prev.bind(u),!0),o(v)))return v;for(;v=oh(u.prev.bind(u),c);)if(o(v))return v}if(_p(n)){if(f&&(v=oh(u.next.bind(u),!0),o(v)))return v;for(;v=oh(u.next.bind(u),c);)if(o(v))return v}return null},N2=(e,n)=>{const o=c=>D2(c.dom),r=c=>c.dom===n;return Ci(de.fromDom(e),o,r).map(c=>c.dom).getOr(n)},rm=(e,n)=>{for(;e&&e!==n;){if(Px(e))return e;e=e.parentNode}return null},hu=(e,n,o)=>rm(e.container(),o)===rm(n.container(),o),am=(e,n)=>{if(!n)return U.none();const o=n.container(),r=n.offset();return ib(o)?U.from(o.childNodes[r+e]):U.none()},P2=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},rd=(e,n,o)=>rm(n,e)===rm(o,e),B2=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&cb(u)&&(u=u[r]),Nx(u)||Pk(u)){if(rd(n,u,c))return u;break}if(M2(u))break;c=c.parentNode}return null},sh=Je(P2,!0),kp=Je(P2,!1),$x=(e,n,o)=>{let r;const c=Je(B2,!0,n),u=Je(B2,!1,n),f=o.startContainer,v=o.startOffset;if(jg(f)){const C=Tp(f)?f.parentNode:f,T=C.getAttribute("data-mce-caret");if(T==="before"&&(r=C.nextSibling,rg(r)))return sh(r);if(T==="after"&&(r=C.previousSibling,rg(r)))return kp(r)}if(!o.collapsed)return o;if(rt(f)){if(cb(f)){if(e===1){if(r=u(f),r)return sh(r);if(r=c(f),r)return kp(r)}if(e===-1){if(r=c(f),r)return kp(r);if(r=u(f),r)return sh(r)}return o}if(nl(f)&&v>=f.data.length-1)return e===1&&(r=u(f),r)?sh(r):o;if(Sc(f)&&v<=1)return e===-1&&(r=c(f),r)?kp(r):o;if(v===f.data.length)return r=u(f),r?sh(r):o;if(v===0)return r=c(f),r?kp(r):o}return o},Ix=(e,n)=>am(e?0:-1,n).filter(Nx),lb=(e,n,o)=>{const r=$x(e,n,o);return e===-1?Ie.fromRangeStart(r):Ie.fromRangeEnd(r)},iv=e=>U.from(e.getNode()).map(de.fromDom),Bk=e=>U.from(e.getNode(!0)).map(de.fromDom),ub=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},lv=(e,n)=>{const o=hu(e,n);return!o&&co(e.getNode())?!0:o},Lx=io,pu=rt,Fx=_t,uv=co,rh=zc,Hx=G4,db=Wy,GM=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},zx=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Za=(e,n)=>{if(_p(e)){if(rh(n.previousSibling)&&!pu(n.previousSibling))return Ie.before(n);if(pu(n))return Ie(n,0)}if(nh(e)){if(rh(n.nextSibling)&&!pu(n.nextSibling))return Ie.after(n);if(pu(n))return Ie(n,n.data.length)}return nh(e)?uv(n)?Ie.before(n):Ie.after(n):Ie.before(n)},dv=(e,n)=>{const o=n.nextSibling;return o&&rh(o)?pu(o)?Ie(o,0):Ie.before(o):ag(1,Ie.after(n),e)},ag=(e,n,o)=>{let r,c,u,f;if(!Fx(o)||!n)return null;if(n.isEqual(Ie.after(o))&&o.lastChild){if(f=Ie.after(o.lastChild),nh(e)&&rh(o.lastChild)&&Fx(o.lastChild))return uv(o.lastChild)?Ie.before(o.lastChild):f}else f=n;const v=f.container();let C=f.offset();if(pu(v)){if(nh(e)&&C>0)return Ie(v,--C);if(_p(e)&&C<v.length)return Ie(v,++C);r=v}else{if(nh(e)&&C>0&&(c=zx(v,C-1),rh(c)))return!Hx(c)&&(u=rf(c,e,db,c),u)?pu(u)?Ie(u,u.data.length):Ie.after(u):pu(c)?Ie(c,c.data.length):Ie.before(c);if(_p(e)&&C<v.childNodes.length&&(c=zx(v,C),rh(c)))return uv(c)?dv(o,c):!Hx(c)&&(u=rf(c,e,db,c),u)?pu(u)?Ie(u,0):Ie.before(u):pu(c)?Ie(c,0):Ie.after(c);r=c||f.getNode()}if(r&&(_p(e)&&f.isAtEnd()||nh(e)&&f.isAtStart())&&(r=rf(r,e,pt,o,!0),db(r,o)))return Za(e,r);c=r&&rf(r,e,db,o);const T=gc(Qt(GM(v,o),Lx));return T&&(!c||!T.contains(c))?(_p(e)?f=Ie.after(T):f=Ie.before(T),f):c?Za(e,c):null},ol=e=>({next:n=>ag(1,n,e),prev:n=>ag(-1,n,e)}),Vx=(e,n,o)=>{const r=e?Ie.before(o):Ie.after(o);return sl(e,n,r)},mv=e=>co(e)?Ie.before(e):Ie.after(e),mb=e=>Ie.isTextPosition(e)?e.offset()===0:zc(e.getNode()),Ux=e=>{if(Ie.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return zc(e.getNode(!0))},fb=(e,n)=>!Ie.isTextPosition(e)&&!Ie.isTextPosition(n)&&e.getNode()===n.getNode(!0),Wx=e=>!Ie.isTextPosition(e)&&co(e.getNode()),ah=(e,n,o)=>e?!fb(n,o)&&!Wx(n)&&Ux(n)&&mb(o):!fb(o,n)&&mb(n)&&Ux(o),sl=(e,n,o)=>{const r=ol(n);return U.from(e?r.next(o):r.prev(o))},cg=(e,n,o)=>sl(e,n,o).bind(r=>hu(o,r,n)&&ah(e,o,r)?sl(e,n,r):U.some(r)),ad=(e,n,o,r)=>cg(e,n,o).bind(c=>r(c)?ad(e,n,c,r):U.some(c)),bu=(e,n)=>{const o=e?n.firstChild:n.lastChild;return rt(o)?U.some(Ie(o,e?0:o.data.length)):o?zc(o)?U.some(e?Ie.before(o):mv(o)):Vx(e,n,o):U.none()},ja=Je(sl,!0),Na=Je(sl,!1),zr=Je(bu,!0),vu=Je(bu,!1),fv="_mce_caret",rl=e=>_t(e)&&e.id===fv,ch=(e,n)=>{let o=n;for(;o&&o!==e;){if(rl(o))return o;o=o.parentNode}return null},gv=e=>le(e.start),Zx=e=>an(e,"rng"),jx=e=>an(e,"id"),qx=e=>an(e,"name"),Gx=e=>Qe.isArray(e.start),hv=e=>!qx(e)&&bn(e.forward)?e.forward:!0,Kx=(e,n)=>(_t(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Yx=(e,n)=>{const o=U.from(WS(e.getRoot(),n.start)),r=U.from(WS(e.getRoot(),n.end));return Is(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:hv(n)}})},Ap=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Yr);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},Xx=e=>!e.hasChildNodes(),$k=(e,n)=>vu(e).fold(Ge,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Ik=(e,n,o)=>Xx(n)&&ch(e,n)?(Ap(n,o),!0):!1,Jx=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,v=c[0];for(let C=c.length-1;f&&C>=1;C--){const T=f.childNodes;if(Ik(u,f,r))return!0;if(c[C]>T.length-1)return Ik(u,f,r)?!0:$k(f,r);f=T[c[C]]}rt(f)&&(v=Math.min(c[0],f.data.length)),_t(f)&&(v=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,v):r.setEnd(f,v)}return!0},Op=e=>rt(e)&&e.data.length>0,Lk=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,v;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,v=1):Op(r.nextSibling)?(f=r.nextSibling,v=0):Op(r.previousSibling)?(f=r.previousSibling,v=r.previousSibling.data.length):(f=c,v=e.nodeIndex(r)+1):(f=c,v=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,v=1):Op(r.previousSibling)?(f=r.previousSibling,v=r.previousSibling.data.length):(f=c,v=e.nodeIndex(r)):(f=c,v=e.nodeIndex(r)),!u){const C=r.previousSibling,T=r.nextSibling;Qe.each(Qe.grep(r.childNodes),I=>{rt(I)&&(I.data=I.data.replace(/\uFEFF/g,""))});let B;for(;B=e.get(o.id+"_"+n);)e.remove(B,!0);if(rt(T)&&rt(C)&&!Vt.browser.isOpera()){const I=C.data.length;C.appendData(T.data),e.remove(T),f=C,v=I}}return U.some(Ie(f,v))}else return U.none()},Fk=(e,n)=>{const o=e.createRng();return Jx(e,!0,n,o)&&Jx(e,!1,n,o)?U.some({range:o,forward:hv(n)}):U.none()},ro=(e,n)=>{const o=Lk(e,"start",n),r=Lk(e,"end",n);return Is(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(Kx(e,c.container()),c.offset()),f.setEnd(Kx(e,u.container()),u.offset()),{range:f,forward:hv(n)}})},ig=(e,n)=>U.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),af=(e,n)=>{const o=e.dom;if(n){if(Gx(n))return Fk(o,n);if(gv(n))return Yx(o,n);if(jx(n))return ro(o,n);if(qx(n))return ig(o,n);if(Zx(n))return U.some({range:n.rng,forward:hv(n)})}return U.none()},pv=(e,n,o)=>YS(e,n,o),$2=(e,n)=>{af(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Oi=e=>_t(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",ih=(e=>n=>e===n)(rr),cm=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,gb=e=>!cm(e)&&!ih(e)&&!Ff(e),Qx=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},zk=e=>Ca(e,n=>{const o=U1(n);return o?[de.fromDom(o)]:[]}),KM=e=>Qx(e).length>1,eE=e=>Qt(zk(e),oi),YM=e=>ka(e,"td[data-mce-selected],th[data-mce-selected]"),tE=(e,n)=>{const o=YM(n);return o.length>0?o:eE(e)},lh=e=>tE(Qx(e.selection.getSel()),de.fromDom(e.getBody())),uh=(e,n)=>Id(e,"table",n),dh=e=>{const n=e.startContainer,o=e.startOffset;return rt(n)?o===0?U.some(de.fromDom(n)):U.none():U.from(n.childNodes[o]).map(de.fromDom)},XM=e=>{const n=e.endContainer,o=e.endOffset;return rt(n)?o===n.data.length?U.some(de.fromDom(n)):U.none():U.from(n.childNodes[o-1]).map(de.fromDom)},I2=e=>yi(e).fold(vt([e]),n=>[e].concat(I2(n))),Rp=e=>Ta(e).fold(vt([e]),n=>Rn(n)==="br"?tu(n).map(o=>[e].concat(Rp(o))).getOr([]):[e].concat(Rp(n))),L2=(e,n)=>Is(dh(n),XM(n),(o,r)=>{const c=Cs(I2(e),Je(oo,o)),u=Cs(Rp(e),Je(oo,r));return c.isSome()&&u.isSome()}).getOr(!1),F2=(e,n,o,r)=>{const c=o,u=new da(o,c),f=Wo(e.schema.getMoveCaretBeforeOnEnterElements(),(C,T)=>!gn(["td","th","table"],T.toLowerCase()));let v=o;do{if(rt(v)&&Qe.trim(v.data).length!==0){r?n.setStart(v,0):n.setEnd(v,v.data.length);return}if(f[v.nodeName]){r?n.setStartBefore(v):v.nodeName==="BR"?n.setEndBefore(v):n.setEndAfter(v);return}}while(v=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},Dp=e=>{const n=e.selection.getSel();return We(n)&&n.rangeCount>0},H2=(e,n)=>{const o=lh(e);o.length>0?Te(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},nE=(e,n,o)=>{const r=q1(e,n);o(r),e.moveToBookmark(r)},lg=e=>_s(e==null?void 0:e.nodeType),z2=e=>_t(e)&&!Oi(e)&&!rl(e)&&!Zm(e),Vk=(e,n)=>{if(z2(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},oE=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=io(u);nE(r,!0,()=>{n()}),f&&io(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&cf(c,r)},cf=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,v=n.getNode();if(!Vk(e,v)&&_t(u)){const C=u.childNodes,T=e.getRoot();let B;if(f<C.length){const I=C[f];B=new da(I,(o=e.getParent(I,e.isBlock))!==null&&o!==void 0?o:T)}else{const I=C[C.length-1];B=new da(I,(r=e.getParent(I,e.isBlock))!==null&&r!==void 0?r:T),B.next(!0)}for(let I=B.current();I;I=B.next()){if(e.getContentEditable(I)==="false")return;if(rt(I)&&!U2(I)){c.setStart(I,0),n.setRng(c);return}}}},sE=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(_t(e)||!U2(e))return e}},V2=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||rc(e,n),ug=(e,n,o)=>e.schema.isValidChild(n,o),U2=(e,n=!1)=>{if(We(e)&&rt(e)){const o=n?e.data.replace(/ /g,""):e.data;return xi(o)}else return!1},Dt=e=>We(e)&&rt(e)&&e.length===0,ga=(e,n)=>{const o="[data-mce-cef-wrappable]",r=vx(e),c=Rs(r)?o:`${o},${r}`;return Ha(de.fromDom(n),c)},bv=(e,n)=>{const o=e.dom;return z2(n)&&o.getContentEditable(n)==="false"&&ga(e,n)&&o.select('[contenteditable="true"]',n).length===0},cr=(e,n)=>pe(e)?e(n):(We(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),al=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),vv=(e,n)=>{if(Nn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Xd(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},mh=(e,n,o)=>{const r=e.getStyle(n,o);return vv(r,o)},yv=(e,n)=>{let o;return e.getParent(n,r=>_t(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Cv=(e,n,o)=>e.getParents(n,o,e.getRoot()),W2=(e,n,o)=>{const r=e.formatter.get(n);return We(r)&&vo(r,o)},rE=(e,n)=>W2(e,n,r=>{const c=u=>pe(u)||u.length>1&&u.charAt(0)==="%";return vo(["styles","attributes"],u=>Mo(r,u).exists(f=>{const v=kn(f)?f:Ii(f);return vo(v,c)}))}),Uk=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>Wo(u,(f,v)=>vo(r,C=>C===v));return W2(e,n,u=>{const f=c(u);return W2(e,o,v=>{const C=c(v);return bi(f,C)})})},im=e=>ur(e,"block"),Wk=e=>im(e)&&e.wrapper===!0,Z2=e=>im(e)&&e.wrapper!==!0,$l=e=>ur(e,"selector"),Qr=e=>ur(e,"inline"),wv=e=>$l(e)&&Qr(e)&&Sl(Mo(e,"mixed"),!0),Mp=e=>$l(e)&&e.expand!==!1&&!Qr(e),j2=e=>{const n=[];let o=e;for(;o;){if(rt(o)&&o.data!==Yr||o.childNodes.length>1)return[];_t(o)&&n.push(o),o=o.firstChild}return n},lm=e=>j2(e).length>0,lf=e=>rl(e.dom)&&lm(e.dom),dg=Oi,hb=Cv,ci=U2,fh=V2,Zk=e=>co(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Np=(e,n)=>{let o=n;for(;o;){if(_t(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},aE=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},cE=(e,n,o)=>aE(e,n,o,r=>ih(r)||cm(r)),iE=(e,n,o)=>aE(e,n,o,gb),lE=(e,n,o,r,c,u)=>{let f;const v=e.getParent(o,I=>x1(I)||e.isBlock(I)),C=We(v)?v:n,T=(I,H,G)=>{const ee=Kf(e),J=c?ee.backwards:ee.forwards;return U.from(J(I,H,(re,me)=>dg(re.parentNode)?-1:(f=re,G(c,re,me)),C))};return T(o,r,cE).bind(I=>u?T(I.container,I.offset+(c?-1:0),iE):U.some(I)).orThunk(()=>f?U.some({container:f,offset:c?0:f.length}):U.none())},pb=(e,n,o,r,c)=>{const u=r[c];rt(r)&&Rs(r.data)&&u&&(r=u);const f=hb(e,r);for(let v=0;v<f.length;v++)for(let C=0;C<n.length;C++){const T=n[C];if(!(We(T.collapsed)&&T.collapsed!==o.collapsed)&&$l(T)&&e.is(f[v],T.selector))return f[v]}return r},qa=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),v=n[0];if(im(v)&&(u=v.wrapper?null:e.getParent(o,v.block,f)),!u){const C=(c=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&c!==void 0?c:f;u=e.getParent(rt(o)?o.parentNode:o,T=>T!==f&&fh(e.schema,T),C)}if(u&&im(v)&&v.wrapper&&(u=hb(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!al(u,"br")););return u||o},Il=(e,n,o,r)=>{const c=o.parentNode;return We(o[r])?!1:c===n||Nn(c)||e.isBlock(c)?!0:Il(e,n,c,r)},ii=(e,n,o,r,c,u)=>{let f=o;const v=c?"previousSibling":"nextSibling",C=e.getRoot();if(rt(o)&&!ci(o)&&(c?r>0:r<o.data.length))return o;for(;f;){if(x1(f))return o;if(!n[0].block_expand&&e.isBlock(f))return u?f:o;for(let T=f[v];T;T=T[v]){const B=rt(T)&&!Il(e,C,T,v);if(!dg(T)&&!Zk(T)&&!ci(T,B))return f}if(f===C||f.parentNode===C){o=f;break}f=f.parentNode}return o},gh=e=>dg(e.parentNode)||dg(e),uf=(e,n,o,r={})=>{const{includeTrailingSpace:c=!1,expandToBlock:u=!0}=r,f=e.getParent(n.commonAncestorContainer,G=>x1(G)),v=We(f)?f:e.getRoot();let{startContainer:C,startOffset:T,endContainer:B,endOffset:I}=n;const H=o[0];return _t(C)&&C.hasChildNodes()&&(C=Mt(C,T),rt(C)&&(T=0)),_t(B)&&B.hasChildNodes()&&(B=Mt(B,n.collapsed?I:I-1),rt(B)&&(I=B.data.length)),C=Np(e,C),B=Np(e,B),gh(C)&&(C=dg(C)?C:C.parentNode,n.collapsed?C=C.previousSibling||C:C=C.nextSibling||C,rt(C)&&(T=n.collapsed?C.length:0)),gh(B)&&(B=dg(B)?B:B.parentNode,n.collapsed?B=B.nextSibling||B:B=B.previousSibling||B,rt(B)&&(I=n.collapsed?0:B.length)),n.collapsed&&(lE(e,v,C,T,!0,c).each(({container:J,offset:re})=>{C=J,T=re}),lE(e,v,B,I,!1,c).each(({container:J,offset:re})=>{B=J,I=re})),(Qr(H)||H.block_expand)&&((!Qr(H)||!rt(C)||T===0)&&(C=ii(e,o,C,T,!0,u)),(!Qr(H)||!rt(B)||I===B.data.length)&&(B=ii(e,o,B,I,!1,u))),Mp(H)&&(C=pb(e,o,n,C,"previousSibling"),B=pb(e,o,n,B,"nextSibling")),(im(H)||$l(H))&&(C=qa(e,o,C,"previousSibling"),B=qa(e,o,B,"nextSibling"),im(H)&&(e.isBlock(C)||(C=ii(e,o,C,T,!0,u),rt(C)&&(T=0)),e.isBlock(B)||(B=ii(e,o,B,I,!1,u),rt(B)&&(I=B.data.length)))),_t(C)&&C.parentNode&&(T=e.nodeIndex(C),C=C.parentNode),_t(B)&&B.parentNode&&(I=e.nodeIndex(B)+1,B=B.parentNode),{startContainer:C,startOffset:T,endContainer:B,endOffset:I}},bb=(e,n,o)=>{var r;const c=n.startOffset,u=Mt(n.startContainer,c),f=n.endOffset,v=Mt(n.endContainer,f-1),C=re=>{const me=re[0];rt(me)&&me===u&&c>=me.data.length&&re.splice(0,1);const Ce=re[re.length-1];return f===0&&re.length>0&&Ce===v&&rt(Ce)&&re.splice(re.length-1,1),re},T=(re,me,Ce)=>{const xe=[];for(;re&&re!==Ce;re=re[me])xe.push(re);return xe},B=(re,me)=>e.getParent(re,Ce=>Ce.parentNode===me,me),I=(re,me,Ce)=>{const xe=Ce?"nextSibling":"previousSibling";for(let Oe=re,Ke=Oe.parentNode;Oe&&Oe!==me;Oe=Ke){Ke=Oe.parentNode;const mt=T(Oe===re?Oe:Oe[xe],xe);mt.length&&(Ce||mt.reverse(),o(C(mt)))}};if(u===v)return o(C([u]));const H=(r=e.findCommonAncestor(u,v))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,v))return I(u,H,!0);if(e.isChildOf(v,u))return I(v,H);const G=B(u,H)||u,ee=B(v,H)||v;I(u,G,!0);const J=T(G===u?G:G.nextSibling,"nextSibling",ee===v?ee.nextSibling:ee);J.length&&o(C(J)),I(v,ee)},q2=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],jk=e=>_r(e)&&ip(e)===Yr,G2=(e,n,o,r)=>Ea(n).fold(()=>"skipping",c=>r==="br"||jk(n)?"valid":wS(n)?"existing":rl(n.dom)?"caret":vo(q2,u=>Ha(n,u))?"valid-block":!ug(e,o,r)||!ug(e,Rn(c),o)?"invalid-child":"valid"),qk=(e,n)=>{const o=uf(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},Sv=(e,n,o,r,c,u)=>{const{uid:f=n,...v}=o;Zi(e,B1()),kr(e,`${Vg()}`,f),kr(e,`${jf()}`,r);const{attributes:C={},classes:T=[]}=c(f,v);if(ua(e,C),Iy(e,T),u){T.length>0&&kr(e,`${qf()}`,T.join(","));const B=is(C);B.length>0&&kr(e,`${Gf()}`,B.join(","))}},K2=e=>{Nd(e,B1()),ts(e,`${Vg()}`),ts(e,`${jf()}`),ts(e,`${Jd()}`);const n=js(e,`${Gf()}`).map(r=>r.split(",")).getOr([]),o=js(e,`${qf()}`).map(r=>r.split(",")).getOr([]);Te(n,r=>ts(e,r)),_S(e,o),ts(e,`${qf()}`),ts(e,`${Gf()}`)},uE=(e,n,o,r,c)=>{const u=de.fromTag("span",e);return Sv(u,n,o,r,c,!1),u},xv=(e,n,o,r,c,u)=>{const f=[],v=uE(e.getDoc(),o,u,r,c),C=Fs(),T=()=>{C.clear()},B=()=>C.get().getOrThunk(()=>{const ee=Qd(v);return f.push(ee),C.set(ee),ee}),I=ee=>{Te(ee,H)},H=ee=>{switch(G2(e,ee,"span",Rn(ee))){case"invalid-child":{T();const re=Lr(ee);I(re),T();break}case"valid-block":{T(),Sv(ee,o,u,r,c,!0);break}case"valid":{const re=B();If(ee,re);break}}},G=ee=>{const J=hn(ee,de.fromDom);I(J)};return bb(e.dom,n,ee=>{T(),G(ee)}),f},Y2=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=lh(e).length>0,v=Wg("mce-annotation");if(u.collapsed&&!f&&qk(e,u),c.getRng().collapsed&&!f){const C=uE(e.getDoc(),v,r,n,o.decorate);ou(C,rr),c.getRng().insertNode(C.dom),c.select(C.dom)}else nE(c,!1,()=>{H2(e,C=>{xv(e,C,v,n,o.decorate,r)})})})},Go=e=>{const n=xS();SS(e,n);const o=A0(e,n),r=_l("span"),c=u=>{Te(u,f=>{r(f)?oc(f):K2(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(v=>{Y2(e,u,v,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{CS(e,U.some(u)).each(({elements:f})=>{const v=e.selection.getBookmark();c(f),e.selection.moveToBookmark(v)})},removeAll:u=>{const f=e.selection.getBookmark();bt(ap(e,u),(v,C)=>{c(v)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=ap(e,u);return Yn(f,v=>hn(v,C=>C.dom))}}},cd=e=>({getBookmark:Je(pv,e),moveToBookmark:Je($2,e)});cd.isBookmarkNode=Oi;const dE=(e,n,o)=>o.collapsed?!1:vo(o.getClientRects(),r=>PS(r,e,n)),mE=()=>de.fromDom(document),X2=(e,n=!1)=>e.dom.focus({preventScroll:n}),Ev=e=>{const n=ji(e).dom;return e.dom===n.activeElement},J2=(e=mE())=>U.from(e.dom.activeElement).map(de.fromDom),Pp=e=>J2(ji(e)).filter(n=>e.dom.contains(n.dom)),fE={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Tv=ho.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Gk=(e,n,o,r)=>e.fold(n,o,r),vb=e=>e.fold(Jo,Jo,Jo),gE=Tv.before,Q2=Tv.on,hE=Tv.after,df={before:gE,on:Q2,after:hE,cata:Gk,getStart:vb},_v=ho.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),li=e=>_v.exact(e.start,e.soffset,e.finish,e.foffset),lc=e=>e.match({domRange:n=>de.fromDom(n.startContainer),relative:(n,o)=>df.getStart(n),exact:(n,o,r,c)=>n}),Bp=_v.domRange,QM=_v.relative,Kk=_v.exact,eC=e=>{const n=lc(e);return Gu(n)},eo=fE.create,$p={domRange:Bp,relative:QM,exact:Kk,exactFromRange:li,getWin:eC,range:eo},tC=(e,n)=>{const o=_r(n)?ip(n).length:Lr(n).length+1;return e>o?o:e<0?0:e},nC=e=>$p.range(e.start,tC(e.soffset,e.start),e.finish,tC(e.foffset,e.finish)),pE=(e,n)=>!Vd(n.dom)&&(Ts(e,n)||oo(e,n)),bE=e=>n=>pE(e,n.start)&&pE(e,n.finish),Yk=e=>e.inline||Vt.browser.isFirefox(),e5=e=>$p.range(de.fromDom(e.startContainer),e.startOffset,de.fromDom(e.endContainer),e.endOffset),Xk=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?U.none():U.from(n.getRangeAt(0))).map(e5)},Jk=e=>{const n=Gu(e);return Xk(n.dom).filter(bE(e))},kv=(e,n)=>U.from(n).filter(bE(e)).map(nC),oC=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),U.some(n)}catch{return U.none()}},Av=e=>{const n=Yk(e)?Jk(de.fromDom(e.getBody())):U.none();e.bookmark=n.isSome()?n:e.bookmark},Qk=e=>(e.bookmark?e.bookmark:U.none()).bind(o=>kv(de.fromDom(e.getBody()),o)).bind(oC),t5=e=>{Qk(e).each(n=>e.selection.setRng(n))},sC={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},e3=(e,n)=>(_s(n)||(n=0),setTimeout(e,n)),t3=(e,n)=>(_s(n)||(n=0),setInterval(e,n)),Ft={setEditorTimeout:(e,n,o)=>e3(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=t3(()=>{e.removed?clearInterval(r):n()},o);return r}},vE=e=>e.type==="nodechange"&&e.selectionChange,yE=(e,n)=>{const o=()=>{n.throttle()};vs.DOM.bind(document,"mouseup",o),e.on("remove",()=>{vs.DOM.unbind(document,"mouseup",o)})},rC=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},yb=(e,n)=>{rC(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{vE(o)||Av(e)})},n3=e=>{const n=rp(()=>{Av(e)},0);e.on("init",()=>{e.inline&&yE(e,n),yb(e,n)}),e.on("remove",()=>{n.cancel()})};let Ip;const aC=vs.DOM,o3=e=>_t(e)&&sC.isEditorUIElement(e),Cb=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Ov=(e,n)=>{const o=f2(e);return aC.getParent(n,c=>o3(c)||(o?e.dom.is(c,o):!1))!==null},cC=e=>{try{const n=ji(de.fromDom(e.getElement()));return J2(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},l=(e,n)=>{const o=n.editor;n3(o);const r=(c,u)=>{if(nb(c)&&c.inline!==!0){const f=de.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;Cb(cC(o))&&r(o,Zi),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{Ft.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!Cb(cC(o))||c!==o)&&r(o,Nd),!Ov(o,cC(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Ip||(Ip=c=>{const u=e.activeEditor;u&&Fh(c).each(f=>{const v=f;v.ownerDocument===document&&v!==document.body&&!Ov(u,v)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},aC.bind(document,"focusin",Ip))},m=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&Ip&&(aC.unbind(document,"focusin",Ip),Ip=null)},b=e=>{e.on("AddEditor",Je(l,e)),e.on("RemoveEditor",Je(m,e))},y=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),k=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,N=e=>e.collapsed?U.from(Mt(e.startContainer,e.startOffset)).map(de.fromDom):U.none(),z=(e,n)=>N(n).bind(o=>I4(o)?U.some(o):Ts(e,o)?U.none():U.some(e)),X=(e,n)=>{z(de.fromDom(e.getBody()),n).bind(o=>zr(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},Q=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},fe=e=>Ev(e)||Pp(e).isSome(),_e=e=>We(e.iframeElement)&&Ev(de.fromDom(e.iframeElement)),et=e=>{const n=e.getBody();return n&&fe(de.fromDom(n))},kt=e=>{const n=ji(de.fromDom(e.getElement()));return J2(n).filter(o=>!Cb(o.dom)&&Ov(e,o.dom)).isSome()},it=e=>e.inline?et(e):_e(e),dt=e=>it(e)||kt(e),zt=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const c=f=>{Qk(f).each(v=>{f.selection.setRng(v),r=v})};!it(e)&&e.hasEditableRoot()&&c(e);const u=y(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){k(e,u)||Q(o),Q(u),e.hasEditableRoot()||c(e),X(e,r),nt(e);return}e.inline||(Vt.browser.isOpera()||Q(o),e.getWin().focus()),(Vt.browser.isFirefox()||e.inline)&&(Q(o),X(e,r)),nt(e)},nt=e=>e.editorManager.setActive(e),rn=(e,n)=>{e.removed||(n?nt(e):zt(e))},qe={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||qe.metaKeyPressed(e),metaKeyPressed:e=>Vt.os.isMacOS()||Vt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Pt="data-mce-selected",xo="table,img,figure.image,hr,video,span.mce-preview-object,details",Eo=Math.abs,qt=Math.round,Ko={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Tc=e=>e.type==="longpress"||e.type.indexOf("touch")===0,mg=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,v,C,T,B,I,H,G,ee,J,re,me,Ce,xe,Oe;const Ke=Ye=>We(Ye)&&(Gh(Ye)||o.is(Ye,"figure.image")),mt=Ye=>Kr(Ye)||o.hasClass(Ye,"mce-preview-object"),Ct=(Ye,Nt)=>{if(Tc(Ye)){const yn=Ye.touches[0];return Ke(Ye.target)&&!dE(yn.clientX,yn.clientY,Nt)}else return Ke(Ye.target)&&!dE(Ye.clientX,Ye.clientY,Nt)},He=Ye=>{const Nt=Ye.target;Ct(Ye,n.selection.getRng())&&!Ye.isDefaultPrevented()&&n.selection.select(Nt)},Be=Ye=>o.hasClass(Ye,"mce-preview-object")&&We(Ye.firstElementChild)?[Ye,Ye.firstElementChild]:o.is(Ye,"figure.image")?[Ye.querySelector("img")]:[Ye],Xe=Ye=>{const Nt=X0(n);return!Nt||n.mode.isReadOnly()||Ye.getAttribute("data-mce-resize")==="false"||Ye===n.getBody()?!1:o.hasClass(Ye,"mce-preview-object")&&We(Ye.firstElementChild)?Ha(de.fromDom(Ye.firstElementChild),Nt):Ha(de.fromDom(Ye),Nt)},Bt=(Ye,Nt)=>{if(mt(Nt))return Ye.create("img",{src:Vt.transparentSrc});if(Ol(Nt)){const Lo=Ws(T.name,"n")?to:xr,Jn=Nt.cloneNode(!0);return Lo(Ye.select("tr",Jn)).each(Ya=>{const dl=Ye.select("td,th",Ya);Ye.setStyle(Ya,"height",null),Te(dl,Cm=>Ye.setStyle(Cm,"height",null))}),Jn}else return Nt.cloneNode(!0)},Yt=(Ye,Nt,yn)=>{if(We(yn)){const Lo=Be(Ye);Te(Lo,Jn=>{Jn.style[Nt]||!n.schema.isValid(Jn.nodeName.toLowerCase(),Nt)?o.setStyle(Jn,Nt,yn):o.setAttrib(Jn,Nt,""+yn)})}},Fn=(Ye,Nt,yn)=>{Yt(Ye,"width",Nt),Yt(Ye,"height",yn)},Wn=Ye=>{let Nt,yn,Lo,Jn,Ya;Nt=Ye.screenX-I,yn=Ye.screenY-H,me=Nt*T[2]+G,Ce=yn*T[3]+ee,me=me<5?5:me,Ce=Ce<5?5:Ce,(Ke(f)||mt(f))&&bx(n)!==!1?Lo=!qe.modifierPressed(Ye):Lo=qe.modifierPressed(Ye),Lo&&(Eo(Nt)>Eo(yn)?(Ce=qt(me*J),me=qt(Ce/J)):(me=qt(Ce/J),Ce=qt(me*J))),Fn(v,me,Ce),Jn=T.startPos.x+Nt,Ya=T.startPos.y+yn,Jn=Jn>0?Jn:0,Ya=Ya>0?Ya:0,o.setStyles(C,{left:Jn,top:Ya,display:"block"}),C.innerHTML=me+" &times; "+Ce,Nt=u.scrollWidth-xe,yn=u.scrollHeight-Oe,Nt+yn!==0&&o.setStyles(C,{left:Jn-Nt,top:Ya-yn}),re||(ox(n,f,G,ee,"corner-"+T.name),re=!0)},yo=()=>{const Ye=re;re=!1,Ye&&(Yt(f,"width",me),Yt(f,"height",Ce)),o.unbind(r,"mousemove",Wn),o.unbind(r,"mouseup",yo),c!==r&&(o.unbind(c,"mousemove",Wn),o.unbind(c,"mouseup",yo)),o.remove(v),o.remove(C),o.remove(B),Ro(f),Ye&&(sx(n,f,me,Ce,"corner-"+T.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Ro=Ye=>{Xt();const Nt=o.getPos(Ye,u),yn=Nt.x,Lo=Nt.y,Jn=Ye.getBoundingClientRect(),Ya=Jn.width||Jn.right-Jn.left,dl=Jn.height||Jn.bottom-Jn.top;f!==Ye&&(Pa(),f=Ye,me=Ce=0);const Cm=n.dispatch("ObjectSelected",{target:Ye});Xe(Ye)&&!Cm.isDefaultPrevented()?bt(Ko,($i,yd)=>{const Ul=mi=>{const Cd=Be(f)[0];I=mi.screenX,H=mi.screenY,G=Cd.clientWidth,ee=Cd.clientHeight,J=ee/G,T=$i,T.name=yd,T.startPos={x:Ya*$i[0]+yn,y:dl*$i[1]+Lo},xe=u.scrollWidth,Oe=u.scrollHeight,B=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(B,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),v=Bt(o,f),o.addClass(v,"mce-clonedresizable"),o.setAttrib(v,"data-mce-bogus","all"),v.contentEditable="false",o.setStyles(v,{left:yn,top:Lo,margin:0}),Fn(v,Ya,dl),v.removeAttribute(Pt),u.appendChild(v),o.bind(r,"mousemove",Wn),o.bind(r,"mouseup",yo),c!==r&&(o.bind(c,"mousemove",Wn),o.bind(c,"mouseup",yo)),C=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},G+" &times; "+ee)};let di=o.get("mceResizeHandle"+yd);di&&o.remove(di),di=o.add(u,"div",{id:"mceResizeHandle"+yd,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+yd+"-resize; margin:0; padding:0"}),o.bind(di,"mousedown",mi=>{mi.stopImmediatePropagation(),mi.preventDefault(),Ul(mi)}),$i.elm=di,o.setStyles(di,{left:Ya*$i[0]+yn-di.offsetWidth/2,top:dl*$i[1]+Lo-di.offsetHeight/2})}):Pa(!1)},Cr=rp(Ro,0),Pa=(Ye=!0)=>{Cr.cancel(),Xt(),f&&Ye&&f.removeAttribute(Pt),bt(Ko,(Nt,yn)=>{const Lo=o.get("mceResizeHandle"+yn);Lo&&(o.unbind(Lo),o.remove(Lo))})},Ba=(Ye,Nt)=>o.isChildOf(Ye,Nt),St=Ye=>{if(re||n.removed||n.composing)return;const Nt=Ye.type==="mousedown"?Ye.target:e.getNode(),yn=Wt(de.fromDom(Nt),xo).map(Jn=>Jn.dom).filter(Jn=>o.isEditable(Jn.parentElement)||Jn.nodeName==="IMG"&&o.isEditable(Jn)).getOrUndefined(),Lo=We(yn)?o.getAttrib(yn,Pt,"1"):"1";if(Te(o.select(`img[${Pt}],hr[${Pt}]`),Jn=>{Jn.removeAttribute(Pt)}),We(yn)&&Ba(yn,u)&&dt(n)){bo();const Jn=e.getStart(!0);if(Ba(Jn,yn)&&Ba(e.getEnd(!0),yn)){o.setAttrib(yn,Pt,Lo),Cr.throttle(yn);return}}Pa()},Xt=()=>{bt(Ko,Ye=>{Ye.elm&&(o.unbind(Ye.elm),delete Ye.elm)})},bo=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{bo(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",St),n.on("keyup compositionend",Ye=>{f&&f.nodeName==="TABLE"&&St(Ye)}),n.on("hide blur",Pa),n.on("contextmenu longpress",He,!0)}),n.on("remove",Xt),{isResizable:Xe,showResizeRect:Ro,hideResizeRect:Pa,updateResizeRect:St,destroy:()=>{Cr.cancel(),f=v=B=null}}},yu=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},Kn=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Oo=(e,n,o)=>{const r=e.document.createRange();return yu(r,n),Kn(r,o),r},Ga=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},ea=ho.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ll=(e,n,o)=>n(de.fromDom(o.startContainer),o.startOffset,de.fromDom(o.endContainer),o.endOffset),Ka=(e,n)=>n.match({domRange:o=>({ltr:vt(o),rtl:U.none}),relative:(o,r)=>({ltr:Zr(()=>Oo(e,o,r)),rtl:Zr(()=>U.some(Oo(e,r,o)))}),exact:(o,r,c,u)=>({ltr:Zr(()=>Ga(e,o,r,c,u)),rtl:Zr(()=>U.some(Ga(e,c,u,o,r)))})}),Cu=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>ea.rtl(de.fromDom(c.endContainer),c.endOffset,de.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>Ll(e,ea.ltr,o)):Ll(e,ea.ltr,o)},_c=(e,n)=>{const o=Ka(e,n);return Cu(e,o)};ea.ltr,ea.rtl;const iC=(e,n,o)=>{var r;return U.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(c=>{if(c.offsetNode===null)return U.none();const u=e.createRange();return u.setStart(c.offsetNode,c.offset),u.collapse(),U.some(u)})},wb=(e,n,o)=>{var r;return U.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},um=(e,n,o)=>e.caretPositionFromPoint?iC(e,n,o):e.caretRangeFromPoint?wb(e,n,o):U.none(),ta=(e,n,o)=>{const r=e.document;return um(r,n,o).map(c=>fE.create(de.fromDom(c.startContainer),c.startOffset,de.fromDom(c.endContainer),c.endOffset))},mf=(e,n)=>{const o=Rn(e);return o==="input"?df.after(e):gn(["br","img"],o)?n===0?df.before(e):df.after(e):df.on(e,n)},s3=(e,n)=>{const o=e.fold(df.before,mf,df.after),r=n.fold(df.before,mf,df.after);return $p.relative(o,r)},lC=(e,n,o,r)=>{const c=mf(e,n),u=mf(o,r);return $p.relative(c,u)},r3=e=>e.match({domRange:n=>{const o=de.fromDom(n.startContainer),r=de.fromDom(n.endContainer);return lC(o,n.startOffset,r,n.endOffset)},relative:s3,exact:lC}),uC=(e,n)=>{const r=document.createDocumentFragment();return Te(e,c=>{r.appendChild(c.dom)}),de.fromDom(r)},dC=e=>{const n=$p.getWin(e).dom,o=(c,u,f,v)=>Ga(n,c,u,f,v),r=r3(e);return _c(n,r).match({ltr:o,rtl:o})},CE=(e,n,o)=>ta(e,n,o),Sb=(e,n,o)=>{const r=Gu(de.fromDom(o));return CE(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},a3=(e,n)=>We(e)&&We(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,n5=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},wE=(e,n,o)=>n5(e,n,o)!==null,c3=(e,n,o)=>wE(e,n,r=>r.nodeName===o),i3=(e,n)=>Nl(e)&&!wE(e,n,rl),l3=(e,n,o)=>{const r=n.parentNode;if(r){const c=new da(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(co(u))return!0}return!1},o5=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},s5=(e,n)=>{let o=n;for(;o&&o!==e;){if(io(o))return!0;o=o.parentNode}return!1},Rv=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),v=c.parentNode;let C,T;if(!v)return U.none();const B=e.getParent(v,e.isBlock)||u;if(r&&co(c)&&n&&e.isEmpty(B))return U.some(Ie(v,e.nodeIndex(c)));const I=new da(c,B);for(;T=I[r?"prev":"next"]();){if(e.getContentEditableParent(T)==="false"||i3(T,u))return U.none();if(rt(T)&&T.data.length>0)return c3(T,u,"A")?U.none():U.some(Ie(T,r?T.data.length:0));if(e.isBlock(T)||f[T.nodeName.toLowerCase()])return U.none();C=T}return Or(C)?U.none():o&&C?U.some(Ie(C,0)):U.none()},r5=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,v=o?r.startContainer:r.endContainer,C=o?r.startOffset:r.endOffset;const T=_t(v)&&C===v.childNodes.length,B=e.schema.getNonEmptyElements();let I=o;if(Nl(v))return U.none();if(_t(v)&&C>v.childNodes.length-1&&(I=!1),Hf(v)&&(v=c,C=0),v===c){if(I&&(u=v.childNodes[C>0?C-1:0],u&&(Nl(u)||B[u.nodeName]||Ol(u))))return U.none();if(v.hasChildNodes()){if(C=Math.min(!I&&C>0?C-1:C,v.childNodes.length-1),v=v.childNodes[C],C=rt(v)&&T?v.data.length:0,!n&&v===c.lastChild&&Ol(v)||s5(c,v)||Nl(v)||ru(v))return U.none();if(v.hasChildNodes()&&!Ol(v)){u=v;const H=new da(v,c);do{if(io(u)||Nl(u)){f=!1;break}if(rt(u)&&u.data.length>0){C=I?0:u.data.length,v=u,f=!0;break}if(B[u.nodeName.toLowerCase()]&&!Ji(u)){C=e.nodeIndex(u),v=u.parentNode,I||C++,f=!0;break}}while(u=I?H.next():H.prev())}}}return n&&(rt(v)&&C===0&&Rv(e,T,n,!0,v).each(H=>{v=H.container(),C=H.offset(),f=!0}),_t(v)&&(u=v.childNodes[C],u||(u=v.childNodes[C-1]),u&&co(u)&&!o5(u,"A")&&!l3(e,u,!1)&&!l3(e,u,!0)&&Rv(e,T,n,!0,u).each(H=>{v=H.container(),C=H.offset(),f=!0}))),I&&!n&&rt(v)&&C===v.data.length&&Rv(e,T,n,!1,v).each(H=>{v=H.container(),C=H.offset(),f=!0}),f&&v?U.some(Ie(v,C)):U.none()},mC=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=Ie.fromRangeStart(n);return r5(e,o,!0,r).each(u=>{(!o||!Ie.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||r5(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),a3(n,r)?U.none():U.some(r)},SE=(e,n)=>e.splitText(n),fC=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&rt(n)){if(o>0&&o<n.data.length)if(r=SE(n,o),n=r.previousSibling,c>o){c=c-o;const u=SE(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(rt(n)&&o>0&&o<n.data.length&&(n=SE(n,o),o=0),rt(r)&&c>0&&c<r.data.length){const u=SE(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Lp=e=>({walk:(u,f)=>bb(e,u,f),split:fC,expand:(u,f={type:"word"})=>{if(f.type==="word"){const v=uf(e,u,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),C=e.createRng();return C.setStart(v.startContainer,v.startOffset),C.setEnd(v.endContainer,v.endOffset),C}return u},normalize:u=>mC(e,u).fold(Ge,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Lp.compareRanges=a3,Lp.getCaretRangeFromPoint=Sb,Lp.getSelectedNode=U1,Lp.getNode=Mt;const a5=((e,n)=>{const o=(v,C)=>{if(!_s(C)&&!C.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+C);const T=v.dom;Yu(T)&&(T.style[e]=C+"px")},r=v=>{const C=n(v);if(C<=0||C===null){const T=Ls(v,e);return parseFloat(T)||0}return C},c=r,u=(v,C)=>cs(C,(T,B)=>{const I=Ls(v,B),H=I===void 0?0:parseInt(I,10);return isNaN(H)?T:T+H},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(v,C,T)=>{const B=u(v,T);return C>B?C-B:0}}})("height",e=>{const n=e.dom;return qi(e)?n.getBoundingClientRect().height:n.offsetHeight}),c5=e=>a5.get(e),i5=(e,n)=>e.view(n).fold(vt([]),r=>{const c=e.owner(r),u=i5(e,c);return[r].concat(u)}),e7=(e,n)=>{const o=n.owner(e);return i5(n,o)};var t7=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?U.none():U.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(de.fromDom)},owner:e=>Al(e)});const n7=e=>{const n=mE(),o=Zt(n),r=e7(e,t7),c=An(e),u=hi(r,(f,v)=>{const C=An(v);return{left:f.left+C.left,top:f.top+C.top}},{left:0,top:0});return ge(u.left+c.left+o.left,u.top+c.top+o.top)},u3=e=>Rn(e)==="textarea",o7=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),xE=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},l5=(e,n)=>{const o=Lr(e);if(o.length===0||u3(e))return{element:e,offset:n};if(n<o.length&&!u3(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return u3(r)?{element:e,offset:n}:Rn(r)==="img"?{element:r,offset:1}:_r(r)?{element:r,offset:ip(r).length}:{element:r,offset:Lr(r).length}}},u5=(e,n)=>{const o=Dn(e),r=c5(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},d5=(e,n)=>{const o=l5(e,n),r=de.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Yr+"</span>");return za(o.element,r),u5(r,()=>Ao(r))},m5=e=>u5(de.fromDom(e),Ut),f5=(e,n,o,r)=>{r7(e,(c,u)=>s7(e,n,o,r),o)},g5=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(o7(e,u))return;const f=Zt(n).top;o(e,n,f,r,c),xE(e,u)},s7=(e,n,o,r)=>{const c=de.fromDom(e.getBody()),u=de.fromDom(e.getDoc());Ar(c);const f=d5(de.fromDom(o.startContainer),o.startOffset);g5(e,u,n,f,r),f.cleanup()},h5=(e,n,o,r)=>{const c=de.fromDom(e.getDoc());g5(e,c,o,m5(n),r)},r7=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(de.fromDom(r),de.fromDom(u));const v=e.dom.createRng();v.setStart(r,c),v.setEnd(u,f),e.selection.setRng(o)},EE=(e,n,o,r,c)=>{const u=n.pos;if(r)os(u.left,u.top,c);else{const f=u.top-o+n.height;os(-e.getBody().getBoundingClientRect().left,f,c)}},d3=(e,n,o,r,c,u)=>{const f=r+o,v=c.pos.top,C=c.bottom,T=C-v>=r;v<o?EE(e,c,r,u!==!1,n):v>f?EE(e,c,r,T?u!==!1:u===!0,n):C>f&&!T&&EE(e,c,r,u===!0,n)},gC=(e,n,o,r,c)=>{const u=Gu(n).dom.innerHeight;d3(e,n,o,u,r,c)},p5=(e,n,o,r,c)=>{const u=Gu(n).dom.innerHeight;d3(e,n,o,u,r,c);const f=n7(r.element),v=Vh(window);f.top<v.y?Ds(r.element,c!==!1):f.top>v.bottom&&Ds(r.element,c===!0)},a7=(e,n,o)=>f5(e,gC,n,o),m3=(e,n,o)=>h5(e,n,gC,o),c7=(e,n,o)=>f5(e,p5,n,o),b5=(e,n,o)=>h5(e,n,p5,o),v5=(e,n,o)=>{(e.inline?m3:b5)(e,n,o)},Dv=(e,n,o)=>{(e.inline?a7:c7)(e,n,o)},y5=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),C5=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return U.from(u).map(de.fromDom).map(v=>!r||!n.collapsed?nu(v,c(v,f)).getOr(v):v).bind(v=>es(v)?U.some(v):Ea(v).filter(es)).map(v=>v.dom).getOr(e)},w5=(e,n,o=!1)=>C5(e,n,!0,o,(r,c)=>Math.min(Ku(r),c)),S5=(e,n,o=!1)=>C5(e,n,!1,o,(r,c)=>c>0?c-1:c),hC=(e,n)=>{const o=e;for(;e&&rt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},x5=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),rt(o)&&rt(r)&&(o.length===c?o=hC(o.nextSibling,!0):o=o.parentNode,u===0?r=hC(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const v=rt(f)?f.parentNode:f;return Ei(v)?v:e},E5=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||w5(u,n,n.collapsed),e.isBlock),v=e.getParent(r||S5(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&v&&f!==v){let C;const T=new da(f,u);for(;(C=T.next())&&C!==v;)e.isBlock(C)&&c.push(C)}return v&&f!==v&&v!==u&&c.push(v),c},T5=(e,n,o)=>U.from(n).bind(r=>U.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(F2(e,f,r,!0),F2(e,f,r,!1)),f})),TE=(e,n)=>hn(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),i7={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},_E=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},l7=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!xi(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},_5=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Ri{static create(n,o){const r=new Ri(n,i7[n]||1);return o&&bt(o,(c,u)=>{r.attr(u,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!le(n))return We(n)&&bt(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Ri(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const v=r[u];v.name!=="id"&&(c[c.length]={name:v.name,value:v.value},c.map[v.name]=v.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=_E(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=_E(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(_5(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||_5(f))return!1}if(f.type===8||f.type===3&&!l7(f)||f.type===3&&f.parent&&o[f.parent.name]&&xi((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=_E(f,u));return!0}walk(n){return _E(this,null,n)}}const u7=Qe.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),k5=e=>le(e.nodeValue)&&e.nodeValue.includes(Yr),A5=e=>`${e.length===0?"":`${hn(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,d7=(e,n)=>n.querySelectorAll(A5(e)),O5=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>k5(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),R5=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(k5(n)){const o=n.parentNode;return o&&an(u7,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),m7=e=>O5(e).nextNode()!==null,kE=e=>R5(e).nextNode()!==null,D5=(e,n)=>n.querySelector(A5(e))!==null,M5=(e,n)=>{Te(d7(e,n),o=>{const r=de.fromDom(o);Sa(r,"data-mce-bogus")==="all"?Ao(r):Te(e,c=>{Uu(r,c)&&ts(r,c)})})},N5=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},f7=D(N5,O5),g7=D(N5,R5),P5=(e,n)=>{const o=[{condition:Je(D5,n),action:Je(M5,n)},{condition:m7,action:f7},{condition:kE,action:g7}];let r=e,c=!1;return Te(o,({condition:u,action:f})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),f(r))}),r},B5=e=>{const n=ka(e,"[data-mce-bogus]");Te(n,o=>{Sa(o,"data-mce-bogus")==="all"?Ao(o):Ns(o)?(za(o,de.fromText(Zh)),Ao(o)):oc(o)})},$5=e=>{const n=ka(e,"input");Te(n,o=>{ts(o,"name")})},I5=(e,n)=>{const o=Jr(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},h7=(e,n)=>{const o=e.getDoc(),r=ji(de.fromDom(e.getBody())),c=de.fromTag("div",o);kr(c,"data-mce-bogus","all"),Tn(c,{position:"fixed",left:"-9999999px",top:"0"}),ou(c,n.innerHTML),B5(c),$5(c);const u=Ih(r);ps(u,c);const f=tl(c.dom.innerText);return Ao(c),f},L5=(e,n,o)=>{let r;return n.format==="raw"?r=Qe.trim(tl(P5(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=h7(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=I5(e,e.serializer.serialize(o,n)),n.format!=="text"&&!si(de.fromDom(o))&&le(r)?Qe.trim(r):r},F5=(e,n)=>U.from(e.getBody()).fold(vt(n.format==="tree"?new Ri("body",11):""),o=>L5(e,n,o)),H5=Qe.makeMap,z5=e=>{const n=[];e=e||{};const o=e.indent,r=H5(e.indent_before||""),c=H5(e.indent_after||""),u=Yd.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(v,C,T)=>{if(o&&r[v]&&n.length>0){const B=n[n.length-1];B.length>0&&B!==`
`&&n.push(`
`)}if(n.push("<",v),C)for(let B=0,I=C.length;B<I;B++){const H=C[B];n.push(" ",H.name,'="',u(H.value,!0),'"')}if(!T||f?n[n.length]=">":n[n.length]=" />",T&&o&&c[v]&&n.length>0){const B=n[n.length-1];B.length>0&&B!==`
`&&n.push(`
`)}},end:v=>{let C;n.push("</",v,">"),o&&c[v]&&n.length>0&&(C=n[n.length-1],C.length>0&&C!==`
`&&n.push(`
`))},text:(v,C)=>{v.length>0&&(n[n.length]=C?v:u(v))},cdata:v=>{n.push("<![CDATA[",v,"]]>")},comment:v=>{n.push("<!--",v,"-->")},pi:(v,C)=>{C?n.push("<?",v," ",u(C),"?>"):n.push("<?",v,"?>"),o&&n.push(`
`)},doctype:v=>{n.push("<!DOCTYPE",v,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Fp=(e={},n=Jm())=>{const o=z5(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:C=>{var T;o.text((T=C.value)!==null&&T!==void 0?T:"",C.raw)},8:C=>{var T;o.comment((T=C.value)!==null&&T!==void 0?T:"")},7:C=>{o.pi(C.name,C.value)},10:C=>{var T;o.doctype((T=C.value)!==null&&T!==void 0?T:"")},4:C=>{var T;o.cdata((T=C.value)!==null&&T!==void 0?T:"")},11:C=>{let T=C;if(T=T.firstChild)do v(T);while(T=T.next)}};o.reset();const v=C=>{var T;const B=f[C.type];if(B)B(C);else{const I=C.name,H=I in n.getVoidElements();let G=C.attributes;if(u&&G&&G.length>1){const ee=[];ee.map={};const J=n.getElementRule(C.name);if(J){for(let re=0,me=J.attributesOrder.length;re<me;re++){const Ce=J.attributesOrder[re];if(Ce in G.map){const xe=G.map[Ce];ee.map[Ce]=xe,ee.push({name:Ce,value:xe})}}for(let re=0,me=G.length;re<me;re++){const Ce=G[re].name;if(!(Ce in ee.map)){const xe=G.map[Ce];ee.map[Ce]=xe,ee.push({name:Ce,value:xe})}}G=ee}}if(o.start(I,G,H),E(I))le(C.value)&&o.text(C.value,!0),o.end(I);else if(!H){let ee=C.firstChild;if(ee){(I==="pre"||I==="textarea")&&ee.type===3&&((T=ee.value)===null||T===void 0?void 0:T[0])===`
`&&o.text(`
`,!0);do v(ee);while(ee=ee.next)}o.end(I)}}};return c.type===1&&!e.inner?v(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},V5=new Set;Te(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{V5.add(n)});const U5=new Set;Te(["background-color"],n=>{U5.add(n)});const W5=["font","text-decoration","text-emphasis"],p7=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),Mv=(e,n)=>is(p7(e,n)),b7=e=>V5.has(e),v7=e=>U5.has(e),Z5=(e,n)=>vo(Mv(e,n),o=>b7(o)),y7=(e,n)=>Z5(e,n)&&vo(Mv(e,n),o=>v7(o)),C7=e=>Qt(e,n=>vo(W5,o=>Ws(n,o))),w7=(e,n,o)=>{const r=Mv(e,n),c=Mv(e,o),u=f=>{var v,C;const T=(v=e.getStyle(n,f))!==null&&v!==void 0?v:"",B=(C=e.getStyle(o,f))!==null&&C!==void 0?C:"";return No(T)&&No(B)&&T!==B};return vo(r,f=>{const v=C=>vo(C,T=>T===f);if(!v(c)&&v(W5)){const C=C7(c);return vo(C,u)}else return u(f)})},j5=(e,n,o)=>U.from(o.container()).filter(rt).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),f3=Je(j5,!0,cm),g3=Je(j5,!1,cm),S7=e=>{const n=e.container();return rt(n)&&(n.data.length===0||M0(n.data)&&cd.isBookmarkNode(n.parentNode))},Hp=(e,n)=>o=>am(e?0:-1,o).filter(n).isSome(),Gt=e=>Gh(e)&&Ls(de.fromDom(e),"display")==="block",h3=e=>io(e)&&!Bg(e),q5=Hp(!0,Gt),x7=Hp(!1,Gt),xb=Hp(!0,Kr),pC=Hp(!1,Kr),G5=Hp(!0,Ol),p3=Hp(!1,Ol),zp=Hp(!0,h3),Vp=Hp(!1,h3),AE=e=>e.slice(0,-1),K5=(e,n,o)=>Ts(n,e)?AE(Pf(e,r=>o(r)||oo(r,n))):[],E7=(e,n)=>K5(e,n,Ge),hh=(e,n)=>[e].concat(E7(e,n)),Cn=(e,n,o)=>ad(e,n,o,S7),T7=e=>n=>e.isBlock(Rn(n)),Sn=(e,n,o)=>Cs(hh(de.fromDom(n.container()),e),T7(o)),b3=(e,n,o,r)=>Cn(e,n.dom,o).forall(c=>Sn(n,o,r).fold(()=>!hu(c,o,n.dom),u=>!hu(c,o,n.dom)&&Ts(u,de.fromDom(c.container())))),_7=(e,n,o,r)=>Sn(n,o,r).fold(()=>Cn(e,n.dom,o).forall(c=>!hu(c,o,n.dom)),c=>Cn(e,c.dom,o).isNone()),Y5=Je(_7,!1),X5=Je(_7,!0),IK=Je(b3,!1),LK=Je(b3,!0),k7=e=>iv(e).exists(Ns),OE=(e,n,o,r)=>{const c=Qt(hh(de.fromDom(o.container()),n),f=>r.isBlock(Rn(f))),u=to(c).getOr(n);return sl(e,u.dom,o).filter(k7)},dn=(e,n,o)=>iv(n).exists(Ns)||OE(!0,e,n,o).isSome(),RE=(e,n,o)=>Bk(n).exists(Ns)||OE(!1,e,n,o).isSome(),J5=Je(OE,!1),A7=Je(OE,!0),Nv=e=>Ie.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),v3=(e,n,o)=>{const r=Qt(hh(de.fromDom(n.container()),e),c=>o.isBlock(Rn(c)));return to(r).getOr(e)},Q5=(e,n,o)=>Nv(n)?g3(n):g3(n)||Na(v3(e,n,o).dom,n).exists(g3),eN=(e,n,o)=>Nv(n)?f3(n):f3(n)||ja(v3(e,n,o).dom,n).exists(f3),O7=e=>gn(["pre","pre-wrap"],e),DE=e=>iv(e).bind(n=>ws(n,es)).exists(n=>O7(Ls(n,"white-space"))),R7=(e,n)=>Na(e.dom,n).isNone(),FK=(e,n)=>ja(e.dom,n).isNone(),HK=(e,n,o)=>R7(e,n)||FK(e,n)||Y5(e,n,o)||X5(e,n,o)||RE(e,n,o)||dn(e,n,o),D7=e=>We(e)&&io(e)&&Px(e),tN=(e,n)=>o=>D7(new da(o,e)[n]()),M7=(e,n)=>{const o=ja(e.dom,n).getOr(n),r=tN(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},N7=(e,n)=>{const o=Na(e.dom,n).getOr(n),r=tN(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},y3=(e,n,o)=>DE(n)?!1:HK(e,n,o)||Q5(e,n,o)||eN(e,n,o),bC=(e,n,o)=>DE(n)?!1:Y5(e,n,o)||IK(e,n,o)||RE(e,n,o)||Q5(e,n,o)||N7(e,n),Ln=e=>{const n=e.container(),o=e.offset();return rt(n)&&o<n.data.length?Ie(n,o+1):e},Pv=(e,n,o)=>DE(n)?!1:X5(e,n,o)||LK(e,n,o)||dn(e,n,o)||eN(e,n,o)||M7(e,n),Bv=(e,n,o)=>bC(e,n,o)||Pv(e,Ln(n),o),C3=(e,n)=>ih(e.charAt(n)),w3=(e,n)=>cm(e.charAt(n)),nN=e=>{const n=e.container();return rt(n)&&or(n.data,rr)},oN=e=>{const n=e.split("");return hn(n,(o,r)=>ih(o)&&r>0&&r<n.length-1&&gb(n[r-1])&&gb(n[r+1])?" ":o).join("")},S3=(e,n,o,r)=>{const c=n.data,u=Ie(n,0);return!o&&C3(c,0)&&!Bv(e,u,r)?(n.data=" "+c.slice(1),!0):o&&w3(c,0)&&bC(e,u,r)?(n.data=rr+c.slice(1),!0):!1},P7=e=>{const n=e.data,o=oN(n);return o!==n?(e.data=o,!0):!1},x3=(e,n,o,r)=>{const c=n.data,u=Ie(n,c.length-1);return!o&&C3(c,c.length-1)&&!Bv(e,u,r)?(n.data=c.slice(0,-1)+" ",!0):o&&w3(c,c.length-1)&&Pv(e,u,r)?(n.data=c.slice(0,-1)+rr,!0):!1},B7=(e,n,o)=>{const r=n.container();if(!rt(r))return U.none();if(nN(n)){const c=S3(e,r,!1,o)||P7(r)||x3(e,r,!1,o);return tc(c,n)}else if(Bv(e,n,o)){const c=S3(e,r,!0,o)||x3(e,r,!0,o);return tc(c,n)}else return U.none()},$7=e=>{const n=de.fromDom(e.getBody());e.selection.isCollapsed()&&B7(n,Ie.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},sN=(e,n,o,r)=>{if(o===0)return;const c=de.fromDom(e),u=Ci(c,T=>r.isBlock(Rn(T))).getOr(c),f=e.data.slice(n,n+o),v=n+o>=e.data.length&&Pv(u,Ie(e,e.data.length),r),C=n===0&&bC(u,Ie(e,0),r);e.replaceData(n,o,Yi(f,4,C,v))},ME=(e,n,o)=>{const r=e.data.slice(n),c=r.length-Kl(r).length;sN(e,n,c,o)},E3=(e,n,o)=>{const r=e.data.slice(0,n),c=r.length-Qa(r).length;sN(e,n-c,c,o)},T3=(e,n,o,r,c=!0)=>{const u=Qa(e.data).length,f=c?e:n,v=c?n:e;return c?f.appendData(v.data):f.insertData(0,v.data),Ao(de.fromDom(v)),r&&ME(f,u,o),f},I7=(e,n)=>{const o=e.container(),r=e.offset();return!Ie.isTextPosition(e)&&o===n.parentNode&&r>Ie.before(n).offset()},L7=(e,n)=>I7(n,e)?Ie(n.container(),n.offset()-1):n,_3=e=>rt(e)?Ie(e,0):Ie.before(e),k3=e=>rt(e)?Ie(e,e.data.length):Ie.after(e),rN=e=>zc(e.previousSibling)?U.some(k3(e.previousSibling)):e.previousSibling?vu(e.previousSibling):U.none(),aN=e=>zc(e.nextSibling)?U.some(_3(e.nextSibling)):e.nextSibling?zr(e.nextSibling):U.none(),F7=(e,n)=>U.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Na(e,Ie.before(o))).orThunk(()=>ja(e,Ie.after(n))),H7=(e,n)=>ja(e,Ie.after(n)).orThunk(()=>Na(e,Ie.before(n))),z7=(e,n)=>rN(n).orThunk(()=>aN(n)).orThunk(()=>F7(e,n)),V7=(e,n)=>aN(n).orThunk(()=>rN(n)).orThunk(()=>H7(e,n)),U7=(e,n,o)=>e?V7(n,o):z7(n,o),W7=(e,n,o)=>U7(e,n,o).map(Je(L7,o)),A3=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},Z7=e=>n=>n.dom===e,j7=(e,n)=>n&&an(e.schema.getBlockElements(),Rn(n)),Eb=(e,n,o)=>{if(Se(e,n)){const r=de.fromHtml('<br data-mce-bogus="1">');return o?Te(Lr(n),c=>{lf(c)||Ao(c)}):Ki(n),ps(n,r),U.some(Ie.before(r.dom))}else return U.none()},q7=(e,n,o,r)=>{const c=tu(e).filter(_r),u=Lm(e).filter(_r);return Ao(e),Zn(c,u,n,(f,v,C)=>{const T=f.dom,B=v.dom,I=T.data.length;return T3(T,B,o,r),C.container()===B?Ie(T,I):C}).orThunk(()=>(r&&(c.each(f=>E3(f.dom,f.dom.length,o)),u.each(f=>ME(f.dom,0,o))),n))},cN=(e,n)=>an(e.schema.getTextInlineElements(),Rn(n)),Tb=(e,n,o,r=!0,c=!1)=>{const u=W7(n,e.getBody(),o.dom),f=Ci(o,Je(j7,e),Z7(e.getBody())),v=q7(o,u,e.schema,cN(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(C=>Eb(e.schema,C,c)).fold(()=>{r&&A3(e,n,v)},C=>{r&&A3(e,n,U.some(C))})},G7=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,iN=e=>G7.test(e),Up=(e,n)=>Ha(de.fromDom(n),Uc(e))&&!rc(e.schema,n)&&e.dom.isEditable(n),O3=e=>{var n;return vs.DOM.getStyle(e,"direction",!0)==="rtl"||iN((n=e.textContent)!==null&&n!==void 0?n:"")},lN=(e,n,o)=>Qt(vs.DOM.getParents(o.container(),"*",n),e),ha=(e,n,o)=>{const r=lN(e,n,o);return U.from(r[r.length-1])},K7=(e,n,o)=>{const r=rm(n,e),c=rm(o,e);return We(r)&&r===c},Y7=e=>od(e)||dp(e),id=(e,n)=>{const o=n.container(),r=n.offset();return e?nd(o)?rt(o.nextSibling)?Ie(o.nextSibling,0):Ie.after(o):od(n)?Ie(o,r+1):n:nd(o)?rt(o.previousSibling)?Ie(o.previousSibling,o.previousSibling.data.length):Ie.before(o):dp(n)?Ie(o,r-1):n},uN=Je(id,!0),dN=Je(id,!1),Wp=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},X7=e=>{e.execCommand("delete")},NE=e=>Wp(e,"Delete"),Ps=e=>Wp(e,"ForwardDelete"),PE=e=>n=>Sl(Ea(n),e,oo),vC=e=>OS(e)||up(e),BE=(e,n)=>Ts(e,n)?ws(n,vC,PE(e)):U.none(),Zp=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},wu=(e,n,o)=>Is(zr(o),vu(o),(r,c)=>{const u=id(!0,r),f=id(!1,c),v=id(!1,n);return e?ja(o,v).exists(C=>C.isEqual(f)&&n.isEqual(u)):Na(o,v).exists(C=>C.isEqual(u)&&n.isEqual(f))}).getOr(!0),$v=e=>(Tl(e)?tu(e):Ta(e)).bind($v).orThunk(()=>U.some(e)),$o=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=$v(o).getOr(o),f=de.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?Zp(e,r):Se(e.schema,f,{checkRootAsContent:!1})&&(Jf(f),r&&e.selection.setCursorLocation(f.dom,0)),!oo(o,f)){const v=Sl(Ea(f),o)?[]:eu(f);Te(v.concat(Lr(o)),C=>{!oo(C,f)&&!Ts(C,f)&&Se(e.schema,C)&&Ao(C)})}},yC=e=>n=>oo(e,n),$E=e=>ka(e,"td,th"),R3=(e,n)=>uh(de.fromDom(e),n),IE=e=>Is(e.startTable,e.endTable,(n,o)=>{const r=Wh(n,u=>oo(u,o)),c=Wh(o,u=>oo(u,n));return!r&&!c?e:{...e,startTable:r?U.none():e.startTable,endTable:c?U.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),D3=e=>IE(e),M3=(e,n)=>{const o=R3(e.startContainer,n),r=R3(e.endContainer,n),c=o.isSome(),u=r.isSome(),f=Is(o,r,oo).getOr(!1);return D3({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u})},CC=(e,n)=>({start:e,end:n}),N3=(e,n,o)=>({rng:e,table:n,cells:o}),jp=ho.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Iv=(e,n)=>Wt(de.fromDom(e),"td,th",n),P3=e=>!oo(e.start,e.end),B3=(e,n)=>uh(e.start,n).bind(o=>uh(e.end,n).bind(r=>tc(oo(o,r),o))),mN=(e,n)=>!P3(e)&&B3(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),fN=(e,n)=>{const o=Iv(e.startContainer,n),r=Iv(e.endContainer,n);return Is(o,r,CC)},gN=e=>n=>uh(n,e).bind(o=>xr($E(o)).map(r=>CC(n,r))),Lv=e=>n=>uh(n,e).bind(o=>to($E(o)).map(r=>CC(r,n))),LE=e=>n=>B3(n,e).map(o=>N3(n,o,$E(o))),FE=(e,n,o,r)=>{if(o.collapsed||!e.forall(P3))return U.none();if(n.isSameTable){const c=e.bind(LE(r));return U.some({start:c,end:c})}else{const c=Iv(o.startContainer,r),u=Iv(o.endContainer,r),f=c.bind(gN(r)).bind(LE(r)),v=u.bind(Lv(r)).bind(LE(r));return U.some({start:f,end:v})}},hN=(e,n)=>Pr(e,o=>oo(o,n)),$3=e=>Is(hN(e.cells,e.rng.start),hN(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),pN=(e,n,o)=>e.exists(r=>mN(r,o)&&L2(r.start,n)),I3=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},bN=(e,n,o,r)=>FE(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=$3(c).getOr([]);if(u&&c.cells.length===f.length)return U.some(jp.fullTable(c.table));if(f.length>0){if(u)return U.some(jp.partialTable(f,U.none()));{const v=I3(o,n);return U.some(jp.partialTable(f,U.some({...n,rng:v})))}}else return U.none()}),HE=(e,n,o,r)=>FE(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind($3).getOr([]),v=u.bind($3).getOr([]);if(f.length>0&&v.length>0){const C=I3(o,n);return U.some(jp.multiTable(f,v,C))}else return U.none()}),vN=(e,n)=>{const o=yC(e),r=fN(n,o),c=M3(n,o);return pN(r,n,o)?r.map(u=>jp.singleCellTable(n,u.start)):c.isMultiTable?HE(r,c,n,o):bN(r,c,n,o)},L3=e=>Te(e,n=>{ts(n,"contenteditable"),Jf(n)}),yN=(e,n)=>U.from(e.dom.getParent(n,e.dom.isBlock)).map(de.fromDom),CN=(e,n,o)=>{o.each(r=>{n?Ao(r):(Jf(r),e.selection.setCursorLocation(r.dom,0))})},zE=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),VE(e,c,n,!1).each(u=>u())},F3=e=>{const n=lh(e),o=de.fromDom(e.selection.getNode());Gs(o.dom)&&Se(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&vo(n,r=>oo(r,o))&&kr(o,"data-mce-selected","1")},H3=(e,n,o)=>U.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const v=yN(e,f?u.endContainer:u.startContainer);u.deleteContents(),CN(e,f,v.filter(Je(Se,e.schema)));const C=f?n[0]:n[n.length-1];return zE(e,C,r,f),Se(e.schema,C)?U.none():U.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);L3(c),F3(e)}),wN=(e,n,o,r)=>U.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];zE(e,u,c,!0),zE(e,f,c,!1);const v=Se(e.schema,u)?n:n.slice(1),C=Se(e.schema,f)?o:o.slice(0,-1);L3(v.concat(C)),r.deleteContents(),F3(e)}),VE=(e,n,o,r=!0)=>U.some(()=>{$o(e,n,o,r)}),SN=(e,n)=>U.some(()=>Tb(e,!1,n)),z3=(e,n,o)=>vN(n,o).bind(r=>r.fold(Je(VE,e),Je(SN,e),Je(H3,e),Je(wN,e))),xN=(e,n)=>wC(e,n),EN=(e,n,o,r)=>UE(n,r).fold(()=>z3(e,n,o),c=>xN(e,c)),TN=(e,n,o)=>{const r=de.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?H3(e,o,U.none()):EN(e,r,c,n)},V3=(e,n)=>Cs(hh(n,e),oi),UE=(e,n)=>Cs(hh(n,e),_l("caption")),_N=(e,n,o,r,c)=>cg(o,e.getBody(),c).bind(u=>V3(n,de.fromDom(u.getNode())).bind(f=>oo(f,r)?U.none():U.some(Ut))),wC=(e,n)=>U.some(()=>{Jf(n),e.selection.setCursorLocation(n.dom,0)}),U3=(e,n,o,r)=>zr(e.dom).bind(c=>vu(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),WE=(e,n)=>wC(e,n),kN=(e,n,o)=>UE(e,de.fromDom(o.getNode())).fold(()=>U.some(Ut),r=>tc(!oo(r,n),Ut)),J7=(e,n,o,r,c)=>cg(o,e.getBody(),c).fold(()=>U.some(Ut),u=>U3(r,o,c,u)?WE(e,r):kN(n,r,u)),AN=(e,n,o,r)=>{const c=Ie.fromRangeStart(e.selection.getRng());return V3(o,r).bind(u=>Se(e.schema,u,{checkRootAsContent:!1})?wC(e,u):_N(e,o,n,u,c))},ZE=(e,n,o,r)=>{const c=Ie.fromRangeStart(e.selection.getRng());return Se(e.schema,r)?wC(e,r):J7(e,o,n,r,c)},jE=(e,n)=>e?G5(n):p3(n),SC=(e,n)=>{const o=Ie.fromRangeStart(e.selection.getRng());return jE(n,o)||sl(n,e.getBody(),o).exists(r=>jE(n,r))},W3=(e,n,o)=>{const r=de.fromDom(e.getBody());return UE(r,o).fold(()=>AN(e,n,r,o).orThunk(()=>tc(SC(e,n),Ut)),c=>ZE(e,n,r,c))},qE=(e,n)=>{const o=de.fromDom(e.selection.getStart(!0)),r=lh(e);return e.selection.isCollapsed()&&r.length===0?W3(e,n,o):TN(e,o,r)},dm=(e,n)=>{let o=n;for(;o&&o!==e;){if(Ze(o)||io(o))return o;o=o.parentNode}return null},Z3=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],j3=Qe.each,qp=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const v=T=>{const B={};return j3(n.getAttribs(T),I=>{const H=I.nodeName.toLowerCase();H!=="style"&&!c(H)&&(B[H]=n.getAttrib(T,H))}),B},C=(T,B)=>{for(const I in T)if(an(T,I)){const H=B[I];if(Xo(H)||T[I]!==H)return!1;delete B[I]}for(const I in B)if(an(B,I))return!1;return!0};return _t(u)&&_t(f)&&(!C(v(u),v(f))||!C(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!Oi(u)&&!Oi(f)},c=u=>vo(Z3,f=>Ws(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},ph=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),ON=e=>e.name==="summary",Q7=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},RN=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const v=e[u];if(v.name===c){const C=r.nodes[c];C?C.nodes.push(o):r.nodes[c]={filter:v,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const v=n[u],C=v.name;if(C in o.attributes.map){const T=r.attributes[C];T?T.nodes.push(o):r.attributes[C]={filter:v,nodes:[o]}}}},DN=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&Q7(o,c=>{RN(e,n,c,r)}),r},q3=(e,n)=>{const o=(r,c)=>{bt(r,u=>{const f=Br(u.nodes);Te(u.filter.callbacks,v=>{for(let C=f.length-1;C>=0;C--){const T=f[C];(!(c?T.attr(u.filter.name)!==void 0:T.name===u.filter.name)||Nn(T.parent))&&f.splice(C,1)}f.length>0&&v(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},G3=(e,n,o,r={})=>{const c=DN(e,n,o);q3(c,r)},K3=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new Ri("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Ri("#text",3)).value=rr},Gp=e=>{var n;return Kp(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===rr},Kp=(e,n)=>{const o=e==null?void 0:e.firstChild;return We(o)&&o===e.lastChild&&o.name===n},zK=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},na=(e,n,o,r)=>r.isEmpty(n,o,c=>zK(e,c)),eH=(e,n)=>We(e)&&(n(e)||e.name==="br"),tH=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return U.from(n)},ff=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&ff(c,n,o);e.unwrap()}},po=(e,n,o,r=Ut)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),v=Qe.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),C=new Set,T=B=>B!==o&&!v[B.name];for(let B=0;B<e.length;B++){const I=e[B];let H,G,ee;if(!I.parent||C.has(I))continue;if(c[I.name]&&I.parent.name==="li"){let re=I.next;for(;re&&c[re.name];){re.name="li",C.add(re),I.parent.insert(re,I.parent);re=re.next}I.unwrap();continue}const J=[I];for(H=I.parent;H&&!n.isValidChild(H.name,I.name)&&T(H);H=H.parent)J.push(H);if(H&&J.length>1)if(Y3(n,I,H))ff(I,n);else{J.reverse(),G=J[0].clone(),r(G);let re=G;for(let me=0;me<J.length-1;me++){n.isValidChild(re.name,J[me].name)&&me>0?(ee=J[me].clone(),r(ee),re.append(ee)):ee=re;for(let Ce=J[me].firstChild;Ce&&Ce!==J[me+1];){const xe=Ce.next;ee.append(Ce),Ce=xe}re=ee}na(n,u,f,G)?H.insert(I,J[0],!0):(H.insert(G,J[0],!0),H.insert(I,G)),H=J[0],(na(n,u,f,H)||Kp(H,"br"))&&H.empty().remove()}else if(I.parent){if(I.name==="li"){let re=I.prev;if(re&&(re.name==="ul"||re.name==="ol")){re.append(I);continue}if(re=I.next,re&&(re.name==="ul"||re.name==="ol")&&re.firstChild){re.insert(I,re.firstChild,!0);continue}const me=new Ri("ul",1);r(me),I.wrap(me);continue}if(n.isValidChild(I.parent.name,"div")&&n.isValidChild("div",I.name)){const re=new Ri("div",1);r(re),I.wrap(re)}else ff(I,n)}}},VK=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},Y3=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&VK(o,"a")?!0:ON(o)&&ph(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,nH=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},as=e=>{const n=Ie.fromRangeStart(e),o=Ie.fromRangeEnd(e),r=e.commonAncestorContainer;return sl(!1,r,o).map(c=>!hu(n,o,r)&&hu(n,c,r)?nH(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},GE=e=>e.collapsed?e:as(e),xC=e=>We(e.firstChild)&&e.firstChild===e.lastChild,EC=e=>e.name==="br"||e.value===rr,TC=(e,n)=>e.getBlockElements()[n.name]&&xC(n)&&EC(n.firstChild),_C=(e,n)=>{const o=e.getNonEmptyElements();return We(n)&&(n.isEmpty(o)||TC(e,n))},MN=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),_C(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},UK=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},WK=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return UK(c)},ZK=e=>{var n;return Qt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},jK=e=>e.data===rr||co(e),oH=e=>We(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&jK(e.firstChild),qK=e=>!e.firstChild||oH(e),sH=e=>e.length>0&&qK(e[e.length-1])?e.slice(0,-1):e,X3=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},GK=(e,n)=>!!X3(e,n),rH=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},Hs=(e,n)=>{const o=Ie.before(e),c=ol(n).next(o);return c?c.toRange():null},J3=(e,n)=>{const o=Ie.after(e),c=ol(n).prev(o);return c?c.toRange():null},NN=(e,n,o,r)=>{const c=rH(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Qe.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),J3(n[n.length-1],o)},aH=(e,n,o)=>{const r=e.parentNode;return r&&Qe.each(n,c=>{r.insertBefore(c,e)}),Hs(e,o)},cH=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),J3(n[0],o)),iH=(e,n,o,r)=>{const c=WK(n,e,r),u=X3(n,o.startContainer),f=sH(ZK(c.firstChild)),v=1,C=2,T=n.getRoot(),B=I=>{const H=Ie.fromRangeStart(o),G=ol(n.getRoot()),ee=I===v?G.prev(H):G.next(H),J=ee==null?void 0:ee.getNode();return J?X3(n,J)!==u:!0};return u?B(v)?aH(u,f,T):B(C)?cH(u,f,T,n):NN(u,f,T,o):null},Fl=["pre"],mm=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,v=f.attr("data-mce-type")==="bookmark"?f.prev:f,C=u===v,T=gn(Fl,u.name);if(C&&T){const B=u.attr("contenteditable")!=="false",I=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,H=U.from(dm(r,o)).forall(Ze);return B&&I&&H}else return!1},KE=Gs,Q3=(e,n,o)=>{if(We(o)){const r=e.getParent(n.endContainer,KE);return o===r&&L2(de.fromDom(o),n)}else return!1},eA=(e,n)=>{if(e.isBlock(n)&&e.isEditable(n)){const o=n.childNodes;return o.length===1&&co(o[0])||o.length===0}else return!1},YE=(e,n,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o):eA(e.dom,o)?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})},lH=(e,n,o)=>{U.from(e.getParent(n,"td,th")).map(de.fromDom).each(r=>L4(r,o))},PN=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=qp(e),f="*[data-mce-fragment]",v=r.select(f);Qe.each(v,C=>{const T=H=>We(o[H.nodeName.toLowerCase()]),B=H=>H.childNodes.length===1;if((H=>!(Z5(r,H)||y7(r,H)))(C)&&T(C)&&B(C)){const H=Mv(r,C),G=(me,Ce)=>ks(me,xe=>gn(Ce,xe)),ee=me=>B(C)&&r.is(me,f)&&T(me)&&(me.nodeName===C.nodeName&&G(H,Mv(r,me))||ee(me.children[0])),J=me=>We(me)&&me!==c&&(u.compare(C,me)||J(me.parentElement)),re=me=>We(me)&&me!==c&&r.is(me,f)&&(w7(r,C,me)||re(me.parentElement));(ee(C.children[0])||J(C.parentElement)&&!re(C.parentElement))&&r.remove(C,!0)}})}},kC=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},uH=e=>{Qe.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},XE=e=>!!e.getAttribute("data-mce-fragment"),tA=(e,n)=>We(n)&&!e.schema.getVoidElements()[n.nodeName],BN=(e,n)=>{var o,r,c;let u;const f=e.dom,v=e.selection;if(!n)return;v.scrollIntoView(n);const C=dm(e.getBody(),n);if(C&&f.getContentEditable(C)==="false"){f.remove(n),v.select(C);return}let T=f.createRng();const B=n.previousSibling;if(rt(B)){T.setStart(B,(r=(o=B.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const G=n.nextSibling;rt(G)&&(B.appendData(G.data),(c=G.parentNode)===null||c===void 0||c.removeChild(G))}else T.setStartBefore(n),T.setEndBefore(n);const I=G=>{let ee=Ie.fromRangeStart(G);return ee=ol(e.getBody()).next(ee),ee==null?void 0:ee.toRange()},H=f.getParent(n,f.isBlock);if(f.remove(n),H&&f.isEmpty(H)){const G=KE(H);Ki(de.fromDom(H)),T.setStart(H,0),T.setEnd(H,0),!G&&!XE(H)&&(u=I(T))?(T=u,f.remove(H)):f.add(H,f.create("br",G?{}:{"data-mce-bogus":"1"}))}v.setRng(T)},AC=e=>{const n=e.dom,o=GE(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,KE);Q3(n,o,r)?VE(e,o,de.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&rt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},dH=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return U.some(n);return U.none()},mH=(e,n,o)=>{var r;return vo(o.children(),ph)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},gf=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,v=e.parser,C=o.merge,T=Fp({validate:!0},e.schema),B='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=tl(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,B);let I=u.getRng();const H=I.startContainer,G=e.getBody();H===G&&u.isCollapsed()&&f.isBlock(G.firstChild)&&tA(e,G.firstChild)&&f.isEmpty(G.firstChild)&&(I=f.createRng(),I.setStart(G.firstChild,0),I.setEnd(G.firstChild,0),u.setRng(I)),u.isCollapsed()||AC(e);const ee=u.getNode(),J={context:ee.nodeName.toLowerCase(),data:o.data,insert:!0},re=v.parse(n,J);if(o.paste===!0&&MN(e.schema,re)&&GK(f,ee))return I=iH(T,f,u.getRng(),re),I&&u.setRng(I),n;o.paste===!0&&mm(f,re,ee,e.getBody())&&((r=re.firstChild)===null||r===void 0||r.unwrap()),kC(re);let me=re.lastChild;if(me&&me.attr("id")==="mce_marker"){const Ce=me;for(me=me.prev;me&&me.name!=="table";me=me.walk(!0))if(me.type===3||!f.isBlock(me.name)){me.parent&&e.schema.isValidChild(me.parent.name,"span")&&me.parent.insert(Ce,me,me.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(ee),!J.invalid&&!mH(f,ee,re))n=T.serialize(re),YE(e,n,ee);else{e.selection.setContent(B);let Ce=u.getNode(),xe;const Oe=e.getBody();for(Hf(Ce)?Ce=xe=Oe:xe=Ce;xe&&xe!==Oe;)Ce=xe,xe=xe.parentNode;n=Ce===Oe?Oe.innerHTML:f.getOuterHTML(Ce);const Ke=v.parse(n),mt=dH(Ke),Ct=mt.bind(tH).getOr(Ke);mt.each(Bt=>Bt.replace(re));const He=re.children(),Be=(c=re.parent)!==null&&c!==void 0?c:Ke;re.unwrap();const Xe=Qt(He,Bt=>Y3(e.schema,Bt,Be));po(Xe,e.schema,Ct),G3(v.getNodeFilters(),v.getAttributeFilters(),Ke),n=T.serialize(Ke),Ce===Oe?f.setHTML(Oe,n):f.setOuterHTML(Ce,n)}return PN(e,C),BN(e,f.get("mce_marker")),uH(e.getBody()),lH(f,u.getStart(),e.schema),Lc(e.schema,e.getBody(),u.getStart()),n},ui=e=>e instanceof Ri,OC=e=>{it(e)&&zr(e.getBody()).each(n=>{const o=n.getNode(),r=Ol(o)?zr(o).getOr(n):n;e.selection.setRng(r.toRange())})},Di=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&OC(e)},fH=(e,n,o,r)=>{if(o=tl(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=Jr(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,Bl(e),o)):o||(o=c),Di(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Fp({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=si(de.fromDom(n))?o:Qe.trim(o);return Di(e,c,r.no_selection),{content:c,html:c}}},ds=(e,n,o,r)=>{G3(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Fp({validate:!1},e.schema).serialize(o),u=tl(si(de.fromDom(n))?c:Qe.trim(c));return Di(e,u,r.no_selection),{content:o,html:u}},gH=(e,n,o)=>U.from(e.getBody()).map(r=>ui(n)?ds(e,r,n,o):fH(e,r,n,o)).getOr({content:n,html:ui(o.content)?"":o.content}),Yp=e=>pe(e)?e:Ge,RC=(e,n,o)=>{let r=e.dom;const c=Yp(o);for(;r.parentNode;){r=r.parentNode;const u=de.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return U.none()},JE=(e,n,o)=>{const r=n(e),c=Yp(o);return r.orThunk(()=>c(e)?U.none():RC(e,n,c))},DC=al,QE=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if($l(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},nA=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,v=>QE(e,v,o)?!0:v.parentNode===u||!!hf(e,v,o,r,!0));return!!hf(e,f,o,r,c)},Fv=(e,n,o)=>Qr(o)&&DC(n,o.inline)||im(o)&&DC(n,o.block)?!0:$l(o)?_t(n)&&e.is(n,o.selector):!1,$N=(e,n,o,r,c,u)=>{const f=o[r],v=r==="attributes";if(pe(o.onmatch))return o.onmatch(n,o,r);if(f){if(_m(f)){for(let C=0;C<f.length;C++)if(v?e.getAttrib(n,f[C]):mh(e,n,f[C]))return!0}else for(const C in f)if(an(f,C)){const T=v?e.getAttrib(n,C):mh(e,n,C),B=cr(f[C],u),I=Nn(T)||Rs(T);if(I&&Nn(B))continue;if(c&&I&&!o.exact||(!c||o.exact)&&!DC(T,vv(B,C)))return!1}}return!0},hf=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&_t(n))for(let v=0;v<u.length;v++){const C=u[v];if(Fv(e.dom,n,C)&&$N(f,n,C,"attributes",c,r)&&$N(f,n,C,"styles",c,r)){const T=C.classes;if(T){for(let B=0;B<T.length;B++)if(!e.dom.hasClass(n,cr(T[B],r)))return}return C}}},eT=(e,n,o,r,c)=>{if(r)return nA(e,r,n,o,c);if(r=e.selection.getNode(),nA(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&nA(e,u,n,o,c))},oA=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let v=0;v<n.length;v++){const C=n[v];!c[C]&&hf(e,f,C,o)&&(c[C]=!0,r.push(C))}},e.dom.getRoot()),r},IN=(e,n)=>{const o=c=>oo(c,de.fromDom(e.getBody())),r=(c,u)=>hf(e,c.dom,u)?U.some(u):U.none();return U.from(e.selection.getStart(!0)).bind(c=>JE(de.fromDom(c),u=>vl(n,f=>r(u,f)),o)).getOrNull()},tT=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=Cv(r,c);for(let f=o.length-1;f>=0;f--){const v=o[f];if(!$l(v))return!0;for(let C=u.length-1;C>=0;C--)if(r.is(u[C],v.selector))return!0}}return!1},hH=(e,n,o)=>cs(o,(r,c)=>{const u=rE(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),MC=Yr,pH=(e,n)=>e.importNode(n,!0),LN=e=>{if(e){const n=new da(e,e);for(let o=n.current();o;o=n.next())if(rt(o))return o}return null},sA=e=>{const n=de.fromTag("span");return ua(n,{id:fv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&ps(n,de.fromText(MC)),n},FN=e=>{const n=LN(e);return n&&n.data.charAt(0)===MC&&n.deleteData(0,1),n},rA=(e,n,o)=>{const r=e.dom,c=e.selection;if(lm(n))Tb(e,!1,de.fromDom(n),o,!0);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),v=u.startContainer,C=u.startOffset,T=u.endContainer,B=u.endOffset,I=FN(n);r.remove(n,!0),v===I&&C>0&&u.setStart(I,C-1),T===I&&B>0&&u.setEnd(I,B-1),f&&r.isEmpty(f)&&Jf(de.fromDom(f)),c.setRng(u)}},aA=(e,n,o)=>{const r=e.dom,c=e.selection;if(n)rA(e,n,o);else if(n=ch(e.getBody(),c.getStart()),!n)for(;n=r.get(fv);)rA(e,n,o)},HN=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,Je(V2,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(Zg(de.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},zN=(e,n)=>(e.appendChild(n),n),cA=(e,n)=>{var o;const r=hi(e,(u,f)=>zN(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return zN(r,c.createTextNode(MC))},NC=(e,n,o,r,c,u)=>{const f=e.formatter,v=e.dom,C=Qt(is(f.get()),I=>I!==r&&!or(I,"removeformat")),T=hH(e,o,C);if(Qt(T,I=>!Uk(e,I,r)).length>0){const I=o.cloneNode(!1);return v.add(n,I),f.remove(r,c,I,u),v.remove(I),U.some(I)}else return U.none()},VN=e=>AS(e,ip(e).replace(new RegExp(`${rr}$`)," ")),UN=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&tu(de.fromDom(n)).each(r=>{_r(r)?VN(r):$d(r,c=>_r(c)).each(c=>{_r(c)&&VN(c)})})};e.once("input",r=>{r.data&&!cm(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},WN=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let v=f.startOffset;const T=f.startContainer.nodeValue;r=ch(e.getBody(),c.getStart());const B=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(T&&v>0&&v<T.length&&B.test(T.charAt(v))&&B.test(T.charAt(v-1))){const I=c.getBookmark();f.collapse(!0);let H=uf(e.dom,f,u);H=fC(H),e.formatter.apply(n,o,H),c.moveToBookmark(I)}else{let I=r?LN(r):null;(!r||(I==null?void 0:I.data)!==MC)&&(r=pH(e.getDoc(),sA(!0).dom),I=r.firstChild,f.insertNode(r),v=1,UN(e,r)),e.formatter.apply(n,o,r),c.setCursorLocation(I,v)}},ZN=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const v=e.formatter.get(n);if(!v)return;const C=u.getRng(),T=C.startContainer,B=C.startOffset;let I=T;rt(T)&&(B!==T.data.length&&(f=!0),I=I.parentNode);const H=[];let G;for(;I;){if(hf(e,I,n,o,r)){G=I;break}I.nextSibling&&(f=!0),H.push(I),I=I.parentNode}if(G)if(f){const ee=u.getBookmark();C.collapse(!0);let J=uf(c,C,v,{includeTrailingSpace:!0});J=fC(J),e.formatter.remove(n,o,J,r),u.moveToBookmark(ee)}else{const ee=ch(e.getBody(),G),J=We(ee)?c.getParents(G.parentNode,pt,ee):[],re=sA(!1).dom;HN(e,re,ee??G);const me=NC(e,re,G,n,o,r),Ce=cA([...H,...me.toArray(),...J],re);ee&&rA(e,ee,We(ee)),u.setCursorLocation(Ce,1),UN(e,re),c.isEmpty(G)&&c.remove(G)}},bH=(e,n,o)=>{const r=e.selection,c=e.getBody();aA(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===MC&&aA(e,ch(c,r.getStart()),!0),(n===37||n===39)&&aA(e,ch(c,r.getStart()),!0)},jN=e=>rt(e)&&wa(e.data,rr),ld=e=>{e.on("mouseup keydown",n=>{bH(e,n.keyCode,jN(e.selection.getRng().endContainer))})},qN=e=>{const n=sA(!1),o=cA(e,n.dom);return{caretContainer:n,caretPosition:Ie(o,0)}},iA=(e,n)=>{const{caretContainer:o,caretPosition:r}=qN(n);return za(de.fromDom(e),o),Ao(de.fromDom(e)),r},lA=(e,n)=>{const{caretContainer:o,caretPosition:r}=qN(n);return e.insertNode(o.dom),r},nT=(e,n)=>{if(rl(n.dom))return!1;const o=e.schema.getTextInlineElements();return an(o,Rn(n))&&!rl(n.dom)&&!Zm(n.dom)},Hv={},uA=Xi(["pre"]),vH=(e,n)=>{Hv[e]||(Hv[e]=[]),Hv[e].push(n)},yH=(e,n)=>{an(Hv,e)&&Te(Hv[e],o=>{o(n)})};vH("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return uA(f)&&gn(c,f)},r=(c,u)=>{const f=de.fromDom(u),v=Al(f).dom;Ao(f),Gi(de.fromDom(c),[de.fromTag("br",v),de.fromTag("br",v),...Lr(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=Qt(Qt(c,uA),o(c));Te(u,f=>{r(f.previousSibling,f)})}});const dA=["fontWeight","fontStyle","color","fontSize","fontFamily"],GN=e=>Ot(e.styles)&&vo(is(e.styles),n=>gn(dA,n)),Su=e=>Cs(e,n=>Qr(n)&&n.inline==="span"&&GN(n)),KN=(e,n)=>{const o=e.get(n);return kn(o)?Su(o):U.none()},YN=(e,n)=>Na(n,Ie.fromRangeStart(e)).isNone(),CH=(e,n)=>ja(n,Ie.fromRangeEnd(e)).exists(o=>!co(o.getNode())||ja(n,o).isSome())===!1,oT=e=>n=>_y(n)&&e.isEditable(n),wH=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return YN(o,n[0])&&CH(o,n[0])?n:[];{const r=to(n).filter(f=>YN(o,f)).toArray(),c=xr(n).filter(f=>CH(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},KK=e=>Qt(wH(e),oT(e.dom)),XN=e=>Qt(e.getSelectedBlocks(),oT(e.dom)),PC=Qe.each,ud=e=>_t(e)&&!Oi(e)&&!rl(e)&&!Zm(e),sT=(e,n)=>{for(let o=e;o;o=o[n]){if(rt(o)&&No(o.data))return e;if(_t(o)&&!Oi(o))return o}return e},BC=(e,n,o)=>{const r=qp(e),c=Ei(n)&&e.dom.isEditable(n),u=Ei(o)&&e.dom.isEditable(o);if(c&&u){const f=sT(n,"previousSibling"),v=sT(o,"nextSibling");if(r.compare(f,v)){for(let C=f.nextSibling;C&&C!==v;){const T=C;C=C.nextSibling,f.appendChild(T)}return e.dom.remove(v),Qe.each(Qe.grep(v.childNodes),C=>{f.appendChild(C)}),f}}return o},rT=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=BC(e,sE(r),r))!==null&&c!==void 0?c:r;BC(e,u,sE(u,!0))}},SH=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";PC(e.select(r,o),c=>{ud(c)&&e.isEditable(c)&&PC(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},aT=(e,n,o)=>{PC(e.childNodes,r=>{ud(r)&&(n(r)&&o(r),r.hasChildNodes()&&aT(r,n,o))})},xH=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},mA=(e,n)=>o=>!!(o&&mh(e,o,n)),cT=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),xH(e,r)},_b=ho.generate([{keep:[]},{rename:["name"]},{removed:[]}]),JN=/^(src|href|style)$/,fA=Qe.each,fg=al,QN=e=>/^(TR|TH|TD)$/.test(e.nodeName),eP=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),gA=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(_t(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return rt(r)&&o&&c>=r.data.length&&(r=new da(r,e.getBody()).next()||r),rt(r)&&!o&&c===0&&(r=new da(r,e.getBody()).prev()||r),r},tP=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return QN(e)&&r?e.nodeName==="TR"&&r[o]||r:e},hA=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},nP=(e,n,o,r,c)=>{const u=de.fromDom(n),f=de.fromDom(e.create(r,c)),v=o?Fm(u):Bc(u);return Gi(f,v),o?(za(u,f),Fd(f,u)):($c(u,f),ps(f,u)),f.dom},EH=(e,n)=>n.links&&e.nodeName==="A",oP=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=Jr(e);im(o)&&r===u.getRoot()&&(!o.list_block||!fg(n,o.list_block))&&Te(Br(n.childNodes),v=>{ug(e,f,v.nodeName.toLowerCase())?c?c.appendChild(v):(c=hA(u,v,f),u.setAttribs(c,Bl(e))):c=null}),!(wv(o)&&!fg(o.inline,n))&&u.remove(n,!0)},pA=(e,n,o)=>_s(e)?{name:n,value:null}:{name:e,value:cr(n,o)},sP=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},iT=(e,n,o,r,c)=>{let u=!1;fA(o.styles,(f,v)=>{const{name:C,value:T}=pA(v,f,r),B=vv(T,C);(o.remove_similar||ae(T)||!_t(c)||fg(mh(e,c,C),B))&&e.setStyle(n,C,""),u=!0}),u&&sP(e,n)},kb=(e,n,o)=>{n==="removeformat"?Te(XN(e.selection),r=>{Te(dA,c=>e.dom.setStyle(r,c,"")),sP(e.dom,r)}):KN(e.formatter,n).each(r=>{Te(XN(e.selection),c=>iT(e.dom,c,r,o,null))})},rP=(e,n,o,r,c)=>{const u=e.dom,f=qp(e),v=e.schema;if(Qr(n)&&jm(v,n.inline)&&rc(v,r)&&r.parentElement===e.getBody())return oP(e,r,n),_b.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!Fv(u,r,n)&&!EH(r,n))return _b.keep();const C=r,T=n.preserve_attributes;if(Qr(n)&&n.remove==="all"&&kn(T)){const B=Qt(u.getAttribs(C),I=>gn(T,I.name.toLowerCase()));if(u.removeAllAttribs(C),Te(B,I=>u.setAttrib(C,I.name,I.value)),B.length>0)return _b.rename("span")}if(n.remove!=="all"){iT(u,C,n,o,c),fA(n.attributes,(I,H)=>{const{name:G,value:ee}=pA(H,I,o);if(n.remove_similar||ae(ee)||!_t(c)||fg(u.getAttrib(c,G),ee)){if(G==="class"){const J=u.getAttrib(C,G);if(J){let re="";if(Te(J.split(/\s+/),me=>{/mce\-\w+/.test(me)&&(re+=(re?" ":"")+me)}),re){u.setAttrib(C,G,re);return}}}if(JN.test(G)&&C.removeAttribute("data-mce-"+G),G==="style"&&Xi(["li"])(C)&&u.getStyle(C,"list-style-type")==="none"){C.removeAttribute(G),u.setStyle(C,"list-style-type","none");return}G==="class"&&C.removeAttribute("className"),C.removeAttribute(G)}}),fA(n.classes,I=>{I=cr(I,o),(!_t(c)||u.hasClass(c,I))&&u.removeClass(C,I)});const B=u.getAttribs(C);for(let I=0;I<B.length;I++){const H=B[I].nodeName;if(!f.isAttributeInternal(H))return _b.keep()}}return n.remove!=="none"?(oP(e,C,n),_b.removed()):_b.keep()},TH=(e,n,o,r,c)=>{let u;return n.parentNode&&Te(Cv(e.dom,n.parentNode).reverse(),f=>{if(!u&&_t(f)&&f.id!=="_start"&&f.id!=="_end"){const v=hf(e,f,o,r,c);v&&v.split!==!1&&(u=f)}}),u},lT=(e,n,o,r)=>rP(e,n,o,r,r).fold(vt(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),vt(null)),aP=(e,n,o,r,c,u,f,v)=>{var C,T;let B,I;const H=e.dom;if(o){const G=o.parentNode;for(let ee=r.parentNode;ee&&ee!==G;ee=ee.parentNode){let J=H.clone(ee,!1);for(let re=0;re<n.length&&(J=lT(e,n[re],v,J),J!==null);re++);J&&(B&&J.appendChild(B),I||(I=J),B=J)}(!f.mixed||!H.isBlock(o))&&(r=(C=H.split(o,r))!==null&&C!==void 0?C:r),B&&I&&((T=c.parentNode)===null||T===void 0||T.insertBefore(B,c),I.appendChild(c),Qr(f)&&rT(e,f,v,B))}return r},cP=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],v=e.dom,C=e.selection,T=J=>{const re=TH(e,J,n,o,c);return aP(e,u,re,J,J,!0,f,o)},B=J=>Oi(J)&&_t(J)&&(J.id==="_start"||J.id==="_end"),I=J=>vo(u,re=>zv(e,re,o,J,J)),H=J=>{const re=Br(J.childNodes),Ce=I(J)||vo(u,Ke=>Fv(v,J,Ke)),xe=J.parentNode;if(!Ce&&We(xe)&&Mp(f)&&I(xe),f.deep&&re.length)for(let Ke=0;Ke<re.length;Ke++)H(re[Ke]);Te(["underline","line-through","overline"],Ke=>{_t(J)&&e.dom.getStyle(J,"text-decoration")===Ke&&J.parentNode&&yv(v,J.parentNode)===Ke&&zv(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ke}},void 0,J)})},G=J=>{const re=v.get(J?"_start":"_end");if(re){let me=re[J?"firstChild":"lastChild"];return B(me)&&(me=me[J?"firstChild":"lastChild"]),rt(me)&&me.data.length===0&&(me=J?re.previousSibling||re.nextSibling:re.nextSibling||re.previousSibling),v.remove(re,!0),me}else return null},ee=J=>{let re,me,Ce=uf(v,J,u,{includeTrailingSpace:J.collapsed});if(f.split){if(Ce=fC(Ce),re=gA(e,Ce,!0),me=gA(e,Ce),re!==me){if(re=tP(re,!0),me=tP(me,!1),eP(v,re,me)){const Oe=U.from(re.firstChild).getOr(re);T(nP(v,Oe,!0,"span",{id:"_start","data-mce-type":"bookmark"})),G(!0);return}if(eP(v,me,re)){const Oe=U.from(me.lastChild).getOr(me);T(nP(v,Oe,!1,"span",{id:"_end","data-mce-type":"bookmark"})),G(!1);return}re=hA(v,re,"span",{id:"_start","data-mce-type":"bookmark"}),me=hA(v,me,"span",{id:"_end","data-mce-type":"bookmark"});const xe=v.createRng();xe.setStartAfter(re),xe.setEndBefore(me),bb(v,xe,Oe=>{Te(Oe,Ke=>{!Oi(Ke)&&!Oi(Ke.parentNode)&&T(Ke)})}),T(re),T(me),re=G(!0),me=G()}else re=me=T(re);Ce.startContainer=re.parentNode?re.parentNode:re,Ce.startOffset=v.nodeIndex(re),Ce.endContainer=me.parentNode?me.parentNode:me,Ce.endOffset=v.nodeIndex(me)+1}bb(v,Ce,xe=>{Te(xe,H)})};if(r){if(lg(r)){const J=v.createRng();J.setStartBefore(r),J.setEndAfter(r),ee(J)}else ee(r);o2(e,n,r,o);return}!C.isCollapsed()||!Qr(f)||lh(e).length?(oE(e,()=>H2(e,ee),J=>Qr(f)&&eT(e,n,o,J)),e.nodeChanged()):ZN(e,n,o,c),kb(e,n,o),o2(e,n,r,o)},iP=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&cP(e,n,o,r,c)},zv=(e,n,o,r,c)=>rP(e,n,o,r,c).fold(Ge,u=>(e.dom.rename(r,u),!0),pt),lP=Qe.each,bh=(e,n,o,r)=>{const c=u=>{if(Ei(u)&&_t(u.parentNode)&&e.isEditable(u)){const f=yv(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Qe.walk(r,c,"childNodes"),c(r))},uP=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=mA(e,"fontSize");aT(r,u=>c(u)&&e.isEditable(u),cT(e,"backgroundColor",cr(n.styles.backgroundColor,o)))}},dP=(e,n,o,r)=>{if(Qr(n)&&(n.inline==="sub"||n.inline==="sup")){const c=mA(e,"fontSize");aT(r,f=>c(f)&&e.isEditable(f),cT(e,"fontSize",""));const u=Qt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},mP=(e,n,o,r)=>{lP(n,c=>{Qr(c)&&lP(e.dom.select(c.inline,r),u=>{ud(u)&&zv(e,c,o,u,c.exact?u:null)}),SH(e.dom,c,r)})},uT=(e,n,o,r,c)=>{const u=c.parentNode;hf(e,u,o,r)&&zv(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>hf(e,f,o,r)?(zv(e,n,r,c),!0):!1)},$C=Qe.each,_H=(e,n,o,r)=>{if(J0(e)&&Qr(n)&&o.parentNode){const c=Ay(e.schema),u=Ty(de.fromDom(o),f=>rl(f.dom));return ur(c,r)&&ei(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},bA=(e,n,o,r)=>{if($C(o.styles,(c,u)=>{e.setStyle(n,u,cr(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},kH=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),v=e.dom,C=e.selection,T=(ee,J=u)=>{pe(J.onformat)&&J.onformat(ee,J,o,r),bA(v,ee,J,o),$C(J.attributes,(re,me)=>{v.setAttrib(ee,me,cr(re,o))}),$C(J.classes,re=>{const me=cr(re,o);v.hasClass(ee,me)||v.addClass(ee,me)})},B=(ee,J)=>{let re=!1;return $C(ee,me=>$l(me)?v.getContentEditable(J)==="false"&&!me.ceFalseOverride||We(me.collapsed)&&me.collapsed!==f?!0:v.is(J,me.selector)&&!rl(J)?(T(J,me),re=!0,!1):!0:!1),re},I=ee=>{if(le(ee)){const J=v.create(ee);return T(J),J}else return null},H=(ee,J,re)=>{const me=[];let Ce=!0;const xe=u.inline||u.block,Oe=I(xe),Ke=He=>Wk(u)&&hf(e,He,n,o),mt=(He,Be,Xe)=>{const Bt=Z2(u)&&V2(e.schema,He)&&ug(e,Be,xe);return Xe&&Bt},Ct=(He,Be,Xe,Bt)=>{const Yt=He.nodeName.toLowerCase(),Fn=ug(e,xe,Yt)&&ug(e,Be,xe),Wn=!re&&rt(He)&&M0(He.data),yo=rl(He),Ro=!Qr(u)||!ee.isBlock(He);return(Xe||Bt)&&Fn&&!Wn&&!yo&&Ro};bb(ee,J,He=>{let Be;const Xe=Bt=>{let Yt=!1,Fn=Ce,Wn=!1;const yo=Bt.parentNode,Ro=yo.nodeName.toLowerCase(),Cr=ee.getContentEditable(Bt);We(Cr)&&(Fn=Ce,Ce=Cr==="true",Yt=!0,Wn=bv(e,Bt));const Pa=Ce&&!Yt;if(co(Bt)&&!_H(e,u,Bt,Ro)){Be=null,im(u)&&ee.remove(Bt);return}if(Ke(Bt)){Be=null;return}if(mt(Bt,Ro,Pa)){const Ba=ee.rename(Bt,xe);T(Ba),me.push(Ba),Be=null;return}if($l(u)){let Ba=B(c,Bt);if(!Ba&&We(yo)&&Mp(u)&&(Ba=B(c,yo)),!Qr(u)||Ba){Be=null;return}}We(Oe)&&Ct(Bt,Ro,Pa,Wn)?(Be||(Be=ee.clone(Oe,!1),yo.insertBefore(Be,Bt),me.push(Be)),Wn&&Yt&&(Ce=Fn),Be.appendChild(Bt)):(Be=null,Te(Br(Bt.childNodes),Xe),Yt&&(Ce=Fn),Be=null)};Te(He,Xe)}),u.links===!0&&Te(me,He=>{const Be=Xe=>{Xe.nodeName==="A"&&T(Xe,u),Te(Br(Xe.childNodes),Be)};Be(He)}),Te(me,He=>{const Be=Yt=>{let Fn=0;return Te(Yt.childNodes,Wn=>{!Dt(Wn)&&!Oi(Wn)&&Fn++}),Fn},Xe=Yt=>Cs(Yt.childNodes,z2).filter(Wn=>ee.getContentEditable(Wn)!=="false"&&Fv(ee,Wn,u)).map(Wn=>{const yo=ee.clone(Wn,!1);return T(yo),ee.replace(yo,Yt,!0),ee.remove(Wn,!0),yo}).getOr(Yt),Bt=Be(He);if((me.length>1||!ee.isBlock(He))&&Bt===0){ee.remove(He,!0);return}(Qr(u)||im(u)&&u.wrapper)&&(!u.exact&&Bt===1&&(He=Xe(He)),mP(e,c,o,He),uT(e,u,n,o,He),uP(ee,u,o,He),bh(ee,u,o,He),dP(ee,u,o,He),rT(e,u,o,He))})},G=lg(r)?r:C.getNode();if(v.getContentEditable(G)==="false"&&!bv(e,G)){r=G,B(c,r),n2(e,n,r,o);return}if(u){if(r)if(lg(r)){if(!B(c,r)){const ee=v.createRng();ee.setStartBefore(r),ee.setEndAfter(r),H(v,uf(v,ee,c),!0)}}else H(v,r,!0);else!f||!Qr(u)||lh(e).length?(C.setRng(GE(C.getRng())),oE(e,()=>{H2(e,(ee,J)=>{const re=J?ee:uf(v,ee,c);H(v,re,!1)})},pt),e.nodeChanged()):WN(e,n,o),KN(e.formatter,n).each(ee=>{Te(KK(e.selection),J=>bA(v,J,ee,o))});yH(n,e)}n2(e,n,r,o)},fP=(e,n,o,r)=>{(r||e.selection.isEditable())&&kH(e,n,o,r)},IC=e=>an(e,"vars"),gP=(e,n)=>{e.set({}),n.on("NodeChange",o=>{vA(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=U.from(o.node).map(c=>lg(c)?c:c.startContainer).bind(c=>_t(c)?U.some(c):U.from(c.parentElement)).getOrThunk(()=>dT(n));vA(n,r,e.get())})},dT=e=>e.selection.getStart(),hP=(e,n,o,r,c)=>bl(n,v=>{const C=e.formatter.matchNode(v,o,c??{},r);return!Xo(C)},v=>QE(e,v,o)?!0:r?!1:We(e.formatter.matchNode(v,o,c,!0))),pP=(e,n)=>{const o=n??dT(e);return Qt(Cv(e.dom,o),r=>_t(r)&&!Zm(r))},vA=(e,n,o)=>{const r=pP(e,n);bt(o,(c,u)=>{const f=v=>{const C=hP(e,r,u,v.similar,IC(v)?v.vars:void 0),T=C.isSome();if(v.state.get()!==T){v.state.set(T);const B=C.getOr(n);IC(v)?v.callback(T,{node:B,format:u,parents:r}):Te(v.callbacks,I=>I(T,{node:B,format:u,parents:r}))}};Te([c.withSimilar,c.withoutSimilar],f),Te(c.withVars,f)})},yA=(e,n,o,r,c,u)=>{const f=n.get();Te(o.split(","),v=>{const C=Mo(f,v).getOrThunk(()=>{const B={withSimilar:{state:Dr(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Dr(!1),similar:!1,callbacks:[]},withVars:[]};return f[v]=B,B}),T=()=>{const B=pP(e);return hP(e,B,v,c,u).isSome()};if(Xo(u)){const B=c?C.withSimilar:C.withoutSimilar;B.callbacks.push(r),B.callbacks.length===1&&B.state.set(T())}else C.withVars.push({state:Dr(T()),similar:c,vars:u,callback:r})}),n.set(f)},bP=(e,n,o)=>{const r=e.get();Te(n.split(","),c=>Mo(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:Qt(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Qt(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Qt(u.withVars,f=>f.callback!==o)}})),e.set(r)},AH=(e,n,o,r,c,u)=>(yA(e,n,o,r,c,u),{unbind:()=>bP(n,o,r)}),OH=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(eT(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?iP(e,n,o,r):fP(e,n,o,r))},vP=Qe.explode,LC=()=>{const e={};return{addFilter:(c,u)=>{Te(vP(c),f=>{an(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>Ii(e),removeFilter:(c,u)=>{Te(vP(c),f=>{if(an(e,f))if(We(u)){const v=e[f],C=Qt(v.callbacks,T=>T!==u);C.length>0?v.callbacks=C:delete e[f]}else delete e[f]})}}},vh=(e,n)=>{Te(n,o=>{e.attr(o,null)})},RH=(e,n,o)=>{e.addNodeFilter("font",r=>{Te(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),v=c.attr("face"),C=c.attr("size");f&&(u.color=f),v&&(u["font-family"]=v),C&&Yc(C).each(T=>{u["font-size"]=o[T-1]}),c.name="span",c.attr("style",n.serialize(u)),vh(c,["color","face","size"])})})},CA=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";Te(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},Nr=(e,n,o)=>{var r;const c=Bo();n.convert_fonts_to_spans&&RH(e,c,Qe.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),CA(e,o,c)},wA=(e,n,o)=>{n.inline_styles&&Nr(e,n,o)},SA=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),yh=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},yP=e=>{try{return decodeURIComponent(e)}catch{return e}},mT=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=yP(r),v=u?yh(f):f;return U.some({type:c[1],data:v,base64Encoded:u})}else return U.none()},Vv=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return U.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return U.some(new Blob([c],{type:e}))},DH=e=>new Promise((n,o)=>{mT(e).bind(({type:r,data:c,base64Encoded:u})=>Vv(r,c,u)).fold(()=>o("Invalid data URI"),n)}),MH=e=>Ws(e,"blob:")?SA(e):Ws(e,"data:")?DH(e):Promise.reject("Unknown URI format"),Ab=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let NH=0;const Ob=e=>"blobid"+NH++,CP=(e,n,o)=>mT(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return U.none();{const f=u?r:btoa(r);return o(f,c)}}),Ch=(e,n,o)=>{const r=e.create(Ob(),n,o);return e.add(r),r},wP=(e,n,o=!1)=>CP(n,o,(r,c)=>U.from(e.getByData(r,c)).orThunk(()=>Vv(c,r).map(u=>Ch(e,u,r)))),dd=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Ws(n,"blob:")){const r=e.getByUri(n);return We(r)?Promise.resolve(r):MH(n).then(c=>Ab(c).then(u=>CP(u,!1,f=>U.some(Ch(e,c,f))).getOrThunk(o)))}else return Ws(n,"data:")?wP(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},FC=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,xA=e=>U.from(e.match(FC)).bind(n=>jl(n,1)).map(n=>Ws(n,"www.")?n.substring(4):n),fT=(e,n)=>{U.from(e.attr("src")).bind(xA).forall(o=>!gn(n,o))&&e.attr("sandbox","")},EA=(e,n)=>Ws(e,`${n}/`),gT=e=>Xo(e)?"iframe":EA(e,"image")?"img":EA(e,"video")?"video":EA(e,"audio")?"audio":"iframe",PH=({type:e,src:n,width:o,height:r}={},c,u)=>{const f=gT(e),v=new Ri(f,1);return v.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&v.attr("controls",""),f==="iframe"&&c&&fT(v,u),v},fm=e=>We(e.attr("data-mce-bogus")),hT=e=>e.attr("src")===Vt.transparentSrc||We(e.attr("data-mce-placeholder")),SP=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");hT(c)||fm(c)||Nn(u)||wP(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>Te(c,r))}},TA=(e,n)=>{var o,r;const c=e.schema;e.addAttributeFilter("href",C=>{let T=C.length;const B=H=>H.split(" ").filter(ee=>ee.length>0).concat(["noopener"]).sort().join(" "),I=H=>{const G=H?Qe.trim(H):"";return/\b(noopener)\b/g.test(G)?G:B(G)};if(!n.allow_unsafe_link_target)for(;T--;){const H=C[T];H.name==="a"&&H.attr("target")==="_blank"&&H.attr("rel",I(H.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",C=>{let T=C.length,B,I,H,G;for(;T--;)if(G=C[T],G.name==="a"&&G.firstChild&&!G.attr("href"))for(H=G.parent,B=G.lastChild;B&&H;)I=B.prev,H.insert(B,G),B=I}),n.fix_list_elements&&e.addNodeFilter("ul,ol",C=>{let T=C.length,B,I;for(;T--;)if(B=C[T],I=B.parent,I&&(I.name==="ul"||I.name==="ol"))if(B.prev&&B.prev.name==="li")B.prev.append(B);else{const H=new Ri("li",1);H.attr("style","list-style-type: none"),B.wrap(H)}});const u=c.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",C=>{var T;let B=C.length;for(;B--;){const I=C[B],H=(T=I.attr("class"))!==null&&T!==void 0?T:"",G=Qe.explode(H," ");let ee="";for(let J=0;J<G.length;J++){const re=G[J];let me=!1,Ce=u["*"];Ce&&Ce[re]&&(me=!0),Ce=u[I.name],!me&&Ce&&Ce[re]&&(me=!0),me&&(ee&&(ee+=" "),ee+=re)}ee.length||(ee=null),I.attr("class",ee)}}),SP(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,v=ql((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",C=>Te(C,T=>{T.replace(PH({type:T.attr("type"),src:T.name==="object"?T.attr("data"):T.attr("src"),width:T.attr("width"),height:T.attr("height")},f,v))})),f&&e.addNodeFilter("iframe",C=>Te(C,T=>fT(T,v)))};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:pT,setPrototypeOf:Rb,isFrozen:_A,getPrototypeOf:BH,getOwnPropertyDescriptor:xP}=Object;let{freeze:Hl,seal:gm,create:EP}=Object,{apply:kA,construct:Db}=typeof Reflect<"u"&&Reflect;Hl||(Hl=function(n){return n}),gm||(gm=function(n){return n}),kA||(kA=function(n,o,r){return n.apply(o,r)}),Db||(Db=function(n,o){return new n(...o)});const bT=Vl(Array.prototype.forEach),TP=Vl(Array.prototype.lastIndexOf),vT=Vl(Array.prototype.pop),HC=Vl(Array.prototype.push),_P=Vl(Array.prototype.splice),Mb=Vl(String.prototype.toLowerCase),AA=Vl(String.prototype.toString),kP=Vl(String.prototype.match),zC=Vl(String.prototype.replace),$H=Vl(String.prototype.indexOf),IH=Vl(String.prototype.trim),md=Vl(Object.prototype.hasOwnProperty),zl=Vl(RegExp.prototype.test),VC=LH(TypeError);function Vl(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return kA(e,n,r)}}function LH(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return Db(e,o)}}function ms(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Mb;Rb&&Rb(e,null);let r=n.length;for(;r--;){let c=n[r];if(typeof c=="string"){const u=o(c);u!==c&&(_A(n)||(n[r]=u),c=u)}e[c]=!0}return e}function FH(e){for(let n=0;n<e.length;n++)md(e,n)||(e[n]=null);return e}function Nb(e){const n=EP(null);for(const[o,r]of pT(e))md(e,o)&&(Array.isArray(r)?n[o]=FH(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=Nb(r):n[o]=r);return n}function UC(e,n){for(;e!==null;){const r=xP(e,n);if(r){if(r.get)return Vl(r.get);if(typeof r.value=="function")return Vl(r.value)}e=BH(e)}function o(){return null}return o}const AP=Hl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),OA=Hl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),RA=Hl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),HH=Hl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),DA=Hl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),OP=Hl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),RP=Hl(["#text"]),Pb=Hl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),MA=Hl(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),DP=Hl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),yT=Hl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),zH=gm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),MP=gm(/<%[\w\W]*|[\w\W]*%>/gm),VH=gm(/\$\{[\w\W]*/gm),UH=gm(/^data-[\-\w.\u00B7-\uFFFF]+$/),WH=gm(/^aria-[\-\w]+$/),NP=gm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ZH=gm(/^(?:\w+script|data):/i),jH=gm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),PP=gm(/^html$/i),qH=gm(/^[a-z][.\w]*(-[.\w]+)+$/i);var BP=Object.freeze({__proto__:null,ARIA_ATTR:WH,ATTR_WHITESPACE:jH,CUSTOM_ELEMENT:qH,DATA_ATTR:UH,DOCTYPE_NAME:PP,ERB_EXPR:MP,IS_ALLOWED_URI:NP,IS_SCRIPT_OR_DATA:ZH,MUSTACHE_EXPR:zH,TMPLIT_EXPR:VH});const WC={element:1,text:3,progressingInstruction:7,comment:8,document:9},NA=function(){return typeof window>"u"?null:window},$P=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},GH=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Uv(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NA();const n=Qn=>Uv(Qn);if(n.version="3.2.4",n.removed=[],!e||!e.document||e.document.nodeType!==WC.document||!e.Element)return n.isSupported=!1,n;let{document:o}=e;const r=o,c=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:v,Element:C,NodeFilter:T,NamedNodeMap:B=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:I,DOMParser:H,trustedTypes:G}=e,ee=C.prototype,J=UC(ee,"cloneNode"),re=UC(ee,"remove"),me=UC(ee,"nextSibling"),Ce=UC(ee,"childNodes"),xe=UC(ee,"parentNode");if(typeof f=="function"){const Qn=o.createElement("template");Qn.content&&Qn.content.ownerDocument&&(o=Qn.content.ownerDocument)}let Oe,Ke="";const{implementation:mt,createNodeIterator:Ct,createDocumentFragment:He,getElementsByTagName:Be}=o,{importNode:Xe}=r;let Bt=GH();n.isSupported=typeof pT=="function"&&typeof xe=="function"&&mt&&mt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Yt,ERB_EXPR:Fn,TMPLIT_EXPR:Wn,DATA_ATTR:yo,ARIA_ATTR:Ro,IS_SCRIPT_OR_DATA:Cr,ATTR_WHITESPACE:Pa,CUSTOM_ELEMENT:Ba}=BP;let{IS_ALLOWED_URI:St}=BP,Xt=null;const bo=ms({},[...AP,...OA,...RA,...DA,...RP]);let It=null;const Ye=ms({},[...Pb,...MA,...DP,...yT]);let Nt=Object.seal(EP(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),yn=null,Lo=null,Jn=!0,Ya=!0,dl=!1,Cm=!0,$i=!1,yd=!0,Ul=!1,di=!1,mi=!1,Cd=!1,u1=!1,tn=!1,ao=!0,er=!1;const ra="user-content-";let ya=!0,Vr=!1,zs={},Vs=null;const qc=ms({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let wd=null;const xf=ms({},["audio","video","img","source","image","track"]);let wm=null;const by=ms({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vy="http://www.w3.org/1998/Math/MathML",d1="http://www.w3.org/2000/svg",Sd="http://www.w3.org/1999/xhtml";let Rh=Sd,yy=!1,m1=null;const l4=ms({},[vy,d1,Sd],AA);let f1=ms({},["mi","mo","mn","ms","mtext"]),Cy=ms({},["annotation-xml"]);const dM=ms({},["title","style","font","a","script"]);let c0=null;const wg=["application/xhtml+xml","text/html"],Qw="text/html";let ke=null,De=null;const wt=o.createElement("form"),ht=function(Me){return Me instanceof RegExp||Me instanceof Function},un=function(){let Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(De&&De===Me)){if((!Me||typeof Me!="object")&&(Me={}),Me=Nb(Me),c0=wg.indexOf(Me.PARSER_MEDIA_TYPE)===-1?Qw:Me.PARSER_MEDIA_TYPE,ke=c0==="application/xhtml+xml"?AA:Mb,Xt=md(Me,"ALLOWED_TAGS")?ms({},Me.ALLOWED_TAGS,ke):bo,It=md(Me,"ALLOWED_ATTR")?ms({},Me.ALLOWED_ATTR,ke):Ye,m1=md(Me,"ALLOWED_NAMESPACES")?ms({},Me.ALLOWED_NAMESPACES,AA):l4,wm=md(Me,"ADD_URI_SAFE_ATTR")?ms(Nb(by),Me.ADD_URI_SAFE_ATTR,ke):by,wd=md(Me,"ADD_DATA_URI_TAGS")?ms(Nb(xf),Me.ADD_DATA_URI_TAGS,ke):xf,Vs=md(Me,"FORBID_CONTENTS")?ms({},Me.FORBID_CONTENTS,ke):qc,yn=md(Me,"FORBID_TAGS")?ms({},Me.FORBID_TAGS,ke):{},Lo=md(Me,"FORBID_ATTR")?ms({},Me.FORBID_ATTR,ke):{},zs=md(Me,"USE_PROFILES")?Me.USE_PROFILES:!1,Jn=Me.ALLOW_ARIA_ATTR!==!1,Ya=Me.ALLOW_DATA_ATTR!==!1,dl=Me.ALLOW_UNKNOWN_PROTOCOLS||!1,Cm=Me.ALLOW_SELF_CLOSE_IN_ATTR!==!1,$i=Me.SAFE_FOR_TEMPLATES||!1,yd=Me.SAFE_FOR_XML!==!1,Ul=Me.WHOLE_DOCUMENT||!1,Cd=Me.RETURN_DOM||!1,u1=Me.RETURN_DOM_FRAGMENT||!1,tn=Me.RETURN_TRUSTED_TYPE||!1,mi=Me.FORCE_BODY||!1,ao=Me.SANITIZE_DOM!==!1,er=Me.SANITIZE_NAMED_PROPS||!1,ya=Me.KEEP_CONTENT!==!1,Vr=Me.IN_PLACE||!1,St=Me.ALLOWED_URI_REGEXP||NP,Rh=Me.NAMESPACE||Sd,f1=Me.MATHML_TEXT_INTEGRATION_POINTS||f1,Cy=Me.HTML_INTEGRATION_POINTS||Cy,Nt=Me.CUSTOM_ELEMENT_HANDLING||{},Me.CUSTOM_ELEMENT_HANDLING&&ht(Me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Nt.tagNameCheck=Me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Me.CUSTOM_ELEMENT_HANDLING&&ht(Me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Nt.attributeNameCheck=Me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Me.CUSTOM_ELEMENT_HANDLING&&typeof Me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Nt.allowCustomizedBuiltInElements=Me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$i&&(Ya=!1),u1&&(Cd=!0),zs&&(Xt=ms({},RP),It=[],zs.html===!0&&(ms(Xt,AP),ms(It,Pb)),zs.svg===!0&&(ms(Xt,OA),ms(It,MA),ms(It,yT)),zs.svgFilters===!0&&(ms(Xt,RA),ms(It,MA),ms(It,yT)),zs.mathMl===!0&&(ms(Xt,DA),ms(It,DP),ms(It,yT))),Me.ADD_TAGS&&(Xt===bo&&(Xt=Nb(Xt)),ms(Xt,Me.ADD_TAGS,ke)),Me.ADD_ATTR&&(It===Ye&&(It=Nb(It)),ms(It,Me.ADD_ATTR,ke)),Me.ADD_URI_SAFE_ATTR&&ms(wm,Me.ADD_URI_SAFE_ATTR,ke),Me.FORBID_CONTENTS&&(Vs===qc&&(Vs=Nb(Vs)),ms(Vs,Me.FORBID_CONTENTS,ke)),ya&&(Xt["#text"]=!0),Ul&&ms(Xt,["html","head","body"]),Xt.table&&(ms(Xt,["tbody"]),delete yn.tbody),Me.TRUSTED_TYPES_POLICY){if(typeof Me.TRUSTED_TYPES_POLICY.createHTML!="function")throw VC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Me.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw VC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Oe=Me.TRUSTED_TYPES_POLICY,Ke=Oe.createHTML("")}else Oe===void 0&&(Oe=$P(G,c)),Oe!==null&&typeof Ke=="string"&&(Ke=Oe.createHTML(""));Hl&&Hl(Me),De=Me}},uo=ms({},[...OA,...RA,...HH]),tr=ms({},[...DA,...OP]),Ef=function(Me){let Jt=xe(Me);(!Jt||!Jt.tagName)&&(Jt={namespaceURI:Rh,tagName:"template"});const In=Mb(Me.tagName),aa=Mb(Jt.tagName);return m1[Me.namespaceURI]?Me.namespaceURI===d1?Jt.namespaceURI===Sd?In==="svg":Jt.namespaceURI===vy?In==="svg"&&(aa==="annotation-xml"||f1[aa]):!!uo[In]:Me.namespaceURI===vy?Jt.namespaceURI===Sd?In==="math":Jt.namespaceURI===d1?In==="math"&&Cy[aa]:!!tr[In]:Me.namespaceURI===Sd?Jt.namespaceURI===d1&&!Cy[aa]||Jt.namespaceURI===vy&&!f1[aa]?!1:!tr[In]&&(dM[In]||!uo[In]):!!(c0==="application/xhtml+xml"&&m1[Me.namespaceURI]):!1},xd=function(Me){HC(n.removed,{element:Me});try{xe(Me).removeChild(Me)}catch{re(Me)}},g1=function(Me,Jt){try{HC(n.removed,{attribute:Jt.getAttributeNode(Me),from:Jt})}catch{HC(n.removed,{attribute:null,from:Jt})}if(Jt.removeAttribute(Me),Me==="is")if(Cd||u1)try{xd(Jt)}catch{}else try{Jt.setAttribute(Me,"")}catch{}},fF=function(Me){let Jt=null,In=null;if(mi)Me="<remove></remove>"+Me;else{const fi=kP(Me,/^[\r\n\t ]+/);In=fi&&fi[0]}c0==="application/xhtml+xml"&&Rh===Sd&&(Me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Me+"</body></html>");const aa=Oe?Oe.createHTML(Me):Me;if(Rh===Sd)try{Jt=new H().parseFromString(aa,c0)}catch{}if(!Jt||!Jt.documentElement){Jt=mt.createDocument(Rh,"template",null);try{Jt.documentElement.innerHTML=yy?Ke:aa}catch{}}const ml=Jt.body||Jt.documentElement;return Me&&In&&ml.insertBefore(o.createTextNode(In),ml.childNodes[0]||null),Rh===Sd?Be.call(Jt,Ul?"html":"body")[0]:Ul?Jt.documentElement:ml},mM=function(Me){return Ct.call(Me.ownerDocument||Me,Me,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT|T.SHOW_PROCESSING_INSTRUCTION|T.SHOW_CDATA_SECTION,null)},fM=function(Me){return Me instanceof I&&(typeof Me.nodeName!="string"||typeof Me.textContent!="string"||typeof Me.removeChild!="function"||!(Me.attributes instanceof B)||typeof Me.removeAttribute!="function"||typeof Me.setAttribute!="function"||typeof Me.namespaceURI!="string"||typeof Me.insertBefore!="function"||typeof Me.hasChildNodes!="function")},gM=function(Me){return typeof v=="function"&&Me instanceof v};function Tf(Qn,Me,Jt){bT(Qn,In=>{In.call(n,Me,Jt,De)})}const gF=function(Me){let Jt=null;if(Tf(Bt.beforeSanitizeElements,Me,null),fM(Me))return xd(Me),!0;const In=ke(Me.nodeName);if(Tf(Bt.uponSanitizeElement,Me,{tagName:In,allowedTags:Xt}),Me.hasChildNodes()&&!gM(Me.firstElementChild)&&zl(/<[/\w]/g,Me.innerHTML)&&zl(/<[/\w]/g,Me.textContent)||Me.nodeType===WC.progressingInstruction||yd&&Me.nodeType===WC.comment&&zl(/<[/\w]/g,Me.data))return xd(Me),!0;if(!Xt[In]||yn[In]){if(!yn[In]&&hM(In)&&(Nt.tagNameCheck instanceof RegExp&&zl(Nt.tagNameCheck,In)||Nt.tagNameCheck instanceof Function&&Nt.tagNameCheck(In)))return!1;if(ya&&!Vs[In]){const aa=xe(Me)||Me.parentNode,ml=Ce(Me)||Me.childNodes;if(ml&&aa){const fi=ml.length;for(let Ru=fi-1;Ru>=0;--Ru){const Sg=J(ml[Ru],!0);Sg.__removalCount=(Me.__removalCount||0)+1,aa.insertBefore(Sg,me(Me))}}}return xd(Me),!0}return Me instanceof C&&!Ef(Me)||(In==="noscript"||In==="noembed"||In==="noframes")&&zl(/<\/no(script|embed|frames)/i,Me.innerHTML)?(xd(Me),!0):($i&&Me.nodeType===WC.text&&(Jt=Me.textContent,bT([Yt,Fn,Wn],aa=>{Jt=zC(Jt,aa," ")}),Me.textContent!==Jt&&(HC(n.removed,{element:Me.cloneNode()}),Me.textContent=Jt)),Tf(Bt.afterSanitizeElements,Me,null),!1)},hF=function(Me,Jt,In){if(ao&&(Jt==="id"||Jt==="name")&&(In in o||In in wt))return!1;if(!(Ya&&!Lo[Jt]&&zl(yo,Jt))){if(!(Jn&&zl(Ro,Jt))){if(!It[Jt]||Lo[Jt]){if(!(hM(Me)&&(Nt.tagNameCheck instanceof RegExp&&zl(Nt.tagNameCheck,Me)||Nt.tagNameCheck instanceof Function&&Nt.tagNameCheck(Me))&&(Nt.attributeNameCheck instanceof RegExp&&zl(Nt.attributeNameCheck,Jt)||Nt.attributeNameCheck instanceof Function&&Nt.attributeNameCheck(Jt))||Jt==="is"&&Nt.allowCustomizedBuiltInElements&&(Nt.tagNameCheck instanceof RegExp&&zl(Nt.tagNameCheck,In)||Nt.tagNameCheck instanceof Function&&Nt.tagNameCheck(In))))return!1}else if(!wm[Jt]){if(!zl(St,zC(In,Pa,""))){if(!((Jt==="src"||Jt==="xlink:href"||Jt==="href")&&Me!=="script"&&$H(In,"data:")===0&&wd[Me])){if(!(dl&&!zl(Cr,zC(In,Pa,"")))){if(In)return!1}}}}}}return!0},hM=function(Me){return Me!=="annotation-xml"&&kP(Me,Ba)},pF=function(Me){Tf(Bt.beforeSanitizeAttributes,Me,null);const{attributes:Jt}=Me;if(!Jt||fM(Me))return;const In={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:It,forceKeepAttr:void 0};let aa=Jt.length;for(;aa--;){const ml=Jt[aa],{name:fi,namespaceURI:Ru,value:Sg}=ml,t=ke(fi);let s=fi==="value"?Sg:IH(Sg);const a=s;if(In.attrName=t,In.attrValue=s,In.keepAttr=!0,In.forceKeepAttr=void 0,Tf(Bt.uponSanitizeAttribute,Me,In),s=In.attrValue,er&&(t==="id"||t==="name")&&(g1(fi,Me),s=ra+s),yd&&zl(/((--!?|])>)|<\/(style|title)/i,s)){g1(fi,Me);continue}if(In.forceKeepAttr)continue;if(!In.keepAttr){g1(fi,Me);continue}if(!Cm&&zl(/\/>/i,s)){g1(fi,Me);continue}$i&&bT([Yt,Fn,Wn],d=>{s=zC(s,d," ")});const i=ke(Me.nodeName);if(!hF(i,t,s)){g1(fi,Me);continue}if(Oe&&typeof G=="object"&&typeof G.getAttributeType=="function"&&!Ru)switch(G.getAttributeType(i,t)){case"TrustedHTML":{s=Oe.createHTML(s);break}case"TrustedScriptURL":{s=Oe.createScriptURL(s);break}}if(s!==a)try{Ru?Me.setAttributeNS(Ru,fi,s):Me.setAttribute(fi,s),fM(Me)?xd(Me):vT(n.removed)}catch{}}Tf(Bt.afterSanitizeAttributes,Me,null)},EG=function Qn(Me){let Jt=null;const In=mM(Me);for(Tf(Bt.beforeSanitizeShadowDOM,Me,null);Jt=In.nextNode();)Tf(Bt.uponSanitizeShadowNode,Jt,null),gF(Jt),pF(Jt),Jt.content instanceof u&&Qn(Jt.content);Tf(Bt.afterSanitizeShadowDOM,Me,null)};return n.sanitize=function(Qn){let Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Jt=null,In=null,aa=null,ml=null;if(yy=!Qn,yy&&(Qn="<!-->"),typeof Qn!="string"&&!gM(Qn))if(typeof Qn.toString=="function"){if(Qn=Qn.toString(),typeof Qn!="string")throw VC("dirty is not a string, aborting")}else throw VC("toString is not a function");if(!n.isSupported)return Qn;if(di||un(Me),n.removed=[],typeof Qn=="string"&&(Vr=!1),Vr){if(Qn.nodeName){const Sg=ke(Qn.nodeName);if(!Xt[Sg]||yn[Sg])throw VC("root node is forbidden and cannot be sanitized in-place")}}else if(Qn instanceof v)Jt=fF("<!---->"),In=Jt.ownerDocument.importNode(Qn,!0),In.nodeType===WC.element&&In.nodeName==="BODY"||In.nodeName==="HTML"?Jt=In:Jt.appendChild(In);else{if(!Cd&&!$i&&!Ul&&Qn.indexOf("<")===-1)return Oe&&tn?Oe.createHTML(Qn):Qn;if(Jt=fF(Qn),!Jt)return Cd?null:tn?Ke:""}Jt&&mi&&xd(Jt.firstChild);const fi=mM(Vr?Qn:Jt);for(;aa=fi.nextNode();)gF(aa),pF(aa),aa.content instanceof u&&EG(aa.content);if(Vr)return Qn;if(Cd){if(u1)for(ml=He.call(Jt.ownerDocument);Jt.firstChild;)ml.appendChild(Jt.firstChild);else ml=Jt;return(It.shadowroot||It.shadowrootmode)&&(ml=Xe.call(r,ml,!0)),ml}let Ru=Ul?Jt.outerHTML:Jt.innerHTML;return Ul&&Xt["!doctype"]&&Jt.ownerDocument&&Jt.ownerDocument.doctype&&Jt.ownerDocument.doctype.name&&zl(PP,Jt.ownerDocument.doctype.name)&&(Ru="<!DOCTYPE "+Jt.ownerDocument.doctype.name+`>
`+Ru),$i&&bT([Yt,Fn,Wn],Sg=>{Ru=zC(Ru,Sg," ")}),Oe&&tn?Oe.createHTML(Ru):Ru},n.setConfig=function(){let Qn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};un(Qn),di=!0},n.clearConfig=function(){De=null,di=!1},n.isValidAttribute=function(Qn,Me,Jt){De||un({});const In=ke(Qn),aa=ke(Me);return hF(In,aa,Jt)},n.addHook=function(Qn,Me){typeof Me=="function"&&HC(Bt[Qn],Me)},n.removeHook=function(Qn,Me){if(Me!==void 0){const Jt=TP(Bt[Qn],Me);return Jt===-1?void 0:_P(Bt[Qn],Jt,1)[0]}return vT(Bt[Qn])},n.removeHooks=function(Qn){Bt[Qn]=[]},n.removeAllHooks=function(){Bt=GH()},n}var PA=Uv();const KH=Qe.each,YK=Qe.trim,XK=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],JK={ftp:21,http:80,https:443,mailto:25},fd=["img","video"],ZC=(e,n)=>We(e)?!e:We(n)?!gn(fd,n):!0,pf=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},wh=(e,n,o)=>{const r=pf(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?ZC(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class xu{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Yd.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!wh(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=YK(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const v=r?r.path:new xu(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(v,n);else{const C=/([^#?]*)([#?]?.*)/.exec(n);C&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(v,C[1])+C[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&KH(XK,(v,C)=>{let T=f[C];T&&(T=T.replace(/\(mce_at\)/g,"@@")),c[v]=T}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new xu(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new xu(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?JK[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const v=n.substring(0,n.lastIndexOf("/")).split("/"),C=o.split("/");if(v.length>=C.length){for(u=0,f=v.length;u<f;u++)if(u>=C.length||v[u]!==C[u]){r=u+1;break}}if(v.length<C.length){for(u=0,f=C.length;u<f;u++)if(u>=v.length||v[u]!==C[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=v.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=C.length;u<f;u++)u!==r-1?c+="/"+C[u]:c+=C[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),v=[];KH(u,I=>{I&&v.push(I)});const C=[];for(let I=f.length-1;I>=0;I--)if(!(f[I].length===0||f[I]===".")){if(f[I]===".."){r++;continue}if(r>0){r--;continue}C.push(f[I])}const T=v.length-r;let B;return T<=0?B=Uo(C).join("/"):B=v.slice(0,T).join("/")+"/"+Uo(C).join("/"),B.indexOf("/")!==0&&(B="/"+B),c&&B.lastIndexOf("/")!==B.length-1&&(B+=c),B}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const IP=Qe.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Bb="data-mce-type";let LP=0;const BA=(e,n,o,r,c)=>{var u,f,v,C;const T=n.validate,B=o.getSpecialElements();e.nodeType===gr&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const I=(f=c==null?void 0:c.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){We(c)&&(c.allowedTags[I]=!0);return}if(e.nodeType!==Jl||I==="body")return;const H=de.fromDom(e),G=Uu(H,Bb),ee=Sa(H,"data-mce-bogus");if(!G&&le(ee)){ee==="all"?Ao(H):oc(H);return}const J=o.getElementRule(I);if(T&&!J){an(B,I)?Ao(H):oc(H);return}else We(c)&&(c.allowedTags[I]=!0);if(T&&J&&!G){if(Te((v=J.attributesForced)!==null&&v!==void 0?v:[],re=>{kr(H,re.name,re.value==="{$uid}"?`mce_${LP++}`:re.value)}),Te((C=J.attributesDefault)!==null&&C!==void 0?C:[],re=>{Uu(H,re.name)||kr(H,re.name,re.value==="{$uid}"?`mce_${LP++}`:re.value)}),J.attributesRequired&&!vo(J.attributesRequired,re=>Uu(H,re))){oc(H);return}if(J.removeEmptyAttrs&&Rd(H)){oc(H);return}J.outputName&&J.outputName!==I&&L1(H,J.outputName)}},QK=(e,n,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:v}=c;c.keepAttr=FP(n,o,r,u,f,v),c.keepAttr?(c.allowedAttributes[f]=!0,$A(f,o)&&(c.attrValue=f),n.allow_svg_data_urls&&Ws(v,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):Wv(e,f)&&(c.forceKeepAttr=!0)},FP=(e,n,o,r,c,u)=>o!=="html"&&!E(r)?!0:!(c in IP&&wh(e,u,r))&&(!e.validate||n.isValid(r,c)||Ws(c,"data-")||Ws(c,"aria-")),Wv=(e,n)=>e.hasAttribute(Bb)&&(n==="id"||n==="class"||n==="style"),$A=(e,n)=>e in n.getBoolAttrs(),yr=(e,n,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const f=c[u],v=f.name,C=f.value;!FP(n,o,r,e.tagName.toLowerCase(),v,C)&&!Wv(e,v)?e.removeAttribute(v):$A(v,o)&&e.setAttribute(v,v)}},YH=(e,n,o)=>{const r=PA();return r.addHook("uponSanitizeElement",(c,u)=>{BA(c,e,n,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{QK(c,e,n,o.current(),u)}),r},XH=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},Zv=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};PA().sanitize(e,o)},jv=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=PA(),c=n.allow_mathml_annotation_encodings,u=kn(c)&&c.length>0,f=v=>{const C=v.getAttribute("encoding");return u&&le(C)&&gn(c,C)};r.addHook("uponSanitizeElement",(v,C)=>{var T;const B=(T=C.tagName)!==null&&T!==void 0?T:v.nodeName.toLowerCase();if(u&&B==="semantics"&&(C.allowedTags[B]=!0),B==="annotation"){const I=v,H=f(I);C.allowedTags[B]=H,H||I.remove()}}),r.sanitize(e,o)},qv=e=>n=>{const o=V(n);if(o==="svg")Zv(n);else if(o==="math")jv(n,e);else throw new Error("Not a namespace element")},IA=(e,n)=>{const o=he();if(e.sanitize){const r=YH(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,XH(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:qv(e)}}else return{sanitizeHtmlElement:(u,f)=>{const v=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let C;for(;C=v.nextNode();){const T=o.track(C);BA(C,e,n,T),_t(C)&&yr(C,e,n,T)}o.reset()},sanitizeNamespaceElement:Ut}},CT=Qe.makeMap,LA=Qe.extend,FA=(e,n,o,r)=>{const c=e.name,u=c in o&&c!=="title"&&c!=="textarea"&&c!=="noscript",f=n.childNodes;for(let v=0,C=f.length;v<C;v++){const T=f[v],B=new Ri(T.nodeName.toLowerCase(),T.nodeType);if(_t(T)){const I=T.attributes;for(let H=0,G=I.length;H<G;H++){const ee=I[H];B.attr(ee.name,ee.value)}E(B.name)&&(r(T),B.value=T.innerHTML)}else rt(T)?(B.value=T.data,u&&(B.raw=!0)):(Or(T)||sc(T)||Rl(T))&&(B.value=T.data);E(B.name)||FA(B,T,o,r),e.append(B)}},JH=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;Te(n,v=>v(f)),Nn(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];Te(o,f=>f(u))}},QH=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),v=LA(CT("script,style,head,html,body,title,meta,param"),n.getBlockElements()),C=Ay(n),T=/[ \t\r\n]+/g,B=/^[ \t\r\n]+/,I=/[ \t\r\n]+$/,H=Ce=>{let xe=Ce.parent;for(;We(xe);){if(xe.name in f)return!0;xe=xe.parent}return!1},G=Ce=>{let xe=Ce;for(;We(xe);){if(xe.name in C)return na(n,u,f,xe);xe=xe.parent}return!1},ee=Ce=>Ce.name in v||Gm(n,Ce)||E(Ce.name)&&Ce.parent===e,J=(Ce,xe)=>{const Oe=xe?Ce.prev:Ce.next;return We(Oe)||Nn(Ce.parent)?!1:ee(Ce.parent)&&(Ce.parent!==e||r.isRootContent===!0)};return[Ce=>{var xe;if(Ce.type===3&&!H(Ce)){let Oe=(xe=Ce.value)!==null&&xe!==void 0?xe:"";Oe=Oe.replace(T," "),(eH(Ce.prev,ee)||J(Ce,!0))&&(Oe=Oe.replace(B,"")),Oe.length===0||Oe===" "&&Ce.prev&&Ce.prev.type===gr&&Ce.next&&Ce.next.type===gr?Ce.remove():Ce.value=Oe}},Ce=>{var xe;if(Ce.type===1){const Oe=n.getElementRule(Ce.name);if(c&&Oe){const Ke=na(n,u,f,Ce);Oe.paddInEmptyBlock&&Ke&&G(Ce)?K3(o,r,ee,Ce):Oe.removeEmpty&&Ke?ee(Ce)?Ce.remove():Ce.unwrap():Oe.paddEmpty&&(Ke||Gp(Ce))&&K3(o,r,ee,Ce)}}else if(Ce.type===3&&!H(Ce)){let Oe=(xe=Ce.value)!==null&&xe!==void 0?xe:"";(Ce.next&&ee(Ce.next)||J(Ce,!1))&&(Oe=Oe.replace(I,"")),Oe.length===0?Ce.remove():Ce.value=Oe}}]},HP=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Gv=(e={},n=Jm())=>{const o=LC(),r=LC(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=IA(c,n),v=(xe,Oe,Ke="html")=>{const mt=Ke==="xhtml"?"application/xhtml+xml":"text/html",Ct=an(n.getSpecialElements(),Oe.toLowerCase()),He=Ct?`<${Oe}>${xe}</${Oe}>`:xe,Be=()=>Ke==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${He}</body></html>`:/^[\s]*<head/i.test(xe)||/^[\s]*<html/i.test(xe)||/^[\s]*<!DOCTYPE/i.test(xe)?`<html>${He}</html>`:`<body>${He}</body>`,Xe=u.parseFromString(Be(),mt).body;return f.sanitizeHtmlElement(Xe,mt),Ct?Xe.firstChild:Xe},C=o.addFilter,T=o.getFilters,B=o.removeFilter,I=r.addFilter,H=r.getFilters,G=r.removeFilter,ee=(xe,Oe)=>{Y3(n,xe)&&Oe.push(xe)},J=(xe,Oe)=>{const Ke=le(Oe.attr(Bb)),mt=Oe.type===1&&!an(xe,Oe.name)&&!Gm(n,Oe)&&!E(Oe.name);return Oe.type===3||mt&&!Ke},re=(xe,Oe)=>{const Ke=LA(CT("script,style,head,html,body,title,meta,param"),n.getBlockElements()),mt=/^[ \t\r\n]+/,Ct=/[ \t\r\n]+$/;let He=xe.firstChild,Be=null;const Xe=Bt=>{var Yt,Fn;Bt&&(He=Bt.firstChild,He&&He.type===3&&(He.value=(Yt=He.value)===null||Yt===void 0?void 0:Yt.replace(mt,"")),He=Bt.lastChild,He&&He.type===3&&(He.value=(Fn=He.value)===null||Fn===void 0?void 0:Fn.replace(Ct,"")))};if(n.isValidChild(xe.name,Oe.toLowerCase())){for(;He;){const Bt=He.next;J(Ke,He)?(Be||(Be=new Ri(Oe,1),Be.attr(c.forced_root_block_attrs),xe.insert(Be,He)),Be.append(He)):(Xe(Be),Be=null),He=Bt}Xe(Be)}},Ce={schema:n,addAttributeFilter:I,getAttributeFilters:H,removeAttributeFilter:G,addNodeFilter:C,getNodeFilters:T,removeNodeFilter:B,parse:(xe,Oe={})=>{var Ke;const mt=c.validate,Ct=(Ke=Oe.context)!==null&&Ke!==void 0?Ke:c.root_name,He=v(xe,Ct,Oe.format);Ti(n,He);const Be=new Ri(Ct,11);FA(Be,He,n.getSpecialElements(),f.sanitizeNamespaceElement),He.innerHTML="";const[Xe,Bt]=QH(Be,n,c,Oe),Yt=[],Fn=mt?Cr=>ee(Cr,Yt):Ut,Wn={nodes:{},attributes:{}},yo=Cr=>RN(T(),H(),Cr,Wn);if(JH(Be,[Xe,yo],[Bt,Fn]),Yt.reverse(),mt&&Yt.length>0)if(Oe.context){const{pass:Cr,fail:Pa}=nr(Yt,Ba=>Ba.parent===Be);po(Pa,n,Be,yo),Oe.invalid=Cr.length>0}else po(Yt,n,Be,yo);const Ro=HP(c,Oe);return Ro&&(Be.name==="body"||Oe.isRootContent)&&re(Be,Ro),Oe.invalid||q3(Wn,Oe),Be}};return TA(Ce,c),wA(Ce,c,n),Ce},ez=e=>ui(e)?Fp({validate:!1}).serialize(e):e,zP=(e,n,o)=>{const r=ez(e),c=n(r);if(c.isDefaultPrevented())return c;if(ui(e))if(c.content!==r){const u=Gv({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},VP=e=>({sanitize:ob(e),sandbox_iframes:E2(e),sandbox_iframes_exclusions:Ax(e)}),UP=(e,n)=>{if(n.no_events)return ri.value(n);{const o=s2(e,n);return o.isDefaultPrevented()?ri.error(r2(e,{content:"",...o}).content):ri.value(o)}},HA=(e,n,o)=>o.no_events?n:zP(n,c=>r2(e,{...o,content:c}),VP(e)).content,zA=(e,n)=>{if(n.no_events)return ri.value(n);{const o=zP(n.content,r=>ax(e,{...n,content:r}),VP(e));return o.isDefaultPrevented()?(W0(e,o),ri.error(void 0)):ri.value(o)}},$b=(e,n,o)=>{o.no_events||W0(e,{...o,content:n})},wT=(e,n,o)=>({element:e,width:n,rows:o}),WP=(e,n)=>({element:e,cells:n}),ZP=(e,n)=>({x:e,y:n}),jP=(e,n)=>js(e,n).bind(Yc).getOr(1),qP=(e,n,o,r,c)=>{const u=jP(c,"rowspan"),f=jP(c,"colspan"),v=e.rows;for(let C=o;C<o+u;C++){v[C]||(v[C]=WP(kS(r),[]));for(let T=n;T<n+f;T++){const B=v[C].cells;B[T]=C===o&&T===n?c:Qd(c)}}},tz=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},nz=(e,n,o)=>{for(;tz(e,n,o);)n++;return n},VA=e=>cs(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),UA=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(oo(c[u],n))return U.some(ZP(u,r))}return U.none()},WA=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let v=o;v<=c;v++){const C=f[v].cells,T=n<r?C.slice(n,r+1):C.slice(r,n+1);u.push(WP(f[v].element,T))}return u},GP=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,v=c<f?WA(e,r,c,u,f):WA(e,r,f,u,c);return wT(e.element,VA(v),v)},KP=(e,n)=>{const o=Qd(e.element),r=de.fromTag("tbody");return Gi(r,n),ps(o,r),o},YP=e=>hn(e.rows,n=>{const o=hn(n.cells,c=>{const u=kS(c);return ts(u,"colspan"),ts(u,"rowspan"),u}),r=Qd(n.element);return Gi(r,o),r}),oz=e=>{const n=wT(Qd(e),0,[]);return Te(ka(e,"tr"),(o,r)=>{Te(ka(o,"td,th"),(c,u)=>{qP(n,nz(n,u,r),r,o,c)})}),wT(n.element,VA(n.rows),n.rows)},sz=e=>KP(e,YP(e)),rz=(e,n,o)=>UA(e,n).bind(r=>UA(e,o).map(c=>GP(e,r,c))),ZA=e=>Cs(e,n=>Rn(n)==="ul"||Rn(n)==="ol"),jC=(e,n)=>Cs(e,o=>Rn(o)==="li"&&L2(o,n)).fold(vt([]),o=>ZA(e).map(r=>{const c=de.fromTag(Rn(r)),u=Wo(_a(r),(f,v)=>Ws(v,"list-style"));return Tn(c,u),[de.fromTag("li"),c]}).getOr([])),XP=(e,n)=>{const o=cs(n,(r,c)=>(ps(c,r),c),e);return n.length>0?uC([o]):o},JP=e=>up(e)?Ea(e).filter(lp).fold(vt([]),n=>[e,n]):lp(e)?[e]:[],ST=(e,n,o)=>{const r=de.fromDom(n.commonAncestorContainer),c=hh(r,e),u=Qt(c,C=>o.isWrapper(Rn(C))),f=jC(c,n),v=u.concat(f.length?f:JP(r));return hn(v,Qd)},QP=()=>uC([]),az=(e,n,o)=>XP(de.fromDom(n.cloneContents()),ST(e,n,o)),Ib=(e,n)=>Id(n,"table",Je(oo,e)),jA=(e,n)=>Ib(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=oz(o);return rz(u,r,c).map(f=>uC([sz(f)]))}).getOrThunk(QP),eB=(e,n,o)=>n.length>0&&n[0].collapsed?QP():az(e,n[0],o),qC=(e,n,o)=>{const r=tE(n,e);return r.length>0?jA(e,r):eB(e,n,o)},GC=(e,n)=>n>=0&&n<e.length&&cm(e.charAt(n)),xT=e=>tl(e.innerText),tB=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),nB=e=>U.from(e.selection.getRng()).map(n=>{var o;const r=U.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=tB(r),f=de.fromDom(n.cloneContents());B5(f),$5(f);const v=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),C=xT(v),T=tl((o=v.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(v),GC(T,0)||GC(T,T.length-1)){const B=r.getOr(c),I=xT(B),H=I.indexOf(C);if(H===-1)return C;{const G=GC(I,H-1),ee=GC(I,H+C.length);return(G?" ":"")+C+(ee?" ":"")}}else return C}).getOr(""),cz=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=TE(e,Qx(c)),f=n.contextual?qC(de.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},iz=(e,n)=>{if(n.format==="text")return nB(e);{const o=cz(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},lz=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),qA=(e,n,o={})=>{const r=lz(o,n);return UP(e,r).fold(Jo,c=>{const u=iz(e,c);return HA(e,u,c)})},GA=0,KA=1,oB=2,uz=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(B,I,H)=>({start:B,end:I,diag:H}),f=(B,I,H,G,ee)=>{const J=C(B,I,H,G);if(J===null||J.start===I&&J.diag===I-G||J.end===B&&J.diag===B-H){let re=B,me=H;for(;re<I||me<G;)re<I&&me<G&&e[re]===n[me]?(ee.push([GA,e[re]]),++re,++me):I-B>G-H?(ee.push([oB,e[re]]),++re):(ee.push([KA,n[me]]),++me)}else{f(B,J.start,H,J.start-J.diag,ee);for(let re=J.start;re<J.end;++re)ee.push([GA,e[re]]);f(J.end,I,J.end-J.diag,G,ee)}},v=(B,I,H,G)=>{let ee=B;for(;ee-I<G&&ee<H&&e[ee]===n[ee-I];)++ee;return u(B,ee,I)},C=(B,I,H,G)=>{const ee=I-B,J=G-H;if(ee===0||J===0)return null;const re=ee-J,me=J+ee,Ce=(me%2===0?me:me+1)/2;r[1+Ce]=B,c[1+Ce]=I+1;let xe,Oe,Ke,mt,Ct;for(xe=0;xe<=Ce;++xe){for(Oe=-xe;Oe<=xe;Oe+=2){for(Ke=Oe+Ce,Oe===-xe||Oe!==xe&&r[Ke-1]<r[Ke+1]?r[Ke]=r[Ke+1]:r[Ke]=r[Ke-1]+1,mt=r[Ke],Ct=mt-B+H-Oe;mt<I&&Ct<G&&e[mt]===n[Ct];)r[Ke]=++mt,++Ct;if(re%2!==0&&re-xe<=Oe&&Oe<=re+xe&&c[Ke-re]<=r[Ke])return v(c[Ke-re],Oe+B-H,I,G)}for(Oe=re-xe;Oe<=re+xe;Oe+=2){for(Ke=Oe+Ce-re,Oe===re-xe||Oe!==re+xe&&c[Ke+1]<=c[Ke-1]?c[Ke]=c[Ke+1]-1:c[Ke]=c[Ke-1],mt=c[Ke]-1,Ct=mt-B+H-Oe;mt>=B&&Ct>=H&&e[mt]===n[Ct];)c[Ke]=mt--,Ct--;if(re%2===0&&-xe<=Oe&&Oe<=xe&&c[Ke]<=r[Ke+re])return v(c[Ke],Oe+B-H,I,G)}}return null},T=[];return f(0,e.length,0,n.length,T),T},sB=e=>_t(e)?e.outerHTML:rt(e)?Yd.encodeRaw(e.data,!1):Or(e)?"<!--"+e.data+"-->":"",dz=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},mz=(e,n,o)=>{const r=dz(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},fz=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},gz=(e,n)=>{let o=0;Te(e,r=>{r[0]===GA?o++:r[0]===KA?(mz(n,r[1],o),o++):r[0]===oB&&fz(n,o)})},hz=(e,n)=>Qt(hn(Br(e.childNodes),D(tl,sB)),o=>o.length>0),pz=(e,n)=>{const o=hn(Br(n.childNodes),sB);return gz(uz(o,e),n),n},bz=Zr(()=>document.implementation.createHTMLDocument("undo")),vz=e=>e.querySelector("iframe")!==null,rB=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),yz=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Lb=e=>{const n=e.serializer.getTempAttrs(),o=P5(e.getBody(),n);return vz(o)?rB(hz(o)):yz(tl(o.innerHTML))},kc=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?pz(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:We(r)&&Gx(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},YA=e=>e.type==="fragmented"?e.fragments.join(""):e.content,KC=e=>{const n=de.fromTag("body",bz());return ou(n,YA(e)),Te(ka(n,"*[data-mce-bogus]"),oc),ns(n)},Fb=(e,n)=>YA(e)===YA(n),aB=(e,n)=>KC(e)===KC(n),Mi=(e,n)=>!e||!n?!1:Fb(e,n)?!0:aB(e,n),Sh=e=>e.get()===0,YC=(e,n,o)=>{Sh(o)&&(e.typing=n)},cB=(e,n)=>{e.typing&&(YC(e,!1,n),e.add())},iB=e=>{e.typing&&(e.typing=!1,e.add())},Cz=(e,n,o)=>{Sh(n)&&o.set(Yy(e.selection))},lB=(e,n,o,r,c,u,f)=>{const v=Lb(e),C=Qe.extend(u||{},v);if(!Sh(r)||e.removed)return null;const T=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:C,lastLevel:T,originalEvent:f}).isDefaultPrevented()||T&&Mi(T,C))return null;n.data[o.get()]&&c.get().each(H=>{n.data[o.get()].beforeBookmark=H});const B=eh(e);if(B&&n.data.length>B){for(let H=0;H<n.data.length-1;H++)n.data[H]=n.data[H+1];n.data.length--,o.set(n.data.length)}C.bookmark=Yy(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(C),o.set(n.data.length-1);const I={level:C,lastLevel:T,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",I),e.dispatch("change",I)):e.dispatch("AddUndo",I),C},XC=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},XA=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];kc(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},wz=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],kc(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},uB=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,YC(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],kc(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},Sz=e=>{e.clear(),e.add()},JA=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!Mi(Lb(e),n.data[0]),QA=(e,n)=>n.get()<e.data.length-1&&!e.typing,xz=(e,n,o)=>(cB(e,n),e.beforeChange(),e.ignore(o),e.add()),Ez=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},dB=(e,n)=>{const o=e.dom,r=We(n)?n:e.getBody();Te(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=y2(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const v=o.getAttrib(c,"name")||c.id,C=sm(e);v&&e.hasVisual?o.addClass(c,C):o.removeClass(c,C)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},hm=e=>({init:{bindEvents:Ut},undoManager:{beforeChange:(n,o)=>Cz(e,n,o),add:(n,o,r,c,u,f)=>lB(e,n,o,r,c,u,f),undo:(n,o,r)=>uB(e,n,o,r),redo:(n,o)=>wz(e,n,o),clear:(n,o)=>XC(e,n,o),reset:n=>Sz(n),hasUndo:(n,o)=>JA(e,n,o),hasRedo:(n,o)=>QA(n,o),transact:(n,o,r)=>xz(n,o,r),ignore:(n,o)=>Ez(n,o),extra:(n,o,r,c)=>XA(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>eT(e,n,o,r,c),matchAll:(n,o)=>oA(e,n,o),matchNode:(n,o,r,c)=>hf(e,n,o,r,c),canApply:n=>tT(e,n),closest:n=>IN(e,n),apply:(n,o,r)=>fP(e,n,o,r),remove:(n,o,r,c)=>iP(e,n,o,r,c),toggle:(n,o,r)=>OH(e,n,o,r),formatChanged:(n,o,r,c,u)=>AH(e,n,o,r,c,u)},editor:{getContent:n=>F5(e,n),setContent:(n,o)=>gH(e,n,o),insertContent:(n,o)=>gf(e,n,o),addVisual:n=>dB(e,n)},selection:{getContent:(n,o)=>qA(e,n,o)},autocompleter:{addDecoration:Ut,removeDecoration:Ut},raw:{getModel:()=>U.none()}}),eO=e=>{const n=T=>Ot(T)?T:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:v,raw:C}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(T,B,I)=>r.transact(I),ignore:(T,B)=>r.ignore(B),extra:(T,B,I,H)=>r.extra(I,H)},formatter:{match:(T,B,I,H)=>c.match(T,n(B),H),matchAll:c.matchAll,matchNode:c.matchNode,canApply:T=>c.canApply(T),closest:T=>c.closest(T),apply:(T,B,I)=>c.apply(T,n(B)),remove:(T,B,I,H)=>c.remove(T,n(B)),toggle:(T,B,I)=>c.toggle(T,n(B)),formatChanged:(T,B,I,H,G)=>c.formatChanged(B,I,H,G)},editor:{getContent:T=>u.getContent(T),setContent:(T,B)=>({content:u.setContent(T,B),html:""}),insertContent:(T,B)=>(u.insertContent(T),""),addVisual:u.addVisual},selection:{getContent:(T,B)=>f.getContent(B)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>U.some(C.getRawModel())}}},Tz=()=>{const e=vt(null),n=vt("");return{init:{bindEvents:Ut},undoManager:{beforeChange:Ut,add:e,undo:e,redo:e,clear:Ut,reset:Ut,hasUndo:Ge,hasRedo:Ge,transact:e,ignore:Ut,extra:Ut},formatter:{match:Ge,matchAll:vt([]),matchNode:vt(void 0),canApply:Ge,closest:n,apply:Ut,remove:Ut,toggle:Ut,formatChanged:vt({unbind:Ut})},editor:{getContent:n,setContent:vt({content:"",html:""}),insertContent:vt(""),addVisual:Ut},selection:{getContent:n},autocompleter:{addDecoration:Ut,removeDecoration:Ut},raw:{getModel:vt(U.none())}}},gd=e=>an(e.plugins,"rtc"),tO=e=>Mo(e.plugins,"rtc").bind(n=>U.from(n.setup)),mB=e=>{const n=e;return tO(e).fold(()=>(n.rtcInstance=hm(e),U.none()),o=>(n.rtcInstance=Tz(),U.some(()=>o().then(r=>(n.rtcInstance=eO(r),r.rtc.isRemote)))))},ET=e=>e.rtcInstance?e.rtcInstance:hm(e),pa=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},_z=(e,n,o)=>{pa(e).undoManager.beforeChange(n,o)},kz=(e,n,o,r,c,u,f)=>pa(e).undoManager.add(n,o,r,c,u,f),Az=(e,n,o,r)=>pa(e).undoManager.undo(n,o,r),Oz=(e,n,o)=>pa(e).undoManager.redo(n,o),Rz=(e,n,o)=>{pa(e).undoManager.clear(n,o)},fB=(e,n)=>{pa(e).undoManager.reset(n)},Dz=(e,n,o)=>pa(e).undoManager.hasUndo(n,o),Mz=(e,n,o)=>pa(e).undoManager.hasRedo(n,o),Nz=(e,n,o,r)=>pa(e).undoManager.transact(n,o,r),gB=(e,n,o)=>{pa(e).undoManager.ignore(n,o)},nO=(e,n,o,r,c)=>{pa(e).undoManager.extra(n,o,r,c)},oO=(e,n,o,r,c)=>pa(e).formatter.match(n,o,r,c),hB=(e,n,o)=>pa(e).formatter.matchAll(n,o),sO=(e,n,o,r,c)=>pa(e).formatter.matchNode(n,o,r,c),pB=(e,n)=>pa(e).formatter.canApply(n),bB=(e,n)=>pa(e).formatter.closest(n),rO=(e,n,o,r)=>{pa(e).formatter.apply(n,o,r)},vB=(e,n,o,r,c)=>{pa(e).formatter.remove(n,o,r,c)},yB=(e,n,o,r)=>{pa(e).formatter.toggle(n,o,r)},CB=(e,n,o,r,c,u)=>pa(e).formatter.formatChanged(n,o,r,c,u),Pz=(e,n)=>ET(e).editor.getContent(n),aO=(e,n,o)=>ET(e).editor.setContent(n,o),Bz=(e,n,o)=>ET(e).editor.insertContent(n,o),TT=(e,n,o)=>pa(e).selection.getContent(n,o),$z=(e,n)=>pa(e).editor.addVisual(n),wB=e=>pa(e).init.bindEvents(),Iz=(e,n={})=>{const o=n.format?n.format:"html";return TT(e,o,n)},cO=e=>e.dom.length===0?(Ao(e),U.none()):U.some(e),SB=(e,n)=>e.filter(o=>cd.isBookmarkNode(o.dom)).bind(n?Lm:tu),Lz=(e,n,o,r,c)=>{const u=e.dom,f=n.dom,v=r?u.length:f.length;r?(T3(u,f,c,!1,!r),o.setStart(f,v)):(T3(f,u,c,!1,!r),o.setEnd(f,v))},Fz=(e,n,o)=>{Ea(e).each(r=>{const c=e.dom;n&&bC(r,Ie(c,0),o)?ME(c,0,o):!n&&Pv(r,Ie(c,c.length),o)&&E3(c,c.length,o)})},xB=(e,n,o,r,c)=>{e.bind(u=>((r?E3:ME)(u.dom,r?u.dom.length:0,c),n.filter(_r).map(v=>Lz(u,v,o,r,c)))).orThunk(()=>SB(n,r).or(n).filter(_r).map(f=>Fz(f,r,c)))},Hz=(e,n,o)=>{const r=U.from(n.firstChild).map(de.fromDom),c=U.from(n.lastChild).map(de.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(tu).filter(_r).bind(cO),f=c.bind(Lm).filter(_r).bind(cO);xB(u,r,e,!0,o),xB(f,c,e,!1,o),e.collapse(!1)},zz=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),EB=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Fp({validate:!1},e.schema).serialize(u)}else return n.content},eY=(e,n,o={})=>{const r=zz(o,n);zA(e,r).each(c=>{const u=EB(e,c),f=e.selection.getRng();Hz(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),Dv(e,f),$b(e,u,c)})},TB=(e,n,o)=>{if(an(e,n)){const r=Qt(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var Vz=(e,n)=>{let o,r;const c=(v,C)=>Cs(C,T=>e.is(T,v)),u=v=>e.getParents(v,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",v=>{const C=v.element,T=u(C),B={};bt(o,(I,H)=>{c(H,T).each(G=>{r[H]||(Te(I,ee=>{ee(!0,{node:G,selector:H,parents:T})}),r[H]=I),B[H]=I})}),bt(r,(I,H)=>{B[H]||(delete r[H],Te(I,G=>{G(!1,{node:C,selector:H,parents:T})}))})})};return{selectorChangedWithUnbind:(v,C)=>(o||f(),o[v]||(o[v]=[]),o[v].push(C),c(v,u(n.selection.getStart())).each(()=>{r[v]=o[v]}),{unbind:()=>{TB(o,v,C),TB(r,v,C)}})}};const _B=e=>!!(e&&e.ownerDocument)&&Ts(de.fromDom(e.ownerDocument),de.fromDom(e)),Uz=e=>e?_B(e.startContainer)&&_B(e.endContainer):!1,kB=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=Vz(e,r),v=(St,Xt)=>{const bo=e.createRng();We(St)&&We(Xt)?(bo.setStart(St,Xt),bo.setEnd(St,Xt),Oe(bo),me(!1)):(F2(e,bo,r.getBody(),!0),Oe(bo))},C=St=>Iz(r,St),T=(St,Xt)=>eY(r,St,Xt),B=St=>w5(r.getBody(),xe(),St),I=St=>S5(r.getBody(),xe(),St),H=(St,Xt)=>Pa.getBookmark(St,Xt),G=St=>Pa.moveToBookmark(St),ee=(St,Xt)=>(T5(e,St,Xt).each(Oe),St),J=()=>{const St=xe(),Xt=Ce();return!St||St.item?!1:St.compareEndPoints?St.compareEndPoints("StartToEnd",St)===0:!Xt||St.collapsed},re=()=>{if(r.mode.isReadOnly())return!1;const St=xe(),Xt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Xt.length>0?ks(Xt,bo=>e.isEditable(bo.parentElement)):y5(e,St)},me=St=>{const Xt=xe();Xt.collapse(!!St),Oe(Xt)},Ce=()=>n.getSelection?n.getSelection():n.document.selection,xe=()=>{let St;const Xt=(It,Ye,Nt)=>{try{return Ye.compareBoundaryPoints(It,Nt)}catch{return-1}},bo=n.document;if(We(r.bookmark)&&!it(r)){const It=Qk(r);if(It.isSome())return It.map(Ye=>TE(r,[Ye])[0]).getOr(bo.createRange())}try{const It=Ce();It&&!Vd(It.anchorNode)&&(It.rangeCount>0?St=It.getRangeAt(0):St=bo.createRange(),St=TE(r,[St])[0])}catch{}if(St||(St=bo.createRange()),Hf(St.startContainer)&&St.collapsed){const It=e.getRoot();St.setStart(It,0),St.setEnd(It,0)}return c&&u&&(Xt(St.START_TO_START,St,c)===0&&Xt(St.END_TO_END,St,c)===0?St=u:(c=null,u=null)),St},Oe=(St,Xt)=>{if(!Uz(St))return;const bo=Ce();if(St=r.dispatch("SetSelectionRange",{range:St,forward:Xt}).range,bo){u=St;try{bo.removeAllRanges(),bo.addRange(St)}catch{}Xt===!1&&bo.extend&&(bo.collapse(St.endContainer,St.endOffset),bo.extend(St.startContainer,St.startOffset)),c=bo.rangeCount>0?bo.getRangeAt(0):null}if(!St.collapsed&&St.startContainer===St.endContainer&&(bo!=null&&bo.setBaseAndExtent)&&St.endOffset-St.startOffset<2&&St.startContainer.hasChildNodes()){const Ye=St.startContainer.childNodes[St.startOffset];Ye&&Ye.nodeName==="IMG"&&(bo.setBaseAndExtent(St.startContainer,St.startOffset,St.endContainer,St.endOffset),(bo.anchorNode!==St.startContainer||bo.focusNode!==St.endContainer)&&bo.setBaseAndExtent(Ye,0,Ye,1))}r.dispatch("AfterSetSelectionRange",{range:St,forward:Xt})},Ke=St=>(T(e.getOuterHTML(St)),St),mt=()=>x5(r.getBody(),xe()),Ct=(St,Xt)=>E5(e,xe(),St,Xt),He=()=>{const St=Ce(),Xt=St==null?void 0:St.anchorNode,bo=St==null?void 0:St.focusNode;if(!St||!Xt||!bo||Vd(Xt)||Vd(bo))return!0;const It=e.createRng(),Ye=e.createRng();try{It.setStart(Xt,St.anchorOffset),It.collapse(!0),Ye.setStart(bo,St.focusOffset),Ye.collapse(!0)}catch{return!0}return It.compareBoundaryPoints(It.START_TO_START,Ye)<=0},Cr={dom:e,win:n,serializer:o,editor:r,expand:(St={type:"word"})=>Oe(Lp(e).expand(xe(),St)),collapse:me,setCursorLocation:v,getContent:C,setContent:T,getBookmark:H,moveToBookmark:G,select:ee,isCollapsed:J,isEditable:re,isForward:He,setNode:Ke,getNode:mt,getSel:Ce,setRng:Oe,getRng:xe,getStart:B,getEnd:I,getSelectedBlocks:Ct,normalize:()=>{const St=xe(),Xt=Ce();if(!KM(Xt)&&Dp(r)){const bo=mC(e,St);return bo.each(It=>{Oe(It,He())}),bo.getOr(St)}return St},selectorChanged:(St,Xt)=>(f(St,Xt),Cr),selectorChangedWithUnbind:f,getScrollContainer:()=>{let St,Xt=e.getRoot();for(;Xt&&Xt.nodeName!=="BODY";){if(Xt.scrollHeight>Xt.clientHeight){St=Xt;break}Xt=Xt.parentNode}return St},scrollIntoView:(St,Xt)=>{We(St)?v5(r,St,Xt):Dv(r,xe(),Xt)},placeCaretAt:(St,Xt)=>Oe(Sb(St,Xt,r.getDoc())),getBoundingClientRect:()=>{const St=xe();return St.collapsed?Ie.fromRangeStart(St).getClientRects()[0]:St.getBoundingClientRect()},destroy:()=>{n=c=u=null,Ba.destroy()}},Pa=cd(Cr),Ba=mg(Cr,r);return Cr.bookmarkManager=Pa,Cr.controlSelection=Ba,Cr},Wz=(e,n,o)=>{n.addNodeFilter("br",(r,c,u)=>{const f=Qe.extend({},o.getBlockElements()),v=o.getNonEmptyElements(),C=o.getWhitespaceElements();f.body=1;const T=B=>B.name in f||Gm(o,B);for(let B=0,I=r.length;B<I;B++){let H=r[B],G=H.parent;if(G&&T(G)&&H===G.lastChild){let ee=H.prev;for(;ee;){const J=ee.name;if(J!=="span"||ee.attr("data-mce-type")!=="bookmark"){J==="br"&&(H=null);break}ee=ee.prev}if(H&&(H.remove(),na(o,v,C,G))){const J=o.getElementRule(G.name);J&&(J.removeEmpty?G.remove():J.paddEmpty&&K3(e,u,T,G))}}else{let ee=H;for(;G&&G.firstChild===ee&&G.lastChild===ee&&(ee=G,!f[G.name]);)G=G.parent;if(ee===G){const J=new Ri("#text",3);J.value=rr,H.replace(J)}}}})},Zz=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,v=n.url_converter_scope;let C=r.length;for(;C--;){const T=r[C];let B=T.attr(u);B!==void 0?(T.attr(c,B.length>0?B:null),T.attr(u,null)):(B=T.attr(c),c==="style"?B=o.serializeStyle(o.parseStyle(B),T.name):f&&(B=f.call(v,B,c,T.name)),T.attr(c,B.length>0?B:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const v=r[f];v.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(U.from(v.firstChild).exists(T=>{var B;return!M0((B=T.value)!==null&&B!==void 0?B:"")})?v.unwrap():v.remove())}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=C=>C.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let v=r.length;for(;v--;){const C=r[v],T=C.firstChild,B=(u=T==null?void 0:T.value)!==null&&u!==void 0?u:"";if(c==="script"){const I=C.attr("type");I&&C.attr("type",I==="mce-no/type"?null:I.replace(/^mce\-/,"")),n.element_format==="xhtml"&&T&&B.length>0&&(T.value=`// <![CDATA[
`+f(B)+`
// ]]>`)}else n.element_format==="xhtml"&&T&&B.length>0&&(T.value=`<!--
`+f(B)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{Te(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.remove_trailing_brs&&Wz(n,e,e.schema)},AB=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},jz=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const v=f.createHTMLDocument("");Qe.each(u.nodeName==="BODY"?u.childNodes:[u],C=>{v.body.appendChild(v.importNode(C,!0))}),u.nodeName!=="BODY"?u=v.body.firstChild:u=v.body,r=c.doc,c.doc=v}return U0(e,{...o,node:u}),r&&(c.doc=r),u},qz=(e,n)=>We(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,Gz=(e,n,o)=>qz(e,o)?jz(e,n,o):n,Kz=(e,n,o)=>{Qe.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},Yz=(e,n,o)=>!n.no_events&&e?Qy(e,{...n,content:o}).content:o,tY=(e,n,o)=>{const r=tl(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||si(de.fromDom(n))?r:Qe.trim(r)},nY=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return AB(c),c},Xz=(e,n,o)=>Fp(e,n).serialize(o),Jz=(e,n,o,r,c)=>{const u=Xz(n,o,r);return Yz(e,c,u)},oY=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:vs.DOM,u=n&&n.schema?n.schema:Jm(r),f=Gv(r,u);Zz(f,r,c);const v=(C,T={})=>{const B={format:"html",...T},I=Gz(n,C,B),H=tY(c,I,B),G=nY(f,H,B);return B.format==="tree"?G:Jz(n,r,u,G,B)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:v,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Je(Kz,f,o),getTempAttrs:vt(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},OB=(e,n)=>{const o=oY(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},ir="html",iO=(e,n)=>({...e,format:n,get:!0,getInner:!0}),sY=(e,n={})=>{const o=n.format?n.format:ir,r=iO(n,o);return UP(e,r).fold(Jo,c=>{const u=Pz(e,c);return HA(e,u,c)})},Qz="html",e9=(e,n)=>({format:Qz,...e,set:!0,content:n}),Xp=(e,n,o={})=>{const r=e9(o,n);return zA(e,r).map(c=>{const u=aO(e,c.content,c);return $b(e,u.html,c),u.content}).getOr(n)},rY="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),aY=[],Ac="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),lO=[],uO=(e,n)=>{const o=Qt(n,r=>an(e,r));return To(o)},RB=e=>{const n=uO(e,rY),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),To(n)},t9=e=>uO(e,aY),DB=(e,n)=>{const o=Qe.makeMap(e.plugins," "),c=Qt(n,u=>an(o,u));return To(c)},_T=e=>DB(e,Ac),n9=e=>DB(e,lO.map(n=>n.name)),dO=(e,n)=>{const o=RB(e),r=_T(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const v=`
- `,C=f?`

Themes:${v}mobile`:"",T=c?`

Plugins:${v}${r.join(v)}`:"",B=u?`

Options:${v}${o.join(v)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+C+T+B)}},o9=e=>Cs(lO,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),MB=(e,n)=>{const o=t9(e),r=n9(n),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,v=c?`

Plugins:${f}${r.map(o9).join(f)}`:"",C=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+v+C)}},NB=(e,n)=>{dO(e,n),MB(e,n)},Kv=vs.DOM,PB=e=>{Kv.setStyle(e.id,"display",e.orgDisplay)},Yv=e=>U.from(e).each(n=>n.destroy()),s9=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},r9=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Kv.unbind(n,"submit reset",e.formEventDelegate))},a9=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&We(c==null?void 0:c.nextSibling)&&Kv.remove(c.nextSibling),e2(e),e.editorManager.remove(e),!e.inline&&r&&PB(e),t2(e),Kv.remove(e.getContainer()),Yv(n),Yv(o),e.destroy()}},Eu=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Yv(o),Yv(r)),r9(e),s9(e),e.destroyed=!0}},kT=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>an(e,c)}})(),Xv=Ua.ModelManager,BB=(e,n)=>n.dom[e],$B=(e,n)=>parseInt(Ls(n,e),10),IB=Je(BB,"clientWidth"),c9=Je(BB,"clientHeight"),i9=Je($B,"margin-top"),l9=Je($B,"margin-left"),AT=e=>e.dom.getBoundingClientRect(),u9=(e,n,o)=>{const r=IB(e),c=c9(e);return n>=0&&o>=0&&n<=r&&o<=c},d9=(e,n,o,r)=>{const c=AT(n),u=e?c.left+n.dom.clientLeft+l9(n):0,f=e?c.top+n.dom.clientTop+i9(n):0,v=o-u,C=r-f;return{x:v,y:C}},LB=(e,n,o)=>{const r=de.fromDom(e.getBody()),c=e.inline?r:Rg(r),u=d9(e.inline,c,n,o);return u9(c,u.x,u.y)},mO=e=>U.from(e).map(de.fromDom),m9=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return mO(n).map(qi).getOr(!1)};var f9=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const g9=e=>{const n=[],o=()=>{const H=e.theme;return H&&H.getNotificationManagerImpl?H.getNotificationManagerImpl():f9()},r=()=>U.from(n[0]),c=(H,G)=>H.type===G.type&&H.text===G.text&&!H.progressBar&&!H.timeout&&!G.progressBar&&!G.timeout,u=()=>{r().each(H=>{H.reposition()})},f=H=>{n.push(H)},v=H=>{Pr(n,G=>G===H).each(G=>{n.splice(G,1)})},C=(H,G=!0)=>e.removed||!m9(e)?{}:(G&&e.dispatch("BeforeOpenNotification",{notification:H}),Cs(n,ee=>c(o().getArgs(ee),H)).getOrThunk(()=>{e.editorManager.setActive(e);const ee=o().open(H,()=>{v(ee)},()=>dt(e));return f(ee),u(),e.dispatch("OpenNotification",{notification:{...ee}}),ee})),T=()=>{r().each(H=>{o().close(H),v(H),u()})},B=vt(n);return(H=>{H.on("SkinLoaded",()=>{const G=pk(H);G&&C({text:G,type:"warning",timeout:0},!1),u()}),H.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),H.on("remove",()=>{Te(n.slice(),G=>{o().close(G)})}),H.on("keydown",G=>{var ee;const J=((ee=G.key)===null||ee===void 0?void 0:ee.toLowerCase())==="f12"||G.keyCode===123;G.altKey&&J&&(G.preventDefault(),r().map(re=>de.fromDom(re.getEl())).each(re=>X2(re)))})})(e),{open:C,close:T,getNotifications:B}},Jv=Ua.PluginManager,bf=Ua.ThemeManager;var FB=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const fO=e=>{let n=[];const o=()=>{const J=e.theme;return J&&J.getWindowManagerImpl?J.getWindowManagerImpl():FB()},r=(J,re)=>(...me)=>re?re.apply(J,me):void 0,c=J=>{e.dispatch("OpenWindow",{dialog:J})},u=J=>{e.dispatch("CloseWindow",{dialog:J})},f=J=>{n.push(J),c(J)},v=J=>{u(J),n=Qt(n,re=>re!==J),n.length===0&&e.focus()},C=()=>U.from(n[n.length-1]),T=J=>{e.editorManager.setActive(e),Av(e),e.ui.show();const re=J();return f(re),re},B=(J,re)=>T(()=>o().open(J,re,v)),I=J=>T(()=>o().openUrl(J,v)),H=(J,re,me)=>{const Ce=o();Ce.alert(J,r(me||Ce,re))},G=(J,re,me)=>{const Ce=o();Ce.confirm(J,r(me||Ce,re))},ee=()=>{C().each(J=>{o().close(J),v(J)})};return e.on("remove",()=>{Te(n,J=>{o().close(J)})}),{open:B,openUrl:I,alert:H,confirm:G,close:ee}},HB=(e,n)=>{e.notificationManager.open({type:"error",text:n})},JC=(e,n)=>{e._skinLoaded?HB(e,n):e.on("SkinLoaded",()=>{HB(e,n)})},h9=(e,n)=>{JC(e,ni.translate(["Failed to upload image: {0}",n]))},QC=(e,n,o)=>{of(e,n,{message:o}),console.error(o)},ew=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,p9=(e,n,o)=>{QC(e,"PluginLoadError",ew("plugin",n,o))},zB=(e,n,o)=>{QC(e,"IconsLoadError",ew("icons",n,o))},b9=(e,n,o)=>{QC(e,"LanguageLoadError",ew("language",n,o))},v9=(e,n,o)=>{QC(e,"ThemeLoadError",ew("theme",n,o))},tw=(e,n,o)=>{QC(e,"ModelLoadError",ew("model",n,o))},VB=(e,n,o)=>{const r=ni.translate(["Failed to initialize plugin: {0}",n]);of(e,"PluginLoadError",{message:r}),nw(r,o),JC(e,r)},nw=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},y9=e=>{U.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},gO=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},C9=(e,n)=>{gO(e,"StyleWithCSS",n),gO(e,"enableInlineTableEditing",n),gO(e,"enableObjectResizing",n)},UB=e=>{e.selection.setRng(e.selection.getRng())},WB=(e,n,o)=>{Df(e,n)&&!o?Nd(e,n):o&&Zi(e,n)},ZB=e=>{const n=de.fromDom(e.getBody());WB(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),y9(e)},jB=e=>{const n=de.fromDom(e.getBody());WB(n,"mce-content-readonly",!1),e.hasEditableRoot()&&go(n,!0),C9(e,!1),dt(e)&&e.focus(),UB(e),e.nodeChanged()},xh=e=>sg(e),Qv="data-mce-contenteditable",vf=e=>{Te(ka(e,'*[contenteditable="true"]'),n=>{kr(n,Qv,"true"),go(n,!1)})},hO=e=>{Te(ka(e,`*[${Qv}="true"]`),n=>{ts(n,Qv),go(n,!0)})},qB=(e,n)=>{const o=de.fromDom(e.getBody());n?(ZB(e),go(o,!1),vf(o)):(hO(o),jB(e))},w9=e=>{e.serializer?GB(e):e.on("PreInit",()=>{GB(e)})},GB=e=>{e.parser.addAttributeFilter("contenteditable",n=>{xh(e)&&Te(n,o=>{o.attr(Qv,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Qv,n=>{xh(e)&&Te(n,o=>{o.attr("contenteditable",o.attr(Qv))})}),e.serializer.addTempAttr(Qv)},S9=e=>e.type==="click",qn=["copy"],x9=e=>gn(qn,e.type),ow=(e,n)=>Wt(n,"a",r=>oo(r,de.fromDom(e.getBody()))).bind(r=>js(r,"href")),E9=(e,n)=>{if(S9(n)&&!qe.metaKeyPressed(n)){const o=de.fromDom(n.target);ow(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Ia(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else x9(n)&&e.dispatch(n.type,n)},T9=e=>{e.on("ShowCaret ObjectSelected",n=>{xh(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||qB(e,n.state)})},_9=e=>{w9(e),T9(e)},KB=e=>/^[a-z0-9\-]+$/i.test(e),gg=e=>"content/"+e+"/content.css",cl=e=>tinymce.Resource.has(gg(e)),YB=e=>Eh(e,gx(e)),sw=e=>Eh(e,hx(e)),Eh=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return hn(n,u=>cl(u)?u:KB(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},hg=e=>{e.contentCSS=e.contentCSS.concat(YB(e),sw(e))},rw=e=>e?Br(e.getElementsByTagName("img")):[],pO=(e,n)=>{const o={};return{findAll:(c,u=pt)=>{const f=Qt(rw(c),C=>{const T=C.src;return C.hasAttribute("data-mce-bogus")||C.hasAttribute("data-mce-placeholder")||!T||T===Vt.transparentSrc?!1:Ws(T,"blob:")?!e.isUploaded(T)&&u(C):Ws(T,"data:")?u(C):!1}),v=hn(f,C=>{const T=C.src;if(an(o,T))return o[T].then(B=>le(B)?B:{image:C,blobInfo:B.blobInfo});{const B=dd(n,T).then(I=>(delete o[T],{image:C,blobInfo:I})).catch(I=>(delete o[T],I));return o[T]=B,B}});return Promise.all(v)}}},OT=()=>{let o={};const r=(H,G)=>({status:H,resultUri:G}),c=H=>H in o;return{hasBlobUri:c,getResultUri:H=>{const G=o[H];return G?G.resultUri:null},isPending:H=>c(H)?o[H].status===1:!1,isUploaded:H=>c(H)?o[H].status===2:!1,markPending:H=>{o[H]=r(1,null)},markUploaded:(H,G)=>{o[H]=r(2,G)},removeFailed:H=>{delete o[H]},destroy:()=>{o={}}}};let XB=0;const JB=()=>{const e=()=>Math.round(ES()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},k9=e=>e+XB+++JB(),A9=()=>{let e=[];const n=I=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[I.toLowerCase()]||"dat",o=(I,H,G,ee,J)=>{if(le(I))return r({id:I,name:ee,filename:J,blob:H,base64:G});if(Ot(I))return r(I);throw new Error("Unknown input type")},r=I=>{if(!I.blob||!I.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const H=I.id||k9("blobid"),G=I.name||H,ee=I.blob;return{id:vt(H),name:vt(G),filename:vt(I.filename||G+"."+n(ee.type)),blob:vt(ee),base64:vt(I.base64),blobUri:vt(I.blobUri||URL.createObjectURL(ee)),uri:vt(I.uri)}},c=I=>{f(I.id())||e.push(I)},u=I=>Cs(e,I).getOrUndefined(),f=I=>u(H=>H.id()===I);return{create:o,add:c,get:f,getByUri:I=>u(H=>H.blobUri()===I),getByData:(I,H)=>u(G=>G.base64()===I&&G.blob().type===H),findFirst:u,removeByUri:I=>{e=Qt(e,H=>H.blobUri()===I?(URL.revokeObjectURL(H.blobUri()),!1):!0)},destroy:()=>{Te(e,I=>{URL.revokeObjectURL(I.blobUri())}),e=[]}}},QB=(e,n)=>{const o={},r=(J,re)=>J?J.replace(/\/$/,"")+"/"+re.replace(/^\//,""):re,c=(J,re)=>new Promise((me,Ce)=>{const xe=new XMLHttpRequest;xe.open("POST",n.url),xe.withCredentials=n.credentials,xe.upload.onprogress=Ke=>{re(Ke.loaded/Ke.total*100)},xe.onerror=()=>{Ce("Image upload failed due to a XHR Transport error. Code: "+xe.status)},xe.onload=()=>{if(xe.status<200||xe.status>=300){Ce("HTTP Error: "+xe.status);return}const Ke=JSON.parse(xe.responseText);if(!Ke||!le(Ke.location)){Ce("Invalid JSON: "+xe.responseText);return}me(r(n.basePath,Ke.location))};const Oe=new FormData;Oe.append("file",J.blob(),J.filename()),xe.send(Oe)}),u=pe(n.handler)?n.handler:c,f=()=>new Promise(J=>{J([])}),v=(J,re)=>({url:re,blobInfo:J,status:!0}),C=(J,re)=>({url:"",blobInfo:J,status:!1,error:re}),T=(J,re)=>{Qe.each(o[J],me=>{me(re)}),delete o[J]},B=(J,re,me)=>(e.markPending(J.blobUri()),new Promise(Ce=>{let xe,Oe;try{const Ke=()=>{xe&&(xe.close(),Oe=Ut)},mt=He=>{Ke(),e.markUploaded(J.blobUri(),He),T(J.blobUri(),v(J,He)),Ce(v(J,He))},Ct=He=>{Ke(),e.removeFailed(J.blobUri()),T(J.blobUri(),C(J,He)),Ce(C(J,He))};Oe=He=>{He<0||He>100||U.from(xe).orThunk(()=>U.from(me).map(Co)).each(Be=>{xe=Be,Be.progressBar.value(He)})},re(J,Oe).then(mt,He=>{Ct(le(He)?{message:He}:He)})}catch(Ke){Ce(C(J,Ke))}})),I=J=>J===c,H=J=>{const re=J.blobUri();return new Promise(me=>{o[re]=o[re]||[],o[re].push(me)})},G=(J,re)=>(J=Qe.grep(J,me=>!e.isUploaded(me.blobUri())),Promise.all(Qe.map(J,me=>e.isPending(me.blobUri())?H(me):B(me,u,re))));return{upload:(J,re)=>!n.url&&I(u)?f():G(J,re)}},bO=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),vO=(e,n)=>QB(n,{url:mk(e),basePath:fk(e),credentials:u2(e),handler:K0(e)}),e6=e=>{const n=OT(),o=vO(e,n);return{upload:(r,c=!0)=>o.upload(r,c?bO(e):void 0)}},yO=(e,n)=>e.dom.isEmpty(n.dom)&&We(e.schema.getTextBlockElements()[Rn(n)]),iY=e=>n=>{yO(e,n)&&ps(n,de.fromHtml('<br data-mce-bogus="1" />'))},O9=e=>{const n=A9();let o,r;const c=OT(),u=[],f=xe=>Oe=>e.selection?xe(Oe):[],v=xe=>xe+(xe.indexOf("?")===-1?"?":"&")+new Date().getTime(),C=(xe,Oe,Ke)=>{let mt=0;do mt=xe.indexOf(Oe,mt),mt!==-1&&(xe=xe.substring(0,mt)+Ke+xe.substr(mt+Oe.length),mt+=Ke.length-Oe.length+1);while(mt!==-1);return xe},T=(xe,Oe,Ke)=>{const mt=`src="${Ke}"${Ke===Vt.transparentSrc?' data-mce-placeholder="1"':""}`;return xe=C(xe,`src="${Oe}"`,mt),xe=C(xe,'data-mce-src="'+Oe+'"','data-mce-src="'+Ke+'"'),xe},B=(xe,Oe)=>{Te(e.undoManager.data,Ke=>{Ke.type==="fragmented"?Ke.fragments=hn(Ke.fragments,mt=>T(mt,xe,Oe)):Ke.content=T(Ke.content,xe,Oe)})},I=(xe,Oe)=>{const Ke=e.convertURL(Oe,"src");B(xe.src,Oe),ua(de.fromDom(xe),{src:ux(e)?v(Oe):Oe,"data-mce-src":Ke})},H=()=>(o||(o=vO(e,c)),re().then(f(xe=>{const Oe=hn(xe,Ke=>Ke.blobInfo);return o.upload(Oe,bO(e)).then(f(Ke=>{const mt=[];let Ct=!1;const He=hn(Ke,(Be,Xe)=>{const{blobInfo:Bt,image:Yt}=xe[Xe];let Fn=!1;return Be.status&&dx(e)?(Be.url&&!or(Yt.src,Be.url)&&(Ct=!0),n.removeByUri(Yt.src),gd(e)||I(Yt,Be.url)):Be.error&&(Be.error.remove&&(B(Yt.src,Vt.transparentSrc),mt.push(Yt),Fn=!0),h9(e,Be.error.message)),{element:Yt,status:Be.status,uploadUri:Be.url,blobInfo:Bt,removed:Fn}});return mt.length>0&&!gd(e)?e.undoManager.transact(()=>{Te(Xu(mt),Be=>{const Xe=Ea(Be);Ao(Be),Xe.each(iY(e)),n.removeByUri(Be.dom.src)})}):Ct&&e.undoManager.dispatchChange(),He}))}))),G=()=>G0(e)?H():Promise.resolve([]),ee=xe=>ks(u,Oe=>Oe(xe)),J=xe=>{u.push(xe)},re=()=>(r||(r=pO(c,n)),r.findAll(e.getBody(),ee).then(f(xe=>{const Oe=Qt(xe,Ke=>le(Ke)?(JC(e,Ke),!1):Ke.uriType!=="blob");return gd(e)||Te(Oe,Ke=>{B(Ke.image.src,Ke.blobInfo.blobUri()),Ke.image.src=Ke.blobInfo.blobUri(),Ke.image.removeAttribute("data-mce-src")}),Oe}))),me=()=>{n.destroy(),c.destroy(),r=o=null},Ce=xe=>xe.replace(/src="(blob:[^"]+)"/g,(Oe,Ke)=>{const mt=c.getResultUri(Ke);if(mt)return'src="'+mt+'"';let Ct=n.getByUri(Ke);return Ct||(Ct=cs(e.editorManager.get(),(He,Be)=>He||Be.editorUpload&&Be.editorUpload.blobCache.getByUri(Ke),void 0)),Ct?'src="data:'+Ct.blob().type+";base64,"+Ct.base64()+'"':Oe});return e.on("SetContent",()=>{G0(e)?G():re()}),e.on("RawSaveContent",xe=>{xe.content=Ce(xe.content)}),e.on("GetContent",xe=>{xe.source_view||xe.format==="raw"||xe.format==="tree"||(xe.content=Ce(xe.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",xe=>{Te(xe,Oe=>{const Ke=Oe.attr("src");if(!Ke||n.getByUri(Ke))return;const mt=c.getResultUri(Ke);mt&&Oe.attr("src",mt)})})}),{blobCache:n,addFilter:J,uploadImages:H,uploadImagesAuto:G,scanForImages:re,destroy:me}},lY=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>_t(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Qe.each(f,(v,C)=>{n.setAttrib(c,C,v)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Qe.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},t6={remove_similar:!0,inherit:!1},ey={selector:"td,th",...t6},pg={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ey},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ey},tablecellbordercolor:{styles:{borderColor:"%value"},...ey},tablecellclass:{classes:["%value"],...ey},tableclass:{selector:"table",classes:["%value"],...t6},tablecellborderstyle:{styles:{borderStyle:"%value"},...ey},tablecellborderwidth:{styles:{borderWidth:"%value"},...ey}},uY=vt(pg),dY=e=>{const n={},o=f=>We(f)?n[f]:n,r=f=>an(n,f),c=(f,v)=>{f&&(le(f)?(kn(v)||(v=[v]),Te(v,C=>{Xo(C.deep)&&(C.deep=!$l(C)),Xo(C.split)&&(C.split=!$l(C)||Qr(C)),Xo(C.remove)&&$l(C)&&!Qr(C)&&(C.remove="none"),$l(C)&&Qr(C)&&(C.mixed=!0,C.block_expand=!0),le(C.classes)&&(C.classes=C.classes.split(/\s+/))}),n[f]=v):bt(f,(C,T)=>{c(T,C)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(lY(e)),c(uY()),c(yk(e)),{get:o,has:r,register:c,unregister:u}},RT=Qe.each,Ni=vs.DOM,CO=e=>We(e)&&Ot(e),wO=(e,n)=>{const o=n&&n.schema||Jm({}),r=(C,T)=>{T.classes.length>0&&Ni.addClass(C,T.classes.join(" ")),Ni.setAttribs(C,T.attrs)},c=C=>{const T=le(C)?{name:C,classes:[],attrs:{}}:C,B=Ni.create(T.name);return r(B,T),B},u=(C,T)=>{const B=o.getElementRule(C.nodeName.toLowerCase()),I=B==null?void 0:B.parentsRequired;return I&&I.length?T&&gn(I,T)?T:I[0]:!1},f=(C,T,B)=>{let I;const H=T[0],G=CO(H)?H.name:void 0,ee=u(C,G);if(ee)G===ee?(I=H,T=T.slice(1)):I=ee;else if(H)I=H,T=T.slice(1);else if(!B)return C;const J=I?c(I):Ni.create("div");J.appendChild(C),B&&Qe.each(B,me=>{const Ce=c(me);J.insertBefore(Ce,C)});const re=CO(I)?I.siblings:void 0;return f(J,T,re)},v=Ni.create("div");if(e.length>0){const C=e[0],T=c(C),B=CO(C)?C.siblings:void 0;v.appendChild(f(T,e.slice(1),B))}return v},n6=e=>{e=Qe.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,v)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Qe.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const C=v.match(/([\w\-]+)(?:\=\"([^\"]+))?/);C&&(o.attrs[C[1]]=C[2])}return""})),o.name=n||"div",o},o6=e=>le(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Qe.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Qe.map(n.split(/(?:~\+|~|\+)/),n6),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],R9=(e,n)=>{let o="",r=Ck(e);if(r==="")return"";const c=H=>le(H)?H.replace(/%(\w+)/g,""):"",u=(H,G)=>Ni.getStyle(G??e.getBody(),H,!0);if(le(n)){const H=e.formatter.get(n);if(!H)return"";n=H[0]}if("preview"in n){const H=n.preview;if(H===!1)return"";r=H||r}let f=n.block||n.inline||"span",v;const C=o6(n.selector);C.length>0?(C[0].name||(C[0].name=f),f=n.selector,v=wO(C,e)):v=wO([f],e);const T=Ni.select(f,v)[0]||v.firstChild;RT(n.styles,(H,G)=>{const ee=c(H);ee&&Ni.setStyle(T,G,ee)}),RT(n.attributes,(H,G)=>{const ee=c(H);ee&&Ni.setAttrib(T,G,ee)}),RT(n.classes,H=>{const G=c(H);Ni.hasClass(T,G)||Ni.addClass(T,G)}),e.dispatch("PreviewFormats"),Ni.setStyles(v,{position:"absolute",left:-65535}),e.getBody().appendChild(v);const B=u("fontSize"),I=/px$/.test(B)?parseInt(B,10):0;return RT(r.split(" "),H=>{let G=u(H,T);if(!(H==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(G)&&(G=u(H),Xd(G).toLowerCase()==="#ffffff"))&&!(H==="color"&&Xd(G).toLowerCase()==="#000000")){if(H==="font-size"&&/em|%$/.test(G)){if(I===0)return;G=parseFloat(G)/(/%$/.test(G)?100:1)*I+"px"}H==="border"&&G&&(o+="padding:0 2px;"),o+=H+":"+G+";"}}),e.dispatch("AfterPreviewFormats"),Ni.remove(v),o},D9=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Th=e=>{const n=dY(e),o=Dr({});return D9(e),ld(e),gd(e)||gP(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{rO(e,r,c,u)},remove:(r,c,u,f)=>{vB(e,r,c,u,f)},toggle:(r,c,u)=>{yB(e,r,c,u)},match:(r,c,u,f)=>oO(e,r,c,u,f),closest:r=>bB(e,r),matchAll:(r,c)=>hB(e,r,c),matchNode:(r,c,u,f)=>sO(e,r,c,u,f),canApply:r=>pB(e,r),formatChanged:(r,c,u,f)=>CB(e,o,r,c,u,f),getCssText:Je(R9,e)}},s6=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},M9=(e,n,o)=>{const r=Dr(!1),c=C=>{YC(n,!1,o),n.add({},C)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",C=>{const T=C.command;s6(T)||(cB(n,o),n.beforeChange())}),e.on("ExecCommand",C=>{const T=C.command;s6(T)||c(C)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",C=>{const T=C.keyCode;if(C.isDefaultPrevented())return;const B=Vt.os.isMacOS()&&C.key==="Meta";(T>=33&&T<=36||T>=37&&T<=40||T===45||C.ctrlKey||B)&&(c(),e.nodeChanged()),(T===46||T===8)&&e.nodeChanged(),r.get()&&n.typing&&!Mi(Lb(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",C=>{const T=C.keyCode;if(C.isDefaultPrevented())return;if(T>=33&&T<=36||T>=37&&T<=40||T===45){n.typing&&c(C);return}const B=C.ctrlKey&&!C.altKey||C.metaKey;if((T<16||T>20)&&T!==224&&T!==91&&!n.typing&&!B){n.beforeChange(),YC(n,!0,o),n.add({},C),r.set(!0);return}(Vt.os.isMacOS()?C.metaKey:C.ctrlKey&&!C.altKey)&&n.beforeChange()}),e.on("mousedown",C=>{n.typing&&c(C)});const u=C=>C.inputType==="insertReplacementText",f=C=>C.inputType==="insertText"&&C.data===null,v=C=>C.inputType==="insertFromPaste"||C.inputType==="insertFromDrop";e.on("input",C=>{C.inputType&&(u(C)||f(C)||v(C))&&c(C)}),e.on("AddUndo Undo Redo ClearUndos",C=>{C.isDefaultPrevented()||e.nodeChanged()})},N9=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},r6=e=>{const n=Fs(),o=Dr(0),r=Dr(0),c={data:[],typing:!1,beforeChange:()=>{_z(e,o,n)},add:(u,f)=>kz(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=Lb(e);u.bookmark=Yy(e.selection),e.dispatch("change",{level:u,lastLevel:jl(c.data,r.get()).getOrUndefined()})},undo:()=>Az(e,c,o,r),redo:()=>Oz(e,r,c.data),clear:()=>{Rz(e,c,r)},reset:()=>{fB(e,c)},hasUndo:()=>Dz(e,c,r),hasRedo:()=>Mz(e,c,r),transact:u=>Nz(e,c,o,u),ignore:u=>{gB(e,o,u)},extra:(u,f)=>{nO(e,c,r,u,f)}};return gd(e)||M9(e,c,o),N9(e),c},P9=[9,27,qe.HOME,qe.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,qe.DOWN,qe.UP,qe.LEFT,qe.RIGHT].concat(Vt.browser.isFirefox()?[224]:[]),a6="data-mce-placeholder",c6=e=>e.type==="keydown"||e.type==="keyup",i6=e=>{const n=e.keyCode;return n===qe.BACKSPACE||n===qe.DELETE},B9=e=>{if(c6(e)){const n=e.keyCode;return!i6(e)&&(qe.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||gn(P9,n))}else return!1},DT=e=>c6(e)&&!(i6(e)||e.type==="keyup"&&e.keyCode===229),$9=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},I9=e=>{var n;const o=e.dom,r=Jr(e),c=(n=d2(e))!==null&&n!==void 0?n:"",u=(f,v)=>{if(B9(f))return;const C=e.getBody(),T=DT(f)?!1:$9(o,C,r);(o.getAttrib(C,a6)!==""!==T||v)&&(o.setAttrib(C,a6,T?c:null),ak(e,T),e.on(T?"keydown":"keyup",u),e.off(T?"keyup":"keydown",u))};No(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",v=>Ft.setEditorTimeout(e,()=>u(v)))})},mY=(e,n)=>({block:e,position:n}),aw=(e,n)=>({from:e,to:n}),SO=(e,n)=>{const o=de.fromDom(e),r=de.fromDom(n.container());return BE(o,r).map(c=>mY(c,n))},xO=e=>!(Ts(e.to.block,e.from.block)||Ts(e.from.block,e.to.block)),L9=e=>!oo(e.from.block,e.to.block),l6=(e,n)=>ws(n,c=>oi(c)||Ze(c.dom),c=>oo(c,e)).filter(es).getOr(e),F9=(e,n)=>{const o=de.fromDom(e);return oo(l6(o,n.from.block),l6(o,n.to.block))},H9=e=>io(e.from.block.dom)===!1&&io(e.to.block.dom)===!1,Hb=e=>{const n=o=>OS(o)||Wd(o.dom)||up(o);return n(e.from.block)&&n(e.to.block)},zb=(e,n,o,r)=>co(r.position.getNode())&&!Se(e,r.block)?bu(!1,r.block.dom).bind(c=>c.isEqual(r.position)?sl(o,n,c).bind(u=>SO(n,u)):U.some(r)).getOr(r):r,MT=(e,n,o,r)=>{const c=SO(n,Ie.fromRangeStart(r)),u=c.bind(f=>sl(o,n,f.position).bind(v=>SO(n,v).map(C=>zb(e,n,o,C))));return Is(c,u,aw).filter(f=>L9(f)&&F9(n,f)&&H9(f)&&Hb(f)&&xO(f))},NT=(e,n,o,r)=>r.collapsed?MT(e,n,o,r):U.none(),Vb=(e,n)=>{const o=Lr(e);return Pr(o,r=>n.isBlock(Rn(r))).fold(vt(o),r=>o.slice(0,r))},Jp=(e,n)=>{const o=Vb(e,n);return Te(o,Ao),o},cw=(e,n,o)=>{const r=hh(o,n);return Cs(r.reverse(),c=>Se(e,c)).each(Ao)},PT=(e,n)=>Qt(Bc(n),o=>!Se(e,o)).length===0,u6=(e,n,o,r,c)=>{if(Se(r,o))return Jf(o),zr(o.dom);PT(r,c)&&Se(r,n)&&za(c,de.fromTag("br"));const u=Na(o.dom,Ie.before(c.dom));return Te(Jp(n,r),f=>{za(c,f)}),cw(r,e,n),u},EO=(e,n)=>e.isInline(Rn(n)),TO=(e,n,o,r)=>{if(Se(r,o)){if(Se(r,n)){const f=hi((v=>{const C=(T,B)=>yi(T).fold(()=>B,I=>EO(r,I)?C(I,B.concat(Qd(I))):B);return C(v,[])})(o),(v,C)=>(If(v,C),C),Xf());Ki(n),ps(n,f)}return Ao(o),zr(n.dom)}const c=vu(o.dom);return Te(Jp(n,r),u=>{ps(o,u)}),cw(r,e,n),c},d6=(e,n)=>{const o=hh(n,e);return U.from(o[o.length-1])},m6=(e,n)=>Ts(n,e)?d6(n,e):U.none(),Ub=(e,n)=>{bu(e,n.dom).bind(o=>U.from(o.getNode())).map(de.fromDom).filter(Ns).each(Ao)},_O=(e,n,o,r)=>(Ub(!0,n),Ub(!1,o),m6(n,o).fold(Je(TO,e,n,o,r),Je(u6,e,n,o,r))),kO=(e,n,o,r,c)=>n?_O(e,r,o,c):_O(e,o,r,c),BT=(e,n)=>{const o=de.fromDom(e.getBody());return NT(e.schema,o.dom,n,e.selection.getRng()).map(c=>()=>{kO(o,n,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},$T=(e,n,o)=>{const r=n.getRng();return Is(BE(e,de.fromDom(r.startContainer)),BE(e,de.fromDom(r.endContainer)),(c,u)=>oo(c,u)?U.none():U.some(()=>{r.deleteContents(),kO(e,!0,c,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(U.none())},AO=(e,n)=>{const o=de.fromDom(n),r=Je(oo,e);return Ci(o,oi,r).isSome()},f6=(e,n)=>AO(e,n.startContainer)||AO(e,n.endContainer),g6=(e,n)=>{const o=Na(e.dom,Ie.fromRangeStart(n)).isNone(),r=ja(e.dom,Ie.fromRangeEnd(n)).isNone();return!f6(e,n)&&o&&r},h6=e=>U.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),_h=e=>{const n=de.fromDom(e.getBody()),o=e.selection.getRng();return g6(n,o)?h6(e):$T(n,e.selection,e.schema)},bg=(e,n)=>e.selection.isCollapsed()?U.none():_h(e),Oc=(e,n,o,r,c)=>U.from(n._selectionOverrides.showCaret(e,o,r,c)),z9=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},iw=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?U.none():U.some(z9(n)),V9=(e,n,o)=>{const r=$x(1,e.getBody(),n),c=Ie.fromRangeStart(r),u=c.getNode();if(ab(u))return Oc(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(ab(f))return Oc(1,e,f,!1,!1);const v=dm(e.dom.getRoot(),c.getNode());return ab(v)?Oc(1,e,v,!1,o):U.none()},OO=(e,n,o)=>n.collapsed?V9(e,n,o).getOr(n):n,U9=e=>zp(e)||xb(e),W9=e=>Vp(e)||pC(e),Z9=(e,n)=>{rt(n)&&n.data.length===0&&e.remove(n)},p6=(e,n,o,r,c,u)=>{Oc(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const v=n.cloneRange();c?v.setEnd(f.startContainer,f.startOffset):v.setStart(f.endContainer,f.endOffset),v.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),Z9(e.dom,o)},j9=(e,n)=>{const o=e.selection.getRng();if(!rt(o.commonAncestorContainer))return U.none();const r=n?1:-1,c=ol(e.getBody()),u=Je(ub,n?c.next:c.prev),f=n?U9:W9,v=lb(r,e.getBody(),o),C=u(v),T=C&&id(n,C);if(!T||!lv(v,T))return U.none();if(f(T))return U.some(()=>p6(e,o,v.getNode(),r,n,T));const B=u(T);return B&&f(B)&&lv(T,B)?U.some(()=>p6(e,o,v.getNode(),r,n,B)):U.none()},RO=(e,n)=>j9(e,n),DO=(e,n)=>{const o=e.getBody();return n?zr(o).filter(zp):vu(o).filter(Vp)},MO=e=>{const n=e.selection.getRng();return!n.collapsed&&(DO(e,!0).exists(o=>o.isEqual(Ie.fromRangeStart(n)))||DO(e,!1).exists(o=>o.isEqual(Ie.fromRangeEnd(n))))},NO=e=>We(e)&&(oi(de.fromDom(e))||up(de.fromDom(e))),il=ho.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),b6=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return _t(o)&&o.getAttribute("data-mce-caret")===r},q9=(e,n,o,r,c)=>{const u=f=>c.isInline(f.nodeName.toLowerCase())&&!hu(o,r,e);return Ix(!n,o).fold(()=>Ix(n,r).fold(Ge,u),u)},v6=(e,n,o,r,c)=>{const u=c.getNode(!o);return BE(de.fromDom(n),de.fromDom(r.getNode())).map(f=>Se(e,f)?il.remove(f.dom):il.moveToElement(u)).orThunk(()=>U.some(il.moveToElement(u)))},PO=(e,n,o,r)=>sl(n,e,o).bind(c=>NO(c.getNode())||q9(e,n,o,c,r)?U.none():n&&io(c.getNode())||!n&&io(c.getNode(!0))?v6(r,e,n,o,c):n&&Vp(o)||!n&&zp(o)?U.some(il.moveToPosition(c)):U.none()),y6=(e,n)=>Nn(n)?U.none():e&&io(n.nextSibling)?U.some(il.moveToElement(n.nextSibling)):!e&&io(n.previousSibling)?U.some(il.moveToElement(n.previousSibling)):U.none(),BO=(e,n,o)=>o.fold(r=>U.some(il.remove(r)),r=>U.some(il.moveToElement(r)),r=>hu(n,r,e)?U.none():U.some(il.moveToPosition(r))),C6=(e,n,o,r)=>b6(n,o)?y6(n,o.getNode(!n)).orThunk(()=>PO(e,n,o,r)):PO(e,n,o,r).bind(c=>BO(e,o,c)),w6=(e,n,o,r)=>{const c=$x(n?1:-1,e,o),u=Ie.fromRangeStart(c),f=de.fromDom(e);return!n&&Vp(u)?U.some(il.remove(u.getNode(!0))):n&&zp(u)?U.some(il.remove(u.getNode())):!n&&zp(u)&&RE(f,u,r)?J5(f,u,r).map(v=>il.remove(v.getNode())):n&&Vp(u)&&dn(f,u,r)?A7(f,u,r).map(v=>il.remove(v.getNode())):C6(e,n,u,r)},$O=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Tb(e,n,de.fromDom(o)),!0),G9=(e,n)=>o=>{const r=n?Ie.before(o):Ie.after(o);return e.selection.setRng(r.toRange()),!0},K9=e=>n=>(e.selection.setRng(n.toRange()),!0),yf=(e,n)=>U.from(dm(e.getBody(),n)),pm=(e,n)=>{const o=e.selection.getNode();return yf(e,o).filter(io).fold(()=>w6(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold($O(e,n),G9(e,n),K9(e))),()=>U.some(Ut))},IT=e=>{Te(ka(e,".mce-offscreen-selection"),Ao)},S6=(e,n)=>{const o=e.selection.getNode();return io(o)&&!Gs(o)?yf(e,o.parentNode).filter(io).fold(()=>U.some(()=>{IT(de.fromDom(e.getBody())),Tb(e,n,de.fromDom(e.selection.getNode())),Zp(e)}),()=>U.some(Ut)):MO(e)?U.some(()=>{$o(e,e.selection.getRng(),de.fromDom(e.getBody()))}):U.none()},lw=e=>{const n=e.dom,o=e.selection,r=dm(e.getBody(),o.getNode());if(Ze(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(Ie.before(c).toRange())}return!0},LT=(e,n)=>e.selection.isCollapsed()?pm(e,n):S6(e,n),IO=e=>e.hasOwnProperty("text"),LO=e=>e.hasOwnProperty("marker"),FO=(e,n)=>{const o=(u,f)=>{if(rt(u))return{text:u,offset:f};{const v=n(),C=u.childNodes;return f<C.length?(u.insertBefore(v,C[f]),{marker:v,before:!0}):(u.appendChild(v),{marker:v,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},HO=e=>{var n,o;const{start:r,end:c}=e,u=new window.Range;return IO(r)?u.setStart(r.text,r.offset):LO(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),IO(c)?u.setEnd(c.text,c.offset):LO(c)&&(c.before?u.setEndBefore(c.marker):u.setEndAfter(c.marker),(o=c.marker.parentNode)===null||o===void 0||o.removeChild(c.marker)),u},FT=(e,n)=>{var o;const r=e.dom,c=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=c==null?void 0:c.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&c&&u&&c===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const C=c.cloneNode(!1),T=()=>{if(n?Ps(e):NE(e),f.firstChild!==c){const B=FO(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(I=>C.appendChild(I)),f.appendChild(C),e.selection.setRng(HO(B))}};return U.some(T)}return U.none()},HT=(e,n)=>{const o=Ie.fromRangeStart(e.selection.getRng());return sl(n,e.getBody(),o).filter(r=>n?q5(r):x7(r)).bind(r=>am(n?0:-1,r)).map(r=>()=>e.selection.select(r))},uw=(e,n)=>e.selection.isCollapsed()?HT(e,n):U.none(),ty=rt,x6=e=>ty(e)&&e.data[0]===Yr,E6=e=>ty(e)&&e.data[e.data.length-1]===Yr,T6=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Yr)},_6=e=>{var n;if(ty(e.previousSibling))return E6(e.previousSibling)||e.previousSibling.appendData(Yr),e.previousSibling;if(ty(e))return x6(e)||e.insertData(0,Yr),e;{const o=T6(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},Y9=e=>{var n,o;if(ty(e.nextSibling))return x6(e.nextSibling)||e.nextSibling.insertData(0,Yr),e.nextSibling;if(ty(e))return E6(e)||e.appendData(Yr),e;{const r=T6(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},zT=(e,n)=>e?_6(n):Y9(n),zO=Je(zT,!0),X9=Je(zT,!1),k6=(e,n)=>rt(e.container())?zT(n,e.container()):zT(n,e.getNode()),A6=(e,n)=>{const o=n.get();return o&&e.container()===o&&nd(o)},VO=(e,n)=>n.fold(o=>{th(e.get());const r=zO(o);return e.set(r),U.some(Ie(r,r.length-1))},o=>zr(o).map(r=>{if(A6(r,e)){const c=e.get();return Ie(c,1)}else{th(e.get());const c=k6(r,!0);return e.set(c),Ie(c,1)}}),o=>vu(o).map(r=>{if(A6(r,e)){const c=e.get();return Ie(c,c.length-1)}else{th(e.get());const c=k6(r,!1);return e.set(c),Ie(c,c.length-1)}}),o=>{th(e.get());const r=X9(o);return e.set(r),U.some(Ie(r,1))}),O6=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return U.none()},Pi=ho.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),R6=(e,n)=>{const o=rm(n,e);return o||e},VT=(e,n,o)=>{const r=uN(o),c=R6(n,r.container());return ha(e,c,r).fold(()=>ja(c,r).bind(Je(ha,e,c)).map(u=>Pi.before(u)),U.none)},UO=(e,n)=>ch(e,n)===null,D6=(e,n,o)=>ha(e,n,o).filter(Je(UO,n)),J9=(e,n,o)=>{const r=dN(o);return D6(e,n,r).bind(c=>Na(c,r).isNone()?U.some(Pi.start(c)):U.none())},Q9=(e,n,o)=>{const r=uN(o);return D6(e,n,r).bind(c=>ja(c,r).isNone()?U.some(Pi.end(c)):U.none())},eV=(e,n,o)=>{const r=dN(o),c=R6(n,r.container());return ha(e,c,r).fold(()=>Na(c,r).bind(Je(ha,e,c)).map(u=>Pi.after(u)),U.none)},WO=e=>!O3(ZO(e)),vg=(e,n,o)=>O6([VT,J9,Q9,eV],[e,n,o]).filter(WO),ZO=e=>e.fold(Jo,Jo,Jo,Jo),UT=e=>e.fold(vt("before"),vt("start"),vt("end"),vt("after")),WT=e=>e.fold(Pi.before,Pi.before,Pi.after,Pi.after),jO=e=>e.fold(Pi.start,Pi.start,Pi.end,Pi.end),tV=(e,n)=>UT(e)===UT(n)&&ZO(e)===ZO(n),nV=(e,n,o,r,c,u)=>Is(ha(n,o,r),ha(n,o,c),(f,v)=>f!==v&&K7(o,f,v)?Pi.after(e?f:v):u).getOr(u),oV=(e,n)=>e.fold(pt,o=>!tV(o,n)),sV=(e,n,o,r,c)=>{const u=id(e,c);return sl(e,o,u).map(Je(id,e)).fold(()=>r.map(WT),C=>vg(n,o,C).map(Je(nV,e,n,o,u,C)).filter(Je(oV,r))).filter(WO)},rV=(e,n)=>e?n.fold(D(U.some,Pi.start),U.none,D(U.some,Pi.after),U.none):n.fold(U.none,D(U.some,Pi.before),U.none,D(U.some,Pi.end)),ZT=(e,n,o,r)=>{const c=id(e,r),u=vg(n,o,c);return vg(n,o,c).bind(Je(rV,e)).orThunk(()=>sV(e,n,o,u,r))},jT=e=>pe(e.selection.getSel().modify),M6=(e,n,o)=>{const r=e?1:-1;return n.setRng(Ie(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},aV=(e,n)=>{const o=n.selection.getRng(),r=e?Ie.fromRangeEnd(o):Ie.fromRangeStart(o);return jT(n)?e&&od(r)?M6(!0,n.selection,r):!e&&dp(r)?M6(!1,n.selection,r):!1:!1};var hd;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(hd||(hd={}));const qT=(e,n)=>e===-1?Uo(n):n,cV=(e,n,o)=>e===1?n.next(o):n.prev(o),iV=(e,n,o,r)=>co(r.getNode(n===1))?hd.Br:hu(o,r)===!1?hd.Block:hd.Wrap,N6=(e,n,o,r)=>{const c=ol(o);let u=r;const f=[];for(;u;){const v=cV(n,c,u);if(!v)break;if(co(v.getNode(!1)))return n===1?{positions:qT(n,f).concat([v]),breakType:hd.Br,breakAt:U.some(v)}:{positions:qT(n,f),breakType:hd.Br,breakAt:U.some(v)};if(!v.isVisible()){u=v;continue}if(e(u,v)){const C=iV(o,n,u,v);return{positions:qT(n,f),breakType:C,breakAt:U.some(v)}}f.push(v),u=v}return{positions:qT(n,f),breakType:hd.Eol,breakAt:U.none()}},P6=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===-1?u.concat(c):[c].concat(u)}).getOr([]),qO=(e,n)=>cs(e,(o,r)=>o.fold(()=>U.some(r),c=>Is(to(c.getClientRects()),to(r.getClientRects()),(u,f)=>{const v=Math.abs(n-u.left);return Math.abs(n-f.left)<=v?r:c}).or(o)),U.none()),GT=(e,n)=>to(n.getClientRects()).bind(o=>qO(e,o.left)),dw=Je(N6,Ie.isAbove,-1),mw=Je(N6,Ie.isBelow,1),B6=Je(P6,-1,dw),$6=Je(P6,1,mw),lV=(e,n)=>dw(e,n).breakAt.isNone(),pd=(e,n)=>mw(e,n).breakAt.isNone(),GO=e=>zr(e).map(n=>[n].concat(mw(e,n).positions)).getOr([]),I6=e=>vu(e).map(n=>dw(e,n).positions.concat(n)).getOr([]),L6=(e,n)=>GT(B6(e,n),n),uV=(e,n)=>GT($6(e,n),n),F6=io,H6=(e,n)=>Math.abs(e.left-n),KO=(e,n)=>Math.abs(e.right-n),dV=e=>ur(e,"node"),z6=(e,n)=>Tr(e,(o,r)=>{const c=Math.min(H6(o,n),KO(o,n)),u=Math.min(H6(r,n),KO(r,n));return u===c&&dV(r)&&F6(r.node)||u<c?r:o}),mV=e=>{const n=o=>hn(o,r=>{const c=qg(r);return c.node=e,c});if(_t(e))return n(e.getClientRects());if(rt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Wb=e=>Ca(e,mV);var Qp;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Qp||(Qp={}));const V6=(e,n,o,r)=>{let c=r;for(;c=rf(c,e,Wy,n);)if(o(c))return},YO=(e,n,o,r,c,u)=>{let f=0;const v=[],C=I=>{let H=Wb([I]);e===Qp.Up&&(H=H.reverse());for(let G=0;G<H.length;G++){const ee=H[G];if(!o(ee,T)){if(v.length>0&&n(ee,gc(v))&&f++,ee.line=f,c(ee))return!0;v.push(ee)}}return!1},T=gc(u.getClientRects());if(!T)return v;const B=u.getNode();return B&&(C(B),V6(e,r,C,B)),v},XO=(e,n)=>n.line>e,fV=(e,n)=>n.line===e,gV=Je(YO,Qp.Up,mp,V1),hV=Je(YO,Qp.Down,V1,mp),U6=e=>gc(e.getClientRects()),fY=(e,n,o,r)=>{const c=ol(n);let u,f,v,C;const T=[];let B=0;e===Qp.Down?(u=c.next,f=V1,v=mp,C=Ie.after(r)):(u=c.prev,f=mp,v=V1,C=Ie.before(r));const I=U6(C);do{if(!C.isVisible())continue;const H=U6(C);if(v(H,I))continue;T.length>0&&f(H,gc(T))&&B++;const G=qg(H);if(G.position=C,G.line=B,o(G))return T;T.push(G)}while(C=u(C));return T},pV=e=>n=>XO(e,n),W6=e=>n=>fV(e,n),Rc=(e,n)=>{e.selection.setRng(n),Dv(e,e.selection.getRng())},JO=(e,n,o)=>U.some(OO(e,n,o)),Z6=(e,n,o,r,c,u)=>{const f=n===1,v=ol(e.getBody()),C=Je(ub,f?v.next:v.prev),T=f?r:c;if(!o.collapsed){const ee=U1(o);if(u(ee))return Oc(n,e,ee,n===-1,!1);if(MO(e)){const J=o.cloneRange();return J.collapse(n===-1),U.from(J)}}const B=lb(n,e.getBody(),o);if(T(B))return iw(e,B.getNode(!f));let I=C(B);const H=Vy(o);if(I)I=id(f,I);else return H?U.some(o):U.none();if(T(I))return Oc(n,e,I.getNode(!f),f,!1);const G=C(I);return G&&T(G)&&lv(I,G)?Oc(n,e,G.getNode(!f),f,!1):H?JO(e,I.toRange(),!1):U.none()},e1=(e,n,o,r,c,u)=>{const f=lb(n,e.getBody(),o),v=gc(f.getClientRects()),C=n===Qp.Down,T=e.getBody();if(!v)return U.none();if(MO(e)){const re=C?Ie.fromRangeEnd(o):Ie.fromRangeStart(o);return(C?uV:L6)(T,re).orThunk(()=>U.from(re)).map(Ce=>Ce.toRange())}const I=(C?hV:gV)(T,pV(1),f),H=Qt(I,W6(1)),G=v.left,ee=z6(H,G);if(ee&&u(ee.node)){const re=Math.abs(G-ee.left),me=Math.abs(G-ee.right);return Oc(n,e,ee.node,re<me,!1)}let J;if(r(f)?J=f.getNode():c(f)?J=f.getNode(!0):J=U1(o),J){const re=fY(n,T,pV(1),J);let me=z6(Qt(re,W6(1)),G);if(me||(me=gc(Qt(re,W6(0))),me))return JO(e,me.position.toRange(),!1)}return H.length===0?KT(e,C).filter(C?c:r).map(re=>OO(e,re.toRange(),!1)):U.none()},KT=(e,n)=>{const o=e.selection.getRng(),r=n?Ie.fromRangeEnd(o):Ie.fromRangeStart(o),c=N2(r.container(),e.getBody());if(n){const u=mw(c,r);return xr(u.positions)}else{const u=dw(c,r);return to(u.positions)}},j6=(e,n,o)=>KT(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),Zb=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},q6=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},G6=(e,n,o)=>VO(n,o).map(r=>(Zb(e,r),o)),bV=(e,n,o)=>{const r=Ie.fromRangeStart(e);if(e.collapsed)return r;{const c=Ie.fromRangeEnd(e);return o?Na(n,c).getOr(c):ja(n,r).getOr(r)}},vV=(e,n,o)=>{const r=e.getBody(),c=bV(e.selection.getRng(),r,o),u=Je(Up,e);return ZT(o,u,r,c).bind(v=>G6(e,n,v))},K6=(e,n,o)=>{const r=hn(ka(de.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=Qt(r,e),u=Qt(o,e);Te(Mc(c,u),Je(q6,!1)),Te(Mc(u,c),Je(q6,!0))},yV=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Ie.fromRangeStart(e.selection.getRng());Ie.isTextPosition(r)&&!Y7(r)&&(Zb(e,Mk(o,r)),n.set(null))}},kh=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=Qt(r,e);Te(c,u=>{const f=Ie.fromRangeStart(n.selection.getRng());vg(e,n.getBody(),f).bind(v=>G6(n,o,v))})}},YT=(e,n,o)=>J1(e)?vV(e,n,o).isSome():!1,Y6=(e,n,o)=>J1(n)?aV(e,n):!1,CV=e=>{const n=Dr(null),o=Je(Up,e);return e.on("NodeChange",r=>{J1(e)&&(K6(o,e.dom,r.parents),yV(e,n),kh(o,e,n,r.parents))}),n},wV=Je(Y6,!0),SV=Je(Y6,!1),XT=(e,n,o)=>{if(J1(e)){const r=KT(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?Ie.fromRangeEnd(c):Ie.fromRangeStart(c)});return vg(Je(Up,e),e.getBody(),r).exists(c=>{const u=WT(c);return VO(o,u).exists(f=>(Zb(e,f),!0))})}else return!1},QO=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},eR=e=>Is(zr(e),vu(e),(n,o)=>{const r=id(!0,n),c=id(!1,o);return ja(e,r).forall(u=>u.isEqual(c))}).getOr(!0),JT=(e,n)=>o=>VO(n,o).map(r=>()=>Zb(e,r)),tR=(e,n,o,r)=>{const c=e.getBody(),u=Je(Up,e);e.undoManager.ignore(()=>{e.selection.setRng(QO(o,r)),NE(e),vg(u,c,Ie.fromRangeStart(e.selection.getRng())).map(jO).bind(JT(e,n)).each(Sr)}),e.nodeChanged()},X6=(e,n)=>{const o=rm(n,e);return o||e},J6=(e,n,o,r)=>{const c=X6(e.getBody(),r.container()),u=Je(Up,e),f=vg(u,c,r);return f.bind(C=>o?C.fold(vt(U.some(jO(C))),U.none,vt(U.some(WT(C))),U.none):C.fold(U.none,vt(U.some(WT(C))),U.none,vt(U.some(jO(C))))).map(JT(e,n)).getOrThunk(()=>{const C=cg(o,c,r),T=C.bind(B=>vg(u,c,B));return Is(f,T,()=>ha(u,c,r).bind(B=>eR(B)?U.some(()=>{Tb(e,o,de.fromDom(B))}):U.none())).getOrThunk(()=>T.bind(()=>C.map(B=>()=>{o?tR(e,n,r,B):tR(e,n,B,r)})))})},nR=(e,n,o)=>{if(e.selection.isCollapsed()&&J1(e)){const r=Ie.fromRangeStart(e.selection.getRng());return J6(e,n,o,r)}return U.none()},fw=e=>Ku(e)>1,gw=(e,n)=>{const o=de.fromDom(e.getBody()),r=de.fromDom(e.selection.getStart()),c=hh(r,o);return Pr(c,n).fold(vt(c),u=>c.slice(0,u))},Q6=e=>Ku(e)===1,e$=e=>gw(e,n=>e.schema.isBlock(Rn(n))||fw(n)),t$=e=>gw(e,n=>e.schema.isBlock(Rn(n))),oR=(e,n)=>{const o=Je(nT,e);return Ca(n,r=>o(r)?[r.dom]:[])},hw=e=>{const n=t$(e);return oR(e,n)},sR=(e,n,o,r)=>{const c=oR(n,r);if(c.length===0)Tb(n,e,o);else{const u=iA(o.dom,c);n.selection.setRng(u.toRange())}},pw=(e,n)=>{const o=Qt(e$(e),Q6);return xr(o).bind(r=>{const c=Ie.fromRangeStart(e.selection.getRng());return wu(n,c,r.dom)&&!lf(r)?U.some(()=>sR(n,e,r,o)):U.none()})},xV=(e,n)=>{const o=n.parentElement;return co(n)&&!ae(o)&&e.dom.isEmpty(o)},n$=e=>lf(de.fromDom(e)),o$=(e,n)=>{const o=e.selection.getStart(),r=xV(e,o)||n$(o)?iA(o,n):lA(e.selection.getRng(),n);e.selection.setRng(r.toRange())},EV=(e,n)=>{const o=Mc(n,hw(e));o.length>0&&o$(e,o)},rR=e=>rt(e.startContainer),TV=e=>e.startOffset===0&&rR(e),s$=(e,n)=>{const o=n.startContainer.parentElement;return!ae(o)&&nT(e,de.fromDom(o))},gY=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!ae(n)&&!ae(o)&&n.isEqualNode(o)},_V=e=>{const n=e.endContainer;return e.endOffset===(rt(n)?n.length:n.childNodes.length)},kV=e=>gY(e)&&_V(e),AV=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),OV=e=>kV(e)||AV(e),RV=e=>{const n=e.selection.getRng();return TV(n)&&s$(e,n)&&OV(n)},DV=e=>{if(RV(e)){const n=hw(e);return U.some(()=>{NE(e),EV(e,n)})}else return U.none()},aR=(e,n)=>e.selection.isCollapsed()?pw(e,n):DV(e),MV=(e,n)=>Uh(e,o=>rl(o.dom),o=>n.isBlock(Rn(o))),r$=e=>MV(de.fromDom(e.selection.getStart()),e.schema),NV=e=>{const n=e.selection.getRng();return n.collapsed&&(rR(n)||e.dom.isEmpty(n.startContainer))&&!r$(e)},bm=e=>(NV(e)&&o$(e,[]),!0),QT=(e,n,o)=>We(o)?U.some(()=>{e._selectionOverrides.hideFakeCaret(),Tb(e,n,de.fromDom(o))}):U.none(),cR=(e,n)=>{const o=n?xb:pC,c=lb(n?1:-1,e.getBody(),e.selection.getRng());return o(c)?QT(e,n,c.getNode(!n)):U.from(id(n,c)).filter(u=>o(u)&&lv(c,u)).bind(u=>QT(e,n,u.getNode(!n)))},a$=(e,n)=>{const o=e.selection.getNode();return Kr(o)?QT(e,n,o):U.none()},bw=(e,n)=>e.selection.isCollapsed()?cR(e,n):a$(e,n),t1=e=>ws(e,n=>Ze(n.dom)||io(n.dom)).exists(n=>Ze(n.dom)),e_=e=>Yc(e??"").getOr(0),Tu=(e,n)=>{const o=e||H1(n)?"margin":"padding",r=Ls(n,"direction")==="rtl"?"-right":"-left";return o+r},jb=(e,n,o,r,c,u)=>{const f=Tu(o,de.fromDom(u)),v=e_(e.getStyle(u,f));if(n==="outdent"){const C=Math.max(0,v-r);e.setStyle(u,f,C?C+c:"")}else{const C=v+r+c;e.setStyle(u,f,C)}},iR=(e,n)=>ks(n,o=>{const r=Tu(Y0(e),o),c=nc(o,r).map(e_).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),c$=e=>{const n=i$(e);return!e.mode.isReadOnly()&&(n.length>1||iR(e,n))},lR=e=>lp(e)||up(e),PV=e=>Ea(e).exists(lR),i$=e=>Qt(Xu(e.selection.getSelectedBlocks()),n=>!lR(n)&&!PV(n)&&t1(n)),l$=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:c}=e,u=gk(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",v=e_(u),C=Y0(e);Te(i$(e),T=>{jb(c,n,C,v,f,T.dom)})},BV=e=>l$(e,"indent"),u$=e=>l$(e,"outdent"),uR=e=>{if(e.selection.isCollapsed()&&c$(e)){const n=e.dom,o=e.selection.getRng(),r=Ie.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&Y5(de.fromDom(c),r,e.schema))return U.some(()=>u$(e))}return U.none()},d$=(e,n,o)=>vl([uR,LT,RO,(r,c)=>nR(r,n,c),BT,qE,uw,bw,bg,aR,FT],r=>r(e,o)).filter(r=>e.selection.isEditable()),$V=(e,n)=>{d$(e,n,!1).fold(()=>{e.selection.isEditable()&&(NE(e),Zp(e))},Sr)},ny=(e,n)=>{d$(e,n,!0).fold(()=>{e.selection.isEditable()&&Ps(e)},Sr)},t_=(e,n)=>{e.addCommand("delete",()=>{$V(e,n)}),e.addCommand("forwardDelete",()=>{ny(e,n)})},dR=5,m$=400,n_=e=>e.touches===void 0||e.touches.length!==1?U.none():U.some(e.touches[0]),IV=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>dR||r>dR},LV=e=>{const n=Fs(),o=Dr(!1),r=_0(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},m$);e.on("touchstart",c=>{n_(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),n_(c).each(u=>{n.on(f=>{IV(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},mR=(e,n)=>an(e,n.nodeName),FV=(e,n)=>rt(n)?!0:_t(n)?!mR(e.getBlockElements(),n)&&!Oi(n)&&!rc(e,n)&&!R(n):!1,HV=(e,n,o)=>vo(E7(de.fromDom(o),de.fromDom(n)),r=>mR(e,r.dom)),zV=(e,n)=>{if(rt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||mR(e,n.nextSibling)||R(n.nextSibling)}return!1},fR=e=>e.dom.create(Jr(e),Bl(e)),f$=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let v,C,T=null;const B=Jr(e);if(!u||!_t(u))return;const I=f.nodeName.toLowerCase();if(!r.isValidChild(I,B.toLowerCase())||HV(c,f,u))return;if(f.firstChild===f.lastChild&&co(f.firstChild)){v=fR(e),v.appendChild(Xf().dom),f.replaceChild(v,f.firstChild),e.selection.setCursorLocation(v,0),e.nodeChanged();return}let H=f.firstChild;for(;H;)if(_t(H)&&Qu(r,H),FV(r,H)){if(zV(c,H)){C=H,H=H.nextSibling,n.remove(C);continue}if(!v){if(!T&&e.hasFocus()&&(T=FO(e.selection.getRng(),()=>document.createElement("span"))),!H.parentNode){H=null;break}v=fR(e),f.insertBefore(v,H)}C=H,H=H.nextSibling,v.appendChild(C)}else v=null,H=H.nextSibling;T&&(e.selection.setRng(HO(T)),e.nodeChanged())},g$=(e,n,o)=>{const r=de.fromDom(fR(e)),c=Xf();ps(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},VV=e=>{e.on("NodeChange",()=>f$(e))},lr=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,h$=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const v=n.lastIndexOf("<",u);if(v!==-1&&n.substring(v,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},o_=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],h$(e,c,sv(e)));o.content=c}},p$=(e,n)=>ks(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),s_=e=>{const n="contenteditable",o=" "+Qe.trim(ZM(e))+" ",r=" "+Qe.trim(sv(e))+" ",c=lr(o),u=lr(r),f=Sp(e);f.length>0&&e.on("BeforeSetContent",v=>{o_(e,f,v)}),e.parser.addAttributeFilter("class",v=>{let C=v.length;for(;C--;){const T=v[C];c(T)?T.attr(n,"true"):u(T)&&T.attr(n,"false")}}),e.serializer.addAttributeFilter(n,v=>{let C=v.length;for(;C--;){const T=v[C];if(!c(T)&&!u(T))continue;const B=T.attr("data-mce-content");f.length>0&&B?p$(f,B)?(T.name="#text",T.type=3,T.raw=!0,T.value=B):T.remove():T.attr(n,null)}})},UV=e=>hr(de.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),gR=(e,n)=>{n.hasAttribute("data-mce-caret")&&(us(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},WV=(e,n)=>{const o=UV(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),gR(e,o);return}Hy(o)&&(gR(e,o),e.undoManager.add())}},ZV=e=>{e.on("keyup compositionstart",Je(WV,e))},b$=io,v$=(e,n,o)=>Z6(n,e,o,zp,Vp,b$),jV=(e,n,o)=>e1(n,e,o,u=>zp(u)||G5(u),u=>Vp(u)||p3(u),b$),qV=e=>{const n=e.dom.create(Jr(e));return n.innerHTML='<br data-mce-bogus="1">',n},oy=(e,n,o)=>{const r=ol(e.getBody()),c=Je(ub,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(Ie.fromRangeStart(o))){const v=de.fromDom(qV(e));n===1?$c(de.fromDom(u),v):za(de.fromDom(u),v),e.selection.select(v.dom,!0),e.selection.collapse()}}},Ah=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return v$(o,e,r).orThunk(()=>(oy(e,o,r),U.none()))},qb=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return jV(o,e,r).orThunk(()=>(oy(e,o,r),U.none()))},r_=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return O3(o)?!n:n},a_=(e,n)=>Ah(e,r_(e.selection,n)).exists(o=>(Rc(e,o),!0)),c_=(e,n)=>qb(e,n).exists(o=>(Rc(e,o),!0)),hR=(e,n)=>j6(e,n,n?Vp:zp),i_=(e,n)=>DO(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Rc(e,o),!0)),y$=e=>gn(["figcaption"],Rn(e)),C$=(e,n,o)=>{const r=Je(oo,n);return ws(de.fromDom(e.container()),c=>o.isBlock(Rn(c)),r).filter(y$)},GV=(e,n,o)=>n?pd(e.dom,o):lV(e.dom,o),KV=(e,n)=>{const o=de.fromDom(e.getBody()),r=Ie.fromRangeStart(e.selection.getRng());return C$(r,o,e.schema).exists(()=>{if(GV(o,n,r)){const u=g$(e,o,n?ps:Fd);return e.selection.setRng(u),!0}else return!1})},w$=(e,n)=>e.selection.isCollapsed()?KV(e,n):!1,YV=(e,n,o)=>{const r=e.selection.getRng(),c=Ie.fromRangeStart(r);return e.getBody().firstChild===n&&lV(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},XV=(e,n)=>{const o=e.selection.getRng(),r=Ie.fromRangeStart(o);return e.getBody().lastChild===n&&pd(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},JV=(e,n)=>n?U.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>XV(e,o)).getOr(!1):U.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>U.from(e.dom.getParent(o,"details")).map(r=>YV(e,r,o))).getOr(!1),pR=(e,n)=>JV(e,n),bR={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},hY=e=>hn(e,n=>({...bR,...n})),pY=e=>hn(e,n=>({...bR,...n})),QV=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,eU=(e,n)=>Ca(hY(e),o=>QV(o,n)?[o]:[]),bY=(e,n)=>Ca(pY(e),o=>QV(o,n)?[o]:[]),xn=(e,...n)=>()=>e.apply(null,n),vw=(e,n)=>Cs(eU(e,n),o=>o.action()),S$=(e,n)=>vl(bY(e,n),o=>o.action()),tU=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Z6(e,o,r,xb,pC,Kr).exists(c=>(Rc(e,c),!0))},x$=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return e1(e,o,r,xb,pC,Kr).exists(c=>(Rc(e,c),!0))},Bi=(e,n)=>j6(e,n,n?pC:xb),vR=ho.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),yw={...vR,none:e=>vR.none(e)},E$=(e,n)=>yR(e,n,pt),yR=(e,n,o)=>Ca(Lr(e),r=>Ha(r,n)?o(r)?[r]:[]:yR(r,n,o)),T$=(e,n,o=Ge)=>{if(o(n))return U.none();if(gn(e,Rn(n)))return U.some(n);const r=c=>Ha(c,"table")||o(c);return Id(n,e.join(","),r)},CR=(e,n)=>T$(["td","th"],e,n),_$=e=>E$(e,"th,td"),k$=(e,n)=>Wt(e,"table",n),u_=(e,n,o,r,c=pt)=>{const u=r===1;if(!u&&o<=0)return yw.first(e[0]);if(u&&o>=e.length-1)return yw.last(e[e.length-1]);{const f=o+r,v=e[f];return c(v)?yw.middle(n,v):u_(e,n,f,r,c)}},A$=(e,n)=>k$(e,n).bind(o=>{const r=_$(o);return Pr(r,u=>oo(e,u)).map(u=>({index:u,all:r}))}),nU=(e,n,o)=>A$(e,o).fold(()=>yw.none(e),c=>u_(c.all,e,c.index,1,n)),oU=(e,n,o)=>A$(e,o).fold(()=>yw.none(),c=>u_(c.all,e,c.index,-1,n)),wR=e=>B4(e).filter(n=>n.trim().length!==0||n.indexOf(rr)>-1).isSome(),sU=e=>$m(e)&&Sa(e,"contenteditable")==="false",rU=["img","br"],vY=e=>wR(e)||gn(rU,Rn(e))||sU(e),aU=e=>$d(e,vY),O$=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),yY=(e,n)=>Ca(n,o=>{const r=O$(qg(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),cU=(e,n,o)=>cs(e,(r,c)=>r.fold(()=>U.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),v=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return U.some(v<f?c:u)}),U.none()),R$=(e,n,o,r,c)=>{const u=ka(de.fromDom(o),"td,th,caption").map(v=>v.dom),f=Qt(yY(e,u),v=>n(v,c));return cU(f,r,c).map(v=>v.cell)},iU=e=>e.bottom,SR=e=>e.top,d_=(e,n)=>e.y<n,D$=(e,n)=>e.y>n,M$=Je(R$,iU,d_),lU=Je(R$,SR,D$),uU=(e,n)=>to(n.getClientRects()).bind(o=>M$(e,o.left,o.top)).bind(o=>GT(I6(o),n)),xR=(e,n)=>xr(n.getClientRects()).bind(o=>lU(e,o.left,o.top)).bind(o=>GT(GO(o),n)),dU=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),mU=e=>e.breakType===hd.Wrap&&e.positions.length===0,fU=e=>e.breakType===hd.Br&&e.positions.length===1,N$=(e,n,o)=>{const r=e(n,o);return mU(r)||!co(o.getNode())&&fU(r)?!dU(e,n,r):r.breakAt.isNone()},vm=Je(N$,dw),P$=Je(N$,mw),B$=(e,n,o)=>{const r=Ie.fromRangeStart(n);return bu(!e,o).exists(c=>c.isEqual(r))},CY=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return Mx()&&B$(n,c,o)?(Oc(u,e,o,!n,!1).each(f=>{Rc(e,f)}),!0):!1},wY=(e,n,o)=>uU(n,o).orThunk(()=>to(o.getClientRects()).bind(r=>qO(B6(e,Ie.before(n)),r.left))).getOr(Ie.before(n)),SY=(e,n,o)=>xR(n,o).orThunk(()=>to(o.getClientRects()).bind(r=>qO($6(e,Ie.after(n)),r.left))).getOr(Ie.after(n)),gU=(e,n)=>{const o=n.getNode(e);return Ol(o)?U.some(o):U.none()},hU=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?$c:za,c=g$(n,de.fromDom(o),r);Rc(n,c)})},Cw=(e,n,o)=>{const r=gU(!!n,o),c=n===!1;r.fold(()=>Rc(e,o.toRange()),u=>bu(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Rc(e,o.toRange()),f=>hU(n,e,u)))},pU=(e,n,o,r)=>{const c=e.selection.getRng(),u=Ie.fromRangeStart(c),f=e.getBody();if(!n&&vm(r,u)){const v=wY(f,o,u);return Cw(e,n,v),!0}else if(n&&P$(r,u)){const v=SY(f,o,u);return Cw(e,n,v),!0}else return!1},m_=(e,n,o)=>U.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>U.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),ER=(e,n)=>m_(e,n,CY),f_=(e,n)=>m_(e,n,pU),$$=e=>{const n=$p.exact(e,0,e,0);return dC(n)},I$=(e,n,o)=>o.fold(U.none,U.none,(r,c)=>aU(c).map(u=>$$(u)),r=>e.mode.isReadOnly()||!bU(r)?U.none():(e.execCommand("mceTableInsertRowAfter"),L$(e,n,r))),bU=e=>ws(e,_l("table")).exists(wi),L$=(e,n,o)=>I$(e,n,nU(o,ww)),vU=(e,n,o)=>I$(e,n,oU(o,ww)),ww=e=>wi(e)||Wh(e,yU),yU=e=>$m(e)&&wi(e),F$=(e,n)=>{const o=["table","li","dl"],r=de.fromDom(e.getBody()),c=v=>{const C=Rn(v);return oo(v,r)||gn(o,C)},u=e.selection.getRng(),f=de.fromDom(n?u.endContainer:u.startContainer);return CR(f,c).map(v=>(k$(v,c).each(B=>{e.model.table.clearSelectedCells(B.dom)}),e.selection.collapse(!n),(n?L$:vU)(e,c,v).each(B=>{e.selection.setRng(B)}),!0)).getOr(!1)},CU=(e,n,o)=>{const r=Vt.os.isMacOS()||Vt.os.isiOS();vw([{keyCode:qe.RIGHT,action:xn(a_,e,!0)},{keyCode:qe.LEFT,action:xn(a_,e,!1)},{keyCode:qe.UP,action:xn(c_,e,!1)},{keyCode:qe.DOWN,action:xn(c_,e,!0)},...r?[{keyCode:qe.UP,action:xn(i_,e,!1),metaKey:!0,shiftKey:!0},{keyCode:qe.DOWN,action:xn(i_,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:qe.RIGHT,action:xn(ER,e,!0)},{keyCode:qe.LEFT,action:xn(ER,e,!1)},{keyCode:qe.UP,action:xn(f_,e,!1)},{keyCode:qe.DOWN,action:xn(f_,e,!0)},{keyCode:qe.UP,action:xn(f_,e,!1)},{keyCode:qe.UP,action:xn(pR,e,!1)},{keyCode:qe.DOWN,action:xn(pR,e,!0)},{keyCode:qe.RIGHT,action:xn(tU,e,!0)},{keyCode:qe.LEFT,action:xn(tU,e,!1)},{keyCode:qe.UP,action:xn(x$,e,!1)},{keyCode:qe.DOWN,action:xn(x$,e,!0)},{keyCode:qe.RIGHT,action:xn(YT,e,n,!0)},{keyCode:qe.LEFT,action:xn(YT,e,n,!1)},{keyCode:qe.RIGHT,ctrlKey:!r,altKey:r,action:xn(wV,e,n)},{keyCode:qe.LEFT,ctrlKey:!r,altKey:r,action:xn(SV,e,n)},{keyCode:qe.UP,action:xn(w$,e,!1)},{keyCode:qe.DOWN,action:xn(w$,e,!0)}],o).each(c=>{o.preventDefault()})},TR=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||CU(e,n,o)})},Cf=(e,n)=>({container:e,offset:n}),g_=vs.DOM,Sw=e=>n=>e===n?-1:0,wU=e=>n=>e.isBlock(n)||gn(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",_R=(e,n,o)=>{if(rt(e)&&n>=0)return U.some(Cf(e,n));{const r=Kf(g_);return U.from(r.backwards(e,n,Sw(e),o)).map(c=>Cf(c.container,c.container.data.length))}},SU=(e,n,o)=>{if(rt(e)&&n>=e.length)return U.some(Cf(e,n));{const r=Kf(g_);return U.from(r.forwards(e,n,Sw(e),o)).map(c=>Cf(c.container,0))}},kR=(e,n,o)=>{if(!rt(e))return U.none();const r=e.data;if(n>=0&&n<=r.length)return U.some(Cf(e,n));{const c=Kf(g_);return U.from(c.backwards(e,n,Sw(e),o)).bind(u=>{const f=u.container.data;return kR(u.container,n+f.length,o)})}},H$=(e,n,o)=>{if(!rt(e))return U.none();const r=e.data;if(n<=r.length)return U.some(Cf(e,n));{const c=Kf(g_);return U.from(c.forwards(e,n,Sw(e),o)).bind(u=>H$(u.container,n-r.length,o))}},AR=(e,n,o,r,c)=>{const u=Kf(e,wU(e));return U.from(u.backwards(n,o,r,c))},OR=e=>e.collapsed&&rt(e.startContainer),xU=e=>tl(e.toString().replace(/\u00A0/g," ")),RR=e=>e!==""&&` \uFEFF\f
\r	\v`.indexOf(e)!==-1,EU=(e,n)=>e.substring(n.length),TU=(e,n,o,r=!1)=>{let c;const u=o.charAt(0);for(c=n-1;c>=0;c--){const f=e.charAt(c);if(!r&&RR(f))return U.none();if(u===f&&or(e,o,c,n))break}return U.some(c)},DR=(e,n,o,r=!1)=>{if(!OR(n))return U.none();const c={text:"",offset:0},u=(v,C,T)=>(c.text=T+c.text,c.offset+=C,TU(c.text,c.offset,o,r).getOr(C)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return AR(e,n.startContainer,n.startOffset,u,f).bind(v=>{const C=n.cloneRange();if(C.setStart(v.container,v.offset),C.setEnd(n.endContainer,n.endOffset),C.collapsed)return U.none();const T=xU(C);return T.lastIndexOf(o)!==0?U.none():U.some({text:EU(T,o),range:C,trigger:o})})},_U=e=>e.nodeType===Of,kU=e=>e.nodeType===Jl,z$=e=>{if(_U(e))return Cf(e,e.data.length);{const n=e.childNodes;return n.length>0?z$(n[n.length-1]):Cf(e,n.length)}},oa=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?oa(o[n],0):o.length>0&&kU(e)&&o.length===n?z$(o[o.length-1]):Cf(e,n)},AU=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return AR(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!RR(u)}).isSome()},OU=e=>n=>{const o=oa(n.startContainer,n.startOffset);return!AU(e,o)},RU=(e,n,o)=>vl(o.triggers,r=>DR(e,n,r)),V$=(e,n)=>{const o=n(),r=e.selection.getRng();return RU(e.dom,r,o).bind(c=>h_(e,n,c))},h_=(e,n,o,r={})=>{var c;const u=n(),v=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",C=Qt(u.lookupByTrigger(o.trigger),B=>o.text.length>=B.minChars&&B.matches.getOrThunk(()=>OU(e.dom))(o.range,v,o.text));if(C.length===0)return U.none();const T=Promise.all(hn(C,B=>B.fetch(o.text,B.maxResults,r).then(H=>({matchText:o.text,items:H,columns:B.columns,onAction:B.onAction,highlightOn:B.highlightOn}))));return U.some({lookupData:T,context:o})};var _u;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(_u||(_u={}));const yg=(e,n,o)=>e.stype===_u.Error?n(e.serror):o(e.svalue),MR=e=>{const n=[],o=[];return Te(e,r=>{yg(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},U$=(e,n)=>e.stype===_u.Error?{stype:_u.Error,serror:n(e.serror)}:e,NR=(e,n)=>e.stype===_u.Value?{stype:_u.Value,svalue:n(e.svalue)}:e,PR=(e,n)=>e.stype===_u.Value?n(e.svalue):e,BR=(e,n)=>e.stype===_u.Error?n(e.serror):e,$R=e=>({stype:_u.Value,svalue:e}),xw=e=>({stype:_u.Error,serror:e}),ba={fromResult:e=>e.fold(xw,$R),toResult:e=>yg(e,ri.error,ri.value),svalue:$R,partition:MR,serror:xw,bind:PR,bindError:BR,map:NR,mapError:U$,fold:yg},ku=e=>Ot(e)&&is(e).length>100?" removed due to size":JSON.stringify(e,null,2),Ew=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:vt("... (only showing first ten failures)")}]):e;return hn(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},Tw=(e,n)=>ba.serror([{path:e,getErrorInfo:n}]),W$=(e,n,o)=>Tw(e,()=>'Could not find valid *required* value for "'+n+'" in '+ku(o)),DU=(e,n)=>Tw(e,()=>'Choice schema did not contain choice key: "'+n+'"'),Z$=(e,n,o)=>Tw(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+ku(n)),MU=(e,n)=>Tw(e,vt(n)),NU=(e,n,o,r)=>Mo(o,r).fold(()=>Z$(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),_w=(e,n)=>({extract:(c,u)=>Mo(u,e).fold(()=>DU(c,e),v=>NU(c,u,n,v)),toString:()=>"chooseOn("+e+"). Possible values: "+is(n)}),PU=(e,n)=>n,BU=(e,n)=>Io(e)&&Io(n)?b_(e,n):n,j$=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)an(c,u)&&(o[u]=e(o[u],c[u]))}return o},b_=j$(BU),q$=j$(PU),LR=()=>({tag:"required",process:{}}),$U=e=>({tag:"defaultedThunk",process:e}),G$=e=>$U(vt(e)),IU=()=>({tag:"option",process:{}}),LU=(e,n)=>e.length>0?ba.svalue(b_(n,q$.apply(void 0,e))):ba.svalue(n),K$=e=>D(ba.serror,Zl)(e),Y$={consolidateObj:(e,n)=>{const o=ba.partition(e);return o.errors.length>0?K$(o.errors):LU(o.values,n)},consolidateArr:e=>{const n=ba.partition(e);return n.errors.length>0?K$(n.errors):ba.svalue(n.values)}},X$=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),J$=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),FR=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},HR=e=>{const n=(r,c)=>ba.bindError(e(c),u=>MU(r,u)),o=vt("val");return{extract:n,toString:o}},FU=HR(ba.svalue),HU=(e,n,o,r)=>Mo(n,o).fold(()=>W$(e,o,n),r),Q$=(e,n,o,r)=>{const c=Mo(e,n).getOrThunk(()=>o(e));return r(c)},eI=(e,n,o)=>o(Mo(e,n)),zU=(e,n,o,r)=>{const c=Mo(e,n).map(u=>u===!0?o(e):u);return r(c)},tI=(e,n,o,r,c)=>{const u=v=>c.extract(n.concat([r]),v),f=v=>v.fold(()=>ba.svalue(U.none()),C=>{const T=c.extract(n.concat([r]),C);return ba.map(T,U.some)});switch(e.tag){case"required":return HU(n,o,r,u);case"defaultedThunk":return Q$(o,r,e.process,u);case"option":return eI(o,r,f);case"defaultedOptionThunk":return zU(o,r,e.process,f);case"mergeWithThunk":return Q$(o,r,vt({}),v=>{const C=b_(e.process(o),v);return u(C)})}},VU=(e,n,o)=>{const r={},c=[];for(const u of o)FR(u,(f,v,C,T)=>{const B=tI(C,e,n,f,T);ba.fold(B,I=>{c.push(...I)},I=>{r[v]=I})},(f,v)=>{r[f]=v(n)});return c.length>0?ba.serror(c):ba.svalue(r)},kw=e=>({extract:(r,c)=>VU(r,c,e),toString:()=>`obj{
`+hn(e,c=>FR(c,(u,f,v,C)=>u+" -> "+C.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),v_=e=>({extract:(r,c)=>{const u=hn(c,(f,v)=>e.extract(r.concat(["["+v+"]"]),f));return Y$.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),UU=(e,n)=>{const o=Jo;return{extract:(u,f)=>{const v=[];for(const C of e){const T=C.extract(u,f);if(T.stype===_u.Value)return{stype:_u.Value,svalue:o(T.svalue)};v.push(T)}return Y$.consolidateArr(v)},toString:()=>"oneOf("+hn(e,u=>u.toString()).join(", ")+")"}},WU=D(v_,kw),ZU=e=>HR(n=>e(n).fold(ba.serror,ba.svalue)),jU=(e,n,o)=>{const r=n.extract([e],o);return ba.mapError(r,c=>({input:o,errors:c}))},nI=(e,n,o)=>ba.toResult(jU(e,n,o)),qU=e=>`Errors: 
`+Ew(e.errors).join(`
`)+`

Input object: `+ku(e.input),zR=(e,n)=>_w(e,Yn(n,kw)),oI=vt(FU),y_=(e,n)=>HR(o=>{const r=typeof o;return e(o)?ba.svalue(o):ba.serror(`Expected type: ${n} but got: ${r}`)}),GU=y_(_s,"number"),Gb=y_(le,"string"),KU=y_(bn,"boolean"),VR=y_(pe,"function"),sy=X$,UR=J$,WR=e=>ZU(n=>gn(e,n)?ri.value(n):ri.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),ZR=(e,n)=>sy(e,e,LR(),n),sI=e=>ZR(e,Gb),jR=(e,n)=>sy(e,e,LR(),WR(n)),rI=e=>ZR(e,VR),aI=(e,n)=>sy(e,e,LR(),v_(n)),qR=(e,n)=>sy(e,e,IU(),n),Kb=e=>qR(e,Gb),YU=e=>qR(e,VR),TY=(e,n)=>sy(e,e,G$(n),oI()),ry=(e,n,o)=>sy(e,e,G$(n),o),Aw=(e,n)=>ry(e,n,GU),Ow=(e,n)=>ry(e,n,Gb),GR=(e,n,o)=>ry(e,n,WR(o)),KR=(e,n)=>ry(e,n,KU),Cg=(e,n)=>ry(e,n,VR),cI=(e,n,o)=>ry(e,n,v_(o)),XU=sI("type"),JU=rI("fetch"),YR=rI("onAction"),iI=Cg("onSetup",()=>Ut),QU=Kb("text"),XR=Kb("icon"),eW=Kb("tooltip"),tW=Kb("label"),nW=KR("active",!1),lI=KR("enabled",!0),uI=KR("primary",!1),oW=e=>TY("columns",e),Rw=e=>Ow("type",e),sW=kw([XU,sI("trigger"),Aw("minChars",1),oW(1),Aw("maxResults",10),YU("matches"),JU,YR,cI("highlightOn",[],Gb)]),rW=e=>nI("Autocompleter",sW,e),sa=[lI,eW,XR,QU,iI,Ow("context","mode:design")],wf=[nW].concat(sa),C_=[Cg("predicate",Ge),GR("scope","node",["node","editor"]),GR("position","selection",["node","selection","line"])],_Y=sa.concat([Rw("contextformbutton"),Ow("align","end"),uI,YR,UR("original",Jo)]),aW=wf.concat([Rw("contextformbutton"),Ow("align","end"),uI,YR,UR("original",Jo)]),cW=sa.concat([Rw("contextformbutton")]),iW=wf.concat([Rw("contextformtogglebutton")]),lW=zR("type",{contextformbutton:_Y,contextformtogglebutton:aW}),w_=[tW,aI("commands",lW),qR("launch",zR("type",{contextformbutton:cW,contextformtogglebutton:iW})),Cg("onInput",Ut),Cg("onSetup",Ut)],ay=[...C_,...w_,jR("type",["contextform"]),Cg("initValue",vt("")),Kb("placeholder")],kY=[...C_,...w_,jR("type",["contextsliderform"]),Cg("initValue",vt(0)),Cg("min",vt(0)),Cg("max",vt(100))],uW=[...C_,...w_,jR("type",["contextsizeinputform"]),Cg("initValue",vt({width:"",height:""}))];zR("type",{contextform:ay,contextsliderform:kY,contextsizeinputform:uW}),kw([Rw("contexttoolbar"),ZR("items",UU([Gb,WU([Kb("name"),Kb("label"),aI("items",Gb)])]))].concat(C_));const dW=e=>{const n=e.ui.registry.getAll().popups,o=Yn(n,f=>rW(f).fold(v=>{throw new Error(qU(v))},Jo)),r=$u(mc(o,f=>f.trigger)),c=Ii(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Qt(c,v=>v.trigger===f)}},Sf=(e,n)=>{const o=_0(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),n.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},mW=e=>{const n=Fs(),o=Dr(!1),r=n.isSet,c=()=>{r()&&(Mr(e),o.set(!1),n.clear())},u=I=>{r()||n.set({trigger:I.trigger,matchLength:I.text.length})},f=Zr(()=>dW(e)),v=I=>n.get().map(H=>DR(e.dom,e.selection.getRng(),H.trigger,!0).bind(G=>h_(e,f,G,I))).getOrThunk(()=>V$(e,f)),C=I=>{v(I).fold(c,H=>{u(H.context),H.lookupData.then(G=>{n.get().map(ee=>{const J=H.context;ee.trigger===J.trigger&&(n.set({...ee,matchLength:J.text.length}),o.get()?(br(e,{range:J.range}),ik(e,{lookupData:G})):(o.set(!0),br(e,{range:J.range}),ck(e,{lookupData:G})))})})})},T=(I,H)=>{const G=I.compareBoundaryPoints(window.Range.START_TO_START,H),ee=I.compareBoundaryPoints(window.Range.END_TO_END,H);return G>=0&&ee<=0},B=()=>n.get().bind(({trigger:I})=>{const H=e.selection.getRng();return DR(e.dom,H,I,o.get()).filter(({range:G})=>T(H,G)).map(({range:G})=>G)});e.addCommand("mceAutocompleterReload",(I,H)=>{const G=Ot(H)?H.fetchOptions:{};C(G)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{B().each(I=>{br(e,{range:I})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>B().isSome()),Sf(e,{cancelIfNecessary:c,load:C})},dI=ia().browser.isSafari(),mI=e=>Jf(de.fromDom(e)),S_=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},bd=(e,n)=>U.from(e.getParent(n.container(),"details")),JR=(e,n)=>bd(e,n).isSome(),fI=(e,n)=>{const o=U.from(e.getParent(n.startContainer,"details")),r=U.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>U.from(e.select("summary",u)[0]));return U.some({startSummary:c,startDetails:o,endDetails:r})}else return U.none()},fW=(e,n)=>zr(n).exists(o=>o.isEqual(e)),x_=(e,n)=>vu(n).exists(o=>co(o.getNode())&&Na(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),QR=(e,n)=>n.startSummary.exists(o=>fW(e,o)),gI=(e,n)=>n.startSummary.exists(o=>x_(e,o)),hI=(e,n)=>n.startDetails.exists(o=>Na(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),gW=(e,n,o)=>o.startDetails.exists(r=>ja(e,n).forall(c=>!r.contains(c.container()))),pI=(e,n)=>{const o=n.getNode();Xo(o)||e.selection.setCursorLocation(o,n.offset())},bI=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?zr(c):vu(c)).each(f=>pI(e,f))}else pI(e,n)},hW=(e,n)=>{const o=C=>C.contains(e.startContainer),r=C=>C.contains(e.endContainer),c=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(C=>n.endDetails.forall(T=>C!==T));return(c||u)&&!(c&&u)||f},vI=(e,n,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=Ie.fromRangeStart(c.getRng()),v=r.getParent(f.container(),r.isBlock),C=bd(r,f),T=v&&r.isEmpty(v),B=ae(v==null?void 0:v.previousSibling),I=ae(v==null?void 0:v.nextSibling);return T&&(n?I:B)&&cg(!n,u,f).exists(ee=>JR(r,ee)&&!$s(C,bd(r,ee)))?!0:cg(n,u,f).fold(Ge,H=>{const G=bd(r,H);if(JR(r,H)&&!$s(C,G)){if(n||bI(e,H,!1),v&&T){if(n&&B)return!0;if(!n&&I)return!0;bI(e,H,n),e.dom.remove(v)}return!0}else return!1})}else return!1},yI=(e,n,o,r)=>{const u=e.selection.getRng(),f=Ie.fromRangeStart(u),v=e.getBody();return r==="selection"?hW(u,n):o?gI(f,n)||gW(v,f,n):QR(f,n)||hI(f,n)},pW=(e,n,o)=>fI(e.dom,e.selection.getRng()).fold(()=>vI(e,n,o),r=>yI(e,r,n,o)||vI(e,n,o)),bW=(e,n,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=Ie.fromRangeStart(u);return g0(c)?(o==="selection"&&S_(u,c)||wu(n,f,c)?mI(c):e.undoManager.transact(()=>{const v=r.getSel();let{anchorNode:C,anchorOffset:T,focusNode:B,focusOffset:I}=v??{};const H=()=>{We(C)&&We(T)&&We(B)&&We(I)&&(v==null||v.setBaseAndExtent(C,T,B,I))},G=()=>{C=v==null?void 0:v.anchorNode,T=v==null?void 0:v.anchorOffset,B=v==null?void 0:v.focusNode,I=v==null?void 0:v.focusOffset},ee=(re,me)=>{Te(re.childNodes,Ce=>{lg(Ce)&&me.appendChild(Ce)})},J=e.dom.create("span",{"data-mce-bogus":"1"});ee(c,J),c.appendChild(J),H(),(o==="word"||o==="line")&&(v==null||v.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&S_(r.getRng(),J)?mI(c):(e.execCommand(n?"ForwardDelete":"Delete"),G(),ee(J,c),H()),e.dom.remove(J)}),!0):!1},Yb=(e,n,o)=>pW(e,n,o)||dI&&bW(e,n,o)?U.some(Ut):U.none(),CI=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Ut,inputType:o},f=x0(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},Dw=CI("input"),Mw=CI("beforeinput"),eD=ia(),wI=eD.os,SI=wI.isMacOS()||wI.isiOS(),tD=eD.browser.isFirefox(),vW=(e,n,o)=>{const r=o.keyCode===qe.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=v=>c?v?"word":"line":"selection";S$([{keyCode:qe.BACKSPACE,action:xn(uR,e)},{keyCode:qe.BACKSPACE,action:xn(LT,e,!1)},{keyCode:qe.DELETE,action:xn(LT,e,!0)},{keyCode:qe.BACKSPACE,action:xn(RO,e,!1)},{keyCode:qe.DELETE,action:xn(RO,e,!0)},{keyCode:qe.BACKSPACE,action:xn(nR,e,n,!1)},{keyCode:qe.DELETE,action:xn(nR,e,n,!0)},{keyCode:qe.BACKSPACE,action:xn(qE,e,!1)},{keyCode:qe.DELETE,action:xn(qE,e,!0)},{keyCode:qe.BACKSPACE,action:xn(Yb,e,!1,u)},{keyCode:qe.DELETE,action:xn(Yb,e,!0,u)},...SI?[{keyCode:qe.BACKSPACE,altKey:!0,action:xn(Yb,e,!1,f(!0))},{keyCode:qe.DELETE,altKey:!0,action:xn(Yb,e,!0,f(!0))},{keyCode:qe.BACKSPACE,metaKey:!0,action:xn(Yb,e,!1,f(!1))}]:[{keyCode:qe.BACKSPACE,ctrlKey:!0,action:xn(Yb,e,!1,f(!0))},{keyCode:qe.DELETE,ctrlKey:!0,action:xn(Yb,e,!0,f(!0))}],{keyCode:qe.BACKSPACE,action:xn(uw,e,!1)},{keyCode:qe.DELETE,action:xn(uw,e,!0)},{keyCode:qe.BACKSPACE,action:xn(bw,e,!1)},{keyCode:qe.DELETE,action:xn(bw,e,!0)},{keyCode:qe.BACKSPACE,action:xn(bg,e,!1)},{keyCode:qe.DELETE,action:xn(bg,e,!0)},{keyCode:qe.BACKSPACE,action:xn(BT,e,!1)},{keyCode:qe.DELETE,action:xn(BT,e,!0)},{keyCode:qe.BACKSPACE,action:xn(aR,e,!1)},{keyCode:qe.DELETE,action:xn(aR,e,!0)},{keyCode:qe.BACKSPACE,action:xn(FT,e,!1)},{keyCode:qe.DELETE,action:xn(FT,e,!0)}],o).filter(v=>e.selection.isEditable()).each(v=>{o.preventDefault(),Mw(e,r).isDefaultPrevented()||(v(),Dw(e,r))})},yW=(e,n,o)=>vw([{keyCode:qe.BACKSPACE,action:xn(lw,e)},{keyCode:qe.DELETE,action:xn(lw,e)},...SI?[{keyCode:qe.BACKSPACE,altKey:!0,action:xn(bm,e)},{keyCode:qe.DELETE,altKey:!0,action:xn(bm,e)},...o?[{keyCode:tD?224:91,action:xn(bm,e)}]:[]]:[{keyCode:qe.BACKSPACE,ctrlKey:!0,action:xn(bm,e)},{keyCode:qe.DELETE,ctrlKey:!0,action:xn(bm,e)}]],n),CW=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===qe.BACKSPACE,r.isDefaultPrevented()||vW(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||yW(e,r,o),o=!1})},xI=e=>{for(;e;){if(_t(e)||rt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},cy=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=xI(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(rr),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new da(n,n);let f=n,v;for(;v=u.current();){if(rt(v)){c.setStart(v,0),c.setEnd(v,0);break}if(r[v.nodeName.toLowerCase()]){c.setStartBefore(v),c.setEndBefore(v);break}f=v,v=u.next()}v||(c.setStart(f,0),c.setEnd(f,0))}else co(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),Dv(e,c)},iy=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},nD=e=>U.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),wW=e=>nD(e).fold(vt(""),n=>n.nodeName.toUpperCase()),OY=e=>nD(e).filter(n=>up(de.fromDom(n))).isSome(),uc=e=>{e.innerHTML='<br data-mce-bogus="1">'},SW=(e,n,o)=>{const r=e.dom;U.from(o.style).map(r.parseStyle).each(C=>{const B={..._a(de.fromDom(n)),...C};r.setStyles(n,B)});const c=U.from(o.class).map(C=>C.split(/\s+/)),u=U.from(n.className).map(C=>Qt(C.split(/\s+/),T=>T!==""));Is(c,u,(C,T)=>{const B=Qt(T,H=>!gn(C,H)),I=[...C,...B];r.setAttrib(n,"class",I.join(" "))});const f=["style","class"],v=Wo(o,(C,T)=>!gn(f,T));r.setAttribs(n,v)},Nw=(e,n)=>{if(Jr(e).toLowerCase()===n.tagName.toLowerCase()){const r=Bl(e);SW(e,n,r)}},EI=(e,n,o,r,c=!0,u,f)=>{const v=e.dom,C=e.schema,T=Jr(e),B=o?o.nodeName.toUpperCase():"";let I=n;const H=C.getTextInlineElements();let G;u||B==="TABLE"||B==="HR"?G=v.create(u||T,f||{}):G=o.cloneNode(!1);let ee=G;if(!c)v.setAttrib(G,"style",null),v.setAttrib(G,"class",null);else do if(H[I.nodeName]){if(rl(I)||Oi(I))continue;const J=I.cloneNode(!1);v.setAttrib(J,"id",""),G.hasChildNodes()?(J.appendChild(G.firstChild),G.appendChild(J)):(ee=J,G.appendChild(J))}while((I=I.parentNode)&&I!==r);return Nw(e,G),uc(ee),G},xW=(e,n)=>e.dom.getParent(n,ru),EW=(e,n,o)=>{let r=n;for(;r&&r!==e&&ae(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return ru(c);r=c}return!1},TW=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Jr(e)&&e.dom.isEmpty(o)&&EW(e.getBody(),o,r=>an(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),_W=(e,n,o)=>{var r,c,u;const f=n(Jr(e)),v=xW(e,o);v&&(e.dom.insertAfter(f,v),cy(e,f),((u=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},E_=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,kW=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},TI=(e,n)=>{const o=e==null?void 0:e.parentNode;return We(o)&&o.nodeName===n},T_=e=>We(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Pw=e=>We(e)&&/^(LI|DT|DD)$/.test(e.nodeName),AW=e=>T_(e)&&T_(e.parentNode),oD=e=>{const n=e.parentNode;return Pw(n)?n:e},sD=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!_t(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},OW=e=>cs(mc(_a(de.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),RW=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),v=o.parentNode;if(o===e.getBody()||!v)return;AW(o)&&(c="LI");const C=Pw(r)?OW(r):void 0;let T=Pw(r)&&C?n(c,{style:OW(r)}):n(c);if(sD(o,r,!0)&&sD(o,r,!1))if(TI(o,"LI")){const B=oD(o);u.insertAfter(T,B),kW(o)?u.remove(B):u.remove(o)}else u.replace(T,o);else if(sD(o,r,!0))TI(o,"LI")?(u.insertAfter(T,oD(o)),T.appendChild(u.doc.createTextNode(" ")),T.appendChild(o)):v.insertBefore(T,o),u.remove(r);else if(sD(o,r,!1))u.insertAfter(T,oD(o)),u.remove(r);else{o=oD(o);const B=f.cloneRange();B.setStartAfter(r),B.setEndAfter(o);const I=B.extractContents();if(c==="LI"&&E_(I,"LI")){const H=Qt(hn(T.children,de.fromDom),zo(_l("br")));T=I.firstChild,u.insertAfter(I,o),Te(H,G=>Fd(de.fromDom(T),G)),C&&T.setAttribute("style",C)}else u.insertAfter(I,o),u.insertAfter(T,o);u.remove(r)}cy(e,T)},DW=e=>{Te(Ng(de.fromDom(e),_r),n=>{const o=n.dom;o.nodeValue=tl(o.data)})},RY=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},MW=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),vd=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,NW=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,__=(e,n)=>We(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",PW=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;_t(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||MW(e,u))&&e.remove(u)},rD=(e,n,o)=>rt(n)?e?o===1&&n.data.charAt(o-1)===Yr?0:o:o===n.data.length-1&&n.data.charAt(o)===Yr?n.data.length:o:o,BW=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,rD(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,rD(!1,e.endContainer,e.endOffset)),n},$W=e=>{let n=e;do rt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},IW=(e,n,o,r,c)=>{var u,f;const v=e.dom,C=(u=iy(v,r))!==null&&u!==void 0?u:v.getRoot();let T=v.getParent(r,v.isBlock);if(!T||!__(v,T)){if(T=T||C,!T.hasChildNodes()){const G=v.create(n);return Nw(e,G),T.appendChild(G),o.setStart(G,0),o.setEnd(G,0),G}let B=r;for(;B&&B.parentNode!==T;)B=B.parentNode;let I;for(;B&&!v.isBlock(B);)I=B,B=B.previousSibling;const H=(f=I==null?void 0:I.parentElement)===null||f===void 0?void 0:f.nodeName;if(I&&H&&e.schema.isValidChild(H,n.toLowerCase())){const G=I.parentNode,ee=v.create(n);for(Nw(e,ee),G.insertBefore(ee,I),B=I;B&&!v.isBlock(B);){const J=B.nextSibling;ee.appendChild(B),B=J}o.setStart(r,c),o.setEnd(r,c)}}return r},LW=(e,n)=>{n.normalize();const o=n.lastChild;(!o||_t(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},FW=(e,n)=>{const o=lx(e);return Nn(n)?!1:le(o)?gn(Qe.explode(o),n.nodeName.toLowerCase()):o},Bw={insert:(e,n)=>{let o,r,c,u,f=!1;const v=e.dom,C=e.schema,T=C.getNonEmptyElements(),B=e.selection.getRng(),I=Jr(e),H=de.fromDom(B.startContainer),G=nu(H,B.startOffset),ee=G.exists(Xe=>$m(Xe)&&!wi(Xe)),J=B.collapsed&&ee,re=(Xe,Bt)=>EI(e,o,mt,Ke,l2(e),Xe,Bt),me=Xe=>{const Bt=rD(Xe,o,r);if(rt(o)&&(Xe?Bt>0:Bt<o.data.length))return!1;if((o.parentNode===mt||o===mt)&&f&&!Xe||Xe&&_t(o)&&o===mt.firstChild)return!0;if(vd(o,"TABLE")||vd(o,"HR"))return NW(o,"BR")?!Xe:f&&!Xe||!f&&Xe;const Yt=new da(o,mt);rt(o)&&(Xe&&Bt===0?Yt.prev():!Xe&&Bt===o.data.length&&Yt.next());let Fn;for(;Fn=Yt.current();){if(_t(Fn)){if(!Fn.getAttribute("data-mce-bogus")){const Wn=Fn.nodeName.toLowerCase();if(T[Wn]&&Wn!=="br")return!1}}else if(rt(Fn)&&!xi(Fn.data))return!1;Xe?Yt.prev():Yt.next()}return!0},Ce=()=>{let Xe;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&Ct!=="HGROUP"?Xe=re(I):Xe=re(),FW(e,u)&&__(v,u)&&v.isEmpty(mt,void 0,{includeZwsp:!0})?Xe=v.split(u,mt):v.insertAfter(Xe,mt),cy(e,Xe),Xe};mC(v,B).each(Xe=>{B.setStart(Xe.startContainer,Xe.startOffset),B.setEnd(Xe.endContainer,Xe.endOffset)}),o=B.startContainer,r=B.startOffset;const xe=!!(n&&n.shiftKey),Oe=!!(n&&n.ctrlKey);_t(o)&&o.hasChildNodes()&&!J&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&rt(o)?r=o.data.length:r=0);const Ke=iy(v,o);if(!Ke||RY(e,o))return;xe||(o=IW(e,I,B,o,r));let mt=v.getParent(o,v.isBlock)||v.getRoot();u=We(mt==null?void 0:mt.parentNode)?v.getParent(mt.parentNode,v.isBlock):null,c=mt?mt.nodeName.toUpperCase():"";const Ct=u?u.nodeName.toUpperCase():"";if(Ct==="LI"&&!Oe){const Xe=u;mt=Xe,u=Xe.parentNode,c=Ct}if(_t(u)&&TW(e,xe,mt))return _W(e,re,mt);if(/^(LI|DT|DD)$/.test(c)&&_t(u)&&v.isEmpty(mt)){RW(e,re,u,mt,I);return}if(!J&&(mt===e.getBody()||!__(v,mt)))return;const He=mt.parentNode;let Be;if(J)Be=re(I),G.fold(()=>{ps(H,de.fromDom(Be))},Xe=>{za(Xe,de.fromDom(Be))}),e.selection.setCursorLocation(Be,0);else if(jg(mt))Be=us(mt),v.isEmpty(mt)&&uc(mt),Nw(e,Be),cy(e,Be);else if(me(!1))Be=Ce();else if(me(!0)&&He){const Xe=Ie.fromRangeStart(B),Bt=p3(Xe),Yt=de.fromDom(mt),Wn=RE(Yt,Xe,e.schema)?J5(Yt,Xe,e.schema).bind(Ro=>U.from(Ro.getNode())):U.none();Be=He.insertBefore(re(),mt);const yo=vd(mt,"HR")||Bt?Be:Wn.getOr(mt);cy(e,yo)}else{const Xe=BW(B).cloneRange();Xe.setEndAfter(mt);const Bt=Xe.extractContents();DW(Bt),$W(Bt),Be=Bt.firstChild,v.insertAfter(Bt,mt),PW(v,T,Be),LW(v,mt),v.isEmpty(mt)&&uc(mt),Be.normalize(),v.isEmpty(Be)?(v.remove(Be),Ce()):(Nw(e,Be),cy(e,Be))}v.setAttrib(Be,"id",""),e.dispatch("NewBlock",{newBlock:Be})},fakeEventName:"insertParagraph"},zW=(e,n,o)=>{const r=new da(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||rt(c)&&c.length>0)return!0;return!1},kI=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Dv(e,r)},VW=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;mC(r,c).each(G=>{c.setStart(G.startContainer,G.startOffset),c.setEnd(G.endContainer,G.endOffset)});let v=c.startOffset,C=c.startContainer;if(_t(C)&&C.hasChildNodes()){const G=v>C.childNodes.length-1;C=C.childNodes[Math.min(v,C.childNodes.length-1)]||C,G&&rt(C)?v=C.data.length:v=0}let T=r.getParent(C,r.isBlock);const B=T&&T.parentNode?r.getParent(T.parentNode,r.isBlock):null,I=B?B.nodeName.toUpperCase():"",H=!!(n&&n.ctrlKey);I==="LI"&&!H&&(T=B),rt(C)&&v>=C.data.length&&(zW(e.schema,C,T||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),hp(r,c,u),kI(e,u,f),e.undoManager.add()},UW=(e,n)=>{const o=de.fromTag("br");za(de.fromDom(n),o),e.undoManager.add()},WW=(e,n)=>{ZW(e.getBody(),n)||$c(de.fromDom(n),de.fromTag("br"));const o=de.fromTag("br");$c(de.fromDom(n),o),kI(e,o.dom,!1),e.undoManager.add()},AI=e=>co(e.getNode()),ZW=(e,n)=>AI(Ie.after(n))?!0:ja(e,Ie.after(n)).map(o=>co(o.getNode())).getOr(!1),aD=e=>e&&e.nodeName==="A"&&"href"in e,OI=e=>e.fold(Ge,aD,aD,Ge),jW=e=>{const n=Je(Up,e),o=Ie.fromRangeStart(e.selection.getRng());return vg(n,e.getBody(),o).filter(OI)},qW=(e,n)=>{n.fold(Ut,Je(UW,e),Je(WW,e),Ut)},DI={insert:(e,n)=>{const o=jW(e);o.isSome()?o.each(Je(qW,e)):VW(e,n)},fakeEventName:"insertLineBreak"},$w=(e,n)=>nD(e).filter(o=>n.length>0&&Ha(de.fromDom(o),n)).isSome(),GW=e=>$w(e,i2(e)),cD=e=>$w(e,q0(e)),ll=ho.generate([{br:[]},{block:[]},{none:[]}]),MI=(e,n)=>cD(e),NI=e=>(n,o)=>OY(n)===e,KW=(e,n)=>(o,r)=>wW(o)===e.toUpperCase()===n,n1=e=>{const n=iy(e.dom,e.selection.getStart());return Nn(n)},Iw=e=>KW("pre",e),YW=()=>KW("summary",!0),k_=e=>(n,o)=>om(n)===e,A_=(e,n)=>GW(e),Lw=(e,n)=>n,PI=e=>{const n=Jr(e),o=iy(e.dom,e.selection.getStart());return We(o)&&e.schema.isValidChild(o.nodeName,n)},XW=e=>{const n=e.selection.getRng(),o=de.fromDom(n.startContainer),c=nu(o,n.startOffset).map(u=>$m(u)&&!wi(u));return n.collapsed&&c.getOr(!0)},Au=(e,n)=>(o,r)=>cs(e,(u,f)=>u&&f(o,r),!0)?U.some(n):U.none(),JW=(e,n)=>O6([Au([MI],ll.none()),Au([Iw(!0),n1],ll.none()),Au([YW()],ll.br()),Au([Iw(!0),k_(!1),Lw],ll.br()),Au([Iw(!0),k_(!1)],ll.block()),Au([Iw(!0),k_(!0),Lw],ll.block()),Au([Iw(!0),k_(!0)],ll.br()),Au([NI(!0),Lw],ll.br()),Au([NI(!0)],ll.block()),Au([A_],ll.br()),Au([Lw],ll.br()),Au([PI],ll.block()),Au([XW],ll.block())],[e,!!(n&&n.shiftKey)]).getOr(ll.none()),O_=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||X7(n),!(We(o)&&Mw(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),We(o)&&Dw(n,e.fakeEventName)))},BI=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>O_(DI,e,n),r=()=>O_(Bw,e,n),c=JW(e,n);switch(Ec(e)){case"linebreak":c.fold(o,o,Ut);break;case"block":c.fold(r,r,Ut);break;case"invert":c.fold(r,o,Ut);break;default:c.fold(o,r,Ut);break}},R_=ia(),iD=R_.os.isiOS()&&R_.browser.isSafari(),$I=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),iB(e.undoManager),e.undoManager.transact(()=>{BI(e,n)}))},lD=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(rt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},II=e=>{let n=U.none();const o=c=>{n=U.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),n.fold(Ut,f=>c.selection.moveToBookmark(f)),$I(c,u),n=U.none()};e.on("keydown",c=>{c.keyCode===qe.ENTER&&(iD&&lD(e.selection.getRng())?o(e):$I(e,c))}),e.on("keyup",c=>{c.keyCode===qe.ENTER&&n.each(()=>r(e,c))})},D_=(e,n,o)=>{const r=Vt.os.isMacOS()||Vt.os.isiOS();vw([{keyCode:qe.END,action:xn(hR,e,!0)},{keyCode:qe.HOME,action:xn(hR,e,!1)},...r?[]:[{keyCode:qe.HOME,action:xn(i_,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:qe.END,action:xn(i_,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:qe.END,action:xn(Bi,e,!0)},{keyCode:qe.HOME,action:xn(Bi,e,!1)},{keyCode:qe.END,action:xn(XT,e,!0,n)},{keyCode:qe.HOME,action:xn(XT,e,!1,n)}],o).each(c=>{o.preventDefault()})},LI=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||D_(e,n,o)})},FI=e=>{e.on("input",n=>{n.isComposing||$7(e)})},QW=ia(),eZ=(e,n,o)=>{vw([{keyCode:qe.PAGE_UP,action:xn(XT,e,!1,n)},{keyCode:qe.PAGE_DOWN,action:xn(XT,e,!0,n)}],o)},Fw=e=>e.stopImmediatePropagation(),uD=e=>e.keyCode===qe.PAGE_UP||e.keyCode===qe.PAGE_DOWN,HI=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",Fw,!0):!o&&e.get()&&n.off("NodeChange",Fw),e.set(o)},tZ=(e,n)=>{if(QW.os.isMacOS())return;const o=Dr(!1);e.on("keydown",r=>{uD(r)&&HI(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||eZ(e,n,r),uD(r)&&o.get()&&(HI(o,e,!1),e.nodeChanged())})},dD=(e,n)=>e===n||e.contains(n),nZ=(e,n)=>!dD(e.getBody(),n.startContainer)||!dD(e.getBody(),n.endContainer)?!0:y5(e.dom,n),oZ=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||vo(n.getTargetRanges(),o=>!nZ(e,o)))&&n.preventDefault()})},zI=(e,n)=>{const o=n.container(),r=n.offset();return rt(o)?(o.insertData(r,e),U.some(Ie(o,r+e.length))):iv(n).map(c=>{const u=de.fromText(e);return n.isAtEnd()?$c(c,u):za(c,u),Ie(u.dom,e.length)})},VI=Je(zI,rr),UI=Je(zI," "),WI=(e,n,o)=>y3(e,n,o)?VI(n):UI(n),sZ=e=>n=>n.fold(o=>Na(e.dom,Ie.before(o)),o=>zr(o),o=>vu(o),o=>ja(e.dom,Ie.after(o))),ZI=(e,n,o)=>r=>y3(e,r,o)?VI(n):UI(n),jI=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},rZ=(e,n)=>e.isEditable(e.getParent(n,"summary")),aZ=e=>{const n=Ie.fromRangeStart(e.selection.getRng()),o=de.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Je(Up,e),c=Ie.fromRangeStart(e.selection.getRng());return vg(r,e.getBody(),c).bind(sZ(o)).map(u=>()=>ZI(o,n,e.schema)(u).each(jI(e)))}else return U.none()},cZ=e=>{const n=()=>{const o=de.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Ie.fromRangeStart(e.selection.getRng());WI(o,r,e.schema).each(jI(e))};return tc(Vt.browser.isFirefox()&&e.selection.isEditable()&&rZ(e.dom,e.selection.getRng().startContainer),n)},iZ=(e,n)=>{S$([{keyCode:qe.SPACEBAR,action:xn(aZ,e)},{keyCode:qe.SPACEBAR,action:xn(cZ,e)}],n).each(o=>{n.preventDefault(),Mw(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Dw(e,"insertText",{data:" "}))})},ly=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||iZ(e,n)})},lZ=e=>sf(e)?[{keyCode:qe.TAB,action:xn(F$,e,!0)},{keyCode:qe.TAB,shiftKey:!0,action:xn(F$,e,!1)}]:[],uZ=(e,n)=>{vw([...lZ(e)],n).each(o=>{n.preventDefault()})},qI=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||uZ(e,n)})},dZ=e=>{if(e.addShortcut("Meta+P","","mcePrint"),mW(e),gd(e))return Dr(null);{const n=CV(e);return oZ(e),ZV(e),TR(e,n),CW(e,n),II(e),ly(e),FI(e),qI(e),LI(e,n),tZ(e,n),n}};class mZ{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!a3(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{Av(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&Dp(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&Dp(n)&&(n.selection.getNode().nodeName==="IMG"?Ft.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let c;if(o.initialized&&r&&!Cx(o)&&!sg(o)){const u=o.getBody();c=r.getStart(!0)||u,(c.ownerDocument!==o.getDoc()||!o.dom.isChildOf(c,u))&&(c=u);const f=[];o.dom.getParent(c,v=>v===u?!0:(f.push(v),!1)),o.dispatch("NodeChange",{...n,element:c,parents:f})}}isSameElementPath(n){let o;const r=this.editor,c=Uo(r.dom.getParents(n,pt,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const GI=Wg("image"),KI=e=>{const n=e;return U.from(n[GI])},fZ=(e,n)=>{const o=e;o[GI]=n},mD=Wg("event"),MY=e=>{const n=e;return U.from(n[mD])},Xb=e=>n=>{const o=n;o[mD]=e},gZ=(e,n)=>Xb(n)(e),YI=Xb(0),hZ=Xb(2),pZ=Xb(1),bZ=(e=>n=>{const o=n;return U.from(o[mD]).exists(r=>r===e)})(0),vZ=()=>Object.freeze({length:0,item:e=>null}),fD=Wg("mode"),yZ=e=>{const n=e;return U.from(n[fD])},M_=e=>n=>{const o=n;o[fD]=e},XI=(e,n)=>M_(n)(e),JI=M_(0),gD=M_(2),fs=M_(1),QI=e=>n=>{const o=n;return U.from(o[fD]).exists(r=>r===e)},Jb=QI(0),eL=QI(1),hD=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Jb(e))if(le(o)){if(!Xo(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Jb(e)&&n.remove(o)},clear:()=>{Jb(e)&&n.clear()}}),tL=["none","copy","link","move"],CZ=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],pD=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){gn(tL,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){bZ(r)&&gn(CZ,c)&&(o=c)},get items(){return hD(r,e.items)},get files(){return eL(r)?vZ():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{Jb(r)&&(fZ(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>eL(r)?"":e.getData(c),setData:(c,u)=>{Jb(r)&&e.setData(c,u)},clearData:c=>{Jb(r)&&e.clearData(c)}};return JI(r),r},wZ=e=>{const n=pD(),o=yZ(e);return gD(e),YI(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,KI(e).each(r=>n.setDragImage(r.image,r.x,r.y)),Te(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),Te(e.files,r=>n.items.add(r)),MY(e).each(r=>{gZ(n,r)}),o.each(r=>{XI(e,r),XI(n,r)}),n},nL=e=>{const n=e.getData("text/html");return n===""?U.none():U.some(n)},Hw=(e,n)=>e.setData("text/html",n),oL="x-tinymce/html",N_=vt(oL),zw="<!-- "+oL+" -->",SZ=e=>zw+e,xZ=e=>e.replace(zw,""),sL=e=>e.indexOf(zw)!==-1,EZ=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),rL=(e,n)=>{let o="<"+e;const r=mc(n,(c,u)=>u+'="'+Yd.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},TZ=(e,n,o)=>{const r=e.split(/\n\n/),c=rL(n,o),u="</"+n+">",f=hn(r,C=>C.split(/\n/).join("<br />")),v=C=>c+C+u;return f.length===1?f[0]:hn(f,v).join("")},aL="%MCEPASTEBIN%",uy=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},aL);Vt.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},_Z=(e,n)=>{const o=e.dom;if(o1(e)){let r;const c=n.get();for(;r=o1(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},o1=e=>e.dom.get("mcepastebin"),Vw=e=>We(e)&&e.id==="mcepastebin",kZ=e=>{const n=e.dom,o=(f,v)=>{f.appendChild(v),n.remove(v,!0)},[r,...c]=Qt(e.getBody().childNodes,Vw);Te(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const v=n.create("div");r.insertBefore(v,u[f]),o(v,u[f])}return r?r.innerHTML:""},cL=e=>e===aL,dy=e=>{const n=Dr(null);return{create:()=>uy(e,n),remove:()=>_Z(e,n),getEl:()=>o1(e),getHtml:()=>kZ(e),getLastRng:n.get}},iL=(e,n)=>(Qe.each(n,o=>{Tt(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),bD=e=>{const n=Jm(),o=Gv({},n);let r="";const c=n.getVoidElements(),u=Qe.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),v=C=>{const T=C.name,B=C;if(T==="br"){r+=`
`;return}if(T!=="wbr"){if(c[T]&&(r+=" "),u[T]){r+=" ";return}if(C.type===3&&(r+=C.value),!(C.name in n.getVoidElements())){let I=C.firstChild;if(I)do v(I);while(I=I.next)}f[T]&&B.next&&(r+=`
`,T==="p"&&(r+=`
`))}};return e=iL(e,[/<!\[[^\]]+\]>/g]),v(o.parse(e)),r},lL=e=>(e=iL(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":rr],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),uL=e=>{let n=0;return()=>e+n++},dL=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Qe.hasOwn(o,n)?"image/"+o[n]:"image/"+n},vD=(e,n)=>{const o=Gv({sanitize:ob(e),sandbox_iframes:E2(e),sandbox_iframes_exclusions:Ax(e),convert_unsafe_embeds:jM(e)},e.schema);o.addNodeFilter("meta",c=>{Qe.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Fp({validate:!0},e.schema).serialize(r)},yD=(e,n)=>({content:e,cancelled:n}),AZ=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=vr(e,r,o);return yD(c.node.innerHTML,c.isDefaultPrevented())},OZ=(e,n,o)=>{const r=Ma(e,n,o),c=vD(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?AZ(e,c,o):yD(c,r.isDefaultPrevented())},mL=(e,n,o)=>OZ(e,n,o),CD=(e,n)=>(e.insertContent(n,{merge:Tk(e),paste:!0}),!0),P_=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),wD=(e,n)=>P_(n)&&vo(x2(e),o=>wa(n.toLowerCase(),`.${o.toLowerCase()}`)),fL=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),RZ=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),DZ=(e,n,o)=>!e.selection.isCollapsed()&&P_(n)?RZ(e,n,o):!1,MZ=(e,n,o)=>wD(e,n)?fL(e,n,o):!1,gL=(e,n)=>{Qe.each([DZ,MZ,CD],o=>!o(e,n,CD))},SD=(e,n,o)=>{o||!_k(e)?CD(e,n):gL(e,n)},NZ=uL("mceclip"),hL=e=>{const n=pD();return Hw(n,e),gD(n),n},xD=(e,n,o,r,c)=>{const u=mL(e,n,o);if(!u.cancelled){const f=u.content,v=()=>SD(e,f,r);c?Mw(e,"insertFromPaste",{dataTransfer:hL(f)}).isDefaultPrevented()||(v(),Dw(e,"insertFromPaste")):v()}},B_=(e,n,o,r)=>{const c=o||sL(n);xD(e,xZ(n),c,!1,r)},$_=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=Yi(r,C2(e)),u=TZ(c,Jr(e),Bl(e));xD(e,u,!1,!0,o)},pL=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},s1=(e,n)=>n in e&&e[n].length>0,bL=e=>s1(e,"text/html")||s1(e,"text/plain"),PZ=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return We(o)?e.dom.encode(o[1]):void 0},BZ=(e,n,o,r)=>{const c=NZ(),u=ux(e)&&We(o.name),f=u?PZ(e,o.name):c,v=u?o.name:void 0,C=n.create(c,o,r,f,v);return n.add(C),C},I_=(e,n)=>{mT(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,v=e.editorUpload.blobCache,C=v.getByData(u,r),T=C??BZ(e,v,f,u);B_(e,`<img src="${T.blobUri()}">`,!1,!0)})},$Z=e=>e.type==="paste",vL=e=>Promise.all(hn(e,n=>Ab(n).then(o=>({file:n,uri:o})))),IZ=e=>{const n=x2(e);return o=>Ws(o.type,"image/")&&vo(n,r=>dL(r)===o.type)},LZ=(e,n)=>{const o=n.items?Ca(Br(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?Br(n.files):[];return Qt(o.length>0?o:r,IZ(e))},ED=(e,n,o)=>{const r=$Z(n)?n.clipboardData:n.dataTransfer;if(eb(e)&&r){const c=LZ(e,r);if(c.length>0)return n.preventDefault(),vL(c).then(u=>{o&&e.selection.setRng(o),Te(u,f=>{I_(e,f)})}),!0}return!1},yL=e=>{var n,o;return Vt.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},FZ=e=>qe.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,TD=(e,n,o,r,c)=>{let u=lL(o);const f=s1(n,N_())||sL(o),v=!f&&EZ(u),C=P_(u);(cL(u)||!u.length||v&&!C)&&(r=!0),(r||C)&&(s1(n,"text/plain")&&v?u=n["text/plain"]:u=bD(u)),!cL(u)&&(r?$_(e,u,c):B_(e,u,f,c))},HZ=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{FZ(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||yL(u))return;const f=o.get()==="text"||r;r=!1;const v=pL(u.clipboardData);!bL(v)&&ED(e,u,c())||(s1(v,"text/html")?(u.preventDefault(),TD(e,v,v["text/html"],f,!0)):s1(v,"text/plain")&&s1(v,"text/uri-list")?(u.preventDefault(),TD(e,v,v["text/plain"],f,!0)):(n.create(),Ft.setEditorTimeout(e,()=>{const C=n.getHtml();n.remove(),TD(e,v,C,f,!1)},0)))})},zZ=e=>{const n=c=>Ws(c,"webkit-fake-url"),o=c=>Ws(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!eb(e)&&r(f))for(const v of c){const C=v.attr("src");le(C)&&!v.attr("data-mce-object")&&C!==Vt.transparentSrc&&(n(C)||!w2(e)&&o(C))&&v.remove()}})},VZ=(e,n,o)=>{HZ(e,n,o),zZ(e)},CL=(e,n)=>{n.get()==="text"?(n.set("html"),Xr(e,!1)):(n.set("text"),Xr(e,!0)),e.focus()},UZ=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{CL(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&B_(e,r.html,r.internal,!1),r.text&&$_(e,r.text,!1)})},WZ=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(N_(),n),!0}catch{return!1}else return!1},wL=(e,n,o,r)=>{WZ(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},SL=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const v=c.getRng();f.focus();const C=r.createRng();C.selectNodeContents(f),c.setRng(C),Ft.setEditorTimeout(e,()=>{c.setRng(v),r.remove(u),o()},0)},xL=e=>({html:SZ(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),ZZ=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),EL=e=>!e.selection.isCollapsed()||ZZ(e),jZ=e=>n=>{!n.isDefaultPrevented()&&EL(e)&&e.selection.isEditable()&&wL(n,xL(e),SL(e),()=>{if(Vt.browser.isChromium()||Vt.browser.isFirefox()){const o=e.selection.getRng();Ft.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},TL=e=>n=>{!n.isDefaultPrevented()&&EL(e)&&wL(n,xL(e),SL(e),Ut)},_L=e=>{e.on("cut",jZ(e)),e.on("copy",TL(e))},kL=(e,n)=>{var o,r;return Lp.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},qZ=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},AL=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},GZ=e=>vo(e.files,n=>/^image\//.test(n.type)),KZ=(e,n,o,r)=>{const c=e.getParent(o,f=>rc(n,f));if(!ae(e.getParent(o,"summary")))return!0;if(c&&an(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!ae(f.querySelector(c.nodeName.toLowerCase()))}else return!1},YZ=e=>{e.on("input",n=>{const o=r=>ae(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Qt(e.dom.select("details"),o);Te(r,c=>{co(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Xf().dom),c.prepend(u)})}})},XZ=(e,n)=>{Sk(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),eb(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&GZ(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=kL(e,o);if(Nn(r))return;const c=pL(o.dataTransfer),u=s1(c,N_());if((!bL(c)||qZ(c))&&ED(e,o,r))return;const f=c[N_()],v=f||c["text/html"]||c["text/plain"],C=KZ(e.dom,e.schema,r.startContainer,c),T=n.get();T&&!C||v&&(o.preventDefault(),Ft.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||T&&C)&&e.execCommand("Delete"),AL(e,r);const B=lL(v);c["text/html"]?B_(e,B,u,!0):$_(e,B,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{eb(e)&&!n.get()&&(o.preventDefault(),AL(e,kL(e,o))),o.type==="dragend"&&n.set(!1)}),YZ(e)},L_=e=>{const n=c=>u=>{c(e,u)},o=xk(e);pe(o)&&e.on("PastePreProcess",n(o));const r=Ek(e);pe(r)&&e.on("PastePostProcess",n(r))},OL=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},JZ=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,_D=e=>Qe.trim(e).replace(JZ,Xd).toLowerCase(),RL=(e,n,o)=>{const r=Ex(e);if(o||r==="all"||!ov(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(v,C,T,B)=>{const I=u.parseStyle(u.decode(T)),H={};for(let ee=0;ee<c.length;ee++){const J=I[c[ee]];let re=J,me=u.getStyle(f,c[ee],!0);/color/.test(c[ee])&&(re=_D(re),me=_D(me)),me!==re&&(H[c[ee]]=J)}const G=u.serializeStyle(H,"span");return G?C+' style="'+G+'"'+B:C+B})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,v,C)=>f+' style="'+v+'"'+C),n},kD=e=>{(Vt.browser.isChromium()||Vt.browser.isSafari())&&OL(e,RL)},QZ=e=>{const n=Dr(!1),o=Dr(tb(e)?"text":"html"),r=dy(e);kD(e),UZ(e,o),L_(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{_L(e),XZ(e,n),VZ(e,r,o)})},DL=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},ej=e=>{e.parser.addNodeFilter("details",n=>{const o=sb(e);Te(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=Ok(e);Te(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},ML=e=>{DL(e),ej(e)},tj=co,AD=rt,nj=e=>io(e.dom),oj=e=>Ze(e.dom),NL=e=>n=>oo(de.fromDom(e),n),Uw=(e,n,o)=>ws(de.fromDom(e),r=>oj(r)||o.isBlock(Rn(r)),NL(n)).getOr(de.fromDom(n)).dom,PL=(e,n)=>ws(de.fromDom(e),nj,NL(n)),BL=(e,n,o)=>{const r=new da(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!tj(f);f=c())zc(f)&&(u=f);return u},$L=(e,n,o)=>{const c=Ie.fromRangeStart(e).getNode(),u=Uw(c,n,o),f=BL(c,u,!1),v=BL(c,u,!0),C=document.createRange();return PL(f,u).fold(()=>{AD(f)?C.setStart(f,0):C.setStartBefore(f)},T=>C.setStartBefore(T.dom)),PL(v,u).fold(()=>{AD(v)?C.setEnd(v,v.data.length):C.setEndAfter(v)},T=>C.setEndAfter(T.dom)),C},sj=e=>{const n=$L(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(GE(n))},rj=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),sj(e))})};var my;(function(e){e.Before="before",e.After="after"})(my||(my={}));const aj=(e,n)=>Math.abs(e.left-n),cj=(e,n)=>Math.abs(e.right-n),F_=(e,n)=>e>=n.top&&e<=n.bottom,IL=(e,n)=>e.top<n.bottom&&e.bottom>n.top,LL=(e,n)=>{const o=F4(e,n)/Math.min(e.height,n.height);return IL(e,n)&&o>.5},ij=(e,n)=>{const o=Qt(e,r=>F_(n,r));return fp(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=nr(e,f=>LL(f,r));return[c,u]})},lj=(e,n)=>({node:e.node,position:aj(e,n)<cj(e,n)?my.Before:my.After}),uj=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),FL=(e,n,o,r)=>{const c=I=>zc(I.node)?U.some(I):_t(I.node)?FL(Br(I.node.childNodes),n,o,!1):U.none(),u=(I,H,G)=>c(H).filter(ee=>Math.abs(G(I,n,o)-G(ee,n,o))<2&&rt(ee.node)),f=(I,H)=>{const G=To(I,(ee,J)=>H(ee,n,o)-H(J,n,o));return vl(G,c).map(ee=>r&&!rt(ee.node)&&G.length>1?u(ee,G[1],H).getOr(ee):ee)},[v,C]=ij(Wb(e),o),{pass:T,fail:B}=nr(C,I=>I.top<o);return f(v,uj).orThunk(()=>f(B,Pl)).orThunk(()=>f(T,Pl))},dj=(e,n,o,r)=>{const c=(u,f)=>{const v=T=>_t(T)&&T.classList.contains("mce-drag-container"),C=Qt(u.dom.childNodes,zo(v));return f.fold(()=>FL(C,o,r,!0),T=>{const B=Qt(C,I=>I!==T.dom);return FL(B,o,r,!0)}).orThunk(()=>(oo(u,e)?U.none():Nf(u)).bind(B=>c(B,U.some(u))))};return c(n,U.none())},HL=(e,n,o)=>{const r=de.fromDom(e),c=Al(r),f=de.fromPoint(c,n,o).filter(v=>Ts(r,v)).getOr(r);return dj(r,f,n,o)},H_=(e,n,o)=>HL(e,n,o).filter(r=>rg(r.node)).map(r=>lj(r,n)),Ww=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},mj=e=>e.inline?Ww(e.getBody()):{left:0,top:0},fj=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},zL=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},gj=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=Ww(e.getContentAreaContainer()),r=zL(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},OD=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),VL=(e,n)=>OD(mj(e),fj(e),gj(e,n)),UL=e=>({target:e,srcElement:e}),hj=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...UL(o)}),WL=(e,n,o)=>{const r=wr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Ut,stopImmediatePropagation:Ut,stopPropagation:Ut,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...UL(n)}},pj=(e,n)=>{const o=wZ(e);return n==="dragstart"?(YI(o),JI(o)):n==="drop"?(hZ(o),gD(o)):(pZ(o),fs(o)),o},PY=(e,n,o,r)=>{const c=pj(o,e);return Xo(r)?WL(e,n,c):hj(e,r,n,c)},ZL=32,bj=100,z_=8,Zw=16,jL=io,RD=BS(jL,Ze),vj=(e,n,o)=>jL(o)&&o!==n&&e.isEditable(o.parentElement),qL=(e,n,o)=>Nn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),DD=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},MD=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},fy=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},GL=fy("left",-32),Qb=fy("left",ZL),ND=fy("top",-32),KL=fy("top",ZL),yj=(e,n,o,r,c,u,f,v,C,T,B,I)=>{let H=0,G=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(H=n.pageX+o-c),n.pageY+r>u&&(G=n.pageY+r-u),e.style.width=o-H+"px",e.style.height=r-G+"px";const ee=C.clientHeight,J=C.clientWidth,re=f+C.getBoundingClientRect().top,me=v+C.getBoundingClientRect().left;B.on(Ce=>{Ce.intervalId.clear(),Ce.dragging&&I&&(f+z_>=ee?Ce.intervalId.set(KL(T)):f-z_<=0?Ce.intervalId.set(ND(T)):v+z_>=J?Ce.intervalId.set(Qb(T)):v-z_<=0?Ce.intervalId.set(GL(T)):re+Zw>=window.innerHeight?Ce.intervalId.set(KL(window)):re-Zw<=0?Ce.intervalId.set(ND(window)):me+Zw>=window.innerWidth?Ce.intervalId.set(Qb(window)):me-Zw<=0&&Ce.intervalId.set(GL(window)))})},YL=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Cj=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);YL(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&Jf(de.fromDom(o))},XL=e=>e.button===0,wj=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),JL=(e,n)=>o=>{if(XL(o)){const r=Cs(n.dom.getParents(o.target),RD).getOr(null);if(We(r)&&vj(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:pD(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:DD(n,r,r.offsetWidth,r.offsetHeight),intervalId:Qi(bj)})}}},Sj=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),H_(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===my.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},jw=(e,n,o,r,c)=>{n==="dragstart"&&Hw(r,e.dom.getOuterHTML(o));const u=PY(n,o,r,c);return e.dispatch(n,u)},PD=(e,n)=>{const o=rp((c,u)=>Sj(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const v=jw(n,"dragstart",u.element,u.dataTransfer,c);if(We(v.dataTransfer)&&(u.dataTransfer=v.dataTransfer),v.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const v=c.currentTarget===n.getDoc().documentElement,C=wj(u,VL(n,c));MD(u.ghost,n.getBody()),yj(u.ghost,C,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,v),o.throttle(c.clientX,c.clientY)}})},QL=e=>{const n=e.getSel();if(We(n)){const r=n.getRangeAt(0).startContainer;return rt(r)?r.parentNode:r}else return null},BY=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(qL(n,QL(n.selection),r.element)){const u=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();jw(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{Cj(n.dom,r.element),nL(r.dataTransfer).each(v=>n.insertContent(v)),n._selectionOverrides.hideFakeCaret()})}jw(n,"dragend",n.getBody(),r.dataTransfer,o)}}),n8(e)},e8=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>jw(n,"dragend",r.element,r.dataTransfer),c=>jw(n,"dragend",r.element,r.dataTransfer,c))}),n8(e)},t8=(e,n)=>o=>e8(e,n,U.some(o)),n8=e=>{e.on(n=>{n.intervalId.clear(),YL(n.ghost)}),e.clear()},BD=e=>{const n=Fs(),o=vs.DOM,r=document,c=JL(n,e),u=PD(n,e),f=BY(n,e),v=t8(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",v),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",v)}),e.on("keydown",C=>{C.keyCode===qe.ESC&&e8(n,e,U.none())})},xj=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(gn(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&JC(e,"Dropped file type is not supported"))}},o=c=>{Ov(e,c.target)&&n(c)},r=()=>{const c=vs.DOM,u=e.dom,f=document,v=e.inline?e.getBody():e.getDoc(),C=["drop","dragover"];Te(C,T=>{c.bind(f,T,o),u.bind(v,T,n)}),e.on("remove",()=>{Te(C,T=>{c.unbind(f,T,o),u.unbind(v,T,n)})})};e.on("init",()=>{Ft.setEditorTimeout(e,r,0)})},Ej=e=>{BD(e),ev(e)&&xj(e)},Tj=e=>{const n=rp(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=OO(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},o8=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Kr(o)){const r=dm(e.getBody(),o),c=io(r)?r:o;e.selection.getNode()!==c&&iw(e,c).each(u=>e.selection.setRng(u))}})})},r1=io,$D=(e,n)=>dm(e.getBody(),n),s8=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=Dx(e,r,o.isBlock,()=>it(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let v;const C=Ct=>We(Ct)&&o.hasClass(Ct,"mce-offscreen-selection"),T=Ct=>Ct!==r&&(r1(Ct)||Kr(Ct))&&o.isChildOf(Ct,r)&&o.isEditable(Ct.parentNode),B=Ct=>{Ct&&n.setRng(Ct)},I=(Ct,He,Be,Xe=!0)=>e.dispatch("ShowCaret",{target:He,direction:Ct,before:Be}).isDefaultPrevented()?null:(Xe&&n.scrollIntoView(He,Ct===-1),c.show(Be,He)),H=Ct=>{Ct.hasAttribute("data-mce-caret")&&(us(Ct),n.scrollIntoView(Ct))},G=()=>{e.on("click",He=>{o.isEditable(He.target)||(He.preventDefault(),e.focus())}),e.on("blur NewBlock",Oe),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",He=>{const Be=He.target,Xe=$D(e,Be);r1(Xe)?(He.preventDefault(),iw(e,Xe).each(xe)):T(Be)&&iw(e,Be).each(xe)},!0),e.on("mousedown",He=>{const Be=He.target;if(Be!==r&&Be.nodeName!=="HTML"&&!o.isChildOf(Be,r)||!LB(e,He.clientX,He.clientY))return;Oe(),mt();const Xe=$D(e,Be);r1(Xe)?(He.preventDefault(),iw(e,Xe).each(xe)):H_(r,He.clientX,He.clientY).each(Bt=>{He.preventDefault();const Yt=I(1,Bt.node,Bt.position===my.Before,!1);B(Yt),Ei(Xe)?Xe.focus():e.getBody().focus()})}),e.on("keypress",He=>{qe.modifierPressed(He)||r1(n.getNode())&&He.preventDefault()}),e.on("GetSelectionRange",He=>{let Be=He.range;if(v){if(!v.parentNode){v=null;return}Be=Be.cloneRange(),Be.selectNode(v),He.range=Be}}),e.on("SetSelectionRange",He=>{He.range=re(He.range);const Be=xe(He.range,He.forward);Be&&(He.range=Be)});const Ct=He=>_t(He)&&He.id==="mcepastebin";e.on("AfterSetSelectionRange",He=>{const Be=He.range,Xe=Be.startContainer.parentElement;!J(Be)&&!Ct(Xe)&&mt(),C(Xe)||Oe()}),Ej(e),Tj(e),o8(e)},ee=Ct=>Nl(Ct)||Sc(Ct)||nl(Ct),J=Ct=>ee(Ct.startContainer)||ee(Ct.endContainer),re=Ct=>{const He=e.schema.getVoidElements(),Be=o.createRng(),Xe=Ct.startContainer,Bt=Ct.startOffset,Yt=Ct.endContainer,Fn=Ct.endOffset;return an(He,Xe.nodeName.toLowerCase())?Bt===0?Be.setStartBefore(Xe):Be.setStartAfter(Xe):Be.setStart(Xe,Bt),an(He,Yt.nodeName.toLowerCase())?Fn===0?Be.setEndBefore(Yt):Be.setEndAfter(Yt):Be.setEnd(Yt,Fn),Be},me=(Ct,He)=>{const Be=de.fromDom(e.getBody()),Xe=e.getDoc(),Bt=hr(Be,"#"+u).getOrThunk(()=>{const Wn=de.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Xe);return kr(Wn,"id",u),ps(Be,Wn),Wn}),Yt=o.createRng();Ki(Bt),Gi(Bt,[de.fromText(rr,Xe),de.fromDom(He),de.fromText(rr,Xe)]),Yt.setStart(Bt.dom.firstChild,1),Yt.setEnd(Bt.dom.lastChild,0),Tn(Bt,{top:o.getPos(Ct,e.getBody()).y+"px"}),X2(Bt);const Fn=n.getSel();return Fn&&(Fn.removeAllRanges(),Fn.addRange(Yt)),Yt},Ce=Ct=>{const He=Ct.cloneNode(!0),Be=e.dispatch("ObjectSelected",{target:Ct,targetClone:He});if(Be.isDefaultPrevented())return null;const Xe=me(Ct,Be.targetClone),Bt=de.fromDom(Ct);return Te(ka(de.fromDom(e.getBody()),`*[${f}]`),Yt=>{oo(Bt,Yt)||ts(Yt,f)}),o.getAttrib(Ct,f)||Ct.setAttribute(f,"1"),v=Ct,mt(),Xe},xe=(Ct,He)=>{if(!Ct)return null;if(Ct.collapsed){if(!J(Ct)){const Yt=He?1:-1,Fn=lb(Yt,r,Ct),Wn=Fn.getNode(!He);if(We(Wn)){if(rg(Wn))return I(Yt,Wn,He?!Fn.isAtEnd():!1,!1);if(nd(Wn)&&io(Wn.nextSibling)){const Ro=o.createRng();return Ro.setStart(Wn,0),Ro.setEnd(Wn,0),Ro}}const yo=Fn.getNode(He);if(We(yo)){if(rg(yo))return I(Yt,yo,He?!1:!Fn.isAtEnd(),!1);if(nd(yo)&&io(yo.previousSibling)){const Ro=o.createRng();return Ro.setStart(yo,1),Ro.setEnd(yo,1),Ro}}}return null}let Be=Ct.startContainer,Xe=Ct.startOffset;const Bt=Ct.endOffset;if(rt(Be)&&Xe===0&&r1(Be.parentNode)&&(Be=Be.parentNode,Xe=o.nodeIndex(Be),Be=Be.parentNode),!_t(Be))return null;if(Bt===Xe+1&&Be===Ct.endContainer){const Yt=Be.childNodes[Xe];if(T(Yt))return Ce(Yt)}return null},Oe=()=>{v&&v.removeAttribute(f),hr(de.fromDom(e.getBody()),"#"+u).each(Ao),v=null},Ke=()=>{c.destroy(),v=null},mt=()=>{c.hide()};return gd(e)||G(),{showCaret:I,showBlockCaretContainer:H,hideFakeCaret:mt,destroy:Ke}},_j=(e,n)=>{let o=n;for(let r=e.previousSibling;rt(r);r=r.previousSibling)o+=r.data.length;return o},r8=(e,n,o,r,c)=>{if(rt(o)&&(r<0||r>o.data.length))return[];const u=c&&rt(o)?[_j(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},V_=(e,n,o,r,c,u,f=!1)=>{const v=r8(e,n,o,r,f),C=r8(e,n,c,u,f);return{start:v,end:C}},a8=(e,n)=>{const o=n.slice(),r=o.pop();return _s(r)?cs(o,(u,f)=>u.bind(v=>U.from(v.childNodes[f])),U.some(e)).bind(u=>rt(u)&&(r<0||r>u.data.length)?U.none():U.some({node:u,offset:r})):U.none()},c8=(e,n)=>a8(e,n.start).bind(({node:o,offset:r})=>a8(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),kj=(e,n,o,r=!1)=>V_(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),a1=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,rt(n.firstChild)&&xi(n.firstChild.data)),a1(e,r,o)}},U_=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(rt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),rt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),a1(e,c,o),c!==u&&a1(e,u,o))},W_=(e,n)=>U.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),ID=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:tg(r).concat(e.blockPatterns),inlinePatterns:ma(r).concat(e.inlinePatterns)}},LD=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},i8=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),Z_=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},j_=(e,n,o)=>{const r=c8(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),v=r.startOffset===0?c:c.splitText(r.startOffset),C=v.parentNode,T=f.parentNode;return{prefix:n,end:T.insertBefore(i8(e,n+"-end"),f),start:C.insertBefore(i8(e,n+"-start"),v)}},l8=(e,n,o)=>{a1(e,e.get(n.prefix+"-end"),o),a1(e,e.get(n.prefix+"-start"),o)},FD=e=>e.start.length===0,u8=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},d8=(e,n,o,r)=>{const c=n.start;return AR(e,r.container,r.offset,u8(c),o).bind(f=>{var v,C;const T=(C=(v=o.textContent)===null||v===void 0?void 0:v.indexOf(c))!==null&&C!==void 0?C:-1;if(T!==-1&&f.offset>=T+c.length){const I=e.createRng();return I.setStart(f.container,f.offset-c.length),I.setEnd(f.container,f.offset),U.some(I)}else{const I=f.offset-c.length;return kR(f.container,I,o).map(H=>{const G=e.createRng();return G.setStart(H.container,H.offset),G.setEnd(f.container,f.offset),G}).filter(H=>H.toString()===c).orThunk(()=>d8(e,n,o,Cf(f.container,0)))}})},Aj=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),U.some(f)}return _R(o,r,c).bind(f=>d8(e,n,c,f).bind(C=>{var T;if(u){if(C.endContainer===f.container&&C.endOffset===f.offset)return U.none();if(f.offset===0&&((T=C.endContainer.textContent)===null||T===void 0?void 0:T.length)===C.endOffset)return U.none()}return U.some(C)}))},Oj=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,v=o.position.container,C=o.position.offset;return kR(v,C-o.pattern.end.length,n).bind(T=>{const B=V_(c,u,T.container,T.offset,v,C,r);if(FD(f))return U.some({matches:[{pattern:f,startRng:B,endRng:B}],position:T});{const I=q_(e,o.remainingPatterns,T.container,T.offset,n,r),H=I.getOr({matches:[],position:T}),G=H.position;return Aj(c,f,G.container,G.offset,n,I.isNone()).map(J=>{const re=kj(c,u,J,r);return{matches:H.matches.concat([{pattern:f,startRng:re,endRng:B}]),position:Cf(J.startContainer,J.startOffset)}})}})},q_=(e,n,o,r,c,u)=>{const f=e.dom;return _R(o,r,f.getRoot()).bind(v=>{const C=LD(f,c,o,r);for(let T=0;T<n.length;T++){const B=n[T];if(!wa(C,B.end))continue;const I=n.slice();I.splice(T,1);const H=Oj(e,c,{pattern:B,remainingPatterns:I,position:v},u);if(H.isNone()&&r>0)return q_(e,n,o,r-1,c,u);if(H.isSome())return H}return U.none()})},m8=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?Te(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},Rj=(e,n,o,r)=>{const c=Z_(e.dom,o);U_(e.dom,c,r),m8(e,n,c)},Dj=(e,n,o,r,c)=>{const u=e.dom,f=Z_(u,r),v=Z_(u,o);U_(u,v,c),U_(u,f,c);const C={prefix:o.prefix,start:o.end,end:r.start},T=Z_(u,C);m8(e,n,T)},Mj=(e,n)=>{const o=Wg("mce_textpattern"),r=hi(n,(c,u)=>{const f=j_(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return hi(r,(c,u)=>{const f=r.length-c.length-1,v=FD(u.pattern)?u.endMarker:j_(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:v}])},[])},f8=e=>To(e,(n,o)=>o.end.length-n.end.length),Nj=(e,n)=>{const o=ks(e,r=>vo(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},G_=(e,n,o,r,c,u)=>{const f=q_(e,c.inlinePatterns,o,r,n,u).fold(()=>[],C=>C.matches),v=q_(e,f8(c.inlinePatterns),o,r,n,u).fold(()=>[],C=>C.matches);return Nj(f,v)},g8=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=Mj(o,n);Te(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),v=C=>C===f;FD(u.pattern)?Rj(e,u.pattern,u.endMarker,v):Dj(e,u.pattern,u.startMarker,u.endMarker,v),l8(o,u.endMarker,v),l8(o,u.startMarker,v)}),e.selection.moveToBookmark(r)},h8=(e,n,o)=>SU(n,0,n).map(r=>{const c=r.container;return H$(c,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(c,0),f.setEnd(u.container,u.offset),U_(e,f,v=>v===n)}),c}),p8=e=>(n,o)=>{const r=n.dom,c=o.pattern,u=c8(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(v,C)=>{const T=C.get(v);return kn(T)&&to(T).exists(B=>an(B,"block"))};return W_(n,u).each(v=>{c.type==="block-format"?f(c.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,v,c),n.formatter.apply(c.format)}):c.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,v,c),n.execCommand(c.cmd,!1,c.value)})}),!0},Pj=e=>To(e,(n,o)=>o.start.length-n.start.length),b8=e=>(n,o)=>{const r=Pj(n),c=o.replace(rr," ");return Cs(r,u=>e(u,o,c))},v8=(e,n)=>(o,r,c,u,f)=>{var v;f===void 0&&(f=(v=r.textContent)!==null&&v!==void 0?v:"");const C=o.dom,T=Jr(o);return C.is(r,T)?e(c.blockPatterns,f).map(B=>n&&Qe.trim(f).length===B.start.length?[]:[{pattern:B,range:V_(C,C.getRoot(),r,0,r,0,u)}]).getOr([]):[]},K_=e=>/^\s[^\s]/.test(e),Bj=p8((e,n,o)=>{h8(e,n,o).each(r=>{const c=de.fromDom(r),u=ip(c);K_(u)&&AS(c,u.slice(1))})}),$j=b8((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),Ij=v8($j,!0),Lj=(e,n)=>{const o=e.selection.getRng();return W_(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=ID(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),v=G_(e,r,o.startContainer,u,f,!0),C=Ij(e,r,f,!0);return{inlineMatches:v,blockMatches:C}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},Fj=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();Te(n,r=>Bj(e,r)),e.selection.moveToBookmark(o)},Hj=p8(h8),zj=b8((e,n,o)=>n===e.start||o===e.start),Vj=v8(zj,!1),y8=(e,n)=>{const o=e.selection.getRng();return W_(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=LD(e.dom,r,o.startContainer,c),f=ID(n,r,u);return Vj(e,r,f,!1,u)}).filter(r=>r.length>0)},Uj=(e,n)=>{Te(n,o=>Hj(e,o))},C8=(e,n)=>Lj(e,n).fold(Ge,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{Fy(e),g8(e,o),Fj(e,r);const c=e.selection.getRng(),u=_R(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const v=f.container;v.data.charAt(f.offset-1)===Zh&&(v.deleteData(f.offset-1,1),a1(e.dom,v.parentNode,C=>C===e.dom.getRoot()))})}),!0)),Wj=(e,n)=>{const o=e.selection.getRng();W_(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=LD(e.dom,r,o.startContainer,c),f=ID(n,r,u),v=G_(e,r,o.startContainer,c,f,!1);v.length>0&&e.undoManager.transact(()=>{g8(e,v)})})},Zj=(e,n)=>y8(e,n).fold(Ge,o=>(e.undoManager.transact(()=>{Uj(e,o)}),!0)),HD=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},qw=(e,n)=>HD(e,n,(o,r)=>o===r.keyCode&&!qe.modifierPressed(r)),jj=(e,n)=>HD(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),w8=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>nm(Tx(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),_x(e)),c=()=>kk(e);e.on("keydown",f=>{if(f.keyCode===13&&!qe.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const v=vp(r(),"enter");(v.inlinePatterns.length>0||v.blockPatterns.length>0||c())&&C8(e,v)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const v=vp(r(),"space");(v.blockPatterns.length>0||c())&&Zj(e,v)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=vp(r(),"space");(f.inlinePatterns.length>0||c())&&Wj(e,f)}};e.on("keyup",f=>{qw(o,f)&&u()}),e.on("keypress",f=>{jj(n,f)&&Ft.setEditorTimeout(e,u)})},qj=e=>{w8(e)},Gj=e=>{const n=Qe.each,o=qe.BACKSPACE,r=qe.DELETE,c=e.dom,u=e.selection,f=e.parser,v=Vt.browser,C=v.isFirefox(),T=v.isChromium()||v.isSafari(),B=Vt.deviceType.isiPhone()||Vt.deviceType.isiPad(),I=Vt.os.isMacOS()||Vt.os.isiOS(),H=(It,Ye)=>{try{e.getDoc().execCommand(It,!1,String(Ye))}catch{}},G=It=>It.isDefaultPrevented(),ee=()=>{const It=Nt=>{const yn=c.create("body"),Lo=Nt.cloneContents();return yn.appendChild(Lo),u.serializer.serialize(yn,{format:"html"})},Ye=Nt=>{const yn=It(Nt),Lo=c.createRng();Lo.selectNode(e.getBody());const Jn=It(Lo);return yn===Jn};e.on("keydown",Nt=>{const yn=Nt.keyCode;if(!G(Nt)&&(yn===r||yn===o)&&e.selection.isEditable()){const Lo=e.selection.isCollapsed(),Jn=e.getBody();if(Lo&&!ei(e.schema,Jn)||!Lo&&!Ye(e.selection.getRng()))return;Nt.preventDefault(),e.setContent(""),Jn.firstChild&&c.isBlock(Jn.firstChild)?e.selection.setCursorLocation(Jn.firstChild,0):e.selection.setCursorLocation(Jn,0),e.nodeChanged()}})},J=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},re=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",It=>{let Ye;if(It.target===e.getDoc().documentElement)if(Ye=u.getRng(),e.getBody().focus(),It.type==="mousedown"){if(Nl(Ye.startContainer))return;u.placeCaretAt(It.clientX,It.clientY)}else u.setRng(Ye)})},me=()=>{e.on("keydown",It=>{if(!G(It)&&It.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Ye=u.getNode(),Nt=Ye.previousSibling;if(Ye.nodeName==="HR"){c.remove(Ye),It.preventDefault();return}Nt&&Nt.nodeName&&Nt.nodeName.toLowerCase()==="hr"&&(c.remove(Nt),It.preventDefault())}}})},Ce=()=>{Range.prototype.getClientRects||e.on("mousedown",It=>{if(!G(It)&&It.target.nodeName==="HTML"){const Ye=e.getBody();Ye.blur(),Ft.setEditorTimeout(e,()=>{Ye.focus()})}})},xe=()=>{const It=sm(e);e.on("click",Ye=>{const Nt=Ye.target;/^(IMG|HR)$/.test(Nt.nodeName)&&c.isEditable(Nt)&&(Ye.preventDefault(),e.selection.select(Nt),e.nodeChanged()),Nt.nodeName==="A"&&c.hasClass(Nt,It)&&Nt.childNodes.length===0&&c.isEditable(Nt.parentNode)&&(Ye.preventDefault(),u.select(Nt))})},Oe=()=>{const It=()=>{const Nt=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const yn=u.getStart();yn!==e.getBody()&&(c.setAttrib(yn,"style",null),n(Nt,Lo=>{yn.setAttributeNode(Lo.cloneNode(!0))}))}},Ye=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",Nt=>{let yn;return!G(Nt)&&(Nt.keyCode===8||Nt.keyCode===46)&&Ye()?(yn=It(),e.getDoc().execCommand("delete",!1),yn(),Nt.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",Nt=>{if(!G(Nt)&&Ye()){const yn=It();Ft.setEditorTimeout(e,()=>{yn()})}})},Ke=()=>{e.on("keydown",It=>{if(!G(It)&&It.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Ye=u.getNode().previousSibling;if(Ye&&Ye.nodeName&&Ye.nodeName.toLowerCase()==="table")return It.preventDefault(),!1}return!0})},mt=()=>{e.on("keydown",It=>{if(G(It)||It.keyCode!==qe.BACKSPACE)return;let Ye=u.getRng();const Nt=Ye.startContainer,yn=Ye.startOffset,Lo=c.getRoot();let Jn=Nt;if(!(!Ye.collapsed||yn!==0)){for(;Jn.parentNode&&Jn.parentNode.firstChild===Jn&&Jn.parentNode!==Lo;)Jn=Jn.parentNode;Jn.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Jn),Ye=c.createRng(),Ye.setStart(Nt,0),Ye.setEnd(Nt,0),u.setRng(Ye))}})},Ct=()=>{const It=()=>{H("StyleWithCSS",!1),H("enableInlineTableEditing",!1),X0(e)||H("enableObjectResizing",!1)};b2(e)||e.on("BeforeExecCommand mousedown",It)},He=()=>{const It=()=>{n(c.select("a:not([data-mce-block])"),Ye=>{var Nt;let yn=Ye.parentNode;const Lo=c.getRoot();if((yn==null?void 0:yn.lastChild)===Ye){for(;yn&&!c.isBlock(yn);){if(((Nt=yn.parentNode)===null||Nt===void 0?void 0:Nt.lastChild)!==yn||yn===Lo)return;yn=yn.parentNode}c.add(yn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Ye=>{(Ye.type==="setcontent"||Ye.command==="mceInsertLink")&&It()})},Be=()=>{e.on("init",()=>{H("DefaultParagraphSeparator",Jr(e))})},Xe=It=>{const Ye=It.getBody(),Nt=It.selection.getRng();return Nt.startContainer===Nt.endContainer&&Nt.startContainer===Ye&&Nt.startOffset===0&&Nt.endOffset===Ye.childNodes.length},Bt=()=>{e.on("keyup focusin mouseup",It=>{!qe.modifierPressed(It)&&!Xe(e)&&u.normalize()},!0)},Yt=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Fn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Wn=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",It=>{let Ye;It.target.nodeName==="HTML"&&(Ye=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Ye),e.selection.normalize(),e.nodeChanged())}))},yo=()=>{I&&e.on("keydown",It=>{qe.metaKeyPressed(It)&&!It.shiftKey&&(It.keyCode===37||It.keyCode===39)&&(It.preventDefault(),e.selection.getSel().modify("move",It.keyCode===37?"backward":"forward","lineboundary"))})},Ro=()=>{e.on("click",It=>{let Ye=It.target;do if(Ye.tagName==="A"){It.preventDefault();return}while(Ye=Ye.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Cr=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",It=>{It.preventDefault()})})},Pa=()=>{f.addNodeFilter("br",It=>{let Ye=It.length;for(;Ye--;)It[Ye].attr("class")==="Apple-interchange-newline"&&It[Ye].remove()})},Ba=Ut,St=()=>{if(!C||e.removed)return!1;const It=e.selection.getSel();return!It||!It.rangeCount||It.rangeCount===0},Xt=()=>{T&&(re(),xe(),Cr(),J(),B&&(Fn(),Wn(),Ro())),C&&(Ce(),Ct(),Yt(),yo())},bo=()=>{mt(),ee(),Vt.windowsPhone||Bt(),T&&(re(),xe(),Be(),Cr(),Ke(),Pa(),B?(Fn(),Wn(),Ro()):J()),C&&(me(),Ce(),Oe(),Ct(),He(),Yt(),yo(),Ke())};return gd(e)?Xt():bo(),{refreshContentEditable:Ba,isHidden:St}},Kj=e=>e.toLowerCase()==="gpl",Yj=e=>e.length>=64&&e.length<=255,S8=e=>Kj(e)||Yj(e)?"VALID":"INVALID",Xj=e=>{const n=Ox(e);!le(T2(e))&&(Xo(n)||S8(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},Y_=vs.DOM,Jj=(e,n)=>{const o=de.fromDom(e.getBody()),r=Bd(ji(o)),c=de.fromTag("style");kr(c,"type","text/css"),ps(c,de.fromText(n)),ps(r,c),e.on("remove",()=>{Ao(c)})},Qj=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,zD=e=>Wo(e,n=>Xo(n)===!1),x8=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return zD({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:Qj(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:Ax(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},E8=e=>{const n=e.options.get;return zD({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},eq=e=>{const n=e.options.get;return{...x8(e),...E8(e),...zD({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},tq=e=>{const n=Gv(x8(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const v=o[f];let C=v.attr(r);if(C&&!v.attr(u)){if(C.indexOf("data:")===0||C.indexOf("blob:")===0)continue;r==="style"?(C=c.serializeStyle(c.parseStyle(C),v.name),C.length||(C=null),v.attr(u,C),v.attr(r,C)):r==="tabindex"?(v.attr(u,C),v.attr(r,null)):v.attr(u,e.convertURL(C,r,v.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),JF(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Ri("br",1))}}),n},nq=e=>{const n=Zc(e);n&&Ft.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},oq=e=>{const n=e.dom.getRoot();!e.inline&&(!Dp(e)||e.selection.getStart(!0)===n)&&zr(n).each(o=>{const r=o.getNode(),c=Ol(r)?zr(r).getOr(o):o;e.selection.setRng(c.toRange())})},T8=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Wa(e),e.focus(!0),oq(e),e.nodeChanged({initial:!0});const n=og(e);pe(n)&&n.call(e,e),nq(e),xh(e)&&qB(e,!0)},Gw=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,_8=(e,n,o)=>{const{pass:r,fail:c}=nr(n,v=>tinymce.Resource.has(gg(v))),f=[...r.map(v=>{const C=tinymce.Resource.get(gg(v));return le(C)?Promise.resolve(Gw(e).loadRawCss(v,C)):Promise.resolve()}),Gw(e).loadAll(c)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},VD=e=>{const n=Gw(e),o=hx(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let C="";Qe.each(e.contentStyles,T=>{C+=T+`\r
`}),e.dom.addStyle(C)}const f=Promise.all(_8(e,r,o)).then(u).catch(u),v=hk(e);return v&&Jj(e,v),f},sq=e=>{const n=e.getDoc(),o=e.getBody();rx(e),WM(e)||(n.body.spellcheck=!1,Y_.setAttrib(o,"spellcheck","false")),e.quirks=Gj(e),rk(e);const r=px(e);r!==void 0&&(o.dir=r);const c=wp(e);c&&e.on("BeforeSetContent",u=>{Qe.each(c,f=>{u.content=u.content.replace(f,v=>"<!--mce:protected "+escape(v)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},rq=e=>{gd(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},UD=e=>{e.removed!==!0&&(rq(e),T8(e))},k8=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},WD=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(Y_.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=b2(e),e._editableRoot=wx(e),!sg(e)&&e.hasEditableRoot()&&(e.inline&&Y_.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=O9(e),e.schema=Jm(E8(e)),e.dom=vs(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:fx(e),referrerPolicy:Y1(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=tq(e),e.serializer=OB(eq(e),e),e.selection=kB(e.dom,e.getWin(),e.serializer,e),e.annotator=Go(e),e.formatter=Th(e),e.undoManager=r6(e),e._nodeChangeDispatcher=new mZ(e),e._selectionOverrides=s8(e),LV(e),ML(e),s_(e),gd(e)||(rj(e),qj(e));const c=dZ(e);t_(e,c),VV(e),I9(e),QZ(e);const u=mB(e);sq(e),Xj(e),u.fold(()=>{const f=k8(e);VD(e).then(()=>{UD(e),f()})},f=>{e.setProgressState(!0),VD(e).then(()=>{f().then(v=>{e.setProgressState(!1),UD(e),wB(e)},v=>{e.notificationManager.open({type:"error",text:String(v)}),UD(e),wB(e)})})})},aq=pt,cq=(e,n,o)=>$(e,n,aq,o),Kw=vs.DOM,X_=(e,n,o,r)=>{const c=de.fromTag("iframe");return r.each(u=>kr(c,"tabindex",u)),ua(c,o),ua(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Zi(c,"tox-edit-area__iframe"),c},J_=e=>{let n=uk(e)+"<html><head>";ai(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=j0(e),r=ix(e),c=e.translate(tv(e));return xc(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+xc(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},Oh=(e,n)=>{const o=Vt.browser.isFirefox()?tv(e):"Rich Text Area",r=e.translate(o),c=js(de.fromDom(e.getElement()),"tabindex").bind(Yc),u=X_(e.id,r,lk(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=J_(e),Kw.add(n.iframeContainer,u)},Q_=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,WD(e)};if(rv(e)||Vt.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=cq(de.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},gy=(e,n)=>{Oh(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=Kw.isHidden(n.editorContainer)),e.getElement().style.display="none",Kw.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,Q_(e)},ZD=vs.DOM,iq=(e,n,o)=>{const r=Jv.get(o),c=Jv.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Qe.trim(o),r&&Qe.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,pe(u.init)&&(u.init(e,c),n.push(o))}catch(u){VB(e,o,u)}}},lq=e=>e.replace(/^\-/,""),A8=e=>{const n=[];Te(Wc(e),o=>{iq(e,n,lq(o))})},uq=e=>{const n=Qe.trim(mx(e)),o=e.ui.registry.getAll().icons,r={...kT.get("default").icons,...kT.get(n).icons};bt(r,(c,u)=>{an(o,u)||e.ui.registry.addIcon(u,c)})},jD=e=>{const n=Cp(e);if(le(n)){const o=bf.get(n);e.theme=o(e,bf.urls[n])||{},pe(e.theme.init)&&e.theme.init(e,bf.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},e4=e=>{const n=m2(e),o=Xv.get(n);e.model=o(e,Xv.urls[n])},c1=e=>{const n=e.theme.renderUI;return n?n():O8(e)},e0=e=>{const n=e.getElement(),r=Cp(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},qD=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),dq=e=>{const n=ZD.create("div");return ZD.insertAfter(n,e),qD(n,n)},O8=e=>{const n=e.getElement();return e.inline?qD(null):dq(n)},mq=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,le(Cp(e))?c1(e):pe(Cp(e))?e0(e):O8(e)},fq=(e,n)=>{const o={show:U.from(n.show).getOr(Ut),hide:U.from(n.hide).getOr(Ut),isEnabled:U.from(n.isEnabled).getOr(pt),setEnabled:r=>{r&&(e.mode.get()==="readonly"||xh(e))||U.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},gq=async e=>{e.dispatch("ScriptsLoaded"),uq(e),jD(e),e4(e),A8(e);const n=await mq(e);fq(e,U.from(n.api).getOr({})),e.editorContainer=n.editorContainer,hg(e),e.inline?WD(e):gy(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},t0=vs.DOM,GD=e=>e.charAt(0)==="-",hq=(e,n)=>{const o=yp(n),r=ng(n);if(!ni.hasCode(o)&&o!=="en"){const c=No(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{b9(n,c,o)})}},pq=(e,n)=>{const o=Cp(e);if(le(o)&&!GD(o)&&!an(bf.urls,o)){const r=bk(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;bf.load(o,c).catch(()=>{v9(e,c,o)})}},bq=(e,n)=>{const o=m2(e);if(o!=="plugin"&&!an(Xv.urls,o)){const r=vk(e),c=le(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Xv.load(o,c).catch(()=>{tw(e,c,o)})}},IY=e=>U.from(dk(e)).filter(No).map(n=>({url:n,name:U.none()})),R8=(e,n,o)=>U.from(n).filter(r=>No(r)&&!kT.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:U.some(r)})),KD=(e,n,o)=>{const r=R8(n,"default",o),c=IY(n).orThunk(()=>R8(n,mx(n),""));Te(Bm([r,c]),u=>{e.add(u.url).catch(()=>{zB(n,u.url,u.name.getOrUndefined())})})},vq=(e,n)=>{const o=(r,c)=>{Jv.load(r,c).catch(()=>{p9(e,c,r)})};bt(Q0(e),(r,c)=>{o(c,r),e.options.set("plugins",Wc(e).concat(c))}),Te(Wc(e),r=>{r=Qe.trim(r),r&&!Jv.urls[r]&&!GD(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},yq=e=>{const n=Cp(e);return!le(n)||We(bf.get(n))},D8=e=>{const n=m2(e);return We(Xv.get(n))},Cq=(e,n)=>{const o=ki.ScriptLoader,r=()=>{!e.removed&&yq(e)&&D8(e)&&gq(e)};pq(e,n),bq(e,n),hq(o,e),KD(o,e,n),vq(e,n),o.loadQueue().then(r,r)},M8=(e,n)=>Fc.forElement(e,{contentCssCors:Sx(n),referrerPolicy:Y1(n)}),wq=e=>{const n=e.id;ni.setCode(yp(e));const o=()=>{t0.unbind(window,"ready",o),e.render()};if(!ef.Event.domLoaded){t0.bind(window,"ready",o);return}if(!e.getElement())return;const r=de.fromDom(e.getElement()),c=Im(r);e.on("remove",()=>{Ja(r.dom.attributes,f=>ts(r,f.name)),ua(r,c)}),e.ui.styleSheetLoader=M8(r,e),Q1(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||t0.getParent(n,"form");u&&(e.formElement=u,yx(e)&&!Ss(e.getElement())&&(t0.insertAfter(t0.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},t0.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),g2(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=fO(e),e.notificationManager=g9(e),S2(e)&&e.on("GetContent",f=>{f.save&&(f.content=t0.encode(f.content))}),h2(e)&&e.on("submit",()=>{e.initialized&&e.save()}),p2(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),Cq(e,e.suffix)},YD=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,xh(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),Hr(e,n))},Sq=e=>e._editableRoot,xq=(e,n)=>({sections:vt(e),options:vt(n)}),N8=ia().deviceType,P8=N8.isPhone(),B8=N8.isTablet(),n0=e=>{if(Nn(e))return[];{const n=kn(e)?e:e.split(/[ ,]/),o=hn(n,Bs);return Qt(o,No)}},$8=(e,n)=>{const o=pi(n,(r,c)=>gn(e,c));return xq(o.t,o.f)},XD=(e,n,o={})=>{const r=e.sections(),c=Mo(r,n).getOr({});return Qe.extend({},o,c)},JD=(e,n)=>an(e.sections(),n),LY=(e,n)=>JD(e,n)?e.sections()[n]:{},FY=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Mo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),Eq=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Qe.extend({},e.external_plugins,r):r},I8=(e,n)=>[...n0(e),...n0(n)],Tq=(e,n,o,r)=>e&&JD(n,"mobile")?r:o,_q=(e,n,o,r)=>{const c=n0(o.forced_plugins),u=n0(r.plugins),f=LY(n,"mobile"),v=f.plugins?n0(f.plugins):u,C=Tq(e,n,u,v),T=I8(c,C);return Qe.extend(r,{forced_plugins:c,plugins:T})},kq=(e,n)=>e&&JD(n,"mobile"),HY=(e,n,o,r,c)=>{var u;const f=e?{mobile:FY((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},v=$8(["mobile"],b_(f,c)),C=Qe.extend(o,r,v.options(),kq(e,v)?XD(v,"mobile"):{},{external_plugins:Eq(r,v.options())});return _q(e,v,r,C)},zY=(e,n)=>{const o=q$(n);return HY(P8||B8,P8,o,e,o)},L8=(e,n)=>$z(e,n),F8=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{Te("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},Aq=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return vo(c,u=>We(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},Oq=e=>{F8(e),Aq(e)},Rq=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Vt.os.isMacOS()||Vt.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:c,type:"error"})}}})},VY=(e,n,o,r)=>{const c=de.fromDom(e.getRoot());return bC(c,Ie.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Pv(c,Ie.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},UY=e=>{if(typeof e!="string"){const n=Qe.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},WY=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?VY(r,o.getRng(),n,e.schema):n},t4=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=UY(n);zA(e,{...r,content:WY(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=Bz(e,c.content,r);$b(e,u,c),e.addVisual()})}},ZY=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{t4(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{t4(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{t4(e,r)},mceInsertContent:(n,o,r)=>{t4(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(xx(e))}})},Dq={"font-size":"size","font-family":"face"},o0=_l("font"),QD=(e,n,o)=>{const r=u=>nc(u,e).orThunk(()=>o0(u)?Mo(Dq,e).bind(f=>js(u,f)):U.none()),c=u=>oo(de.fromDom(n),u);return JE(de.fromDom(o),u=>r(u),c)},n4=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),H8=(e,n)=>U.from(vs.DOM.getStyle(n,e,!0)),eM=e=>(n,o)=>U.from(o).map(de.fromDom).filter(es).bind(r=>QD(e,n,r.dom).or(H8(e,r.dom))).getOr(""),z8=eM("font-size"),Mq=D(n4,eM("font-family")),Nq=e=>zr(e.getBody()).bind(n=>{const o=n.container();return U.from(rt(o)?o.parentNode:o)}),Pq=e=>U.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?U.none():U.from(e.selection.getStart(!0))}),Bq=(e,n)=>Pq(e).orThunk(Je(Nq,e)).map(de.fromDom).filter(es).bind(n),tM=(e,n)=>Bq(e,_o(U.some,n)),V8=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=kx(e),c=Ak(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},i1=e=>{const n=e.split(/\s*,\s*/);return hn(n,o=>o.indexOf(" ")!==-1&&!(Ws(o,'"')||Ws(o,"'"))?`'${o}'`:o).join(",")},$q=(e,n)=>{const o=V8(e,n);e.formatter.toggle("fontname",{value:i1(o)}),e.nodeChanged()},U8=e=>tM(e,n=>Mq(e.getBody(),n.dom)).getOr(""),Iq=(e,n)=>{e.formatter.toggle("fontsize",{value:V8(e,n)}),e.nodeChanged()},o4=e=>tM(e,n=>z8(e.getBody(),n.dom)).getOr(""),Lq=e=>tM(e,n=>{const o=de.fromDom(e.getBody()),r=JE(n,u=>nc(u,"line-height"),Je(oo,o)),c=()=>{const u=parseFloat(Ls(n,"line-height")),f=parseFloat(Ls(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),Fq=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Hq=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{$q(e,c)},FontSize:(o,r,c)=>{Iq(e,c)},LineHeight:(o,r,c)=>{Fq(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(le(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},W8=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>U8(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>o4(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>Lq(e))},zq=e=>{Hq(e),W8(e)},Vq=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},Uq=e=>{e.editorCommands.addCommands({Indent:()=>{BV(e)},Outdent:()=>{u$(e)}}),e.editorCommands.addCommands({Outdent:()=>c$(e)},"state")},Wq=e=>{const n=(o,r,c)=>{if(e.mode.isReadOnly())return;const u=le(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Ot(u)&&le(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},nM=(e,n,o,r)=>{const c=e.dom,u=v=>c.isBlock(v)&&v.parentElement===o,f=u(n)?n:c.getParent(r,u,o);return U.from(f).map(de.fromDom)},Z8=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),c=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=iy(o,u);if(!f||!f.isContentEditable)return;const v=n?za:$c,C=Jr(e);nM(e,c,f,u).each(T=>{const B=EI(e,u,T.dom,f,!1,C);v(T,de.fromDom(B)),e.selection.setCursorLocation(B,0),e.dispatch("NewBlock",{newBlock:B}),Dw(e,"insertParagraph")})},Zq=e=>Z8(e,!0),va=e=>Z8(e,!1),jq=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{Zq(e)},InsertNewBlockAfter:()=>{va(e)}})},qq=e=>{e.editorCommands.addCommands({insertParagraph:()=>{O_(Bw,e)},mceInsertNewLine:(n,o,r)=>{BI(e,r)},InsertLineBreak:(n,o,r)=>{O_(DI,e)}})},oM=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>_t(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Ze);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},j8=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{rn(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},sM=e=>{Oq(e),Rq(e),Vq(e),oM(e),ZY(e),Wq(e),Uq(e),jq(e),qq(e),zq(e),j8(e)},Gq=["toggleview"],q8=e=>gn(Gq,e.toLowerCase());class G8{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),v=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!v?u.focus():t5(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const T=this.commands.exec[f];return pe(T)?(T(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!q8(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return pe(r)?r(o):!1}queryCommandValue(n){if(!q8(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return pe(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;bt(n,(c,u)=>{Te(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,v)=>o.call(r??this.editor,f,v)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const Kq=Qe.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class rM{static isNative(n){return!!Kq[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ge}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=R1(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,v=u.length;f<v;f++){const C=u[f];if(!C.removed){if(C.once&&this.off(r,C.func),c.isImmediatePropagationStopped())return c;if(C.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=Ge),o){const u={func:o,removed:!1};c&&Qe.extend(u,c);const f=n.toLowerCase().split(" ");let v=f.length;for(;v--;){const C=f[v];let T=this.bindings[C];T||(T=[],this.toggleEvent(C,!0)),r?T=[u,...T]:T=[...T,u],this.bindings[C]=T}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return bt(this.bindings,(v,C)=>{this.toggleEvent(C,!1),delete this.bindings[C]}),this;if(f){if(!o)f.length=0;else{const v=nr(f,C=>C.func===o);f=v.fail,this.bindings[u]=f,Te(v.pass,C=>{C.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else bt(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const Yw=e=>(e._eventDispatcher||(e._eventDispatcher=new rM({scope:e,toggleEvent:(n,o)=>{rM.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),aM={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return R1(e.toLowerCase(),n??{},r);const c=Yw(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return Yw(this).on(e,n,o)},off(e,n){return Yw(this).off(e,n)},once(e,n){return Yw(this).once(e,n)},hasEventListeners(e){return Yw(this).has(e)}},s4=vs.DOM;let ym;const Ou=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=X1(e);return o?(e.eventRoot||(e.eventRoot=s4.select(o)[0]),e.eventRoot):e.getBody()},Yq=e=>!e.hidden&&!xh(e),K8=(e,n,o)=>{Yq(e)?e.dispatch(n,o):xh(e)&&E9(e,o)},Y8=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=Ou(e,n);if(X1(e)){if(ym||(ym={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||ym&&(bt(ym,(c,u)=>{e.dom.unbind(Ou(e,u))}),ym=null)})),ym[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let v=f.length;for(;v--;){const C=f[v].getBody();(C===u||s4.isChildOf(u,C))&&K8(f[v],n,c)}};ym[n]=r,s4.bind(o,n,r)}else{const r=c=>{K8(e,n,c)};s4.bind(o,n,r),e.delegates[n]=r}},X8={...aM,bindPendingEventDelegates(){const e=this;Qe.each(e._pendingNativeEvents,n=>{Y8(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?Y8(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(Ou(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(bt(e.delegates,(r,c)=>{e.dom.unbind(Ou(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},Xq=e=>le(e)?{value:e.split(/[ ,]/),valid:!0}:fo(e,le)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Jq=e=>{const n=(()=>{switch(e){case"array":return kn;case"boolean":return bn;case"function":return pe;case"number":return _s;case"object":return Ot;case"string":return le;case"string[]":return Xq;case"object[]":return o=>fo(o,Ot);case"regexp":return o=>Tt(o,RegExp);default:return pt}})();return o=>eF(o,n,`The value must be a ${e}.`)},Qq=e=>le(e.processor),J8=(e,n)=>{const o=Rs(n.message)?"":`. ${n.message}`;return e+o},Q8=e=>e.valid,eF=(e,n,o="")=>{const r=n(e);return bn(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},eG=(e,n,o)=>{if(!Xo(n)){const r=eF(n,o);if(Q8(r))return r.value;console.error(J8(`Invalid default value passed for the "${e}" option`,r))}},tG=(e,n,o=n)=>{const r={},c={},u=(G,ee,J)=>{const re=eF(ee,J);return Q8(re)?(c[G]=re.value,!0):(console.warn(J8(`Invalid value passed for the ${G} option`,re)),!1)},f=(G,ee)=>{const J=Qq(ee)?Jq(ee.processor):ee.processor,re=eG(G,ee.default,J);r[G]={...ee,default:re,processor:J},Mo(c,G).orThunk(()=>Mo(n,G)).each(Ce=>u(G,Ce,J))},v=G=>an(r,G);return{register:f,isRegistered:v,get:G=>Mo(c,G).orThunk(()=>Mo(r,G).map(ee=>ee.default)).getOrUndefined(),set:(G,ee)=>{if(v(G)){const J=r[G];return J.immutable?(console.error(`"${G}" is an immutable option and cannot be updated`),!1):u(G,ee,J.processor)}else return console.warn(`"${G}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:G=>{const ee=v(G);return ee&&delete c[G],ee},isSet:G=>an(c,G),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(G,ee)=>bn(ee)||_s(ee)||le(ee)||ae(ee)||kn(ee)||Io(ee)?ee:Object.prototype.toString.call(ee))))}catch(G){console.error(G)}}}},nG=(e,n)=>{e.dom.contentEditable="true"},oG=(e,n)=>{const o=de.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&nG(o),ZB(e)):(e.readonly=!1,jB(e))},Xw=e=>e.readonly,sG=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",n=>{Xw(e)&&n.preventDefault()}),e.on("BeforeExecCommand",n=>{(n.command==="Undo"||n.command==="Redo")&&Xw(e)&&n.preventDefault()}),e.on("input",n=>{if(!n.isComposing&&Xw(e)){const o=e.undoManager.add();We(o)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(Xw(e)){const n=e.undoManager.add();We(n)&&e.undoManager.undo()}})},rG=["design","readonly"],tF=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&oG(e,u.editorReadOnly),n.set(r),nx(e,r)},aG=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&xh(e))){if(!an(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?tF(e,o,n,r):e.on("init",()=>tF(e,o,n,r))}},cG=(e,n,o)=>{if(gn(rG,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},iG=e=>{const n=Dr("design"),o=Dr({design:{activate:Ut,deactivate:Ut,editorReadOnly:!1},readonly:{activate:Ut,deactivate:Ut,editorReadOnly:!0}});return sG(e),_9(e),{isReadOnly:()=>Xw(e),set:r=>aG(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(cG(o.get(),r,c))}}},cM=Qe.each,iM=Qe.explode,lG={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},nF=Qe.makeMap("alt,ctrl,shift,meta,access"),uG=e=>e in nF,dG=e=>{const n={},o=Vt.os.isMacOS()||Vt.os.isiOS();cM(iM(e.toLowerCase(),"+"),u=>{uG(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=lG[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in nF)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class oF{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(cM(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return cM(iM(Qe.trim(n)),v=>{const C=u.createShortcut(v,o,f,c);u.shortcuts[C.id]=C}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Qe.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=Qe.map(iM(n,">"),dG);return u[u.length-1]=Qe.extend(u[u.length-1],{func:r,scope:c||this.editor}),Qe.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const mG=()=>{const e={},n={},o={},r={},c={},u={},f={},v={},C={},T=(G,ee)=>(J,re)=>{G[J.toLowerCase()]={...re,type:ee}},B=(G,ee)=>(J,re)=>{G[J.toLowerCase()]={type:ee,...re}},I=(G,ee)=>r[G.toLowerCase()]=ee,H=(G,ee)=>f[G.toLowerCase()]=ee;return{addButton:T(e,"button"),addGroupToolbarButton:T(e,"grouptoolbarbutton"),addToggleButton:T(e,"togglebutton"),addMenuButton:T(e,"menubutton"),addSplitButton:T(e,"splitbutton"),addMenuItem:T(n,"menuitem"),addNestedMenuItem:T(n,"nestedmenuitem"),addToggleMenuItem:T(n,"togglemenuitem"),addAutocompleter:T(o,"autocompleter"),addContextMenu:T(c,"contextmenu"),addContextToolbar:T(u,"contexttoolbar"),addContextForm:B(u,"contextform"),addSidebar:T(v,"sidebar"),addView:T(C,"views"),addIcon:I,addContext:H,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:v,views:C,contexts:f})}},fG=()=>{const e=mG();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},s0=vs.DOM,sF=Qe.extend,gG=Qe.each;class Jw{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,sF(this,X8);const c=this;this.id=n,this.hidden=!1;const u=zY(r.defaultOptions,o);this.options=tG(c,u,o),UM(c);const f=this.options.get;f("deprecation_warnings")&&NB(o,u);const v=f("suffix");v&&(r.suffix=v),this.suffix=r.suffix;const C=f("base_url");C&&r._setBaseUrl(C),this.baseUri=r.baseURI;const T=Y1(c);T&&(ki.ScriptLoader._setReferrerPolicy(T),vs.DOM.styleSheetLoader._setReferrerPolicy(T));const B=Sx(c);We(B)&&vs.DOM.styleSheetLoader._setContentCssCors(B),Ua.languageLoad=f("language_load"),Ua.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new xu(ai(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Q1(c),this.hasVisual=v2(c),this.shortcuts=new oF(this),this.editorCommands=new G8(this),sM(this);const I=f("cache_suffix");I&&(Vt.cacheSuffix=I.replace(/^[\?\&]+/,"")),this.ui={registry:fG(),styleSheetLoader:void 0,show:Ut,hide:Ut,setEnabled:Ut,isEnabled:pt},this.mode=iG(c),r.dispatch("SetupEditor",{editor:this});const H=wk(c);pe(H)&&H.call(c,c)}render(){wq(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return it(this)}translate(n){return ni.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(We(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:pt,default:o})),!c.isSet(n)&&!Xo(o)?o:c.get(n)}hasPlugin(n,o){return gn(Wc(this),n)?o?Jv.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(s0.show(n.getContainer()),s0.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(s0.hide(n.getContainer()),s0.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=Ss(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,Ss(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const v=s0.getParent(o.id,"form");v&&gG(v.elements,C=>C.name===o.id?(C.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return Xp(this,n,o)}getContent(n){return sY(this,n)}insertContent(n,o){o&&(n=sF({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?Xp(this,this.startContent,{format:"raw"}):Xp(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||s0.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=s0.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=nv(c);if(pe(f))return f.call(c,n,r,!0,o);if(!u("convert_urls")||r==="link"||Ot(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const v=new xu(n);return v.protocol!=="http"&&v.protocol!=="https"&&v.protocol!==""?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){L8(this,n)}setEditableRoot(n){YD(this,n)}hasEditableRoot(){return Sq(this)}remove(){a9(this)}destroy(n){Eu(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const hy=vs.DOM,r4=Qe.each;let rF=!1,a4,ul=[];const c4=e=>{const n=e.type;r4(l1.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},aF=e=>{if(e!==rF){const n=vs.DOM;e?(n.bind(window,"resize",c4),n.bind(window,"scroll",c4)):(n.unbind(window,"resize",c4),n.unbind(window,"scroll",c4)),rF=e}},cF=e=>{const n=ul;return ul=Qt(ul,o=>e!==o),l1.activeEditor===e&&(l1.activeEditor=ul.length>0?ul[0]:null),l1.focusedEditor===e&&(l1.focusedEditor=null),n.length!==ul.length},iF=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(cF(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},hG=document.compatMode!=="CSS1Compat",l1={...aM,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"7.2",releaseDate:"2025-03-19",i18n:ni,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=xu.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const v=u[f].src||"";if(v==="")continue;const C=v.substring(v.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(v)){C.indexOf(".min")!==-1&&(o=".min"),n=v.substring(0,v.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new xu(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new xu(e.baseURL),e.suffix=o,b(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&bt(r,(c,u)=>{Ua.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=Qe.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(B,I)=>B.inline&&I.tagName.toLowerCase()in r,u=B=>{let I=B.id;return I||(I=Mo(B,"name").filter(H=>!hy.get(H)).getOrThunk(hy.uniqueId),B.setAttribute("id",I)),I},f=B=>{const I=e[B];if(I)return I.apply(n,[])},v=B=>Vt.browser.isIE()||Vt.browser.isEdge()?(nw("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):hG?(nw("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):le(B.selector)?hy.select(B.selector):We(B.target)?[B.target]:[];let C=B=>{o=B};const T=()=>{let B=0;const I=[];let H;const G=(ee,J,re)=>{const me=new Jw(ee,J,n);I.push(me),me.on("init",()=>{++B===H.length&&C(I)}),me.targetElm=me.targetElm||re,me.render()};hy.unbind(window,"ready",T),f("onpageload"),H=ql(v(e)),Qe.each(H,ee=>{iF(n.get(ee.id))}),H=Qe.grep(H,ee=>!n.get(ee.id)),H.length===0?C([]):r4(H,ee=>{c(e,ee)?nw("Could not initialize inline editor on invalid inline target element",ee):G(u(ee),e,ee)})};return hy.bind(window,"ready",T),new Promise(B=>{o?B(o):C=I=>{B(I)}})},get(e){return arguments.length===0?ul.slice(0):le(e)?Cs(ul,n=>n.id===e).getOr(null):_s(e)&&ul[e]?ul[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&ul.push(e),aF(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),a4||(a4=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",a4))),e},createEditor(e,n){return this.add(new Jw(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=ul.length-1;r>=0;r--)n.remove(ul[r]);return}if(le(e)){r4(hy.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,ae(n.get(o.id))?null:(cF(o)&&n.dispatch("RemoveEditor",{editor:o}),ul.length===0&&window.removeEventListener("beforeunload",a4),o.remove(),aF(ul.length>0),o)},execCommand(e,n,o){var r;const c=this,u=Ot(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new Jw(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{r4(ul,e=>{e.save()})},addI18n:(e,n)=>{ni.add(e,n)},translate:e=>ni.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new xu(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new xu(this.baseURL)}};l1.setup();const pG=(()=>{const e=Fs(),n=u=>({items:u,types:is(u),getType:f=>Mo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),lF=Math.min,py=Math.max,i4=Math.round,uF=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,v=n.w,C=n.h,T=(o||"").split("");return T[0]==="b"&&(c+=C),T[1]==="r"&&(r+=v),T[0]==="c"&&(c+=i4(C/2)),T[1]==="c"&&(r+=i4(v/2)),T[3]==="b"&&(c-=f),T[4]==="r"&&(r-=u),T[3]==="c"&&(c-=i4(f/2)),T[4]==="c"&&(r-=i4(u/2)),r0(r,c,u,f)},dF=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=uF(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},qY=(e,n,o)=>r0(e.x-n,e.y-o,e.w+n*2,e.h+o*2),mF=(e,n)=>{const o=py(e.x,n.x),r=py(e.y,n.y),c=lF(e.x+e.w,n.x+n.w),u=lF(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:r0(o,r,c-o,u-r)},bG=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const v=n.x+n.w,C=n.y+n.h,T=py(0,n.x-r),B=py(0,n.y-c),I=py(0,u-v),H=py(0,f-C);return r+=T,c+=B,o&&(u+=T,f+=B,r-=I,c-=H),u-=I,f-=H,r0(r,c,u-r,f-c)},r0=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),vG={inflate:qY,relativePosition:uF,findBestRelativePosition:dF,intersect:mF,clamp:bG,create:r0,fromClientRect:e=>r0(e.left,e.top,e.width,e.height)},yG=(e,n,o=1e3)=>{let r=!1,c=null;const u=T=>(...B)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),T.apply(null,B))},f=u(e),v=u(n);return{start:(...T)=>{!r&&c===null&&(c=setTimeout(()=>v.apply(null,T),o))},resolve:f,reject:v}},CG=(()=>{const e={},n={},o={};return{load:(C,T)=>{const B=`Script at URL "${T}" failed to load`,I=`Script at URL "${T}" did not call \`tinymce.Resource.add('${C}', data)\` within 1 second`;if(e[C]!==void 0)return e[C];{const H=new Promise((G,ee)=>{const J=yG(G,ee);n[C]=J.resolve,ki.ScriptLoader.loadScript(T).then(()=>J.start(I),()=>J.reject(B))});return e[C]=H,H}},add:(C,T)=>{n[C]!==void 0&&(n[C](T),delete n[C]),e[C]=Promise.resolve(T),o[C]=T},has:C=>C in o,get:C=>o[C],unload:C=>{delete e[C],delete o[C]}}})(),wG=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let a0;try{const e="__storage_test__";a0=window.localStorage,a0.setItem(e,e),a0.removeItem(e)}catch{a0=wG()}var lM=a0;const SG={geom:{Rect:vG},util:{Delay:Ft,Tools:Qe,VK:qe,URI:xu,EventDispatcher:rM,Observable:aM,I18n:ni,LocalStorage:lM,ImageUploader:e6},dom:{EventUtils:ef,TreeWalker:da,TextSeeker:Kf,DOMUtils:vs,ScriptLoader:ki,RangeUtils:Lp,Serializer:OB,StyleSheetLoader:pr,ControlSelection:mg,BookmarkManager:cd,Selection:kB,Event:ef.Event},html:{Styles:Bo,Entities:Yd,Node:Ri,Schema:Jm,DomParser:Gv,Writer:z5,Serializer:Fp},Env:Vt,AddOnManager:Ua,Annotator:Go,Formatter:Th,UndoManager:r6,EditorCommands:G8,WindowManager:fO,NotificationManager:g9,EditorObservable:X8,Shortcuts:oF,Editor:Jw,FocusManager:sC,EditorManager:l1,DOM:vs.DOM,ScriptLoader:ki.ScriptLoader,PluginManager:Jv,ThemeManager:bf,ModelManager:Xv,IconManager:kT,Resource:CG,FakeClipboard:pG,trim:Qe.trim,isArray:Qe.isArray,is:Qe.is,toArray:Qe.toArray,makeMap:Qe.makeMap,each:Qe.each,map:Qe.map,grep:Qe.grep,inArray:Qe.inArray,extend:Qe.extend,walk:Qe.walk,resolve:Qe.resolve,explode:Qe.explode,_addCacheSuffix:Qe._addCacheSuffix},uM=Qe.extend(l1,SG),xG=e=>{try{p.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(uM),xG(uM)})()}(HG)),HG.exports}qoe();var UX={},WX={},ZX;function Goe(){return ZX||(ZX=1,tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M12 15v2a5 5 0 0 0 0-10v2a3 3 0 1 0 0 6zm0 0a3 3 0 1 0 0-6z"/><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm7-2h7V5h-7v2a5 5 0 0 0 0 10z"/></g></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z" clip-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path clip-rule="evenodd" d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}})),WX}var jX;function Koe(){return jX||(jX=1,Goe()),UX}Koe();var qX={},GX={},KX;function Yoe(){return KX||(KX=1,function(){const p=Object.getPrototypeOf,S=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},O=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&S(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},P=t=>s=>O(s)===t,F=t=>s=>typeof s===t,Z=t=>s=>t===s,q=(t,s)=>Ee(t)&&S(t,s,(a,i)=>p(a)===i),se=P("string"),Ee=P("object"),Le=t=>q(t,Object),Fe=P("array"),ut=Z(null),en=F("boolean"),Mn=Z(void 0),ln=t=>t==null,cn=t=>!ln(t),Ae=F("function"),On=F("number"),Tt=(t,s)=>{if(Fe(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},le=()=>{},Ot=t=>()=>t(),Io=(t,s)=>(...a)=>t(s.apply(null,a)),kn=(t,s)=>a=>t(s(a)),ae=t=>()=>t,bn=t=>t,Xo=(t,s)=>t===s;function Nn(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const We=t=>s=>!t(s),pe=t=>()=>{throw new Error(t)},_s=t=>t(),fo=ae(!1),Ut=ae(!0);class D{constructor(s,a){this.tag=s,this.value=a}static some(s){return new D(!0,s)}static none(){return D.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?D.some(s(this.value)):D.none()}bind(s){return this.tag?s(this.value):D.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:D.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return cn(s)?D.some(s):D.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}D.singletonNone=new D(!1);const _o=Array.prototype.slice,vt=Array.prototype.indexOf,Jo=Array.prototype.push,fn=(t,s)=>vt.call(t,s),Je=(t,s)=>{const a=fn(t,s);return a===-1?D.none():D.some(a)},zo=(t,s)=>fn(t,s)>-1,wr=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},Co=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},Sr=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=_o.call(t,i,i+s);a.push(d)}return a},Ge=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},pt=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},U=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},pl=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?a:i).push(h)}return{pass:a,fail:i}},ko=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},gs=(t,s,a)=>(U(t,(i,d)=>{a=s(a,i,d)}),a),Vo=(t,s,a)=>(pt(t,(i,d)=>{a=s(a,i,d)}),a),kf=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return D.some(g);if(a(g,i))break}return D.none()},gn=(t,s)=>kf(t,s,fo),vo=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return D.some(a)}return D.none()},hn=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!Fe(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Jo.apply(s,t[a])}return s},Te=(t,s)=>hn(Ge(t,s)),Ja=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},nr=t=>{const s=_o.call(t,0);return s.reverse(),s},Qt=(t,s)=>ko(t,a=>!zo(s,a)),hi=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},cs=t=>[t],bl=(t,s)=>{const a=_o.call(t,0);return a.sort(s),a},Cs=(t,s)=>s>=0&&s<t.length?D.some(t[s]):D.none(),Pr=t=>Cs(t,0),Zl=t=>Cs(t,t.length-1),Ca=Ae(Array.from)?Array.from:t=>_o.call(t),ks=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return D.none()},Uo=Object.keys,Mc=Object.hasOwnProperty,As=(t,s)=>{const a=Uo(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=t[g];s(h,g)}},To=(t,s)=>jl(t,(a,i)=>({k:i,v:s(a,i)})),jl=(t,s)=>{const a={};return As(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},to=t=>(s,a)=>{t[a]=s},xr=(t,s,a,i)=>{As(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},Br=(t,s)=>{const a={},i={};return xr(t,s,to(a),to(i)),{t:a,f:i}},vl=(t,s)=>{const a={};return xr(t,s,to(a),le),a},ql=(t,s)=>{const a=[];return As(t,(i,d)=>{a.push(s(i,d))}),a},is=(t,s)=>{const a=Uo(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=t[g];if(s(h,g,t))return D.some(h)}return D.none()},Tm=t=>ql(t,bn),bt=(t,s)=>Yn(t,s)?D.from(t[s]):D.none(),Yn=(t,s)=>Mc.call(t,s),Ur=(t,s)=>Yn(t,s)&&t[s]!==void 0&&t[s]!==null,Wr=(t,s,a=Xo)=>t.exists(i=>a(i,s)),Nc=(t,s,a=Xo)=>mc(t,s,a).getOr(t.isNone()&&s.isNone()),pi=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},Wo=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return D.none()}return D.some(s)},mc=(t,s,a)=>t.isSome()&&s.isSome()?D.some(a(t.getOrDie(),s.getOrDie())):D.none(),Ii=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?D.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):D.none(),Mo=(t,s)=>t!=null?D.some(s(t)):D.none(),an=(t,s)=>t?D.some(s):D.none(),ur=(t,s)=>t+s,bi=(t,s)=>t.substring(s),$u=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,_m=(t,s)=>Os(t,s)?bi(t,s.length):t,Er=(t,s)=>fc(t,s)?t:ur(t,s),hs=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?Mn(i)?!0:d+s.length<=i:!1},Os=(t,s)=>$u(t,s,0),fc=(t,s)=>$u(t,s,t.length-s.length),vi=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Tr=t=>t.length>0,Zo=t=>!Tr(t),gc=t=>{const s=parseFloat(t);return isNaN(s)?D.none():D.some(s)},Zr=t=>t.style!==void 0&&Ae(t.style.getPropertyValue),km=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return yl(i.childNodes[0])},Af=(t,s)=>{const i=(s||document).createElement(t);return yl(i)},Kc=(t,s)=>{const i=(s||document).createTextNode(t);return yl(i)},yl=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},ct={fromHtml:km,fromTag:Af,fromText:Kc,fromDom:yl,fromPoint:(t,s,a)=>D.from(t.dom.elementFromPoint(s,a)).map(yl)},Cl=typeof window<"u"?window:Function("return this;")(),Tg=(t,s)=>{let a=s??Cl;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},Td=(t,s)=>{const a=t.split(".");return Tg(a,s)},Qo=(t,s)=>Td(t,s),Am=(t,s)=>{const a=Qo(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Li=Object.getPrototypeOf,wl=t=>Am("HTMLElement",t),Ia=t=>{const s=Td("ownerDocument.defaultView",t);return Ee(t)&&(wl(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Li(t).constructor.name))},or=9,Ws=11,wa=1,Gl=3,Bs=t=>t.dom.nodeName.toLowerCase(),Kl=t=>t.dom.nodeType,Qa=t=>s=>Kl(s)===t,No=t=>Rs(t)&&Ia(t.dom),Rs=Qa(wa),dr=Qa(Gl),Yc=Qa(or),ec=Qa(Ws),ca=t=>s=>Rs(s)&&Bs(s)===t,jo=(t,s)=>{const a=t.dom;if(a.nodeType!==wa)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Om=t=>t.nodeType!==wa&&t.nodeType!==or&&t.nodeType!==Ws||t.childElementCount===0,Fi=(t,s)=>{const a=s===void 0?document:s.dom;return Om(a)?[]:Ge(a.querySelectorAll(t),ct.fromDom)},_d=(t,s)=>{const a=s===void 0?document:s.dom;return Om(a)?D.none():D.from(a.querySelector(t)).map(ct.fromDom)},Xn=(t,s)=>t.dom===s.dom,Hi=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},Es=t=>ct.fromDom(t.dom.ownerDocument),Rm=t=>Yc(t)?t:Es(t),Xc=t=>ct.fromDom(Rm(t).dom.documentElement),zi=t=>ct.fromDom(Rm(t).dom.defaultView),$r=t=>D.from(t.dom.parentNode).map(ct.fromDom),Lu=t=>$r(t),Jc=t=>D.from(t.dom.parentElement).map(ct.fromDom),kd=(t,s)=>{const a=Ae(s)?s:fo;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=ct.fromDom(g);if(d.push(h),a(h)===!0)break;i=g}return d},Dm=t=>D.from(t.dom.offsetParent).map(ct.fromDom),Mm=t=>D.from(t.dom.nextSibling).map(ct.fromDom),mr=t=>Ge(t.dom.childNodes,ct.fromDom),Vi=(t,s)=>{const a=t.dom.childNodes;return D.from(a[s]).map(ct.fromDom)},Yl=t=>Vi(t,0),Fu=(t,s)=>({element:t,offset:s}),Nm=(t,s)=>{const a=mr(t);return a.length>0&&s<a.length?Fu(a[s],0):Fu(t,s)},Qc=t=>ec(t)&&cn(t.dom.host),Ys=t=>ct.fromDom(t.dom.getRootNode()),fr=t=>Qc(t)?t:ct.fromDom(Rm(t).dom.body),hc=t=>Hu(t).isSome(),Hu=t=>{const s=Ys(t);return Qc(s)?D.some(s):D.none()},Ad=t=>ct.fromDom(t.dom.host),ia=t=>{if(cn(t.target)){const s=ct.fromDom(t.target);if(Rs(s)&&K(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Pr(a)}}return D.from(t.target)},K=t=>cn(t.dom.shadowRoot),ce=t=>{const s=dr(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Hu(ct.fromDom(s)).fold(()=>a.body.contains(s),kn(ce,Ad))},be=()=>Ve(ct.fromDom(document)),Ve=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return ct.fromDom(s)},lt=(t,s,a)=>{if(se(a)||en(a)||On(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},je=(t,s,a)=>{lt(t.dom,s,a)},Vt=(t,s)=>{const a=t.dom;As(s,(i,d)=>{lt(a,d,i)})},$n=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},En=(t,s)=>D.from($n(t,s)),Zs=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},zn=(t,s)=>{t.dom.removeAttribute(s)},Xl=t=>Vo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),la=(t,s,a)=>{if(!se(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Zr(t)&&t.style.setProperty(s,a)},Ui=(t,s)=>{Zr(t)&&t.style.removeProperty(s)},vn=(t,s,a)=>{const i=t.dom;la(i,s,a)},jr=(t,s)=>{const a=t.dom;As(s,(i,d)=>{la(a,d,i)})},Pm=(t,s)=>{const a=t.dom;As(s,(i,d)=>{i.fold(()=>{Ui(a,d)},g=>{la(a,d,g)})})},Qe=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!ce(t)?Sl(a,s):d},Sl=(t,s)=>Zr(t)?t.style.getPropertyValue(s):"",$s=(t,s)=>{const a=t.dom,i=Sl(a,s);return D.from(i).filter(d=>d.length>0)},Bm=t=>{const s={},a=t.dom;if(Zr(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},Is=(t,s,a)=>{const i=ct.fromTag(t);return vn(i,s,a),$s(i,s).isSome()},Zn=(t,s)=>{const a=t.dom;Ui(a,s),Wr(En(t,"style").map(vi),"")&&zn(t,"style")},tc=t=>t.dom.offsetWidth,Ir=(t,s)=>{const a=(w,x)=>{if(!On(x)&&!x.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+x);const A=w.dom;Zr(A)&&(A.style[t]=x+"px")},i=w=>{const x=s(w);if(x<=0||x===null){const A=Qe(w,t);return parseFloat(A)||0}return x},d=i,g=(w,x)=>Vo(x,(A,M)=>{const L=Qe(w,M),W=L===void 0?0:parseInt(L,10);return isNaN(W)?A:A+W},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(w,x,A)=>{const M=g(w,A);return x>M?x-M:0}}},Od=Ir("height",t=>{const s=t.dom;return ce(t)?s.getBoundingClientRect().height:s.offsetHeight}),sr=t=>Od.get(t),zu=t=>Od.getOuter(t),Ph=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=Od.max(t,s,a);vn(t,"max-height",i+"px")},y1=(t,s)=>({left:t,top:s,translate:(i,d)=>y1(t+i,s+d)}),qo=y1,xl=t=>{const s=t.getBoundingClientRect();return qo(s.left,s.top)},gr=(t,s)=>t!==void 0?t:s!==void 0?s:0,qr=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return qo(a.offsetLeft,a.offsetTop);const g=gr(i==null?void 0:i.pageYOffset,d.scrollTop),h=gr(i==null?void 0:i.pageXOffset,d.scrollLeft),w=gr(d.clientTop,a.clientTop),x=gr(d.clientLeft,a.clientLeft);return La(t).translate(h-x,g-w)},La=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?qo(i.offsetLeft,i.offsetTop):ce(t)?xl(s):qo(0,0)},Jl=Ir("width",t=>t.dom.offsetWidth),Of=(t,s)=>Jl.set(t,s),Rn=t=>Jl.get(t),Wi=t=>Jl.getOuter(t),El=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=Jl.max(t,s,a);vn(t,"max-width",i+"px")},Tl=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},$m=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),w=h||i("(pointer:coarse)"),x=d||!g&&h&&i("(min-device-width:768px)"),A=g||h&&!x,M=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,L=!A&&!x&&!M;return{isiPad:ae(d),isiPhone:ae(g),isTablet:ae(x),isPhone:ae(A),isTouch:ae(w),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:ae(M),isDesktop:ae(L)}},es=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},_r=(t,s)=>{const a=es(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return _l(i(1),i(2))},Vu=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?_g():_r(t,a)},_g=()=>_l(0,0),_l=(t,s)=>({major:t,minor:s}),Fa={nu:_l,detect:Vu,unknown:_g},kr=(t,s)=>ks(s.brands,a=>{const i=a.brand.toLowerCase();return gn(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Fa.nu(parseInt(a.version,10),0)}))}),ua=(t,s)=>{const a=String(s).toLowerCase();return gn(t,i=>i.search(a))},Sa=(t,s)=>ua(t,s).map(a=>{const i=Fa.detect(a.versionRegexes,s);return{current:a.name,version:i}}),js=(t,s)=>ua(t,s).map(a=>{const i=Fa.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Uu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ts=t=>s=>hs(s,t),Rd=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>hs(t,"edge/")&&hs(t,"chrome")&&hs(t,"safari")&&hs(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Uu],search:t=>hs(t,"chrome")&&!hs(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>hs(t,"msie")||hs(t,"trident")},{name:"Opera",versionRegexes:[Uu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ts("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ts("firefox")},{name:"Safari",versionRegexes:[Uu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(hs(t,"safari")||hs(t,"mobile/"))&&hs(t,"applewebkit")}],Im=[{name:"Windows",search:ts("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>hs(t,"iphone")||hs(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ts("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ts("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ts("linux"),versionRegexes:[]},{name:"Solaris",search:ts("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ts("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ts("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],kl={browsers:ae(Rd),oses:ae(Im)},Dd="Edge",Md="Chromium",Wu="IE",Zu="Opera",Pc="Firefox",xa="Safari",Bh=()=>Zi({current:void 0,version:Fa.unknown()}),Zi=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(Dd),isChromium:i(Md),isIE:i(Wu),isOpera:i(Zu),isFirefox:i(Pc),isSafari:i(xa)}},Rf={unknown:Bh,nu:Zi},Nd="Windows",kg="iOS",Df="Android",Pd="Linux",Mf="macOS",Ag="Solaris",ju="FreeBSD",Og="ChromeOS",de=()=>qu({current:void 0,version:Fa.unknown()}),qu=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(Nd),isiOS:i(kg),isAndroid:i(Df),isMacOS:i(Mf),isLinux:i(Pd),isSolaris:i(Ag),isFreeBSD:i(ju),isChromeOS:i(Og)}},Ha={unknown:de,nu:qu},$h={detect:(t,s,a)=>{const i=kl.browsers(),d=kl.oses(),g=s.bind(x=>kr(i,x)).orThunk(()=>Sa(i,t)).fold(Rf.unknown,Rf.nu),h=js(d,t).fold(Ha.unknown,Ha.nu),w=$m(h,g,t,a);return{browser:g,os:h,deviceType:w}}},Ql=t=>window.matchMedia(t).matches;let oo=Tl(()=>$h.detect(window.navigator.userAgent,D.from(window.navigator.userAgentData),Ql));const Ts=()=>oo(),Gr=(t,s,a,i,d,g,h)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:h}),Al=t=>{const s=ct.fromDom(ia(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Io(i,a);return Gr(s,t.clientX,t.clientY,a,i,d,t)},Rg=(t,s)=>a=>{t(a)&&s(Al(a))},Gu=(t,s,a,i,d)=>{const g=Rg(a,i);return t.dom.addEventListener(s,g,d),{unbind:Nn(Pf,t,s,g,d)}},Ea=(t,s,a,i)=>Gu(t,s,a,i,!1),Nf=(t,s,a,i)=>Gu(t,s,a,i,!0),Pf=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},eu=(t,s)=>{$r(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},tu=(t,s)=>{Mm(t).fold(()=>{$r(t).each(d=>{Bc(d,s)})},i=>{eu(i,s)})},Lm=(t,s)=>{Yl(t).fold(()=>{Bc(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Bc=(t,s)=>{t.dom.appendChild(s.dom)},Fm=(t,s,a)=>{Vi(t,a).fold(()=>{Bc(t,s)},i=>{eu(i,s)})},Lr=(t,s)=>{pt(s,a=>{Bc(t,a)})},nu=t=>{t.dom.textContent="",pt(mr(t),s=>{yi(s)})},yi=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Ta=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return qo(a,i)},Ku=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},w1=t=>{const s=t===void 0?window:t;return Ts().browser.isFirefox()?D.none():D.from(s.visualViewport)},Bf=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),ji=t=>{const s=t===void 0?window:t,a=s.document,i=Ta(ct.fromDom(a));return w1(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return Bf(i.left,i.top,g,h)},d=>Bf(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},Bd=()=>ct.fromDom(document),Ih=(t,s)=>t.view(s).fold(ae([]),i=>{const d=t.owner(i),g=Ih(t,d);return[i].concat(g)}),$f=(t,s)=>{const a=s.owner(t),i=Ih(s,a);return D.some(i)};var Hh=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?D.none():D.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(ct.fromDom)},owner:t=>Es(t)});const qi=t=>{const s=Bd(),a=Ta(s);return $f(t,Hh).fold(Nn(qr,t),d=>{const g=La(t),h=gs(d,(w,x)=>{const A=La(x);return{left:w.left+A.left,top:w.top+A.top}},{left:0,top:0});return qo(h.left+g.left+a.left,h.top+g.top+a.top)})},Dg=(t,s,a)=>({point:t,width:s,height:a}),Ci=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),ws=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),Xs=t=>{const s=qr(t),a=Wi(t),i=zu(t);return ws(s.left,s.top,a,i)},pc=t=>{const s=qi(t),a=Wi(t),i=zu(t);return ws(s.left,s.top,a,i)},$d=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-a,w=g-i;return ws(a,i,h,w)},Id=(t,s)=>Vo(s,(a,i)=>$d(a,i),t),hr=()=>ji(window),Wt=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Mg=t=>{const s=Wt(D.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(D.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:w=>{a(),s.set(D.some(w))}}},wi=()=>Mg(t=>t.destroy()),bc=()=>Mg(t=>t.unbind()),go=()=>{const t=Mg(le);return{...t,on:a=>t.get().each(a)}};var Yu=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Hm=t=>{const s=g=>g(t),a=ae(t),i=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:Ut,isError:fo,map:g=>Tn.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>D.some(t)};return d},zm=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:fo,isError:Ut,map:s,mapError:i=>Tn.error(i(t)),bind:s,exists:fo,forall:Ut,getOr:bn,or:bn,getOrThunk:_s,orThunk:_s,getOrDie:pe(String(t)),each:le,toOptional:D.none};return a},Tn={value:Hm,error:zm,fromOption:(t,s)=>t.fold(()=>zm(s),Hm)};var Ls;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Ls||(Ls={}));const Ld=(t,s,a)=>t.stype===Ls.Error?s(t.serror):a(t.svalue),nc=t=>{const s=[],a=[];return pt(t,i=>{Ld(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},_a=(t,s)=>t.stype===Ls.Error?{stype:Ls.Error,serror:s(t.serror)}:t,vc=(t,s)=>t.stype===Ls.Value?{stype:Ls.Value,svalue:s(t.svalue)}:t,Ar=(t,s)=>t.stype===Ls.Value?s(t.svalue):t,za=(t,s)=>t.stype===Ls.Error?s(t.serror):t,$c=t=>({stype:Ls.Value,svalue:t}),Fd=t=>({stype:Ls.Error,serror:t}),qs={fromResult:t=>t.fold(Fd,$c),toResult:t=>Ld(t,Tn.error,Tn.value),svalue:$c,partition:nc,serror:Fd,bind:Ar,bindError:za,map:vc,mapError:_a,fold:Ld},Gi=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),Ki=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Ao=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},oc=(t,s)=>s,Vm=(t,s)=>Le(t)&&Le(s)?ns(t,s):s,Xu=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)Yn(d,g)&&(a[g]=t(a[g],d[g]))}return a},ns=Xu(Vm),ou=Xu(oc),Si=()=>({tag:"required",process:{}}),Vn=t=>({tag:"defaultedThunk",process:t}),Hd=t=>Vn(ae(t)),Lf=()=>({tag:"option",process:{}}),_=t=>({tag:"mergeWithThunk",process:t}),$=t=>_(ae(t)),j=(t,s)=>t.length>0?qs.svalue(ns(s,ou.apply(void 0,t))):qs.svalue(s),ue=t=>Io(qs.serror,hn)(t),sn={consolidateObj:(t,s)=>{const a=qs.partition(t);return a.errors.length>0?ue(a.errors):j(a.values,s)},consolidateArr:t=>{const s=qs.partition(t);return s.errors.length>0?ue(s.errors):qs.svalue(s.values)}},Dn=t=>Ee(t)&&Uo(t).length>100?" removed due to size":JSON.stringify(t,null,2),An=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:ae("... (only showing first ten failures)")}]):t;return Ge(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Zt=(t,s)=>qs.serror([{path:t,getErrorInfo:s}]),os=(t,s,a)=>Zt(t,()=>'Could not find valid *required* value for "'+s+'" in '+Dn(a)),Ds=(t,s)=>Zt(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Ic=(t,s,a)=>Zt(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Dn(s)),yc=(t,s)=>Zt(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Vh=(t,s)=>Zt(t,ae(s)),Um=t=>{const s=(i,d)=>qs.bindError(t(d),g=>Vh(i,g)),a=ae("val");return{extract:s,toString:a}},Ng=Um(qs.svalue),ka=(t,s,a,i)=>bt(s,a).fold(()=>os(t,a,s),i),Uh=(t,s,a,i)=>{const d=bt(t,s).getOrThunk(()=>a(t));return i(d)},Ty=(t,s,a)=>a(bt(t,s)),Wh=(t,s,a,i)=>{const d=bt(t,s).map(g=>g===!0?a(t):g);return i(d)},da=(t,s,a,i,d)=>{const g=w=>d.extract(s.concat([i]),w),h=w=>w.fold(()=>qs.svalue(D.none()),x=>{const A=d.extract(s.concat([i]),x);return qs.map(A,D.some)});switch(t.tag){case"required":return ka(s,a,i,g);case"defaultedThunk":return Uh(a,i,t.process,g);case"option":return Ty(a,i,h);case"defaultedOptionThunk":return Wh(a,i,t.process,h);case"mergeWithThunk":return Uh(a,i,ae({}),w=>{const x=ns(t.process(a),w);return g(x)})}},Zh=(t,s,a)=>{const i={},d=[];for(const g of a)Ao(g,(h,w,x,A)=>{const M=da(x,t,s,h,A);qs.fold(M,L=>{d.push(...L)},L=>{i[w]=L})},(h,w)=>{i[h]=w(s)});return d.length>0?qs.serror(d):qs.svalue(i)},rr=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),Ff=t=>Uo(vl(t,cn)),Aa=t=>{const s=mn(t),a=gs(t,(d,g)=>Ao(g,h=>ns(d,{[h]:!0}),ae(d)),{});return{extract:(d,g)=>{const h=en(g)?[]:Ff(g),w=ko(h,x=>!Ur(a,x));return w.length===0?s.extract(d,g):yc(d,w)},toString:s.toString}},mn=t=>({extract:(i,d)=>Zh(i,d,t),toString:()=>`obj{
`+Ge(t,d=>Ao(d,(g,h,w,x)=>g+" -> "+x.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),xi=t=>({extract:(i,d)=>{const g=Ge(d,(h,w)=>t.extract(i.concat(["["+w+"]"]),h));return sn.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),zd=(t,s)=>{const a=s!==void 0?s:bn;return{extract:(g,h)=>{const w=[];for(const x of t){const A=x.extract(g,h);if(A.stype===Ls.Value)return{stype:Ls.Value,svalue:a(A.svalue)};w.push(A)}return sn.consolidateArr(w)},toString:()=>"oneOf("+Ge(t,g=>g.toString()).join(", ")+")"}},jh=(t,s)=>{const a=(g,h)=>xi(Um(t)).extract(g,h);return{extract:(g,h)=>{const w=Uo(h),x=a(g,w);return qs.bind(x,A=>{const M=Ge(A,L=>Gi(L,L,Si(),s));return mn(M).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},m0=(t,s)=>{const a=Tl(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},qh=Io(xi,mn),Yi=ae(Ng),su=(t,s)=>Um(a=>{const i=typeof a;return t(a)?qs.svalue(a):qs.serror(`Expected type: ${s} but got: ${i}`)}),Vd=su(On,"number"),_t=su(se,"string"),Ei=su(en,"boolean"),S1=su(Ae,"function"),Wm=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Wm(t[s]));default:return!1}},Xi=Um(t=>Wm(t)?qs.svalue(t):qs.serror("Expected value to be acceptable for sending via postMessage")),Pg=(t,s,a,i)=>bt(a,i).fold(()=>Ic(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),Ud=(t,s)=>({extract:(d,g)=>bt(g,t).fold(()=>Ds(d,t),w=>Pg(d,g,s,w)),toString:()=>"chooseOn("+t+"). Possible values: "+Uo(s)}),Zm=()=>xi(Ng),Bg=t=>Um(s=>t(s).fold(qs.serror,qs.svalue)),Ol=(t,s)=>jh(a=>qs.fromResult(t(a)),s),f0=(t,s,a)=>{const i=s.extract([t],a);return qs.mapError(i,d=>({input:a,errors:d}))},Ss=(t,s,a)=>qs.toResult(f0(t,s,a)),rt=t=>t.fold(s=>{throw new Error(Rl(s))},bn),sc=(t,s,a)=>rt(Ss(t,s,a)),Rl=t=>`Errors: 
`+An(t.errors).join(`
`)+`

Input object: `+Dn(t.input),Or=(t,s)=>Ud(t,To(s,mn)),Hf=(t,s)=>m0(t,s),Rr=Gi,co=Ki,Gh=t=>Bg(s=>zo(t,s)?Tn.value(s):Tn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Ze=t=>Rr(t,t,Si(),Yi()),io=(t,s)=>Rr(t,t,Si(),s),x1=t=>io(t,Vd),Gs=t=>io(t,_t),Ji=(t,s)=>Rr(t,t,Si(),Gh(s)),Kr=t=>io(t,S1),_y=(t,s)=>Rr(t,t,Lf(),Um(a=>qs.serror("The field: "+t+" is forbidden. "+s))),ru=(t,s)=>Rr(t,t,Si(),mn(s)),g0=(t,s)=>Rr(t,t,Si(),qh(s)),Cc=(t,s)=>Rr(t,t,Si(),xi(s)),lo=t=>Rr(t,t,Lf(),Yi()),au=(t,s)=>Rr(t,t,Lf(),s),$g=t=>au(t,Vd),Ms=t=>au(t,_t),Kh=(t,s)=>au(t,Gh(s)),Ju=t=>au(t,S1),E1=(t,s)=>au(t,xi(s)),Oa=(t,s)=>au(t,mn(s)),ei=(t,s)=>au(t,Aa(s)),Se=(t,s)=>Rr(t,t,Hd(s),Yi()),ti=(t,s,a)=>Rr(t,t,Hd(s),a),Dr=(t,s)=>ti(t,s,Vd),ss=(t,s)=>ti(t,s,_t),Qi=(t,s,a)=>ti(t,s,Gh(a)),Fs=(t,s)=>ti(t,s,Ei),Po=(t,s)=>ti(t,s,S1),E=(t,s)=>ti(t,s,Xi),R=(t,s,a)=>ti(t,s,xi(a)),V=(t,s,a)=>ti(t,s,mn(a)),he={generate:t=>{if(!Fe(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return pt(t,(i,d)=>{const g=Uo(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],w=i[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Fe(w))throw new Error("case arguments must be an array");s.push(h),a[h]=(...x)=>{const A=x.length;if(A!==w.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+w.length+" ("+w+"), got "+A);return{fold:(...L)=>{if(L.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+L.length);return L[d].apply(null,x)},match:L=>{const W=Uo(L);if(s.length!==W.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+W.join(","));if(!Ja(s,ne=>zo(W,ne)))throw new Error("Not all branches were specified when using match. Specified: "+W.join(", ")+`
Required: `+s.join(", "));return L[h].apply(null,x)},log:L=>{console.log(L,{constructors:s,constructor:h,params:x})}}}}),a}};he.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ue=t=>{const s=[],a=[];return pt(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},gt=(t,s)=>{const a={};return As(t,(i,d)=>{zo(s,d)||(a[d]=i)}),a},Ht=(t,s)=>({[t]:s}),wn=t=>{const s={};return pt(t,a=>{s[a.key]=a.value}),s},Bn=(t,s)=>gt(t,s),wo=(t,s)=>Ht(t,s),So=t=>wn(t),bs=(t,s)=>t.length===0?Tn.value(s):Tn.value(ns(s,ou.apply(void 0,t))),wc=t=>Tn.error(hn(t)),Ti=(t,s)=>{const a=Ue(t);return a.errors.length>0?wc(a.errors):bs(a.values,s)},Qu=t=>Ae(t)?t:fo,Lc=(t,s,a)=>{let i=t.dom;const d=Qu(a);for(;i.parentNode;){i=i.parentNode;const g=ct.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return D.none()},Wd=(t,s,a)=>{const i=s(t),d=Qu(a);return i.orThunk(()=>d(t)?D.none():Lc(t,s,d))},jm=(t,s)=>Xn(t.element,s.event.target),qm={can:Ut,abort:fo,run:le},rc=t=>{if(!Ur(t,"can")&&!Ur(t,"abort")&&!Ur(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...qm,...t}},Yh=(t,s)=>(...a)=>Vo(t,(i,d)=>i&&s(d).apply(void 0,a),!0),Gm=(t,s)=>(...a)=>Vo(t,(i,d)=>i||s(d).apply(void 0,a),!1),Xh=t=>Ae(t)?{can:Ut,abort:fo,run:t}:t,h0=t=>{const s=Yh(t,d=>d.can),a=Gm(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{pt(t,g=>{g.run.apply(void 0,d)})}}},Fr=ae,jn=Fr("touchstart"),ls=Fr("touchmove"),pr=Fr("touchend"),_i=Fr("touchcancel"),Fc=Fr("mousedown"),Jh=Fr("mousemove"),Zd=Fr("mouseout"),jd=Fr("mouseup"),cu=Fr("mouseover"),iu=Fr("focusin"),mS=Fr("focusout"),Va=Fr("keydown"),p0=Fr("keyup"),qd=Fr("input"),Km=Fr("change"),Gd=Fr("click"),E4=Fr("transitioncancel"),Qh=Fr("transitionend"),T4=Fr("transitionstart"),zf=Fr("selectstart"),Js=t=>ae("alloy."+t),fS={tap:Js("tap")},Kd=Js("focus"),Ym=Js("blur.post"),Ig=Js("paste.post"),lu=Js("receive"),ac=Js("execute"),Lg=Js("focus.item"),T1=fS.tap,$M=Js("longpress"),Yd=Js("sandbox.close"),Ra=Js("typeahead.cancel"),_1=Js("system.init"),_4=Js("system.touchmove"),k4=Js("system.touchend"),ky=Js("system.scroll"),ep=Js("system.resize"),uu=Js("system.attached"),du=Js("system.detached"),Vf=Js("system.dismissRequested"),Fg=Js("system.repositionRequested"),k1=Js("focusmanager.shifted"),tp=Js("slotcontainer.visibility"),Xm=Js("system.external.element.scroll"),Uf=Js("change.tab"),A1=Js("dismiss.tab"),b0=Js("highlight"),v0=Js("dehighlight"),Un=(t,s)=>{C0(t,t.element,s,{})},Kt=(t,s,a)=>{C0(t,t.element,s,a)},Hc=t=>{Un(t,ac())},y0=(t,s,a)=>{C0(t,s,a,{})},C0=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},w0=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},Ay=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},rs=t=>So(t),Jm=(t,s)=>({key:t,value:rc({abort:s})}),A4=(t,s)=>({key:t,value:rc({can:s})}),gS=t=>({key:t,value:rc({run:(s,a)=>{a.event.prevent()}})}),ze=(t,s)=>({key:t,value:rc({run:s})}),Oy=(t,s,a)=>({key:t,value:rc({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),Ry=t=>s=>ze(t,s),np=t=>s=>({key:t,value:rc({run:(a,i)=>{jm(a,i)&&s(a,i)}})}),O4=(t,s)=>ze(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{Ay(d,d.element,t,i)})}),Hg=(t,s,a)=>{const i=s.partUids[a];return O4(t,i)},O1=(t,s)=>ze(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Wd(d.target,w=>a.getSystem().getByDom(w).toOptional(),fo).getOr(a));s(a,g,i)}),Wf=t=>ze(t,(s,a)=>{a.cut()}),S0=t=>ze(t,(s,a)=>{a.stop()}),Xd=(t,s)=>np(t)(s),Bo=np(uu()),ed=np(du()),hS=np(_1()),Qm=Ry(ac()),R4=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:x0(h.slice(0,1).concat(h.slice(3)))}),t},x0=t=>Ge(t,s=>fc(s,"/*")?s.substring(0,s.length-2):s),R1=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:x0(g)}),t},D4=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:x0(g.slice(1))}),t},mu=t=>({classes:Mn(t.classes)?[]:t.classes,attributes:Mn(t.attributes)?{}:t.attributes,styles:Mn(t.styles)?{}:t.styles}),E0=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),op=(t,s,a)=>Qm(i=>{a(i,t,s)}),Dy=(t,s,a)=>hS((i,d)=>{a(i,t,s)}),zg=(t,s,a,i,d,g)=>{const h=Aa(t),w=Oa(s,[ei("config",t)]);return Ny(h,w,s,a,i,d,g)},T0=(t,s,a,i,d,g)=>{const h=t,w=Oa(s,[au("config",t)]);return Ny(h,w,s,a,i,d,g)},ef=(t,s,a)=>R4((d,...g)=>{const h=[d].concat(g);return d.config({name:ae(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},w=>{const x=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,w.config,w.state].concat(x))})},a,s),My=t=>({key:t,value:void 0}),Ny=(t,s,a,i,d,g,h)=>{const w=L=>Ur(L,a)?L[a]():D.none(),x=To(d,(L,W)=>ef(a,L,W)),M={...To(g,(L,W)=>R1(L,W)),...x,revoke:Nn(My,a),config:L=>{const W=sc(a+"-config",t,L);return{key:a,value:{config:W,me:M,configAsRaw:Tl(()=>sc(a+"-config",t,L)),initialConfig:L,state:h}}},schema:ae(s),exhibit:(L,W)=>mc(w(L),bt(i,"exhibit"),(Y,ne)=>ne(W,Y.config,Y.state)).getOrThunk(()=>mu({})),name:ae(a),handlers:L=>w(L).map(W=>bt(i,"events").getOr(()=>({}))(W.config,W.state)).getOr({})};return M},Dl={init:()=>el({readState:ae("No State required")})},el=t=>t,at=t=>So(t),pS=Aa([Ze("fields"),Ze("name"),Se("active",{}),Se("apis",{}),Se("state",Dl),Se("extra",{})]),ar=t=>{const s=sc("Creating behaviour: "+t.name,pS,t);return zg(s.fields,s.name,s.active,s.apis,s.extra,s.state)},bS=Aa([Ze("branchKey"),Ze("branches"),Ze("name"),Se("active",{}),Se("apis",{}),Se("state",Dl),Se("extra",{})]),vS=t=>{const s=sc("Creating behaviour: "+t.name,bS,t);return T0(Or(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},D1=ae(void 0),Py=(t,s)=>{const a=$n(t,s);return a===void 0||a===""?[]:a.split(" ")},vs=(t,s,a)=>{const d=Py(t,s).concat([a]);return je(t,s,d.join(" ")),!0},By=(t,s,a)=>{const i=ko(Py(t,s),d=>d!==a);return i.length>0?je(t,s,i.join(" ")):zn(t,s),!1},sp=t=>t.dom.classList!==void 0,M1=t=>Py(t,"class"),N1=(t,s)=>vs(t,"class",s),$y=(t,s)=>By(t,"class",s),ki=(t,s)=>zo(M1(t),s)?$y(t,s):N1(t,s),Ks=(t,s)=>{sp(t)?t.dom.classList.add(s):N1(t,s)},yS=t=>{(sp(t)?t.dom.classList:M1(t)).length===0&&zn(t,"class")},Qs=(t,s)=>{sp(t)?t.dom.classList.remove(s):$y(t,s),yS(t)},P1=(t,s)=>{const a=sp(t)?t.dom.classList.toggle(s):ki(t,s);return yS(t),a},cc=(t,s)=>sp(t)&&t.dom.classList.contains(s),Zf=(t,s)=>{pt(s,a=>{Ks(t,a)})},Ml=(t,s)=>{pt(s,a=>{Qs(t,a)})},tf=(t,s)=>{pt(s,a=>{P1(t,a)})},IM=(t,s)=>Ja(s,a=>cc(t,a)),LM=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},M4=t=>sp(t)?LM(t):M1(t),td=(t,s,a,i,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},FM=t=>({...t,position:D.some(t.position)}),ni=(t,s)=>{Pm(t,FM(s))},Ua=t=>(Wr($s(t,"position"),"fixed")?D.none():Dm(t)).orThunk(()=>{const i=ct.fromTag("span");return $r(t).bind(d=>{Bc(d,i);const g=Dm(i);return yi(i),g})}),rp=t=>Ua(t).map(qr).getOrThunk(()=>qo(0,0)),_0=(t,s)=>{const a=t.element;Ks(a,s.transitionClass),Qs(a,s.fadeOutClass),Ks(a,s.fadeInClass),s.onShow(t)},N4=(t,s)=>{const a=t.element;Ks(a,s.transitionClass),Qs(a,s.fadeInClass),Ks(a,s.fadeOutClass),s.onHide(t)},B1=(t,s)=>t.y<s.bottom&&t.bottom>s.y,jf=(t,s)=>t.y>=s.y,Vg=(t,s)=>t.bottom<=s.bottom,Jd=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),qf=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),Gf=t=>t.box.x-t.win.x,$1=(t,s,a)=>{const i=s.win,d=s.box,g=Gf(s);return ks(t,h=>{switch(h){case"bottom":return Vg(d,a.bounds)?D.none():D.some(qf(i,g,a));case"top":return jf(d,a.bounds)?D.none():D.some(Jd(i,g,a));default:return D.none()}}).getOr({location:"no-dock"})},CS=(t,s,a)=>Ja(t,i=>{switch(i){case"bottom":return Vg(s,a.bounds);case"top":return jf(s,a.bounds)}}),wS=(t,s)=>{const a=s.optScrollEnv.fold(ae(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return qo(t.bounds.x,a)},k0=(t,s)=>{const a=s.optScrollEnv.fold(ae(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return qo(t.x,a)},Ug=(t,s,a)=>a.getInitialPos().map(i=>{const d=wS(i,s);return{box:ws(d.left,d.top,Rn(t),sr(t)),location:i.location}}),ap=(t,s,a,i,d)=>{const g=k0(s,a),h=ws(g.left,g.top,s.width,s.height);i.setInitialPos({style:Bm(t),position:Qe(t,"position")||"static",bounds:h,location:d.location})},A0=(t,s,a,i,d)=>{i.getInitialPos().fold(()=>ap(t,s,a,i,d),()=>le)},SS=(t,s,a)=>a.getInitialPos().bind(i=>{var d;switch(a.clearInitialPos(),i.position){case"static":return D.some({morph:"static"});case"absolute":const g=Ua(t).getOr(be()),h=Xs(g),w=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return D.some({morph:"absolute",positionCss:td("absolute",bt(i.style,"left").map(x=>s.x-h.x),bt(i.style,"top").map(x=>s.y-h.y+w),bt(i.style,"right").map(x=>h.right-s.right),bt(i.style,"bottom").map(x=>h.bottom-s.bottom))});default:return D.none()}}),xS=(t,s,a)=>Ug(t,s,a).filter(({box:i})=>CS(a.getModes(),i,s)).bind(({box:i})=>SS(t,i,a)),I1=t=>{switch(t.location){case"top":return D.some({morph:"fixed",positionCss:td("fixed",D.some(t.leftX),D.some(t.topY),D.none(),D.none())});case"bottom":return D.some({morph:"fixed",positionCss:td("fixed",D.some(t.leftX),D.none(),D.none(),D.some(t.bottomY))});default:return D.none()}},ES=(t,s,a)=>{const i=Xs(t),d=hr(),g=$1(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(ap(t,i,s,a,g),I1(g)):D.none()},TS=(t,s,a)=>xS(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>Ug(t,s,a)).bind(({box:i,location:d})=>{const g=hr(),h=Gf({win:g,box:i}),w=d==="top"?Jd(g,h,s):qf(g,h,s);return I1(w)})),Wg=(t,s,a)=>{const i=t.element;return Wr($s(i,"position"),"fixed")?TS(i,s,a):ES(i,s,a)},Iy=(t,s,a)=>{const i=t.element;return Ug(i,s,a).bind(({box:d})=>SS(i,d,a))},_S=(t,s,a,i)=>{const d=Xs(t),g=hr(),h=Gf({win:g,box:d}),w=i(g,h,s);return w.location==="bottom"||w.location==="top"?(A0(t,d,s,a,w),I1(w)):D.none()},O0=(t,s,a)=>{a.setDocked(!1),pt(["left","right","top","bottom","position"],i=>Zn(t.element,i)),s.onUndocked(t)},Qd=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),ni(t.element,i),(d?s.onDocked:s.onUndocked)(t)},kS=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const w=B1(h,i.bounds);w!==a.isVisible()&&(a.setVisible(w),d&&!w?(Zf(t.element,[g.fadeOutClass]),g.onHide(t)):(w?_0:N4)(t,g))})})},P4=(t,s,a,i,d)=>{kS(t,s,a,i,!0),Qd(t,s,a,d.positionCss)},L1=(t,s,a,i,d)=>{switch(d.morph){case"static":return O0(t,s,a);case"absolute":return Qd(t,s,a,d.positionCss);case"fixed":return P4(t,s,a,i,d)}},cp=(t,s,a)=>{const i=s.lazyViewport(t);kS(t,s,a,i),Wg(t,i,a).each(d=>{L1(t,s,a,i,d)})},Kf=(t,s,a)=>{const i=t.element;a.setDocked(!1);const d=s.lazyViewport(t);Iy(t,d,a).each(g=>{switch(g.morph){case"static":{O0(t,s,a);break}case"absolute":{Qd(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{Ml(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),Ly(t,s,a)},Ly=(t,s,a)=>{t.getSystem().isConnected()&&cp(t,s,a)},R0=(t,s,a)=>{a.isDocked()&&Kf(t,s,a)},ip=t=>(s,a,i)=>{const d=a.lazyViewport(s);_S(s.element,d,i,t).each(h=>{P4(s,a,i,d,h)})},B4=ip(Jd),AS=ip(qf);var F1=Object.freeze({__proto__:null,refresh:Ly,reset:R0,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:B4,forceDockToBottom:AS}),D0=Object.freeze({__proto__:null,events:(t,s)=>rs([Xd(Qh(),(a,i)=>{t.contextual.each(d=>{cc(a.element,d.transitionClass)&&(Ml(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),ze(ky(),(a,i)=>{Ly(a,t,s)}),ze(Xm(),(a,i)=>{Ly(a,t,s)}),ze(ep(),(a,i)=>{R0(a,t,s)})])});const Yf=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,mr(ct.fromDom(i))},H1=t=>t.dom.innerHTML,Ns=(t,s)=>{const i=Es(t).dom,d=ct.fromDom(i.createDocumentFragment()),g=Yf(s,i);Lr(d,g),nu(t),Bc(t,d)},OS=t=>{const s=ct.fromTag("div"),a=ct.fromDom(t.dom.cloneNode(!0));return Bc(s,a),H1(s)},lp=(t,s)=>ct.fromDom(t.dom.cloneNode(s)),up=t=>lp(t,!1),I4=t=>lp(t,!0),oi=t=>{if(Qc(t))return"#shadow-root";{const s=up(t);return OS(s)}},si=t=>oi(t),RS="unknown";var Zg;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Zg||(Zg={}));const Xf=Wt({}),Jf=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();zo(["mousemove","mouseover","mouseout",_1()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Ge(a,g=>zo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+si(g.target)+")":g.outcome)})}}},L4=(t,s,a)=>{switch(bt(Xf.get(),t).orThunk(()=>{const d=Uo(Xf.get());return ks(d,g=>t.indexOf(g)>-1?D.some(Xf.get()[g]):D.none())}).getOr(Zg.NORMAL)){case Zg.NORMAL:return a(DS());case Zg.LOGGING:{const d=Jf(t,s),g=a(d);return d.write(),g}case Zg.STOP:return!0}},Yr=["alloy/data/Fields","alloy/debugging/Debugging"],M0=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return gn(s,a=>a.indexOf("alloy")>0&&!wr(Yr,i=>a.indexOf(i)>-1)).getOr(RS)}else return RS},tl={logEventCut:le,logEventStopped:le,logNoParent:le,logEventNoHandlers:le,logEventResponse:le,write:le},Fy=(t,s,a)=>L4(t,s,a),DS=ae(tl),Qf=ae([Ze("menu"),Ze("selectedMenu")]),jg=ae([Ze("item"),Ze("selectedItem")]);ae(mn(jg().concat(Qf())));const nd=ae(mn(jg())),Nl=ru("initSize",[Ze("numColumns"),Ze("numRows")]),Hy=()=>io("markers",nd()),z1=()=>ru("markers",[Ze("backgroundMenu")].concat(Qf()).concat(jg())),od=t=>ru("markers",Ge(t,Ze)),dp=(t,s,a)=>(M0(),Rr(s,s,a,Bg(i=>Tn.value((...d)=>i.apply(void 0,d))))),so=t=>dp("onHandler",t,Hd(le)),Sc=t=>dp("onKeyboardHandler",t,Hd(D.none)),nl=t=>dp("onHandler",t,Si()),zy=t=>dp("onKeyboardHandler",t,Si()),us=(t,s)=>co(t,ae(s)),Vy=t=>co(t,bn),eg=ae(Nl);var qg=[Oa("contextual",[Gs("fadeInClass"),Gs("fadeOutClass"),Gs("transitionClass"),Kr("lazyContext"),so("onShow"),so("onShown"),so("onHide"),so("onHidden")]),Po("lazyViewport",()=>({bounds:hr(),optScrollEnv:D.none()})),R("modes",["top","bottom"],_t),so("onDocked"),so("onUndocked")],NS=Object.freeze({__proto__:null,init:t=>{const s=Wt(!1),a=Wt(!0),i=go(),d=Wt(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return el({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const ys=ar({fields:qg,name:"docking",active:D0,apis:F1,state:NS}),mp=(t,s,a)=>Xn(s,t.element)&&!Xn(s,a),V1=rs([A4(Kd(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return mp(t,i,d)?(console.warn(Kd()+` did not get interpreted by the desired target. 
Originator: `+si(i)+`
Target: `+si(d)+`
Check the `+Kd()+" event handlers"),!1):!0})]);var PS=Object.freeze({__proto__:null,events:V1});const fp=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},Pl=(t,s,a)=>Math.min(Math.max(t,s),a),F4=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let U1=0;const Mt=t=>{const a=new Date().getTime(),i=Math.floor(F4()*1e9);return U1++,t+"_"+i+U1+String(a)},H4=ae("alloy-id-"),z4=ae("data-alloy-id"),Uy=H4(),BS=z4(),V4=(t,s)=>{const a=Mt(Uy+t);return W1(s,a),a},W1=(t,s)=>{Object.defineProperty(t.dom,BS,{value:s,writable:!0})},Gg=t=>{const s=Rs(t)?t.dom[BS]:null;return D.from(s)},Kg=t=>Mt(t),U4=bn,Z1=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+si(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:ae("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:fo}},$S=Z1(),j1=Mt("alloy-premade"),W4=t=>(Object.defineProperty(t.element.dom,j1,{value:t.uid,writable:!0}),wo(j1,t)),zc=t=>Yn(t.dom,j1),Z4=t=>bt(t,j1),sd=t=>D4((s,...a)=>t(s.getApis(),s,...a),t),j4=(t,s)=>{const a=Ge(s,d=>Oa(d.name(),[Ze("config"),Se("state",Dl)])),i=Ss("component.behaviours",mn(a),t.behaviours).fold(d=>{throw new Error(Rl(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},bn);return{list:s,data:To(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return ae(g)})}},q4=t=>t.list,G4=t=>t.data,Wy=(t,s)=>{const a={};return As(t,(i,d)=>{As(i,(g,h)=>{const w=bt(a,h).getOr([]);a[h]=w.concat([s(d,g)])})}),a},IS=(t,s,a,i)=>{const d={...s};pt(a,M=>{d[M.name()]=M.exhibit(t,i)});const g=Wy(d,(M,L)=>({name:M,modification:L})),h=M=>gs(M,(L,W)=>({...W.modification,...L}),{}),w=gs(g.classes,(M,L)=>L.modification.concat(M),[]),x=h(g.attributes),A=h(g.styles);return mu({classes:w,attributes:x,styles:A})},K4=(t,s,a,i)=>{try{const d=bl(a,(g,h)=>{const w=g[s],x=h[s],A=i.indexOf(w),M=i.indexOf(x);if(A===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(i,null,2));if(M===-1)throw new Error("The ordering for "+t+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(i,null,2));return A<M?-1:M<A?1:0});return Tn.value(d)}catch(d){return Tn.error([d])}},LS=(t,s)=>({handler:t,purpose:s}),Y4=(t,s)=>({cHandler:t,purpose:s}),Yg=(t,s)=>Y4(Nn.apply(void 0,[t.handler].concat(s)),t.purpose),N0=t=>t.cHandler,gp=(t,s)=>({name:t,handler:s}),Zy=(t,s)=>{const a={};return pt(t,i=>{a[i.name()]=i.handlers(s)}),a},FS=(t,s,a)=>{const i={...a,...Zy(s,t)};return Wy(i,gp)},nf=(t,s,a,i)=>{const d=FS(t,a,i);return qy(d,s)},P0=t=>{const s=Xh(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},B0=(t,s)=>Tn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ge(s,a=>a.name),null,2)]),jy=(t,s,a)=>{const i=s[a];return i?K4("Event: "+a,"name",t,i).map(d=>{const g=Ge(d,h=>h.handler);return h0(g)}):B0(a,t)},qy=(t,s)=>{const a=ql(t,(i,d)=>(i.length===1?Tn.value(i[0].handler):jy(i,s,d)).map(h=>{const w=P0(h),x=i.length>1?ko(s[d],A=>wr(i,M=>M.name===A)).join(" > "):i[0].name;return wo(d,LS(w,x))}));return Ti(a,{})},Xg="alloy.base.behaviour",X4=mn([Rr("dom","dom",Si(),mn([Ze("tag"),Se("styles",{}),Se("classes",[]),Se("attributes",{}),lo("value"),lo("innerHtml")])),Ze("components"),Ze("uid"),Se("events",{}),Se("apis",{}),Rr("eventOrder","eventOrder",$({[ac()]:["disabling",Xg,"toggling","typeaheadevents"],[Kd()]:[Xg,"focusing","keying"],[_1()]:[Xg,"disabling","toggling","representing","tooltipping"],[qd()]:[Xg,"representing","streaming","invalidating"],[du()]:[Xg,"representing","item-events","toolbar-button-events","tooltipping"],[Fc()]:["focusing",Xg,"item-type-events"],[jn()]:["focusing",Xg,"item-type-events"],[cu()]:["item-type-events","tooltipping"],[lu()]:["receiving","reflecting","tooltipping"]}),Yi()),lo("domModification")]),Gy=t=>Ss("custom.definition",X4,t),Jg=t=>({...t.dom,uid:t.uid,domChildren:Ge(t.components,s=>s.element)}),Da=t=>t.domModification.fold(()=>mu({}),mu),J4=t=>t.events,Ie=t=>t.dom.value,em=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Q4=(t,s,a)=>Vi(t,s).map(d=>{if(a.exists(h=>!Xn(h,d))){const h=a.map(Bs).getOr("span"),w=ct.fromTag(h);return eu(d,w),w}else return d}),$0=(t,s,a)=>{a.fold(()=>Bc(t,s),i=>{Xn(i,s)||(eu(i,s),yi(i))})},hp=(t,s,a)=>{const i=Ge(s,a),d=mr(t);return pt(d.slice(i.length),yi),i},fu=(t,s,a,i)=>{const d=Vi(t,s),g=i(a,d),h=Q4(t,s,d);return $0(t,g.element,h),g},HS=(t,s,a)=>hp(t,s,(i,d)=>fu(t,d,i,a)),zS=(t,s)=>hp(t,s,(a,i)=>{const d=Vi(t,i);return $0(t,a,d),a}),I0=(t,s)=>{const a=Uo(t),i=Uo(s),d=Qt(i,a),g=Br(t,(h,w)=>!Yn(s,w)||h!==s[w]).t;return{toRemove:d,toSet:g}},L0=(t,s)=>{const{class:a,style:i,...d}=Xl(s),{toSet:g,toRemove:h}=I0(t.attributes,d),w=()=>{pt(h,ve=>zn(s,ve)),Vt(s,g)},x=Bm(s),{toSet:A,toRemove:M}=I0(t.styles,x),L=()=>{pt(M,ve=>Zn(s,ve)),jr(s,A)},W=M4(s),Y=Qt(W,t.classes),ne=Qt(t.classes,W),oe=()=>{Zf(s,ne),Ml(s,Y)},ye=ve=>{Ns(s,ve)},ie=()=>{const ve=t.domChildren;zS(s,ve)},we=()=>{const ve=s,Re=t.value.getOrUndefined();Re!==Ie(ve)&&em(ve,Re??"")};return w(),oe(),L(),t.innerHtml.fold(ie,ye),we(),s},F0=t=>{const s=ct.fromTag(t.tag);Vt(s,t.attributes),Zf(s,t.classes),jr(s,t.styles),t.innerHtml.each(i=>Ns(s,i));const a=t.domChildren;return Lr(s,a),t.value.each(i=>{em(s,i)}),s},VS=(t,s)=>{try{const a=L0(t,s);return D.some(a)}catch{return D.none()}},ek=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Vc=(t,s)=>{const a=d=>Bs(d)===t.tag&&!ek(t)&&!zc(d),i=s.filter(a).bind(d=>VS(t,d)).getOrThunk(()=>F0(t));return W1(i,t.uid),i},H0=t=>{const s=bt(t,"behaviours").getOr({});return Te(Uo(s),a=>{const i=s[a];return cn(i)?[i.me]:[]})},US=(t,s)=>j4(t,s),tk=t=>{const s=H0(t);return US(t,s)},nk=(t,s,a)=>{const i=Jg(t),d=Da(t),g={"alloy.base.modification":d},h=s.length>0?IS(a,g,s,i):d;return E0(i,h)},WS=(t,s,a)=>{const i={"alloy.base.behaviour":J4(t)};return nf(a,t.eventOrder,s,i).getOrDie()},z0=(t,s)=>{const a=()=>ve,i=Wt($S),d=rt(Gy(t)),g=tk(t),h=q4(g),w=G4(g),x=nk(d,h,w),A=Vc(x,s),M=WS(d,h,w),L=Wt(d.components),W=Re=>{i.set(Re)},Y=()=>{i.set(Z1(a))},ne=()=>{const Re=mr(A),Ne=Te(Re,xt=>i.get().getByDom(xt).fold(()=>[],cs));L.set(Ne)},oe=Re=>{const Ne=w;return(Ae(Ne[Re.name()])?Ne[Re.name()]:()=>{throw new Error("Could not find "+Re.name()+" in "+JSON.stringify(t,null,2))})()},ye=Re=>Ae(w[Re.name()]),ie=()=>d.apis,we=Re=>w[Re]().map(Ne=>Ne.state.readState()).getOr("not enabled"),ve={uid:t.uid,getSystem:i.get,config:oe,hasConfigured:ye,spec:t,readState:we,getApis:ie,connect:W,disconnect:Y,element:A,syncComponents:ne,components:L.get,events:M};return ve},ok=(t,s)=>{const a=bt(t,"components").getOr([]);return s.fold(()=>Ge(a,ic),i=>Ge(a,(d,g)=>V0(d,Vi(i,g))))},ZS=(t,s)=>{const{events:a,...i}=U4(t),d=ok(i,s),g={...i,events:{...PS,...a},components:d};return Tn.value(z0(g,s))},xs=t=>{const s=ct.fromText(t);return pp({element:s})},pp=t=>{const s=sc("external.component",Aa([Ze("element"),lo("uid")]),t),a=Wt(Z1()),i=w=>{a.set(w)},d=()=>{a.set(Z1(()=>h))},g=s.uid.getOrThunk(()=>Kg("external"));W1(s.element,g);const h={uid:g,getSystem:a.get,config:D.none,hasConfigured:fo,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:ae("No state"),syncComponents:le,components:ae([]),events:{}};return W4(h)},jS=Kg,qS=t=>Yn(t,"uid"),V0=(t,s)=>Z4(t).getOrThunk(()=>{const a=qS(t)?t:{uid:jS(""),...t};return ZS(a,s).getOrDie()}),ic=t=>V0(t,D.none()),Ai=W4;var GS=(t,s,a,i,d)=>t(a,i)?D.some(a):Ae(d)&&d(a)?D.none():s(a,i,d);const KS=(t,s,a)=>{let i=t.dom;const d=Ae(a)?a:fo;for(;i.parentNode;){i=i.parentNode;const g=ct.fromDom(i);if(s(g))return D.some(g);if(d(g))break}return D.none()},Ky=(t,s,a)=>GS((d,g)=>g(d),KS,t,s,a),q1=(t,s)=>{const a=t.dom;return a.parentNode?YS(ct.fromDom(a.parentNode),i=>!Xn(t,i)&&s(i)):D.none()},YS=(t,s)=>{const a=d=>s(ct.fromDom(d));return gn(t.dom.childNodes,a).map(ct.fromDom)},Yy=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=ct.fromDom(i.childNodes[d]);if(s(g))return D.some(g);const h=a(i.childNodes[d]);if(h.isSome())return h}return D.none()};return a(t.dom)},Xy=(t,s,a)=>Ky(t,s,a).isSome(),XS=t=>_d(t),tm=(t,s,a)=>KS(t,i=>jo(i,s),a),ri=(t,s)=>q1(t,a=>jo(a,s)),JS=(t,s)=>YS(t,a=>jo(a,s)),ho=(t,s)=>_d(s,t),gu=(t,s,a)=>GS((d,g)=>jo(d,g),tm,t,s,a),bp="aria-controls",QS=t=>Ky(t,a=>{if(!Rs(a))return!1;const i=$n(a,"id");return i!==void 0&&i.indexOf(bp)>-1}).bind(a=>{const i=$n(a,"id"),d=Ys(a);return ho(d,`[${bp}="${i}"]`)}),Jy=()=>{const t=Mt(bp);return{id:t,link:i=>{je(i,bp,t)},unlink:i=>{zn(i,bp)}}},ex=(t,s)=>QS(s).exists(a=>tg(t,a)),tg=(t,s)=>Xy(s,a=>Xn(a,t.element),fo)||ex(t,s),ma=(t,s,a,i,d,g,h,w=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:w}),nm=he.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),vp=(t,s,a,i,d,g,h,w,x)=>t.fold(s,a,i,d,g,h,w,x),tx=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),sk=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),U0=nm.southeast,Qy=nm.southwest,e2=nm.northeast,t2=nm.northwest,nx=nm.south,ox=nm.north,sx=nm.east,rx=nm.west,rk=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Wa=(t,s)=>hi(["left","right","top","bottom"],a=>bt(s,a).map(i=>rk(t,i))),ak=(t,s,a)=>{const i=(x,A)=>s[x].map(M=>{const L=x==="top"||x==="bottom",W=L?a.top:a.left,ne=(x==="left"||x==="top"?Math.max:Math.min)(M,A)+W;return L?Pl(ne,t.y,t.bottom):Pl(ne,t.x,t.right)}).getOr(A),d=i("left",t.x),g=i("top",t.y),h=i("right",t.right),w=i("bottom",t.bottom);return ws(d,g,h-d,w-g)},of="layout",n2=t=>t.x,o2=(t,s)=>t.x+t.width/2-s.width/2,ax=(t,s)=>t.x+t.width-s.width,W0=(t,s)=>t.y-s.height,s2=t=>t.y+t.height,r2=(t,s)=>t.y+t.height/2-s.height/2,ck=t=>t.x+t.width,ik=(t,s)=>t.x-s.width,br=(t,s,a)=>ma(n2(t),s2(t),a.southeast(),U0(),"southeast",Wa(t,{left:1,top:3}),of),Mr=(t,s,a)=>ma(ax(t,s),s2(t),a.southwest(),Qy(),"southwest",Wa(t,{right:0,top:3}),of),Ma=(t,s,a)=>ma(n2(t),W0(t,s),a.northeast(),e2(),"northeast",Wa(t,{left:1,bottom:2}),of),vr=(t,s,a)=>ma(ax(t,s),W0(t,s),a.northwest(),t2(),"northwest",Wa(t,{right:0,bottom:2}),of),Xr=(t,s,a)=>ma(o2(t,s),W0(t,s),a.north(),ox(),"north",Wa(t,{bottom:2}),of),Hr=(t,s,a)=>ma(o2(t,s),s2(t),a.south(),nx(),"south",Wa(t,{top:3}),of),a2=(t,s,a)=>ma(ck(t),r2(t,s),a.east(),sx(),"east",Wa(t,{left:0}),of),G1=(t,s,a)=>ma(ik(t,s),r2(t,s),a.west(),rx(),"west",Wa(t,{right:1}),of),K1=()=>[br,Mr,Ma,vr,Hr,Xr,a2,G1],fa=()=>[Mr,br,vr,Ma,Hr,Xr,a2,G1],cx=()=>[Ma,vr,br,Mr,Xr,Hr],Z0=()=>[vr,Ma,Mr,br,Xr,Hr],Lt=()=>[br,Mr,Ma,vr,Hr,Xr],Qg=()=>[Mr,br,vr,Ma,Hr,Xr],c2=(t,s)=>s.universal?t:ko(t,a=>zo(s.channels,a));var lk=Object.freeze({__proto__:null,events:t=>rs([ze(lu(),(s,a)=>{const i=t.channels,d=Uo(i),g=a,h=c2(d,g);pt(h,w=>{const x=i[w],A=x.schema,M=sc("channel["+w+`] data
Receiver: `+si(s.element),A,g.data);x.onReceive(s,M)})})])}),uk=[io("channels",Ol(Tn.value,Aa([nl("onReceive"),Se("schema",Yi())])))];const ai=ar({fields:uk,name:"receiving",active:lk});var ix=Object.freeze({__proto__:null,exhibit:(t,s)=>mu({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const xc=(t,s=!1)=>t.dom.focus({preventScroll:s}),om=t=>t.dom.blur(),Jr=t=>{const s=Ys(t).dom;return t.dom===s.activeElement},Bl=(t=Bd())=>D.from(t.dom.activeElement).map(ct.fromDom),Ec=t=>Bl(Ys(t)).filter(s=>t.dom.contains(s.dom)),i2=(t,s)=>{const a=Ys(s),i=Bl(a).bind(g=>{const h=w=>Xn(g,w);return h(s)?D.some(s):Yy(s,h)}),d=t(s);return i.each(g=>{Bl(a).filter(h=>Xn(h,g)).fold(()=>{xc(g)},le)}),d},q0=he.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),l2=(t,s,a,i,d,g)=>{const h=s.rect,w=h.x-a,x=h.y-i,A=h.width,M=h.height,L=d-(w+A),W=g-(x+M),Y=D.some(w),ne=D.some(x),oe=D.some(L),ye=D.some(W),ie=D.none();return vp(s.direction,()=>td(t,Y,ne,ie,ie),()=>td(t,ie,ne,oe,ie),()=>td(t,Y,ie,ie,ye),()=>td(t,ie,ie,oe,ye),()=>td(t,Y,ne,ie,ie),()=>td(t,Y,ie,ie,ye),()=>td(t,Y,ne,ie,ie),()=>td(t,ie,ne,oe,ie))},lx=(t,s)=>t.fold(()=>{const a=s.rect;return td("absolute",D.some(a.x),D.some(a.y),D.none(),D.none())},(a,i,d,g)=>l2("absolute",s,a,i,d,g),(a,i,d,g)=>l2("fixed",s,a,i,d,g)),G0=(t,s)=>{const a=Nn(qi,s),i=t.fold(a,a,()=>{const h=Ta();return qi(s).translate(-h.left,-h.top)}),d=Wi(s),g=zu(s);return ws(i.left,i.top,d,g)},ux=(t,s)=>s.fold(()=>t.fold(hr,hr,ws),a=>t.fold(ae(a),ae(a),()=>{const i=dx(t,a.x,a.y);return ws(i.left,i.top,a.width,a.height)})),dx=(t,s,a)=>{const i=qo(s,a),d=()=>{const g=Ta();return i.translate(-g.left,-g.top)};return t.fold(ae(i),ae(i),d)},mx=(t,s,a,i)=>t.fold(s,a,i);q0.none;const dk=q0.relative,mk=q0.fixed,fk=(t,s)=>({anchorBox:t,origin:s}),u2=(t,s)=>fk(t,s),K0="data-alloy-placement",fx=(t,s)=>{je(t,K0,s)},Y1=t=>En(t,K0),yp=t=>zn(t,K0),ng=he.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Y0=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:w,right:x,bottom:A,width:M,height:L}=t,W=h>=a&&h<=d,Y=w>=i&&w<=g,ne=W&&Y,oe=x<=d&&x>=a,ye=A<=g&&A>=i,ie=oe&&ye,we=Math.min(M,h>=a?d-h:x-a),ve=Math.min(L,w>=i?g-w:A-i);return{originInBounds:ne,sizeInBounds:ie,visibleW:we,visibleH:ve}},gk=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:w,width:x,height:A}=t,M=Math.max(a,d-x),L=Math.max(i,g-A),W=Pl(h,a,M),Y=Pl(w,i,L),ne=Math.min(W+x,d)-W,oe=Math.min(Y+A,g)-Y;return ws(W,Y,ne,oe)},gx=(t,s,a)=>{const i=ae(s.bottom-a.y),d=ae(a.bottom-s.y),g=tx(t,d,d,i),h=ae(s.right-a.x),w=ae(a.right-s.x);return{maxWidth:sk(t,w,w,h),maxHeight:g}},hk=(t,s,a,i)=>{const d=t.bubble,g=d.offset,h=ak(i,t.restriction,g),w=t.x+g.left,x=t.y+g.top,A=ws(w,x,s,a),{originInBounds:M,sizeInBounds:L,visibleW:W,visibleH:Y}=Y0(A,h),ne=M&&L,oe=ne?A:gk(A,h),ye=oe.width>0&&oe.height>0,{maxWidth:ie,maxHeight:we}=gx(t.direction,oe,i),ve={rect:oe,maxHeight:we,maxWidth:ie,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:x};return ne||t.alwaysFit?ng.fit(ve):ng.nofit(ve,W,Y,ye)},hx=(t,s,a,i,d,g)=>{const h=i.width,w=i.height,x=(M,L,W,Y,ne)=>{const oe=M(a,i,d,t,g),ye=hk(oe,h,w,g);return ye.fold(ae(ye),(ie,we,ve,Re)=>(ne===Re?ve>Y||we>W:!ne&&Re)?ye:ng.nofit(L,W,Y,ne))};return Vo(s,(M,L)=>{const W=Nn(x,L);return M.fold(ae(M),W)},ng.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:U0(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(bn,bn)},px=Ut,Uc=(t,s,a)=>Ea(t,s,px,a),X0=(t,s,a)=>Nf(t,s,px,a),bx=Al,d2=["top","bottom","right","left"],X1="data-alloy-transition-timer",pk=(t,s)=>IM(t,s.classes),Cp=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),bk=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return is(s,(i,d)=>{const g=t[d].map(a),h=i.map(a);return!Nc(g,h)}).isSome()},m2=t=>{const s=g=>{const w=Qe(t,g).split(/\s*,\s*/);return ko(w,Tr)},a=g=>{if(se(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return fc(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return Vo(d,(g,h,w)=>{const x=a(i[w])+a(h);return Math.max(g,x)},0)},vk=(t,s)=>{const a=bc(),i=bc();let d;const g=A=>{var M;const L=(M=A.raw.pseudoElement)!==null&&M!==void 0?M:"";return Xn(A.target,t)&&Zo(L)&&zo(d2,A.raw.propertyName)},h=A=>{if(ln(A)||g(A)){a.clear(),i.clear();const M=A==null?void 0:A.raw.type;(ln(M)||M===Qh())&&(clearTimeout(d),zn(t,X1),Ml(t,s.classes))}},w=Uc(t,T4(),A=>{g(A)&&(w.unbind(),a.set(Uc(t,Qh(),h)),i.set(Uc(t,E4(),h)))}),x=m2(t);requestAnimationFrame(()=>{d=setTimeout(h,x+17),je(t,X1,d)})},J1=(t,s)=>{Zf(t,s.classes),En(t,X1).each(a=>{clearTimeout(parseInt(a,10)),zn(t,X1)}),vk(t,s)},yk=(t,s,a,i,d,g)=>{const h=Cp(i,d,g);if(h||pk(t,i)){vn(t,"position",a.position);const w=G0(s,t),x=lx(s,{...d,rect:w}),A=hi(d2,M=>x[M]);bk(a,A)&&(Pm(t,A),h&&J1(t,i),tc(t))}else Ml(t,i.classes)},Ck=t=>({width:Wi(t),height:zu(t)}),J0=(t,s,a,i)=>{Zn(s,"max-height"),Zn(s,"max-width");const d=Ck(s);return hx(s,i.preference,t,d,a,i.bounds)},vx=(t,s)=>{const a=s.classes;Ml(t,a.off),Zf(t,a.on)},f2=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},Q1=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},yx=(t,s,a)=>{const i=lx(a.origin,s);a.transition.each(d=>{yk(t,a.origin,i,d,s,a.lastPlacement)}),ni(t,i)},g2=(t,s)=>{fx(t,s.placement)},h2=(t,s)=>{Ph(t,Math.floor(s))},p2=ae((t,s)=>{h2(t,s),jr(t,{"overflow-x":"hidden","overflow-y":"auto"})}),eh=ae((t,s)=>{h2(t,s)}),Cx=(t,s,a)=>t[s]===void 0?a:t[s],b2=(t,s,a,i,d,g,h,w)=>{const x=Cx(h,"maxHeightFunction",p2()),A=Cx(h,"maxWidthFunction",le),M=t.anchorBox,L=t.origin,W={bounds:ux(L,g),origin:L,preference:i,maxHeightFunction:x,maxWidthFunction:A,lastPlacement:d,transition:w};return wx(M,s,a,W)},wx=(t,s,a,i)=>{const d=J0(t,s,a,i);return yx(s,d,i),g2(s,d),vx(s,d),f2(s,d,i),Q1(s,d,i),{layout:d.layout,placement:d.placement}},Sx=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Wc=(t,s,a,i=1)=>{const d=t*i,g=s*i,h=x=>bt(a,x).getOr([]),w=(x,A,M)=>{const L=Qt(Sx,M);return{offset:qo(x,A),classesOn:Te(M,h),classesOff:Te(L,h)}};return{southeast:()=>w(-t,s,["top","alignLeft"]),southwest:()=>w(t,s,["top","alignRight"]),south:()=>w(-t/2,s,["top","alignCentre"]),northeast:()=>w(-t,-s,["bottom","alignLeft"]),northwest:()=>w(t,-s,["bottom","alignRight"]),north:()=>w(-t/2,-s,["bottom","alignCentre"]),east:()=>w(t,-s/2,["valignCentre","left"]),west:()=>w(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>w(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>w(-d,g,["top","alignRight","inset"]),insetNorth:()=>w(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>w(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>w(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>w(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>w(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>w(d,-g/2,["valignCentre","left","inset"])}},Q0=()=>Wc(0,0,{}),ev=bn,v2=(t,s)=>a=>y2(a)==="rtl"?s:t,y2=t=>Qe(t,"direction")==="rtl"?"rtl":"ltr";var sm;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(sm||(sm={}));const tv="data-alloy-vertical-dir",wk=t=>Xy(t,s=>Rs(s)&&$n(s,"data-alloy-vertical-dir")===sm.BottomToTop),og=()=>Oa("layouts",[Ze("onLtr"),Ze("onRtl"),lo("onBottomLtr"),lo("onBottomRtl")]),nv=(t,s,a,i,d,g,h)=>{const w=h.map(wk).getOr(!1),x=s.layouts.map(Y=>Y.onLtr(t)),A=s.layouts.map(Y=>Y.onRtl(t)),M=w?s.layouts.bind(Y=>Y.onBottomLtr.map(ne=>ne(t))).or(x).getOr(d):x.getOr(a),L=w?s.layouts.bind(Y=>Y.onBottomRtl.map(ne=>ne(t))).or(A).getOr(g):A.getOr(i);return v2(M,L)(t)},Zc=(t,s,a)=>{const i=s.hotspot,d=G0(a,i.element),g=nv(t.element,s,Lt(),Qg(),cx(),Z0(),D.some(s.hotspot.element));return D.some(ev({anchorBox:d,bubble:s.bubble.getOr(Q0()),overrides:s.overrides,layouts:g}))};var WM=[Ze("hotspot"),lo("bubble"),Se("overrides",{}),og(),us("placement",Zc)];const wp=(t,s,a)=>{const i=dx(a,s.x,s.y),d=ws(i.left,i.top,s.width,s.height),g=nv(t.element,s,K1(),fa(),K1(),fa(),D.none());return D.some(ev({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var Sk=[Ze("x"),Ze("y"),Se("height",0),Se("width",0),Se("bubble",Q0()),Se("overrides",{}),og(),us("placement",wp)];const eb=he.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),xk=t=>t.fold(bn,(s,a,i)=>s.translate(-a,-i)),Ek=t=>t.fold(bn,bn),xx=t=>Vo(t,(s,a)=>s.translate(a.left,a.top),qo(0,0)),Ex=t=>{const s=Ge(t,xk);return xx(s)},ov=t=>{const s=Ge(t,Ek);return xx(s)},Tk=eb.screen,_k=eb.absolute,tb=(t,s,a)=>{const i=zi(a.root).dom,d=g=>{const h=Es(g),w=Es(t.element);return Xn(h,w)};return D.from(i.frameElement).map(ct.fromDom).filter(d).map(qr)},C2=(t,s,a)=>{const i=Es(t.element),d=Ta(i),g=tb(t,s,a).getOr(d);return _k(g,d.left,d.top)},w2=(t,s,a,i)=>{const d=Tk(qo(t,s));return D.some(Dg(d,a,i))},Tx=(t,s,a,i,d)=>t.map(g=>{const h=[s,g.point],w=mx(i,()=>ov(h),()=>ov(h),()=>Ex(h)),x=Ci(w.left,w.top,g.width,g.height),A=a.showAbove?cx():Lt(),M=a.showAbove?Z0():Qg(),L=nv(d,a,A,M,A,M,D.none());return ev({anchorBox:x,bubble:a.bubble.getOr(Q0()),overrides:a.overrides,layouts:L})}),_x=(t,s,a)=>{const i=C2(t,a,s);return s.node.filter(ce).bind(d=>{const g=d.dom.getBoundingClientRect(),h=w2(g.left,g.top,g.width,g.height),w=s.node.getOr(t.element);return Tx(h,i,s,a,w)})};var sv=[Ze("node"),Ze("root"),lo("bubble"),og(),Se("overrides",{}),Se("showAbove",!1),us("placement",_x)];const ZM="\uFEFF",Sp="",nb={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},ob=he.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),rv=(t,s,a,i)=>t.fold(s,a,i),kk=t=>t.fold(bn,bn,bn),kx=ob.before,Ak=ob.on,S2=ob.after,x2={before:kx,on:Ak,after:S2,cata:rv,getStart:kk},sf=he.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),sb=t=>sf.exact(t.start,t.soffset,t.finish,t.foffset),Ok=t=>t.match({domRange:s=>ct.fromDom(s.startContainer),relative:(s,a)=>x2.getStart(s),exact:(s,a,i,d)=>s}),E2=sf.domRange,Ax=sf.relative,jM=sf.exact,Ox=t=>{const s=Ok(t);return zi(s)},T2=nb.create,sg={domRange:E2,relative:Ax,exact:jM,exactFromRange:sb,getWin:Ox,range:T2},Rk=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},_2=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},k2=(t,s,a)=>{const i=t.document.createRange();return Rk(i,s),_2(i,a),i},A2=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},av=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),O2=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?D.some(a).map(av):D.none()},cv=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?D.some(s).map(av):D.none()},xp=he.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),R2=(t,s,a)=>s(ct.fromDom(a.startContainer),a.startOffset,ct.fromDom(a.endContainer),a.endOffset),Dk=(t,s)=>s.match({domRange:a=>({ltr:ae(a),rtl:D.none}),relative:(a,i)=>({ltr:Tl(()=>k2(t,a,i)),rtl:Tl(()=>D.some(k2(t,i,a)))}),exact:(a,i,d,g)=>({ltr:Tl(()=>A2(t,a,i,d,g)),rtl:Tl(()=>D.some(A2(t,d,g,a,i)))})}),Mk=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>xp.rtl(ct.fromDom(d.endContainer),d.endOffset,ct.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>R2(t,xp.ltr,a)):R2(t,xp.ltr,a)},th=(t,s)=>{const a=Dk(t,s);return Mk(t,a)},rb=(t,s)=>th(t,s).match({ltr:(i,d,g,h)=>{const w=t.document.createRange();return w.setStart(i.dom,d),w.setEnd(g.dom,h),w},rtl:(i,d,g,h)=>{const w=t.document.createRange();return w.setStart(g.dom,h),w.setEnd(i.dom,d),w}});xp.ltr,xp.rtl;const Rx=(t,s,a)=>ko(kd(t,a),s),jc=(t,s)=>Fi(s,t),qM=(t,s,a,i)=>{const g=Es(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},Nk=(t,s,a,i)=>{const d=qM(t,s,a,i),g=Xn(t,a)&&s===i;return d.collapsed&&!g},Ep=t=>D.from(t.getSelection()),Dx=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return D.some(nb.create(ct.fromDom(s.startContainer),s.startOffset,ct.fromDom(a.endContainer),a.endOffset))}else return D.none()},Mx=t=>{if(t.anchorNode===null||t.focusNode===null)return Dx(t);{const s=ct.fromDom(t.anchorNode),a=ct.fromDom(t.focusNode);return Nk(s,t.anchorOffset,a,t.focusOffset)?D.some(nb.create(s,t.anchorOffset,a,t.focusOffset)):Dx(t)}},ab=t=>Ep(t).filter(s=>s.rangeCount>0).bind(Mx),rg=(t,s)=>{const a=rb(t,s);return O2(a)},D2=(t,s)=>{const a=rb(t,s);return cv(a)},Pk=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?D.from(g.dom.nodeValue):D.none();return{get:a,getOption:i,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(dr,"text"),Px=t=>Pk.get(t),cb=(t,s)=>({element:t,offset:s}),Bx=(t,s)=>{const a=mr(t);if(a.length===0)return cb(t,s);if(s<a.length)return cb(a[s],0);{const i=a[a.length-1],d=dr(i)?Px(i).length:mr(i).length;return cb(i,d)}},ib=(t,s)=>dr(t)?cb(t,s):Bx(t,s),Tp=t=>t.foffset!==void 0,M2=(t,s)=>s.getSelection.getOrThunk(()=>()=>ab(t))().map(i=>{if(Tp(i)){const d=ib(i.start,i.soffset),g=ib(i.finish,i.foffset);return sg.range(d.element,d.offset,g.element,g.offset)}else return i}),_p=(t,s,a)=>{const i=zi(s.root).dom,d=C2(t,a,s),g=M2(i,s).bind(x=>{if(Tp(x))return D2(i,sg.exactFromRange(x)).orThunk(()=>{const M=ct.fromText(ZM);eu(x.start,M);const L=rg(i,sg.exact(M,0,M,1));return yi(M),L}).bind(M=>w2(M.left,M.top,M.width,M.height));{const A=To(x,L=>L.dom.getBoundingClientRect()),M={left:Math.min(A.firstCell.left,A.lastCell.left),right:Math.max(A.firstCell.right,A.lastCell.right),top:Math.min(A.firstCell.top,A.lastCell.top),bottom:Math.max(A.firstCell.bottom,A.lastCell.bottom)};return w2(M.left,M.top,M.right-M.left,M.bottom-M.top)}}),w=M2(i,s).bind(x=>Tp(x)?Rs(x.start)?D.some(x.start):Jc(x.start):D.some(x.firstCell)).getOr(t.element);return Tx(g,d,s,a,w)};var nh=[lo("getSelection"),Ze("root"),lo("bubble"),og(),Se("overrides",{}),Se("showAbove",!1),us("placement",_p)];const oh="link-layout",rf=t=>t.x+t.width,N2=(t,s)=>t.x-s.width,rm=(t,s)=>t.y-s.height+t.height,hu=t=>t.y,am=(t,s,a)=>ma(rf(t),hu(t),a.southeast(),U0(),"southeast",Wa(t,{left:0,top:2}),oh),P2=(t,s,a)=>ma(N2(t,s),hu(t),a.southwest(),Qy(),"southwest",Wa(t,{right:1,top:2}),oh),rd=(t,s,a)=>ma(rf(t),rm(t,s),a.northeast(),e2(),"northeast",Wa(t,{left:0,bottom:3}),oh),B2=(t,s,a)=>ma(N2(t,s),rm(t,s),a.northwest(),t2(),"northwest",Wa(t,{right:1,bottom:3}),oh),sh=()=>[am,P2,rd,B2],kp=()=>[P2,am,B2,rd],$x=(t,s,a)=>{const i=G0(a,s.item.element),d=nv(t.element,s,sh(),kp(),sh(),kp(),D.none());return D.some(ev({anchorBox:i,bubble:Q0(),overrides:s.overrides,layouts:d}))};var Ix=[Ze("item"),og(),Se("overrides",{}),us("placement",$x)],lb=Or("type",{selection:nh,node:sv,hotspot:WM,submenu:Ix,makeshift:Sk});const iv=[Cc("classes",_t),Qi("mode","all",["all","layout","placement"])],Bk=[Se("useFixed",fo),lo("getBounds")],ub=[io("anchor",lb),Oa("transition",iv)],lv=()=>{const t=document.documentElement;return mk(0,0,t.clientWidth,t.clientHeight)},Lx=t=>{const s=qr(t.element),a=t.element.dom.getBoundingClientRect();return dk(s.left,s.top,a.width,a.height)},pu=(t,s,a,i,d,g)=>{const h=u2(s.anchorBox,t);return b2(h,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},Fx=(t,s,a,i,d)=>{const g=D.none();uv(t,s,a,i,d,g)},uv=(t,s,a,i,d,g)=>{const h=sc("placement.info",mn(ub),d),w=h.anchor,x=i.element,A=a.get(i.uid);i2(()=>{vn(x,"position","fixed");const M=$s(x,"visibility");vn(x,"visibility","hidden");const L=s.useFixed()?lv():Lx(t);w.placement(t,w,L).each(W=>{const Y=g.orThunk(()=>s.getBounds.map(_s)),ne=pu(L,W,Y,i,A,h.transition);a.set(i.uid,ne)}),M.fold(()=>{Zn(x,"visibility")},W=>{vn(x,"visibility",W)}),$s(x,"left").isNone()&&$s(x,"top").isNone()&&$s(x,"right").isNone()&&$s(x,"bottom").isNone()&&Wr($s(x,"position"),"fixed")&&Zn(x,"position")},x)};var db=Object.freeze({__proto__:null,position:Fx,positionWithinBounds:uv,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;pt(["position","left","right","top","bottom"],g=>Zn(d,g)),yp(d),a.clear(i.uid)}}),zx=Object.freeze({__proto__:null,init:()=>{let t={};return el({readState:()=>t,clear:d=>{cn(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>bt(t,d)})}});const Za=ar({fields:Bk,name:"positioning",active:ix,apis:db,state:zx}),dv=t=>t.getSystem().isConnected(),ag=t=>{Un(t,du());const s=t.components();pt(s,ag)},ol=t=>{const s=t.components();pt(s,ol),Un(t,uu())},Vx=(t,s)=>{t.getSystem().addToWorld(s),ce(t.element)&&ol(s)},mv=t=>{ag(t),t.getSystem().removeFromWorld(t)},mb=(t,s)=>{Bc(t.element,s.element)},Ux=t=>{pt(t.components(),s=>yi(s.element)),nu(t.element),t.syncComponents()},fb=(t,s,a)=>{const i=t.components();Ux(t);const d=a(s),g=Qt(i,d);pt(g,h=>{ag(h),t.getSystem().removeFromWorld(h)}),pt(d,h=>{dv(h)?mb(t,h):(t.getSystem().addToWorld(h),mb(t,h),ce(t.element)&&ol(h))}),t.syncComponents()},Wx=(t,s,a)=>{const i=t.components(),d=Te(s,w=>Z4(w).toArray());pt(i,w=>{zo(d,w)||mv(w)});const g=a(s),h=Qt(i,g);pt(h,w=>{dv(w)&&mv(w)}),pt(g,w=>{dv(w)||Vx(t,w)}),t.syncComponents()},ah=(t,s)=>{sl(t,s,Bc)},sl=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),ce(t.element)&&ol(s),t.syncComponents()},cg=t=>{ag(t),yi(t.element),t.getSystem().removeFromWorld(t)},ad=t=>{const s=$r(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());cg(t),s.each(a=>{a.syncComponents()})},bu=t=>{const s=t.components();pt(s,cg),nu(t.element),t.syncComponents()},ja=(t,s)=>{zr(t,s,Bc)},Na=(t,s)=>{zr(t,s,tu)},zr=(t,s,a)=>{a(t,s.element);const i=mr(s.element);pt(i,d=>{s.getByDom(d).each(ol)})},vu=t=>{const s=mr(t.element);pt(s,a=>{t.getByDom(a).each(ag)}),yi(t.element)},fv=(t,s,a,i)=>{a.get().each(h=>{bu(t)});const d=s.getAttachPoint(t);ah(d,t);const g=t.getSystem().build(i);return ah(t,g),a.set(g),g},rl=(t,s,a,i)=>{const d=fv(t,s,a,i);return s.onOpen(t,d),d},ch=(t,s,a,i)=>a.get().map(()=>fv(t,s,a,i)),gv=(t,s,a,i,d)=>{Yx(t,s),rl(t,s,a,i),d(),Xx(t,s)},Zx=(t,s,a)=>{a.get().each(i=>{bu(t),ad(t),s.onClose(t,i),a.clear()})},jx=(t,s,a)=>a.isOpen(),qx=(t,s,a,i)=>jx(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),Gx=(t,s,a)=>a.get(),hv=(t,s,a,i)=>{$s(t.element,s).fold(()=>{zn(t.element,a)},d=>{je(t.element,a,d)}),vn(t.element,s,i)},Kx=(t,s,a)=>{En(t.element,a).fold(()=>Zn(t.element,s),i=>vn(t.element,s,i))},Yx=(t,s,a)=>{const i=s.getAttachPoint(t);vn(t.element,"position",Za.getMode(i)),hv(t,"visibility",s.cloakVisibilityAttr,"hidden")},Ap=t=>wr(["top","left","right","bottom"],s=>$s(t,s).isSome()),Xx=(t,s,a)=>{Ap(t.element)||Zn(t.element,"position"),Kx(t,"visibility",s.cloakVisibilityAttr)};var $k=Object.freeze({__proto__:null,cloak:Yx,decloak:Xx,open:rl,openWhileCloaked:gv,close:Zx,isOpen:jx,isPartOf:qx,getState:Gx,setContent:ch}),Jx=Object.freeze({__proto__:null,events:(t,s)=>rs([ze(Yd(),(a,i)=>{Zx(a,t,s)})])}),Op=[so("onOpen"),so("onClose"),Ze("isPartOf"),Ze("getAttachPoint"),Se("cloakVisibilityAttr","data-precloak-visibility")],Fk=Object.freeze({__proto__:null,init:()=>{const t=go(),s=ae("not-implemented");return el({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const ro=ar({fields:Op,name:"sandboxing",active:Jx,apis:$k,state:Fk}),ig=ae("dismiss.popups"),af=ae("reposition.popups"),pv=ae("mouse.released"),$2=Aa([Se("isExtraPart",fo),Oa("fireEventInstead",[Se("event",Vf())])]),Oi=t=>{const s=sc("Dismissal",$2,t);return{[ig()]:{schema:Aa([Ze("target")]),onReceive:(a,i)=>{ro.isOpen(a)&&(ro.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>ro.close(a),g=>Un(a,g.event)))}}}},Hk=Aa([Oa("fireEventInstead",[Se("event",Fg())]),Kr("doReposition")]),ih=t=>{const s=sc("Reposition",Hk,t);return{[af()]:{onReceive:a=>{ro.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>Un(a,i.event))}}}},cm=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},gb=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var eE=Object.freeze({__proto__:null,onLoad:cm,onUnload:gb,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),tE=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Bo((i,d)=>{cm(i,t,s)}),ed((i,d)=>{gb(i,t,s)})]:[Dy(t,s,cm)];return rs(a)}});const lh=()=>{const t=Wt(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return el({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},uh=()=>el({readState:le}),dh=()=>{const t=Wt({}),s=Wt({});return el({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>bt(t.get(),h).orThunk(()=>bt(s.get(),h)),update:h=>{const w=t.get(),x=s.get(),A={},M={};pt(h,L=>{A[L.value]=L,bt(L,"meta").each(W=>{bt(W,"text").each(Y=>{M[Y]=L})})}),t.set({...w,...A}),s.set({...x,...M})},clear:()=>{t.set({}),s.set({})}})};var I2=Object.freeze({__proto__:null,memory:lh,dataset:dh,manual:uh,init:t=>t.store.manager.state(t)});const Rp=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},L2=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},F2=(t,s,a)=>{s.store.initialValue.each(d=>{Rp(t,s,a,d)})},Dp=(t,s,a)=>{a.clear()};var H2=[lo("initialValue"),Ze("getFallbackEntry"),Ze("getDataKey"),Ze("setValue"),us("manager",{setValue:Rp,getValue:L2,onLoad:F2,onUnload:Dp,state:dh})];const nE=(t,s,a)=>s.store.getValue(t),lg=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},z2=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var Vk=[Ze("getValue"),Se("setValue",le),lo("initialValue"),us("manager",{setValue:lg,getValue:nE,onLoad:z2,onUnload:le,state:Dl.init})];const oE=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},cf=(t,s,a)=>a.get(),sE=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},V2=(t,s,a)=>{a.clear()};var ug=[lo("initialValue"),us("manager",{setValue:oE,getValue:cf,onLoad:sE,onUnload:V2,state:lh})],U2=[ti("store",{mode:"memory"},Or("mode",{memory:ug,manual:Vk,dataset:H2})),so("onSetValue"),Se("resetOnDom",!1)];const Dt=ar({fields:U2,name:"representing",active:tE,apis:eE,extra:{setValueFrom:(t,s)=>{const a=Dt.getValue(s);Dt.setValue(t,a)}},state:I2}),ga=(t,s)=>V(t,{},Ge(s,a=>_y(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([co("dump",bn)])),bv=t=>t.dump,cr=(t,s)=>({...at(s),...t.dump}),al={field:ga,augment:cr,get:bv},vv="placeholder",mh=he.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),yv=t=>Yn(t,"uiType"),Cv=(t,s,a,i)=>t.exists(d=>d!==a.owner)?mh.single(!0,ae(a)):bt(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Uo(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),W2=(t,s,a,i)=>yv(a)&&a.uiType===vv?Cv(t,s,a,i):mh.single(!1,ae(a)),rE=(t,s,a,i)=>W2(t,s,a,i).fold((g,h)=>{const w=yv(a)?h(s,a.config,a.validated):h(s),x=bt(w,"components").getOr([]),A=Te(x,M=>rE(t,s,M,i));return[{...w,components:A}]},(g,h)=>{if(yv(a)){const w=h(s,a.config,a.validated);return a.validated.preprocess.getOr(bn)(w)}else return h(s)}),Uk=(t,s,a,i)=>Te(a,d=>rE(t,s,d,i)),im=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((h,w)=>h,(h,w)=>h);return{name:ae(t),required:g,used:i,replace:d}},Wk=(t,s,a,i)=>{const d=To(i,(h,w)=>im(w,h)),g=Uk(t,s,a,d);return As(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},Z2=mh.single,$l=mh.multiple,Qr=ae(vv),wv=he.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Mp=Se("factory",{sketch:bn}),j2=Se("schema",[]),lm=Ze("name"),lf=Rr("pname","pname",Vn(t=>"<alloy."+Mt(t.name)+">"),Yi()),dg=co("schema",()=>[lo("preprocess")]),hb=Se("defaults",ae({})),ci=Se("overrides",ae({})),fh=mn([Mp,j2,lm,lf,hb,ci]),Zk=mn([Mp,j2,lm,hb,ci]),Np=mn([Mp,j2,lm,lf,hb,ci]),aE=mn([Mp,dg,lm,Ze("unit"),lf,hb,ci]),cE=t=>t.fold(D.some,D.none,D.some,D.some),iE=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},lE=t=>t.fold(bn,bn,bn,bn),pb=(t,s)=>a=>{const i=sc("Converting part type",s,a);return t(i)},qa=pb(wv.required,fh),Il=pb(wv.external,Zk),ii=pb(wv.optional,Np),gh=pb(wv.group,aE),uf=ae("entirety");var bb=Object.freeze({__proto__:null,required:qa,external:Il,optional:ii,group:gh,asNamedPart:cE,name:iE,asCommon:lE,original:uf});const q2=(t,s,a,i)=>ns(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),jk=(t,s,a)=>{const i={},d={};return pt(a,g=>{g.fold(h=>{i[h.pname]=Z2(!0,(w,x,A)=>h.factory.sketch(q2(w,h,x,A)))},h=>{const w=s.parts[h.name];d[h.name]=ae(h.factory.sketch(q2(s,h,w[uf()]),w))},h=>{i[h.pname]=Z2(!1,(w,x,A)=>h.factory.sketch(q2(w,h,x,A)))},h=>{i[h.pname]=$l(!0,(w,x,A)=>{const M=w[h.name];return Ge(M,L=>h.factory.sketch(ns(h.defaults(w,L,A),L,h.overrides(w,L))))})})}),{internals:ae(i),externals:ae(d)}},G2=(t,s)=>{const a={};return pt(s,i=>{cE(i).each(d=>{const g=qk(t,d.pname);a[d.name]=h=>{const w=sc("Part: "+d.name+" in "+t,mn(d.schema),h);return{...g,config:h,validated:w}}})}),a},qk=(t,s)=>({uiType:Qr(),owner:t,name:s}),Sv=(t,s,a)=>({uiType:Qr(),owner:t,name:s,config:a,validated:{}}),K2=t=>Te(t,s=>s.fold(D.none,D.some,D.none,D.none).map(a=>ru(a.name,a.schema.concat([Vy(uf())]))).toArray()),uE=t=>Ge(t,iE),xv=(t,s,a)=>jk(t,s,a),Y2=(t,s,a)=>Wk(D.some(t),s,s.components,a),Go=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},cd=(t,s,a)=>Go(t,s,a).getOrDie("Could not find part: "+a),dE=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return pt(a,h=>{i[h]=ae(g.getByUid(d[h]))}),i},mE=(t,s)=>{const a=t.getSystem();return To(s.partUids,(i,d)=>ae(a.getByUid(i)))},X2=t=>Uo(t.partUids),Ev=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return pt(a,h=>{i[h]=ae(g.getByUid(d[h]).getOrDie())}),i},J2=(t,s)=>{const a=uE(s);return So(Ge(a,i=>({key:i,value:t+"-"+i})))},Pp=t=>Rr("partUids","partUids",_(s=>J2(s.uid,t)),Yi());var JM=Object.freeze({__proto__:null,generate:G2,generateOne:Sv,schemas:K2,names:uE,substitutes:xv,components:Y2,defaultUids:J2,defaultUidsSchema:Pp,getAllParts:mE,getAllPartNames:X2,getPart:Go,getPartOrDie:cd,getParts:dE,getPartsOrDie:Ev});const fE=(t,s)=>(t.length>0?[ru("parts",t)]:[]).concat([Ze("uid"),Se("dom",{}),Se("components",[]),Vy("originalSpec"),Se("debug.sketcher",{})]).concat(s),Tv=(t,s,a,i,d)=>{const g=fE(i,d);return sc(t+" [SpecSchema]",Aa(g.concat(s)),a)},Gk=(t,s,a,i)=>{const d=Q2(i),g=Tv(t,s,d,[],[]);return a(g,d)},vb=(t,s,a,i,d)=>{const g=Q2(d),h=K2(a),w=Pp(a),x=Tv(t,s,g,h,[w]),A=xv(t,x,a),M=Y2(t,x,A.internals());return i(x,M,g,A.externals())},gE=t=>Yn(t,"uid"),Q2=t=>gE(t)?t:{...t,uid:Kg("uid")},hE=t=>t.uid!==void 0,df=Aa([Ze("name"),Ze("factory"),Ze("configFields"),Se("apis",{}),Se("extraApis",{})]),_v=Aa([Ze("name"),Ze("factory"),Ze("configFields"),Ze("partFields"),Se("apis",{}),Se("extraApis",{})]),li=t=>{const s=sc("Sketcher for "+t.name,df,t),a=g=>Gk(s.name,s.configFields,s.factory,g),i=To(s.apis,sd),d=To(s.extraApis,(g,h)=>R1(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},lc=t=>{const s=sc("Sketcher for "+t.name,_v,t),a=h=>vb(s.name,s.configFields,s.partFields,s.factory,h),i=G2(s.name,s.partFields),d=To(s.apis,sd),g=To(s.extraApis,(h,w)=>R1(h,w));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},Bp=t=>ca("input")(t)&&$n(t,"type")!=="radio"||ca("textarea")(t);var Kk=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const eC=[Ze("find")],eo=ar({fields:eC,name:"composing",apis:Kk}),$p=["input","button","textarea","select"],tC=(t,s,a)=>{(s.disabled()?kv:oC)(t,s)},nC=(t,s)=>s.useNative===!0&&zo($p,Bs(t.element)),pE=t=>Zs(t.element,"disabled"),bE=t=>{je(t.element,"disabled","disabled")},Yk=t=>{zn(t.element,"disabled")},e5=t=>$n(t.element,"aria-disabled")==="true",Xk=t=>{je(t.element,"aria-disabled","true")},Jk=t=>{je(t.element,"aria-disabled","false")},kv=(t,s,a)=>{s.disableClass.each(d=>{Ks(t.element,d)}),(nC(t,s)?bE:Xk)(t),s.onDisabled(t)},oC=(t,s,a)=>{s.disableClass.each(d=>{Qs(t.element,d)}),(nC(t,s)?Yk:Jk)(t),s.onEnabled(t)},Av=(t,s)=>nC(t,s)?pE(t):e5(t);var t5=Object.freeze({__proto__:null,enable:oC,disable:kv,isDisabled:Av,onLoad:tC,set:(t,s,a,i)=>{(i?kv:oC)(t,s)}}),e3=Object.freeze({__proto__:null,exhibit:(t,s)=>mu({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>rs([Jm(ac(),(a,i)=>Av(a,t)),Dy(t,s,tC)])}),t3=[Po("disabled",fo),Se("useNative",!0),lo("disableClass"),so("onDisabled"),so("onEnabled")];const Ft=ar({fields:t3,name:"disabling",active:e3,apis:t5}),vE=(t,s,a,i)=>{const d=jc(t.element,"."+s.highlightClass);pt(d,g=>{wr(i,w=>Xn(w.element,g))||(Qs(g,s.highlightClass),t.getSystem().getByDom(g).each(w=>{s.onDehighlight(t,w),Un(w,v0())}))})},yE=(t,s,a)=>vE(t,s,a,[]),rC=(t,s,a,i)=>{Cb(t,s,a,i)&&(Qs(i.element,s.highlightClass),s.onDehighlight(t,i),Un(i,v0()))},yb=(t,s,a,i)=>{vE(t,s,a,[i]),Cb(t,s,a,i)||(Ks(i.element,s.highlightClass),s.onHighlight(t,i),Un(i,b0()))},n3=(t,s,a)=>{l(t,s).each(i=>{yb(t,s,a,i)})},Ip=(t,s,a)=>{m(t,s).each(i=>{yb(t,s,a,i)})},aC=(t,s,a,i)=>{cC(t,s,a,i).fold(d=>{throw d},d=>{yb(t,s,a,d)})},o3=(t,s,a,i)=>{const d=N(t,s);gn(d,i).each(h=>{yb(t,s,a,h)})},Cb=(t,s,a,i)=>cc(i.element,s.highlightClass),Ov=(t,s,a)=>ho(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),cC=(t,s,a,i)=>{const d=jc(t.element,"."+s.itemClass);return D.from(d[i]).fold(()=>Tn.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},l=(t,s,a)=>ho(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),m=(t,s,a)=>{const i=jc(t.element,"."+s.itemClass);return(i.length>0?D.some(i[i.length-1]):D.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},b=(t,s,a,i)=>{const d=jc(t.element,"."+s.itemClass);return vo(d,h=>cc(h,s.highlightClass)).bind(h=>{const w=fp(h,i,0,d.length-1);return t.getSystem().getByDom(d[w]).toOptional()})},y=(t,s,a)=>b(t,s,a,-1),k=(t,s,a)=>b(t,s,a,1),N=(t,s,a)=>{const i=jc(t.element,"."+s.itemClass);return pi(Ge(i,d=>t.getSystem().getByDom(d).toOptional()))};var z=Object.freeze({__proto__:null,dehighlightAll:yE,dehighlight:rC,highlight:yb,highlightFirst:n3,highlightLast:Ip,highlightAt:aC,highlightBy:o3,isHighlighted:Cb,getHighlighted:Ov,getFirst:l,getLast:m,getPrevious:y,getNext:k,getCandidates:N}),X=[Ze("highlightClass"),Ze("itemClass"),so("onHighlight"),so("onDehighlight")];const Q=ar({fields:X,name:"highlighting",apis:z}),fe=[8],_e=[9],et=[13],kt=[27],it=[32],dt=[37],zt=[38],nt=[39],rn=[40],qe=(t,s,a)=>{const i=nr(t.slice(0,s)),d=nr(t.slice(s+1));return gn(i.concat(d),a)},Pt=(t,s,a)=>{const i=nr(t.slice(0,s));return gn(i,a)},xo=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return gn(d.concat(i),a)},Eo=(t,s,a)=>{const i=t.slice(s+1);return gn(i,a)},qt=t=>s=>{const a=s.raw;return zo(t,a.which)},Ko=t=>s=>Ja(t,a=>a(s)),Tc=t=>t.raw.shiftKey===!0,mg=t=>t.raw.ctrlKey===!0,yu=We(Tc),Kn=(t,s)=>({matches:t,classification:s}),Oo=(t,s)=>gn(t,i=>i.matches(s)).map(i=>i.classification),Ga=(t,s,a)=>{s.exists(d=>a.exists(g=>Xn(g,d)))||Kt(t,k1(),{prevFocus:s,newFocus:a})},ea=()=>{const t=a=>Ec(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);Ga(a,d,g)}}},Ll=()=>{const t=a=>Q.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(le,h=>{Q.highlight(a,h)});const g=t(a);Ga(a,d,g)}}};var Ka;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Ka||(Ka={}));const Cu=(t,s,a,i,d)=>{const g=()=>t.concat([Se("focusManager",ea()),ti("focusInside","onFocus",Bg(A=>zo(["onFocus","onEnterOrSpace","onApi"],A)?Tn.value(A):Tn.error("Invalid value for focusInside"))),us("handler",x),us("state",s),us("sendFocusIn",d)]),h=(A,M,L,W,Y)=>{const ne=L(A,M,W,Y);return Oo(ne,M.event).bind(oe=>oe(A,M,W,Y))},x={schema:g,processKey:h,toEvents:(A,M)=>{const L=A.focusInside!==Ka.OnFocusMode?D.none():d(A).map(ne=>ze(Kd(),(oe,ye)=>{ne(oe,A,M),ye.stop()})),W=(ne,oe)=>{const ye=qt(it.concat(et))(oe.event);A.focusInside===Ka.OnEnterOrSpaceMode&&ye&&jm(ne,oe)&&d(A).each(ie=>{ie(ne,A,M),oe.stop()})},Y=[ze(Va(),(ne,oe)=>{h(ne,oe,a,A,M).fold(()=>{W(ne,oe)},ye=>{oe.stop()})}),ze(p0(),(ne,oe)=>{h(ne,oe,i,A,M).each(ye=>{oe.stop()})})];return rs(L.toArray().concat(Y))}};return x},_c=t=>{const s=[lo("onEscape"),lo("onEnter"),Se("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Se("firstTabstop",0),Se("useTabstopAt",Ut),lo("visibilitySelector")].concat([t]),a=(ie,we)=>{const ve=ie.visibilitySelector.bind(Re=>gu(we,Re)).getOr(we);return sr(ve)>0},i=(ie,we)=>{const ve=jc(ie.element,we.selector),Re=ko(ve,Ne=>a(we,Ne));return D.from(Re[we.firstTabstop])},d=(ie,we)=>we.focusManager.get(ie).bind(ve=>gu(ve,we.selector)),g=(ie,we)=>a(ie,we)&&ie.useTabstopAt(we),h=(ie,we,ve)=>{i(ie,we).each(Re=>{we.focusManager.set(ie,Re)})},w=(ie,we,ve,Re,Ne)=>Ne(we,ve,xt=>g(Re,xt)).fold(()=>Re.cyclic?D.some(!0):D.none(),xt=>(Re.focusManager.set(ie,xt),D.some(!0))),x=(ie,we,ve,Re)=>{const Ne=ko(jc(ie.element,ve.selector),xt=>a(ve,xt));return d(ie,ve).bind(xt=>vo(Ne,Nn(Xn,xt)).bind($e=>w(ie,Ne,$e,ve,Re)))},A=(ie,we,ve)=>{const Re=ve.cyclic?qe:Pt;return x(ie,we,ve,Re)},M=(ie,we,ve)=>{const Re=ve.cyclic?xo:Eo;return x(ie,we,ve,Re)},L=ie=>Lu(ie).bind(Yl).exists(we=>Xn(we,ie)),W=(ie,we,ve)=>d(ie,ve).filter(Re=>!ve.useTabstopAt(Re)).bind(Re=>(L(Re)?A:M)(ie,we,ve)),Y=(ie,we,ve)=>ve.onEnter.bind(Re=>Re(ie,we)),ne=(ie,we,ve)=>ve.onEscape.bind(Re=>Re(ie,we)),oe=ae([Kn(Ko([Tc,qt(_e)]),A),Kn(qt(_e),M),Kn(Ko([yu,qt(et)]),Y)]),ye=ae([Kn(qt(kt),ne),Kn(qt(_e),W)]);return Cu(s,Dl.init,oe,ye,()=>D.some(h))};var iC=_c(co("cyclic",fo)),wb=_c(co("cyclic",Ut));const um=(t,s,a)=>(y0(t,a,ac()),D.some(!0)),ta=(t,s,a)=>Bp(a)&&qt(it)(s.event)?D.none():um(t,s,a),mf=(t,s)=>D.some(!0),s3=[Se("execute",ta),Se("useSpace",!1),Se("useEnter",!0),Se("useControlEnter",!1),Se("useDown",!1)],lC=(t,s,a)=>a.execute(t,s,t.element),r3=(t,s,a,i)=>{const d=a.useSpace&&!Bp(t.element)?it:[],g=a.useEnter?et:[],h=a.useDown?rn:[],w=d.concat(g).concat(h);return[Kn(qt(w),lC)].concat(a.useControlEnter?[Kn(Ko([mg,qt(et)]),lC)]:[])},uC=(t,s,a,i)=>a.useSpace&&!Bp(t.element)?[Kn(qt(it),mf)]:[];var dC=Cu(s3,Dl.init,r3,uC,()=>D.none());const CE=()=>{const t=go();return el({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var a3=Object.freeze({__proto__:null,flatgrid:CE,init:t=>t.state(t)});const n5=t=>(s,a,i,d)=>{const g=t(s.element);return l3(g,s,a,i,d)},wE=(t,s)=>{const a=v2(t,s);return n5(a)},c3=(t,s)=>{const a=v2(s,t);return n5(a)},i3=t=>(s,a,i,d)=>l3(t,s,a,i,d),l3=(t,s,a,i,d)=>i.focusManager.get(s).bind(h=>t(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),o5=i3,s5=i3,Rv=i3,r5=t=>t.offsetWidth<=0&&t.offsetHeight<=0,mC=t=>!r5(t.dom),SE=(t,s)=>vo(t,s).map(a=>({index:a,candidates:t})),fC=(t,s,a)=>{const i=h=>Xn(h,s),d=jc(t,a),g=ko(d,mC);return SE(g,i)},Lp=(t,s)=>vo(t,a=>Xn(s,a)),QF=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(h=>{const w=h.row*a+h.column;return w>=0&&w<t.length?D.some(t[w]):D.none()})},a5=(t,s,a,i,d)=>QF(t,s,i,(g,h)=>{const x=g===a-1?t.length-g*i:i,A=fp(h,d,0,x-1);return D.some({row:g,column:A})}),c5=(t,s,a,i,d)=>QF(t,s,i,(g,h)=>{const w=fp(g,d,0,a-1),A=w===a-1?t.length-w*i:i,M=Pl(h,0,A-1);return D.some({row:w,column:M})}),i5=(t,s,a,i)=>a5(t,s,a,i,1),e7=(t,s,a,i)=>a5(t,s,a,i,-1),BK=(t,s,a,i)=>c5(t,s,a,i,-1),$K=(t,s,a,i)=>c5(t,s,a,i,1),t7=[Ze("selector"),Se("execute",ta),Sc("onEscape"),Se("captureTab",!1),eg()],n7=(t,s,a)=>{ho(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},u3=(t,s)=>s.focusManager.get(t).bind(a=>gu(a,s.selector)),o7=(t,s,a,i)=>u3(t,a).bind(d=>a.execute(t,s,d)),xE=t=>(s,a,i,d)=>fC(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),l5=(t,s,a)=>a.captureTab?D.some(!0):D.none(),u5=(t,s,a)=>a.onEscape(t,s),d5=xE(e7),m5=xE(i5),f5=xE(BK),g5=xE($K),s7=ae([Kn(qt(dt),wE(d5,m5)),Kn(qt(nt),c3(d5,m5)),Kn(qt(zt),o5(f5)),Kn(qt(rn),s5(g5)),Kn(Ko([Tc,qt(_e)]),l5),Kn(Ko([yu,qt(_e)]),l5),Kn(qt(it.concat(et)),o7)]),h5=ae([Kn(qt(kt),u5),Kn(qt(it),mf)]);var r7=Cu(t7,CE,s7,h5,()=>D.some(n7));const EE=(t,s,a,i,d)=>{const g=w=>Bs(w)==="button"&&$n(w,"disabled")==="disabled",h=(w,x,A)=>d(w,x,i,0,A.length-1,A[x],M=>g(A[M])?h(w,M,A):D.from(A[M]));return fC(t,a,s).bind(w=>{const x=w.index,A=w.candidates;return h(x,x,A)})},d3=(t,s,a,i)=>EE(t,s,a,i,(d,g,h,w,x,A,M)=>{const L=Pl(g+h,w,x);return L===d?D.from(A):M(L)}),gC=(t,s,a,i)=>EE(t,s,a,i,(d,g,h,w,x,A,M)=>{const L=fp(g,h,w,x);return L===d?D.none():M(L)}),p5=[Ze("selector"),Se("getInitial",D.none),Se("execute",ta),Sc("onEscape"),Se("executeOnMove",!1),Se("allowVertical",!0),Se("allowHorizontal",!0),Se("cycles",!0)],a7=(t,s)=>s.focusManager.get(t).bind(a=>gu(a,s.selector)),m3=(t,s,a)=>a7(t,a).bind(i=>a.execute(t,s,i)),c7=(t,s,a)=>{s.getInitial(t).orThunk(()=>ho(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},b5=(t,s,a)=>(a.cycles?gC:d3)(t,a.selector,s,-1),v5=(t,s,a)=>(a.cycles?gC:d3)(t,a.selector,s,1),Dv=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?m3(s,a,i):D.some(!0)),y5=(t,s,a)=>a.onEscape(t,s),C5=(t,s,a,i)=>{const d=[...a.allowHorizontal?dt:[]].concat(a.allowVertical?zt:[]),g=[...a.allowHorizontal?nt:[]].concat(a.allowVertical?rn:[]);return[Kn(qt(d),Dv(wE(b5,v5))),Kn(qt(g),Dv(c3(b5,v5))),Kn(qt(et),m3),Kn(qt(it),m3)]},w5=ae([Kn(qt(it),mf),Kn(qt(kt),y5)]);var S5=Cu(p5,Dl.init,C5,w5,()=>D.some(c7));const hC=(t,s,a)=>D.from(t[s]).bind(i=>D.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),x5=(t,s,a,i)=>{const g=t[s].length,h=fp(a,i,0,g-1);return hC(t,s,h)},E5=(t,s,a,i)=>{const d=fp(a,i,0,t.length-1),g=t[d].length,h=Pl(s,0,g-1);return hC(t,d,h)},T5=(t,s,a,i)=>{const g=t[s].length,h=Pl(a+i,0,g-1);return hC(t,s,h)},TE=(t,s,a,i)=>{const d=Pl(a+i,0,t.length-1),g=t[d].length,h=Pl(s,0,g-1);return hC(t,d,h)},i7=(t,s,a)=>x5(t,s,a,1),_E=(t,s,a)=>x5(t,s,a,-1),l7=(t,s,a)=>E5(t,a,s,-1),_5=(t,s,a)=>E5(t,a,s,1),Ri=(t,s,a)=>T5(t,s,a,-1),u7=(t,s,a)=>T5(t,s,a,1),k5=(t,s,a)=>TE(t,a,s,-1),A5=(t,s,a)=>TE(t,a,s,1),d7=[ru("selectors",[Ze("row"),Ze("cell")]),Se("cycles",!0),Se("previousSelector",D.none),Se("execute",ta)],O5=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return ho(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},R5=(t,s,a)=>Ec(t.element).bind(i=>a.execute(t,s,i)),m7=(t,s)=>Ge(t,a=>jc(a,s.selectors.cell)),kE=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return gu(i,d.selectors.row).bind(h=>{const w=jc(h,d.selectors.cell);return Lp(w,i).bind(x=>{const A=jc(a,d.selectors.row);return Lp(A,h).bind(M=>{const L=m7(A,d);return g(L,M,x).map(W=>W.cell)})})})},D5=kE(_E,Ri),M5=kE(i7,u7),N5=kE(l7,k5),f7=kE(_5,A5),g7=ae([Kn(qt(dt),wE(D5,M5)),Kn(qt(nt),c3(D5,M5)),Kn(qt(zt),o5(N5)),Kn(qt(rn),s5(f7)),Kn(qt(it.concat(et)),R5)]),P5=ae([Kn(qt(it),mf)]);var B5=Cu(d7,Dl.init,g7,P5,()=>D.some(O5));const $5=[Ze("selector"),Se("execute",ta),Se("moveOnTab",!1)],I5=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),h7=(t,s,a)=>{ho(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},L5=(t,s,a)=>gC(t,a.selector,s,-1),F5=(t,s,a)=>gC(t,a.selector,s,1),H5=(t,s,a,i)=>a.moveOnTab?Rv(L5)(t,s,a,i):D.none(),z5=(t,s,a,i)=>a.moveOnTab?Rv(F5)(t,s,a,i):D.none(),Fp=ae([Kn(qt(zt),Rv(L5)),Kn(qt(rn),Rv(F5)),Kn(Ko([Tc,qt(_e)]),H5),Kn(Ko([yu,qt(_e)]),z5),Kn(qt(et),I5),Kn(qt(it),I5)]),V5=ae([Kn(qt(it),mf)]);var U5=Cu($5,Dl.init,Fp,V5,()=>D.some(h7));const W5=[Sc("onSpace"),Sc("onEnter"),Sc("onShiftEnter"),Sc("onLeft"),Sc("onRight"),Sc("onTab"),Sc("onShiftTab"),Sc("onUp"),Sc("onDown"),Sc("onEscape"),Se("stopSpaceKeyup",!1),lo("focusIn")],p7=(t,s,a)=>[Kn(qt(it),a.onSpace),Kn(Ko([yu,qt(et)]),a.onEnter),Kn(Ko([Tc,qt(et)]),a.onShiftEnter),Kn(Ko([Tc,qt(_e)]),a.onShiftTab),Kn(Ko([yu,qt(_e)]),a.onTab),Kn(qt(zt),a.onUp),Kn(qt(rn),a.onDown),Kn(qt(dt),a.onLeft),Kn(qt(nt),a.onRight),Kn(qt(it),a.onSpace)],Mv=(t,s,a)=>[...a.stopSpaceKeyup?[Kn(qt(it),mf)]:[],Kn(qt(kt),a.onEscape)];var b7=Cu(W5,Dl.init,p7,Mv,t=>t.focusIn);const v7=iC.schema(),Z5=wb.schema(),y7=S5.schema(),C7=r7.schema(),w7=B5.schema(),j5=dC.schema(),f3=U5.schema(),g3=b7.schema();var S7=Object.freeze({__proto__:null,acyclic:v7,cyclic:Z5,flow:y7,flatgrid:C7,matrix:w7,execution:j5,menu:f3,special:g3});const Hp=t=>Ur(t,"setGridSize"),Gt=vS({branchKey:"mode",branches:S7,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{Hp(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:a3}),h3=(t,s)=>{i2(()=>{fb(t,s,()=>Ge(s,t.getSystem().build))},t.element)},q5=(t,s)=>{i2(()=>{Wx(t,s,()=>HS(t.element,s,t.getSystem().buildOrPatch))},t.element)},x7=(t,s,a,i)=>{mv(s);const d=fu(t.element,a,i,t.getSystem().buildOrPatch);Vx(t,d),t.syncComponents()},xb=(t,s,a)=>{const i=t.getSystem().build(a);sl(t,i,s)},pC=(t,s,a,i)=>{ad(s),xb(t,(d,g)=>Fm(d,g,a),i)},G5=(t,s,a,i)=>(s.reuseDom?q5:h3)(t,i),p3=(t,s,a,i)=>{xb(t,Bc,i)},zp=(t,s,a,i)=>{xb(t,Lm,i)},Vp=(t,s,a,i)=>{const d=AE(t);gn(d,h=>Xn(i.element,h.element)).each(ad)},AE=(t,s)=>t.components(),K5=(t,s,a,i,d)=>{const g=AE(t);return D.from(g[i]).map(h=>(d.fold(()=>ad(h),w=>{(s.reuseDom?x7:pC)(t,h,i,w)}),h))};var hh=Object.freeze({__proto__:null,append:p3,prepend:zp,remove:Vp,replaceAt:K5,replaceBy:(t,s,a,i,d)=>{const g=AE(t);return vo(g,i).bind(h=>K5(t,s,a,h,d))},set:G5,contents:AE});const Cn=ar({fields:[Fs("reuseDom",!0)],name:"replacing",apis:hh}),T7=(t,s)=>{const a=rs(s);return ar({fields:[Ze("enabled")],name:t,active:{events:ae(a)}})},Sn=(t,s)=>{const a=T7(t,s);return{key:t,value:{config:{},me:a,configAsRaw:ae({}),initialConfig:{},state:Dl}}},b3=(t,s)=>{s.ignore||(xc(t.element),s.onFocus(t))};var X5=Object.freeze({__proto__:null,focus:b3,blur:(t,s)=>{s.ignore||om(t.element)},isFocused:t=>Jr(t.element)}),k7=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return mu(a)},events:t=>rs([ze(Kd(),(s,a)=>{b3(s,t),a.stop()})].concat(t.stopMousedown?[ze(Fc(),(s,a)=>{a.event.prevent()})]:[]))}),OE=[so("onFocus"),Se("stopMousedown",!1),Se("ignore",!1)];const dn=ar({fields:OE,name:"focusing",active:k7,apis:X5}),RE=t=>({init:()=>{const a=Wt(t);return{get:()=>a.get(),set:w=>a.set(w),clear:()=>a.set(t),readState:()=>a.get()}}}),J5=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},A7=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?Ks(t.element,i):Qs(t.element,i)})},Nv=(t,s,a,i)=>{const d=a.get();a.set(i),A7(t,s,a),J5(t,s,a),d!==i&&s.onToggled(t,i)},v3=(t,s,a)=>{Nv(t,s,a,!a.get())},Q5=(t,s,a)=>{Nv(t,s,a,!0)},eN=(t,s,a)=>{Nv(t,s,a,!1)},O7=(t,s,a)=>a.get(),DE=(t,s,a)=>{Nv(t,s,a,s.selected)};var R7=Object.freeze({__proto__:null,onLoad:DE,toggle:v3,isOn:O7,on:Q5,off:eN,set:Nv}),D7=Object.freeze({__proto__:null,exhibit:()=>mu({}),events:(t,s)=>{const a=op(t,s,v3),i=Dy(t,s,DE);return rs(hn([t.toggleOnExecute?[a]:[],[i]]))}});const tN=(t,s,a)=>{je(t.element,"aria-pressed",a),s.syncWithExpanded&&y3(t,s,a)},M7=(t,s,a)=>{je(t.element,"aria-selected",a)},N7=(t,s,a)=>{je(t.element,"aria-checked",a)},y3=(t,s,a)=>{je(t.element,"aria-expanded",a)};var bC=[Se("selected",!1),lo("toggleClass"),Se("toggleOnExecute",!0),so("onToggled"),ti("aria",{mode:"none"},Or("mode",{pressed:[Se("syncWithExpanded",!1),us("update",tN)],checked:[us("update",N7)],expanded:[us("update",y3)],selected:[us("update",M7)],none:[us("update",le)]}))];const Ln=ar({fields:bC,name:"toggling",active:D7,apis:R7,state:RE(!1)}),Pv=()=>{const t=(s,a)=>{a.stop(),Hc(s)};return[ze(Gd(),t),ze(T1(),t),Wf(jn()),Wf(Fc())]},Bv=t=>{const s=a=>Qm((i,d)=>{a(i),d.stop()});return rs(hn([t.map(s).toArray(),Pv()]))},C3="alloy.item-hover",w3="alloy.item-focus",nN="alloy.item-toggled",oN=t=>{(Ec(t.element).isNone()||dn.isFocused(t))&&(dn.isFocused(t)||dn.focus(t),Kt(t,C3,{item:t}))},S3=t=>{Kt(t,w3,{item:t})},P7=(t,s)=>{Kt(t,nN,{item:t,state:s})},x3=ae(C3),B7=ae(w3),$7=ae(nN),sN=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),bn),ME=(t,s)=>({aria:{mode:s?"selected":"checked"},...vl(t,(a,i)=>i!=="exclusive"),onToggled:(a,i)=>{Ae(t.onToggled)&&t.onToggled(a,i),P7(a,i)}}),E3=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:sN(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:al.augment(t.itemBehaviours,[t.toggling.fold(Ln.revoke,s=>Ln.config(ME(s,t.role.exists(a=>a==="option")))),dn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{S3(s)}}),Gt.config({mode:"execution"}),Dt.config({store:{mode:"memory",initialValue:t.data}}),Sn("item-type-events",[...Pv(),ze(cu(),oN),ze(Lg(),dn.focus)])]),components:t.components,eventOrder:t.eventOrder}),T3=[Ze("data"),Ze("components"),Ze("dom"),Se("hasSubmenu",!1),lo("toggling"),lo("role"),al.field("itemBehaviours",[Ln,dn,Gt,Dt]),Se("ignoreFocus",!1),Se("domModification",{}),us("builder",E3),Se("eventOrder",{})],I7=t=>({dom:t.dom,components:t.components,events:rs([S0(Lg())])}),L7=[Ze("dom"),Ze("components"),us("builder",I7)],_3=ae("item-widget"),k3=ae([qa({name:"widget",overrides:t=>({behaviours:at([Dt.config({store:{mode:"manual",getValue:s=>t.data,setValue:le}})])})})]),rN=t=>{const s=xv(_3(),t,k3()),a=Y2(_3(),t,s.internals()),i=g=>Go(g,t,"widget").map(h=>(Gt.focusIn(h),h)),d=(g,h)=>Bp(h.event.target)?D.none():(t.autofocus&&h.setSource(g.element),D.none());return{dom:t.dom,components:a,domModification:t.domModification,events:rs([Qm((g,h)=>{i(g).each(w=>{h.stop()})}),ze(cu(),oN),ze(Lg(),(g,h)=>{t.autofocus?i(g):dn.focus(g)})]),behaviours:al.augment(t.widgetBehaviours,[Dt.config({store:{mode:"memory",initialValue:t.data}}),dn.config({ignore:t.ignoreFocus,onFocus:g=>{S3(g)}}),Gt.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:D1(),onLeft:d,onRight:d,onEscape:(g,h)=>!dn.isFocused(g)&&!t.autofocus?(dn.focus(g),D.some(!0)):(t.autofocus&&h.setSource(g.element),D.none())})])}},aN=[Ze("uid"),Ze("data"),Ze("components"),Ze("dom"),Se("autofocus",!1),Se("ignoreFocus",!1),al.field("widgetBehaviours",[Dt,dn,Gt]),Se("domModification",{}),Pp(k3()),us("builder",rN)],F7=Or("type",{widget:aN,item:T3,separator:L7}),H7=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),z7=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),V7=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),U7=ae([gh({factory:{sketch:t=>{const s=sc("menu.spec item",F7,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Yn(s,"uid")?s:{...s,uid:Kg("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),W7=ae([Ms("role"),Ze("value"),Ze("items"),Ze("dom"),Ze("components"),Se("eventOrder",{}),ga("menuBehaviours",[Q,Dt,eo,Gt]),ti("movement",{mode:"menu",moveOnTab:!0},Or("mode",{grid:[eg(),us("config",H7)],matrix:[us("config",z7),Ze("rowSelector"),Se("previousSelector",D.none)],menu:[Se("moveOnTab",!0),us("config",V7)]})),Hy(),Se("fakeFocus",!1),Se("focusManager",ea()),so("onHighlight"),so("onDehighlight"),Se("showMenuRole",!0)]),A3=ae("alloy.menu-focus"),Z7=(t,s)=>{const a=jc(t.element,'[role="menuitemradio"][aria-checked="true"]');pt(a,i=>{Xn(i,s.element)||t.getSystem().getByDom(i).each(d=>{Ln.off(d)})})},j7=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:cr(t.menuBehaviours,[Q.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Dt.config({store:{mode:"memory",initialValue:t.value}}),eo.config({find:D.some}),Gt.config(t.movement.config(t,t.movement))]),events:rs([ze(B7(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(w=>{Q.highlight(d,w),g.stop(),Kt(d,A3(),{menu:d,item:w})})}),ze(x3(),(d,g)=>{const h=g.event.item;Q.highlight(d,h)}),ze($7(),(d,g)=>{const{item:h,state:w}=g.event;w&&$n(h.element,"role")==="menuitemradio"&&Z7(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Eb=lc({name:"Menu",configFields:W7(),partFields:U7(),factory:j7}),q7=t=>jl(t,(s,a)=>({k:s,v:a})),cN=(t,s,a,i)=>bt(a,i).bind(d=>bt(t,d).bind(g=>{const h=cN(t,s,a,g);return D.some([g].concat(h))})).getOr([]),Tb=(t,s)=>{const a={};As(t,(h,w)=>{pt(h,x=>{a[x]=w})});const i=s,d=q7(s),g=To(d,(h,w)=>[w].concat(cN(a,i,d,w)));return To(a,h=>bt(g,h).getOr([h]))},G7=()=>{const t=Wt({}),s=Wt({}),a=Wt({}),i=go(),d=Wt({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},h=()=>i.get().isNone(),w=(Ne,xt)=>{s.set({...s.get(),[Ne]:{type:"prepared",menu:xt}})},x=(Ne,xt,ot,$e)=>{i.set(Ne),t.set(ot),s.set(xt),d.set($e);const Rt=Tb($e,ot);a.set(Rt)},A=Ne=>is(t.get(),(xt,ot)=>xt===Ne),M=(Ne,xt,ot)=>oe(Ne).bind($e=>A(Ne).bind(Rt=>xt(Rt).map(yt=>({triggeredMenu:$e,triggeringItem:yt,triggeringPath:ot})))),L=(Ne,xt)=>{const ot=ko(ie(Ne).toArray(),$e=>oe($e).isSome());return bt(a.get(),Ne).bind($e=>{const Rt=nr(ot.concat($e)),yt=Te(Rt,($t,Hn)=>M($t,xt,Rt.slice(0,Hn+1)).fold(()=>Wr(i.get(),$t)?[]:[D.none()],Yo=>[D.some(Yo)]));return Wo(yt)})},W=Ne=>bt(t.get(),Ne).map(xt=>{const ot=bt(a.get(),Ne).getOr([]);return[xt].concat(ot)}),Y=Ne=>bt(a.get(),Ne).bind(xt=>xt.length>1?D.some(xt.slice(1)):D.none()),ne=Ne=>bt(a.get(),Ne),oe=Ne=>ye(Ne).bind(iN),ye=Ne=>bt(s.get(),Ne),ie=Ne=>bt(t.get(),Ne);return{setMenuBuilt:w,setContents:x,expand:W,refresh:ne,collapse:Y,lookupMenu:ye,lookupItem:ie,otherMenus:Ne=>{const xt=d.get();return Qt(Uo(xt),Ne)},getPrimary:()=>i.get().bind(oe),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:L}},iN=t=>t.type==="prepared"?D.some(t.menu):D.none(),Up={init:G7,extractPreparedMenu:iN},O3=Mt("tiered-menu-item-highlight"),lN=Mt("tiered-menu-item-dehighlight");var ha;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ha||(ha={}));const K7=(t,s)=>{const a=go(),i=(st,At,pn)=>To(pn,(Pn,nn)=>{const _n=()=>Eb.sketch({...Pn,value:nn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Fo,Do)=>{Kt(Fo,O3,{menuComp:Fo,itemComp:Do})},onDehighlight:(Fo,Do)=>{Kt(Fo,lN,{menuComp:Fo,itemComp:Do})},focusManager:t.fakeFocus?Ll():ea()});return nn===At?{type:"prepared",menu:st.getSystem().build(_n())}:{type:"notbuilt",nbMenu:_n}}),d=Up.init(),g=st=>{const At=i(st,t.data.primary,t.data.menus),pn=x();return d.setContents(t.data.primary,At,t.data.expansions,pn),d.getPrimary()},h=st=>Dt.getValue(st).value,w=(st,At,pn)=>ks(At,Pn=>{if(!Pn.getSystem().isConnected())return D.none();const nn=Q.getCandidates(Pn);return gn(nn,_n=>h(_n)===pn)}),x=st=>To(t.data.menus,(At,pn)=>Te(At.items,Pn=>Pn.type==="separator"?[]:[Pn.data.value])),A=Q.highlight,M=(st,At)=>{A(st,At),Q.getHighlighted(At).orThunk(()=>Q.getFirst(At)).each(pn=>{t.fakeFocus?Q.highlight(At,pn):y0(st,pn.element,Lg())})},L=(st,At)=>pi(Ge(At,pn=>st.lookupMenu(pn).bind(Pn=>Pn.type==="prepared"?D.some(Pn.menu):D.none()))),W=(st,At,pn)=>{const Pn=L(At,At.otherMenus(pn));pt(Pn,nn=>{Ml(nn.element,[t.markers.backgroundMenu]),t.stayInDom||Cn.remove(st,nn)})},Y=st=>a.get().getOrThunk(()=>{const At={},pn=jc(st.element,`.${t.markers.item}`),Pn=ko(pn,nn=>$n(nn,"aria-haspopup")==="true");return pt(Pn,nn=>{st.getSystem().getByDom(nn).each(_n=>{const Fo=h(_n);At[Fo]=_n})}),a.set(At),At}),ne=(st,At)=>{const pn=Y(st);As(pn,(Pn,nn)=>{const _n=zo(At,nn);je(Pn.element,"aria-expanded",_n)})},oe=(st,At,pn)=>D.from(pn[0]).bind(Pn=>At.lookupMenu(Pn).bind(nn=>{if(nn.type==="notbuilt")return D.none();{const _n=nn.menu,Fo=L(At,pn.slice(1));return pt(Fo,Do=>{Ks(Do.element,t.markers.backgroundMenu)}),ce(_n.element)||Cn.append(st,Ai(_n)),Ml(_n.element,[t.markers.backgroundMenu]),M(st,_n),W(st,At,pn),D.some(_n)}}));let ye;(function(st){st[st.HighlightSubmenu=0]="HighlightSubmenu",st[st.HighlightParent=1]="HighlightParent"})(ye||(ye={}));const ie=(st,At,pn)=>{if(pn.type==="notbuilt"){const Pn=st.getSystem().build(pn.nbMenu());return d.setMenuBuilt(At,Pn),Pn}else return pn.menu},we=(st,At,pn=ye.HighlightSubmenu)=>{if(At.hasConfigured(Ft)&&Ft.isDisabled(At))return D.some(At);{const Pn=h(At);return d.expand(Pn).bind(nn=>(ne(st,nn),D.from(nn[0]).bind(_n=>d.lookupMenu(_n).bind(Fo=>{const Do=ie(st,_n,Fo);return ce(Do.element)||Cn.append(st,Ai(Do)),t.onOpenSubmenu(st,At,Do,nr(nn)),pn===ye.HighlightSubmenu?(Q.highlightFirst(Do),oe(st,d,nn)):(Q.dehighlightAll(Do),D.some(At))}))))}},ve=(st,At)=>{const pn=h(At);return d.collapse(pn).bind(Pn=>(ne(st,Pn),oe(st,d,Pn).map(nn=>(t.onCollapseMenu(st,At,nn),nn))))},Re=(st,At)=>{const pn=h(At);return d.refresh(pn).bind(Pn=>(ne(st,Pn),oe(st,d,Pn)))},Ne=(st,At)=>Bp(At.element)?D.none():we(st,At,ye.HighlightSubmenu),xt=(st,At)=>Bp(At.element)?D.none():ve(st,At),ot=(st,At)=>ve(st,At).orThunk(()=>t.onEscape(st,At).map(()=>st)),$e=st=>(At,pn)=>gu(pn.getSource(),`.${t.markers.item}`).bind(Pn=>At.getSystem().getByDom(Pn).toOptional().bind(nn=>st(At,nn).map(Ut))),Rt=rs([ze(A3(),(st,At)=>{const pn=At.event.item;d.lookupItem(h(pn)).each(()=>{const Pn=At.event.menu;Q.highlight(st,Pn);const nn=h(At.event.item);d.refresh(nn).each(_n=>W(st,d,_n))})}),Qm((st,At)=>{const pn=At.event.target;st.getSystem().getByDom(pn).each(Pn=>{h(Pn).indexOf("collapse-item")===0&&ve(st,Pn),we(st,Pn,ye.HighlightSubmenu).fold(()=>{t.onExecute(st,Pn)},le)})}),Bo((st,At)=>{g(st).each(pn=>{Cn.append(st,Ai(pn)),t.onOpenMenu(st,pn),t.highlightOnOpen===ha.HighlightMenuAndItem?M(st,pn):t.highlightOnOpen===ha.HighlightJustMenu&&A(st,pn)})}),ze(O3,(st,At)=>{t.onHighlightItem(st,At.event.menuComp,At.event.itemComp)}),ze(lN,(st,At)=>{t.onDehighlightItem(st,At.event.menuComp,At.event.itemComp)}),...t.navigateOnHover?[ze(x3(),(st,At)=>{const pn=At.event.item;Re(st,pn),we(st,pn,ye.HighlightParent),t.onHover(st,pn)})]:[]]),yt=st=>Q.getHighlighted(st).bind(Q.getHighlighted),$t=st=>{yt(st).each(At=>{ve(st,At)})},Hn=st=>{d.getPrimary().each(At=>{M(st,At)})},Yo=st=>D.from(st.components()[0]).filter(At=>$n(At.element,"role")==="menu"),jt={collapseMenu:$t,highlightPrimary:Hn,repositionMenus:st=>{d.getPrimary().bind(pn=>yt(st).bind(Pn=>{const nn=h(Pn),_n=Tm(d.getMenus()),Fo=pi(Ge(_n,Up.extractPreparedMenu));return d.getTriggeringPath(nn,Do=>w(st,Fo,Do))}).map(Pn=>({primary:pn,triggeringPath:Pn}))).fold(()=>{Yo(st).each(pn=>{t.onRepositionMenu(st,pn,[])})},({primary:pn,triggeringPath:Pn})=>{t.onRepositionMenu(st,pn,Pn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:cr(t.tmenuBehaviours,[Gt.config({mode:"special",onRight:$e(Ne),onLeft:$e(xt),onEscape:$e(ot),focusIn:(st,At)=>{d.getPrimary().each(pn=>{y0(st,pn.element,Lg())})}}),Q.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),eo.config({find:st=>Q.getHighlighted(st)}),Cn.config({})]),eventOrder:t.eventOrder,apis:jt,events:Rt}},Y7=ae("collapse-item"),id=(t,s,a)=>({primary:t,menus:s,expansions:a}),uN=(t,s)=>({primary:t,menus:wo(t,s),expansions:{}}),dN=t=>({value:Mt(Y7()),meta:{text:t}}),Wp=li({name:"TieredMenu",configFields:[zy("onExecute"),zy("onEscape"),nl("onOpenMenu"),nl("onOpenSubmenu"),so("onRepositionMenu"),so("onCollapseMenu"),Se("highlightOnOpen",ha.HighlightMenuAndItem),ru("data",[Ze("primary"),Ze("menus"),Ze("expansions")]),Se("fakeFocus",!1),so("onHighlightItem"),so("onDehighlightItem"),so("onHover"),z1(),Ze("dom"),Se("navigateOnHover",!0),Se("stayInDom",!1),ga("tmenuBehaviours",[Gt,Q,eo,Cn]),Se("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:K7,extraApis:{tieredData:id,singleData:uN,collapseItem:dN}}),X7=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>Lt(),onRtl:()=>Qg()}}:{},w=A=>A.length===2,x=A=>w(A)?h:{};return Wp.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(ro.close(s),t.onEscape.map(A=>A(s)),D.some(!0)),onExecute:()=>D.some(!0),onOpenMenu:(A,M)=>{Za.positionWithinBounds(g().getOrDie(),M,a,d())},onOpenSubmenu:(A,M,L,W)=>{const Y=g().getOrDie();Za.position(Y,L,{anchor:{type:"submenu",item:M,...x(W)}})},onRepositionMenu:(A,M,L)=>{const W=g().getOrDie();Za.positionWithinBounds(W,M,a,d()),pt(L,Y=>{const ne=x(Y.triggeringPath);Za.position(W,Y.triggeredMenu,{anchor:{type:"submenu",item:Y.triggeringItem,...ne}})})}})},NE=(t,s)=>{const a=(W,Y)=>t.getRelated(W).exists(oe=>tg(oe,Y)),i=(W,Y)=>{ro.setContent(W,Y)},d=(W,Y,ne)=>{const oe=D.none;g(W,Y,ne,oe)},g=(W,Y,ne,oe)=>{const ye=t.lazySink(W).getOrDie();ro.openWhileCloaked(W,Y,()=>Za.positionWithinBounds(ye,W,ne,oe())),Dt.setValue(W,D.some({mode:"position",config:ne,getBounds:oe}))},h=(W,Y,ne)=>{w(W,Y,ne,D.none)},w=(W,Y,ne,oe)=>{const ye=X7(t,W,Y,ne,oe);ro.open(W,ye),Dt.setValue(W,D.some({mode:"menu",menu:ye}))},x=W=>{ro.isOpen(W)&&(Dt.setValue(W,D.none()),ro.close(W))},A=W=>ro.getState(W),M=W=>{ro.isOpen(W)&&Dt.getValue(W).each(Y=>{switch(Y.mode){case"menu":ro.getState(W).each(Wp.repositionMenus);break;case"position":const ne=t.lazySink(W).getOrDie();Za.positionWithinBounds(ne,W,Y.config,Y.getBounds());break}})},L={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:w,hide:x,getContent:A,reposition:M,isOpen:ro.isOpen};return{uid:t.uid,dom:t.dom,behaviours:cr(t.inlineBehaviours,[ro.config({isPartOf:(W,Y,ne)=>tg(Y,ne)||a(W,ne),getAttachPoint:W=>t.lazySink(W).getOrDie(),onOpen:W=>{t.onShow(W)},onClose:W=>{t.onHide(W)}}),Dt.config({store:{mode:"memory",initialValue:D.none()}}),ai.config({channels:{...Oi({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(W=>({fireEventInstead:{event:W.event}})).getOr({})}),...ih({...t.fireRepositionEventInstead.map(W=>({fireEventInstead:{event:W.event}})).getOr({}),doReposition:M})}})]),eventOrder:t.eventOrder,apis:L}},Ps=li({name:"InlineView",configFields:[Ze("lazySink"),so("onShow"),so("onHide"),Ju("onEscape"),ga("inlineBehaviours",[ro,Dt,ai]),Oa("fireDismissalEventInstead",[Se("event",Vf())]),Oa("fireRepositionEventInstead",[Se("event",Fg())]),Se("getRelated",D.none),Se("isExtraPart",fo),Se("eventOrder",D.none)],factory:NE,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var PE=tinymce.util.Tools.resolve("tinymce.util.Delay"),vC=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),BE=tinymce.util.Tools.resolve("tinymce.EditorManager"),Zp=tinymce.util.Tools.resolve("tinymce.Env"),wu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(wu||(wu={}));var $v;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})($v||($v={}));const $o=t=>s=>s.options.get(t),yC=t=>s=>D.from(t(s)),$E=t=>{const s=Zp.deviceType.isPhone(),a=Zp.deviceType.isTablet()||s,i=t.options.register,d=h=>se(h)||h===!1,g=h=>se(h)||On(h);i("skin",{processor:h=>se(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:vC.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>se(h)||en(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>en(h)||se(h)||Fe(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Co(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:$v.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||en(h),default:!Zp.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},R3=$o("readonly"),IE=$o("disabled"),D3=$o("height"),M3=$o("width"),CC=yC($o("min_width")),N3=yC($o("min_height")),jp=yC($o("max_width")),Iv=yC($o("max_height")),P3=yC($o("style_formats")),B3=$o("style_formats_merge"),mN=$o("style_formats_autohide"),fN=$o("content_langs"),gN=$o("removed_menuitems"),Lv=$o("toolbar_mode"),LE=$o("toolbar_groups"),FE=$o("toolbar_location"),hN=$o("fixed_toolbar_container"),$3=$o("fixed_toolbar_container_target"),pN=$o("toolbar_persist"),I3=$o("toolbar_sticky_offset"),bN=$o("menubar"),HE=$o("toolbar"),vN=$o("file_picker_callback"),L3=$o("file_picker_validator_handler"),yN=$o("font_size_input_default_unit"),CN=$o("file_picker_types"),zE=$o("typeahead_urls"),F3=$o("anchor_top"),H3=$o("anchor_bottom"),wN=$o("draggable_modal"),VE=$o("statusbar"),SN=$o("elementpath"),z3=$o("branding"),xN=$o("resize"),EN=$o("paste_as_text"),TN=$o("sidebar_show"),V3=$o("promotion"),UE=$o("help_accessibility"),_N=$o("default_font_stack"),wC=$o("skin"),U3=t=>t.options.get("skin")===!1,WE=t=>t.options.get("menubar")!==!1,kN=t=>{const s=t.options.get("skin_url");if(U3(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return BE.baseURL+"/skins/ui/"+a}},J7=t=>D.from(t.options.get("skin_url")),AN=t=>t.options.get("line_height_formats").split(" "),ZE=t=>{const s=HE(t),a=se(s),i=Fe(s)&&s.length>0;return!SC(t)&&(i||a||s===!0)},jE=t=>{const s=Co(9,i=>t.options.get("toolbar"+(i+1))),a=ko(s,se);return an(a.length>0,a)},SC=t=>jE(t).fold(()=>{const s=HE(t);return Tt(s,se)&&s.length>0},Ut),W3=t=>FE(t)===$v.bottom,qE=t=>{var s;if(!t.inline)return D.none();const a=(s=hN(t))!==null&&s!==void 0?s:"";if(a.length>0)return ho(be(),a);const i=$3(t);return cn(i)?D.some(ct.fromDom(i)):D.none()},dm=t=>t.inline&&qE(t).isSome(),Z3=t=>qE(t).getOrThunk(()=>fr(Ys(ct.fromDom(t.getElement())))),j3=t=>t.inline&&!WE(t)&&!ZE(t)&&!SC(t),qp=t=>(t.options.get("toolbar_sticky")||t.inline)&&!dm(t)&&!j3(t),ph=t=>!dm(t)&&t.options.get("ui_mode")==="split",ON=t=>{const s=t.options.get("menu");return To(s,a=>({...a,items:a.items}))};var Q7=Object.freeze({__proto__:null,get ToolbarMode(){return wu},get ToolbarLocation(){return $v},register:$E,getSkinUrl:kN,getSkinUrlOption:J7,isReadOnly:R3,isDisabled:IE,getSkin:wC,isSkinDisabled:U3,getHeightOption:D3,getWidthOption:M3,getMinWidthOption:CC,getMinHeightOption:N3,getMaxWidthOption:jp,getMaxHeightOption:Iv,getUserStyleFormats:P3,shouldMergeStyleFormats:B3,shouldAutoHideStyleFormats:mN,getLineHeightFormats:AN,getContentLanguages:fN,getRemovedMenuItems:gN,isMenubarEnabled:WE,isMultipleToolbars:SC,isToolbarEnabled:ZE,isToolbarPersist:pN,getMultipleToolbarsOption:jE,getUiContainer:Z3,useFixedContainer:dm,isSplitUiMode:ph,getToolbarMode:Lv,isDraggableModal:wN,isDistractionFree:j3,isStickyToolbar:qp,getStickyToolbarOffset:I3,getToolbarLocation:FE,isToolbarLocationBottom:W3,getToolbarGroups:LE,getMenus:ON,getMenubar:bN,getToolbar:HE,getFilePickerCallback:vN,getFilePickerTypes:CN,useTypeaheadUrls:zE,getAnchorTop:F3,getAnchorBottom:H3,getFilePickerValidatorHandler:L3,getFontSizeInputDefaultUnit:yN,useStatusBar:VE,useElementPath:SN,promotionEnabled:V3,useBranding:z3,getResize:xN,getPasteAsText:EN,getSidebarShow:TN,useHelpAccessibility:UE,getDefaultFontStack:_N});const RN=["visible","hidden","clip"],DN=t=>vi(t).length>0&&!zo(RN,t),q3=t=>{if(No(t)){const s=Qe(t,"overflow-x"),a=Qe(t,"overflow-y");return DN(s)||DN(a)}else return!1},G3=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),K3=(t,s)=>{const a=Rx(s,q3),i=a.length===0?Hu(s).map(Ad).map(d=>Rx(d,q3)).getOr([]):a;return Pr(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>G3(t)}))},Gp=(t,s)=>ph(t)?K3(t,s):D.none(),Kp=t=>{const s=[...Ge(t.others,Xs),hr()];return t.isFullscreen()?hr():Id(Xs(t.element),s)},na=li({name:"Button",factory:t=>{const s=Bv(t.action),a=t.dom.tag,i=g=>bt(t.dom,"attributes").bind(h=>bt(h,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),h=i("role").map(w=>({role:w})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:al.augment(t.buttonBehaviours,[dn.config({}),Gt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Se("uid",void 0),Ze("dom"),Se("components",[]),al.field("buttonBehaviours",[dn,Gt]),lo("action"),lo("role"),Se("eventOrder",{})]}),eH=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Vo(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},tH=t=>Array.prototype.slice.call(t.dom.classList,0),ff=t=>{const s=ct.fromHtml(t),a=mr(s),i=eH(s),d=tH(s),g=a.length===0?{}:{innerHtml:H1(s)};return{tag:Bs(s),classes:d,attributes:i,...g}},po=t=>{const s=hE(t)&&Ur(t,"uid")?t.uid:Kg("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var Y3=Object.freeze({__proto__:null,exhibit:(t,s)=>mu({attributes:So([{key:s.tabAttr,value:"true"}])})}),nH=[Se("tabAttr","data-alloy-tabstop")];const as=ar({fields:nH,name:"tabstopping",active:Y3}),GE=Mt("tooltip.exclusive"),xC=Mt("tooltip.show"),EC=Mt("tooltip.hide"),TC=Mt("tooltip.immediateHide"),_C=Mt("tooltip.immediateShow"),MN=(t,s,a)=>{t.getSystem().broadcastOn([GE],{})};var oH=Object.freeze({__proto__:null,hideAllExclusive:MN,immediateOpenClose:(t,s,a,i)=>Un(t,i?_C:TC),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Cn.set(d,i)})},setEnabled:(t,s,a,i)=>a.setEnabled(i)}),sH=Object.freeze({__proto__:null,events:(t,s)=>{const a=h=>{s.getTooltip().each(w=>{w.getSystem().isConnected()&&(ad(w),t.onHide(h,w),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()&&s.isEnabled()){MN(h);const w=t.lazySink(h).getOrDie(),x=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:rs(t.mode==="normal"?[ze(cu(),A=>{Un(h,xC)}),ze(Zd(),A=>{Un(h,EC)})]:[]),behaviours:at([Cn.config({})])});s.setTooltip(x),ah(w,x),t.onShow(h,x),Za.position(w,x,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(w=>{const x=t.lazySink(h).getOrDie();Za.position(x,w,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[ze(iu(),h=>{Un(h,_C)}),ze(Ym(),h=>{Un(h,TC)}),ze(cu(),h=>{Un(h,xC)}),ze(Zd(),h=>{Un(h,EC)})];case"follow-highlight":return[ze(b0(),(h,w)=>{Un(h,xC)}),ze(v0(),h=>{Un(h,EC)})];case"children-normal":return[ze(iu(),(h,w)=>{Ec(h.element).each(x=>{jo(w.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Un(h,_C)},A=>{s.isShowing()&&(t.onShow(h,A),d(h))})})}),ze(Ym(),h=>{Ec(h.element).fold(()=>{Un(h,TC)},le)}),ze(cu(),h=>{ho(h.element,"[data-mce-tooltip]:hover").each(w=>{s.getTooltip().fold(()=>{Un(h,xC)},x=>{s.isShowing()&&(t.onShow(h,x),d(h))})})}),ze(Zd(),h=>{ho(h.element,"[data-mce-tooltip]:hover").fold(()=>{Un(h,EC)},le)})];default:return[ze(iu(),(h,w)=>{Ec(h.element).each(x=>{jo(w.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Un(h,_C)},A=>{s.isShowing()&&(t.onShow(h,A),d(h))})})}),ze(Ym(),h=>{Ec(h.element).fold(()=>{Un(h,TC)},le)})]}};return rs(hn([[hS(h=>{t.onSetup(h)}),ze(xC,h=>{s.resetTimer(()=>{i(h)},t.delayForShow())}),ze(EC,h=>{s.resetTimer(()=>{a(h)},t.delayForHide())}),ze(_C,h=>{s.resetTimer(()=>{i(h)},0)}),ze(TC,h=>{s.resetTimer(()=>{a(h)},0)}),ze(lu(),(h,w)=>{const x=w;x.universal||zo(x.channels,GE)&&a(h)}),ed(h=>{a(h)})],g()]))}}),X3=[Ze("lazySink"),Ze("tooltipDom"),Se("exclusive",!0),Se("tooltipComponents",[]),Po("delayForShow",ae(300)),Po("delayForHide",ae(100)),Po("onSetup",le),Qi("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Se("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:ae([Hr,Xr,br,Ma,Mr,vr]),onRtl:ae([Hr,Xr,br,Ma,Mr,vr])},bubble:Wc(0,-2,{})})),so("onHide"),so("onShow")],rH=Object.freeze({__proto__:null,init:()=>{const t=Wt(!0),s=go(),a=go(),i=()=>{s.on(clearTimeout)},d=(h,w)=>{i(),s.set(setTimeout(h,w))},g=ae("not-implemented");return el({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:h=>t.set(h)})}});const Hs=ar({fields:X3,name:"tooltipping",active:sH,state:rH,apis:oH});/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:J3,setPrototypeOf:NN,isFrozen:aH,getPrototypeOf:cH,getOwnPropertyDescriptor:iH}=Object;let{freeze:Fl,seal:mm,create:KE}=Object,{apply:Q3,construct:eA}=typeof Reflect<"u"&&Reflect;Fl||(Fl=function(s){return s}),mm||(mm=function(s){return s}),Q3||(Q3=function(s,a,i){return s.apply(a,i)}),eA||(eA=function(s,a){return new s(...a)});const YE=Di(Array.prototype.forEach),lH=Di(Array.prototype.lastIndexOf),PN=Di(Array.prototype.pop),kC=Di(Array.prototype.push),uH=Di(Array.prototype.splice),XE=Di(String.prototype.toLowerCase),tA=Di(String.prototype.toString),BN=Di(String.prototype.match),AC=Di(String.prototype.replace),dH=Di(String.prototype.indexOf),mH=Di(String.prototype.trim),gf=Di(Object.prototype.hasOwnProperty),ui=Di(RegExp.prototype.test),OC=fH(TypeError);function Di(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return Q3(t,s,i)}}function fH(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return eA(t,a)}}function ds(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:XE;NN&&NN(t,null);let i=s.length;for(;i--;){let d=s[i];if(typeof d=="string"){const g=a(d);g!==d&&(aH(s)||(s[i]=g),d=g)}t[d]=!0}return t}function gH(t){for(let s=0;s<t.length;s++)gf(t,s)||(t[s]=null);return t}function Yp(t){const s=KE(null);for(const[a,i]of J3(t))gf(t,a)&&(Array.isArray(i)?s[a]=gH(i):i&&typeof i=="object"&&i.constructor===Object?s[a]=Yp(i):s[a]=i);return s}function RC(t,s){for(;t!==null;){const i=iH(t,s);if(i){if(i.get)return Di(i.get);if(typeof i.value=="function")return Di(i.value)}t=cH(t)}function a(){return null}return a}const JE=Fl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),DC=Fl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),QE=Fl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),nA=Fl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Fv=Fl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),$N=Fl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hf=Fl(["#text"]),eT=Fl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),oA=Fl(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),IN=Fl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),tT=Fl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hH=mm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),MC=mm(/<%[\w\W]*|[\w\W]*%>/gm),pH=mm(/\$\{[\w\W]*/gm),LN=mm(/^data-[\-\w.\u00B7-\uFFFF]+$/),sA=mm(/^aria-[\-\w]+$/),FN=mm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),rA=mm(/^(?:\w+script|data):/i),aA=mm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),HN=mm(/^html$/i),zN=mm(/^[a-z][.\w]*(-[.\w]+)+$/i);var cA=Object.freeze({__proto__:null,ARIA_ATTR:sA,ATTR_WHITESPACE:aA,CUSTOM_ELEMENT:zN,DATA_ATTR:LN,DOCTYPE_NAME:HN,ERB_EXPR:MC,IS_ALLOWED_URI:FN,IS_SCRIPT_OR_DATA:rA,MUSTACHE_EXPR:hH,TMPLIT_EXPR:pH});const NC={element:1,text:3,progressingInstruction:7,comment:8,document:9},VN=function(){return typeof window>"u"?null:window},UN=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(i=a.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},WN=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ZN(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:VN();const s=no=>ZN(no);if(s.version="3.2.4",s.removed=[],!t||!t.document||t.document.nodeType!==NC.document||!t.Element)return s.isSupported=!1,s;let{document:a}=t;const i=a,d=i.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:w,Element:x,NodeFilter:A,NamedNodeMap:M=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:L,DOMParser:W,trustedTypes:Y}=t,ne=x.prototype,oe=RC(ne,"cloneNode"),ye=RC(ne,"remove"),ie=RC(ne,"nextSibling"),we=RC(ne,"childNodes"),ve=RC(ne,"parentNode");if(typeof h=="function"){const no=a.createElement("template");no.content&&no.content.ownerDocument&&(a=no.content.ownerDocument)}let Re,Ne="";const{implementation:xt,createNodeIterator:ot,createDocumentFragment:$e,getElementsByTagName:Rt}=a,{importNode:yt}=i;let $t=WN();s.isSupported=typeof J3=="function"&&typeof ve=="function"&&xt&&xt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Hn,ERB_EXPR:Yo,TMPLIT_EXPR:mo,DATA_ATTR:jt,ARIA_ATTR:st,IS_SCRIPT_OR_DATA:At,ATTR_WHITESPACE:pn,CUSTOM_ELEMENT:Pn}=cA;let{IS_ALLOWED_URI:nn}=cA,_n=null;const Fo=ds({},[...JE,...DC,...QE,...Fv,...hf]);let Do=null;const fl=ds({},[...eT,...oA,...IN,...tT]);let Us=Object.seal(KE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Du=null,Dc=null,Mu=!0,Nu=!0,Sm=!1,eS=!0,xg=!1,pM=!0,i0=!1,bM=!1,TG=!1,u4=!1,bF=!1,vF=!1,XY=!0,JY=!1;const eee="user-content-";let _G=!0,vM=!1,d4={},m4=null;const QY=ds({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let eX=null;const tX=ds({},["audio","video","img","source","image","track"]);let kG=null;const nX=ds({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),yF="http://www.w3.org/1998/Math/MathML",CF="http://www.w3.org/2000/svg",l0="http://www.w3.org/1999/xhtml";let f4=l0,AG=!1,OG=null;const tee=ds({},[yF,CF,l0],tA);let wF=ds({},["mi","mo","mn","ms","mtext"]),SF=ds({},["annotation-xml"]);const nee=ds({},["title","style","font","a","script"]);let yM=null;const oee=["application/xhtml+xml","text/html"],see="text/html";let gl=null,g4=null;const ree=a.createElement("form"),oX=function(Pe){return Pe instanceof RegExp||Pe instanceof Function},RG=function(){let Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(g4&&g4===Pe)){if((!Pe||typeof Pe!="object")&&(Pe={}),Pe=Yp(Pe),yM=oee.indexOf(Pe.PARSER_MEDIA_TYPE)===-1?see:Pe.PARSER_MEDIA_TYPE,gl=yM==="application/xhtml+xml"?tA:XE,_n=gf(Pe,"ALLOWED_TAGS")?ds({},Pe.ALLOWED_TAGS,gl):Fo,Do=gf(Pe,"ALLOWED_ATTR")?ds({},Pe.ALLOWED_ATTR,gl):fl,OG=gf(Pe,"ALLOWED_NAMESPACES")?ds({},Pe.ALLOWED_NAMESPACES,tA):tee,kG=gf(Pe,"ADD_URI_SAFE_ATTR")?ds(Yp(nX),Pe.ADD_URI_SAFE_ATTR,gl):nX,eX=gf(Pe,"ADD_DATA_URI_TAGS")?ds(Yp(tX),Pe.ADD_DATA_URI_TAGS,gl):tX,m4=gf(Pe,"FORBID_CONTENTS")?ds({},Pe.FORBID_CONTENTS,gl):QY,Du=gf(Pe,"FORBID_TAGS")?ds({},Pe.FORBID_TAGS,gl):{},Dc=gf(Pe,"FORBID_ATTR")?ds({},Pe.FORBID_ATTR,gl):{},d4=gf(Pe,"USE_PROFILES")?Pe.USE_PROFILES:!1,Mu=Pe.ALLOW_ARIA_ATTR!==!1,Nu=Pe.ALLOW_DATA_ATTR!==!1,Sm=Pe.ALLOW_UNKNOWN_PROTOCOLS||!1,eS=Pe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,xg=Pe.SAFE_FOR_TEMPLATES||!1,pM=Pe.SAFE_FOR_XML!==!1,i0=Pe.WHOLE_DOCUMENT||!1,u4=Pe.RETURN_DOM||!1,bF=Pe.RETURN_DOM_FRAGMENT||!1,vF=Pe.RETURN_TRUSTED_TYPE||!1,TG=Pe.FORCE_BODY||!1,XY=Pe.SANITIZE_DOM!==!1,JY=Pe.SANITIZE_NAMED_PROPS||!1,_G=Pe.KEEP_CONTENT!==!1,vM=Pe.IN_PLACE||!1,nn=Pe.ALLOWED_URI_REGEXP||FN,f4=Pe.NAMESPACE||l0,wF=Pe.MATHML_TEXT_INTEGRATION_POINTS||wF,SF=Pe.HTML_INTEGRATION_POINTS||SF,Us=Pe.CUSTOM_ELEMENT_HANDLING||{},Pe.CUSTOM_ELEMENT_HANDLING&&oX(Pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Us.tagNameCheck=Pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Pe.CUSTOM_ELEMENT_HANDLING&&oX(Pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Us.attributeNameCheck=Pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Pe.CUSTOM_ELEMENT_HANDLING&&typeof Pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Us.allowCustomizedBuiltInElements=Pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),xg&&(Nu=!1),bF&&(u4=!0),d4&&(_n=ds({},hf),Do=[],d4.html===!0&&(ds(_n,JE),ds(Do,eT)),d4.svg===!0&&(ds(_n,DC),ds(Do,oA),ds(Do,tT)),d4.svgFilters===!0&&(ds(_n,QE),ds(Do,oA),ds(Do,tT)),d4.mathMl===!0&&(ds(_n,Fv),ds(Do,IN),ds(Do,tT))),Pe.ADD_TAGS&&(_n===Fo&&(_n=Yp(_n)),ds(_n,Pe.ADD_TAGS,gl)),Pe.ADD_ATTR&&(Do===fl&&(Do=Yp(Do)),ds(Do,Pe.ADD_ATTR,gl)),Pe.ADD_URI_SAFE_ATTR&&ds(kG,Pe.ADD_URI_SAFE_ATTR,gl),Pe.FORBID_CONTENTS&&(m4===QY&&(m4=Yp(m4)),ds(m4,Pe.FORBID_CONTENTS,gl)),_G&&(_n["#text"]=!0),i0&&ds(_n,["html","head","body"]),_n.table&&(ds(_n,["tbody"]),delete Du.tbody),Pe.TRUSTED_TYPES_POLICY){if(typeof Pe.TRUSTED_TYPES_POLICY.createHTML!="function")throw OC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Pe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw OC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Re=Pe.TRUSTED_TYPES_POLICY,Ne=Re.createHTML("")}else Re===void 0&&(Re=UN(Y,d)),Re!==null&&typeof Ne=="string"&&(Ne=Re.createHTML(""));Fl&&Fl(Pe),g4=Pe}},sX=ds({},[...DC,...QE,...nA]),rX=ds({},[...Fv,...$N]),aee=function(Pe){let on=ve(Pe);(!on||!on.tagName)&&(on={namespaceURI:f4,tagName:"template"});const Gn=XE(Pe.tagName),Xa=XE(on.tagName);return OG[Pe.namespaceURI]?Pe.namespaceURI===CF?on.namespaceURI===l0?Gn==="svg":on.namespaceURI===yF?Gn==="svg"&&(Xa==="annotation-xml"||wF[Xa]):!!sX[Gn]:Pe.namespaceURI===yF?on.namespaceURI===l0?Gn==="math":on.namespaceURI===CF?Gn==="math"&&SF[Xa]:!!rX[Gn]:Pe.namespaceURI===l0?on.namespaceURI===CF&&!SF[Xa]||on.namespaceURI===yF&&!wF[Xa]?!1:!rX[Gn]&&(nee[Gn]||!sX[Gn]):!!(yM==="application/xhtml+xml"&&OG[Pe.namespaceURI]):!1},h1=function(Pe){kC(s.removed,{element:Pe});try{ve(Pe).removeChild(Pe)}catch{ye(Pe)}},CM=function(Pe,on){try{kC(s.removed,{attribute:on.getAttributeNode(Pe),from:on})}catch{kC(s.removed,{attribute:null,from:on})}if(on.removeAttribute(Pe),Pe==="is")if(u4||bF)try{h1(on)}catch{}else try{on.setAttribute(Pe,"")}catch{}},aX=function(Pe){let on=null,Gn=null;if(TG)Pe="<remove></remove>"+Pe;else{const hl=BN(Pe,/^[\r\n\t ]+/);Gn=hl&&hl[0]}yM==="application/xhtml+xml"&&f4===l0&&(Pe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Pe+"</body></html>");const Xa=Re?Re.createHTML(Pe):Pe;if(f4===l0)try{on=new W().parseFromString(Xa,yM)}catch{}if(!on||!on.documentElement){on=xt.createDocument(f4,"template",null);try{on.documentElement.innerHTML=AG?Ne:Xa}catch{}}const Pu=on.body||on.documentElement;return Pe&&Gn&&Pu.insertBefore(a.createTextNode(Gn),Pu.childNodes[0]||null),f4===l0?Rt.call(on,i0?"html":"body")[0]:i0?on.documentElement:Pu},cX=function(Pe){return ot.call(Pe.ownerDocument||Pe,Pe,A.SHOW_ELEMENT|A.SHOW_COMMENT|A.SHOW_TEXT|A.SHOW_PROCESSING_INSTRUCTION|A.SHOW_CDATA_SECTION,null)},DG=function(Pe){return Pe instanceof L&&(typeof Pe.nodeName!="string"||typeof Pe.textContent!="string"||typeof Pe.removeChild!="function"||!(Pe.attributes instanceof M)||typeof Pe.removeAttribute!="function"||typeof Pe.setAttribute!="function"||typeof Pe.namespaceURI!="string"||typeof Pe.insertBefore!="function"||typeof Pe.hasChildNodes!="function")},iX=function(Pe){return typeof w=="function"&&Pe instanceof w};function u0(no,Pe,on){YE(no,Gn=>{Gn.call(s,Pe,on,g4)})}const lX=function(Pe){let on=null;if(u0($t.beforeSanitizeElements,Pe,null),DG(Pe))return h1(Pe),!0;const Gn=gl(Pe.nodeName);if(u0($t.uponSanitizeElement,Pe,{tagName:Gn,allowedTags:_n}),Pe.hasChildNodes()&&!iX(Pe.firstElementChild)&&ui(/<[/\w]/g,Pe.innerHTML)&&ui(/<[/\w]/g,Pe.textContent)||Pe.nodeType===NC.progressingInstruction||pM&&Pe.nodeType===NC.comment&&ui(/<[/\w]/g,Pe.data))return h1(Pe),!0;if(!_n[Gn]||Du[Gn]){if(!Du[Gn]&&dX(Gn)&&(Us.tagNameCheck instanceof RegExp&&ui(Us.tagNameCheck,Gn)||Us.tagNameCheck instanceof Function&&Us.tagNameCheck(Gn)))return!1;if(_G&&!m4[Gn]){const Xa=ve(Pe)||Pe.parentNode,Pu=we(Pe)||Pe.childNodes;if(Pu&&Xa){const hl=Pu.length;for(let xm=hl-1;xm>=0;--xm){const p1=oe(Pu[xm],!0);p1.__removalCount=(Pe.__removalCount||0)+1,Xa.insertBefore(p1,ie(Pe))}}}return h1(Pe),!0}return Pe instanceof x&&!aee(Pe)||(Gn==="noscript"||Gn==="noembed"||Gn==="noframes")&&ui(/<\/no(script|embed|frames)/i,Pe.innerHTML)?(h1(Pe),!0):(xg&&Pe.nodeType===NC.text&&(on=Pe.textContent,YE([Hn,Yo,mo],Xa=>{on=AC(on,Xa," ")}),Pe.textContent!==on&&(kC(s.removed,{element:Pe.cloneNode()}),Pe.textContent=on)),u0($t.afterSanitizeElements,Pe,null),!1)},uX=function(Pe,on,Gn){if(XY&&(on==="id"||on==="name")&&(Gn in a||Gn in ree))return!1;if(!(Nu&&!Dc[on]&&ui(jt,on))){if(!(Mu&&ui(st,on))){if(!Do[on]||Dc[on]){if(!(dX(Pe)&&(Us.tagNameCheck instanceof RegExp&&ui(Us.tagNameCheck,Pe)||Us.tagNameCheck instanceof Function&&Us.tagNameCheck(Pe))&&(Us.attributeNameCheck instanceof RegExp&&ui(Us.attributeNameCheck,on)||Us.attributeNameCheck instanceof Function&&Us.attributeNameCheck(on))||on==="is"&&Us.allowCustomizedBuiltInElements&&(Us.tagNameCheck instanceof RegExp&&ui(Us.tagNameCheck,Gn)||Us.tagNameCheck instanceof Function&&Us.tagNameCheck(Gn))))return!1}else if(!kG[on]){if(!ui(nn,AC(Gn,pn,""))){if(!((on==="src"||on==="xlink:href"||on==="href")&&Pe!=="script"&&dH(Gn,"data:")===0&&eX[Pe])){if(!(Sm&&!ui(At,AC(Gn,pn,"")))){if(Gn)return!1}}}}}}return!0},dX=function(Pe){return Pe!=="annotation-xml"&&BN(Pe,Pn)},mX=function(Pe){u0($t.beforeSanitizeAttributes,Pe,null);const{attributes:on}=Pe;if(!on||DG(Pe))return;const Gn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Do,forceKeepAttr:void 0};let Xa=on.length;for(;Xa--;){const Pu=on[Xa],{name:hl,namespaceURI:xm,value:p1}=Pu,wM=gl(hl);let Wl=hl==="value"?p1:mH(p1);const iee=Wl;if(Gn.attrName=wM,Gn.attrValue=Wl,Gn.keepAttr=!0,Gn.forceKeepAttr=void 0,u0($t.uponSanitizeAttribute,Pe,Gn),Wl=Gn.attrValue,JY&&(wM==="id"||wM==="name")&&(CM(hl,Pe),Wl=eee+Wl),pM&&ui(/((--!?|])>)|<\/(style|title)/i,Wl)){CM(hl,Pe);continue}if(Gn.forceKeepAttr)continue;if(!Gn.keepAttr){CM(hl,Pe);continue}if(!eS&&ui(/\/>/i,Wl)){CM(hl,Pe);continue}xg&&YE([Hn,Yo,mo],gX=>{Wl=AC(Wl,gX," ")});const fX=gl(Pe.nodeName);if(!uX(fX,wM,Wl)){CM(hl,Pe);continue}if(Re&&typeof Y=="object"&&typeof Y.getAttributeType=="function"&&!xm)switch(Y.getAttributeType(fX,wM)){case"TrustedHTML":{Wl=Re.createHTML(Wl);break}case"TrustedScriptURL":{Wl=Re.createScriptURL(Wl);break}}if(Wl!==iee)try{xm?Pe.setAttributeNS(xm,hl,Wl):Pe.setAttribute(hl,Wl),DG(Pe)?h1(Pe):PN(s.removed)}catch{}}u0($t.afterSanitizeAttributes,Pe,null)},cee=function no(Pe){let on=null;const Gn=cX(Pe);for(u0($t.beforeSanitizeShadowDOM,Pe,null);on=Gn.nextNode();)u0($t.uponSanitizeShadowNode,on,null),lX(on),mX(on),on.content instanceof g&&no(on.content);u0($t.afterSanitizeShadowDOM,Pe,null)};return s.sanitize=function(no){let Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},on=null,Gn=null,Xa=null,Pu=null;if(AG=!no,AG&&(no="<!-->"),typeof no!="string"&&!iX(no))if(typeof no.toString=="function"){if(no=no.toString(),typeof no!="string")throw OC("dirty is not a string, aborting")}else throw OC("toString is not a function");if(!s.isSupported)return no;if(bM||RG(Pe),s.removed=[],typeof no=="string"&&(vM=!1),vM){if(no.nodeName){const p1=gl(no.nodeName);if(!_n[p1]||Du[p1])throw OC("root node is forbidden and cannot be sanitized in-place")}}else if(no instanceof w)on=aX("<!---->"),Gn=on.ownerDocument.importNode(no,!0),Gn.nodeType===NC.element&&Gn.nodeName==="BODY"||Gn.nodeName==="HTML"?on=Gn:on.appendChild(Gn);else{if(!u4&&!xg&&!i0&&no.indexOf("<")===-1)return Re&&vF?Re.createHTML(no):no;if(on=aX(no),!on)return u4?null:vF?Ne:""}on&&TG&&h1(on.firstChild);const hl=cX(vM?no:on);for(;Xa=hl.nextNode();)lX(Xa),mX(Xa),Xa.content instanceof g&&cee(Xa.content);if(vM)return no;if(u4){if(bF)for(Pu=$e.call(on.ownerDocument);on.firstChild;)Pu.appendChild(on.firstChild);else Pu=on;return(Do.shadowroot||Do.shadowrootmode)&&(Pu=yt.call(i,Pu,!0)),Pu}let xm=i0?on.outerHTML:on.innerHTML;return i0&&_n["!doctype"]&&on.ownerDocument&&on.ownerDocument.doctype&&on.ownerDocument.doctype.name&&ui(HN,on.ownerDocument.doctype.name)&&(xm="<!DOCTYPE "+on.ownerDocument.doctype.name+`>
`+xm),xg&&YE([Hn,Yo,mo],p1=>{xm=AC(xm,p1," ")}),Re&&vF?Re.createHTML(xm):xm},s.setConfig=function(){let no=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};RG(no),bM=!0},s.clearConfig=function(){g4=null,bM=!1},s.isValidAttribute=function(no,Pe,on){g4||RG({});const Gn=gl(no),Xa=gl(Pe);return uX(Gn,Xa,on)},s.addHook=function(no,Pe){typeof Pe=="function"&&kC($t[no],Pe)},s.removeHook=function(no,Pe){if(Pe!==void 0){const on=lH($t[no],Pe);return on===-1?void 0:uH($t[no],on,1)[0]}return PN($t[no])},s.removeHooks=function(no){$t[no]=[]},s.removeAllHooks=function(){$t=WN()},s}var bH=ZN();const jN=t=>bH().sanitize(t);var ld=tinymce.util.Tools.resolve("tinymce.util.I18n");const qN={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},iA="temporary-placeholder",lA=t=>()=>bt(t,iA).getOr("!not found!"),nT=(t,s)=>{const a=t.toLowerCase();if(ld.isRtl()){const i=Er(a,"-rtl");return Yn(s,i)?i:a}else return a},Hv=(t,s)=>bt(s,nT(t,s)),uA=(t,s)=>{const a=s();return Hv(t,a).getOrThunk(lA(a))},vH=(t,s,a)=>{const i=s();return Hv(t,i).or(a).getOrThunk(lA(i))},yH=t=>ld.isRtl()?Yn(qN,t):!1,dA=()=>Sn("add-focusable",[Bo(t=>{JS(t.element,"svg").each(s=>je(s,"focusable","false"))})]),GN=(t,s,a,i)=>{var d,g;const h=yH(s)?["tox-icon--flip"]:[],w=bt(a,nT(s,a)).or(i).getOrThunk(lA(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:w},behaviours:at([...(g=t.behaviours)!==null&&g!==void 0?g:[],dA()])}},Su=(t,s,a,i=D.none())=>GN(s,t,a(),i),KN=(t,s,a)=>{const i=a(),d=gn(t,g=>Yn(i,nT(g,i)));return GN(s,d.getOr(iA),i,D.none())},YN={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},oT=li({name:"Notification",factory:t=>{const s=Mt("notification-text"),a=po({dom:ff(`<p id=${s}>${jN(t.backstageProvider.translate(t.text))}</p>`),behaviours:at([Cn.config({})])}),i=ne=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${ne}%`}}}),d=ne=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${ne}%`}}),g=po({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:at([Cn.config({})])}),x={updateProgress:(ne,oe)=>{ne.getSystem().isConnected()&&g.getOpt(ne).each(ye=>{Cn.set(ye,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(oe)]},d(oe)])})},updateText:(ne,oe)=>{if(ne.getSystem().isConnected()){const ye=a.get(ne);Cn.set(ye,[xs(oe)])}}},A=hn([t.icon.toArray(),[t.level],D.from(YN[t.level]).toArray()]),M=po(na.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Su("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:at([as.config({}),Hs.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:ne=>{t.onAction(ne)}})),L=KN(A,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),W={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:at([Cn.config({})])},Y=[L,W];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},behaviours:at([as.config({}),dn.config({}),Gt.config({mode:"special",onEscape:ne=>(t.onAction(ne),D.some(!0))})]),components:Y.concat(t.progress?[g.asSpec()]:[]).concat([M.asSpec()]),apis:x}},configFields:[Qi("level","info",["success","error","warning","warn","info"]),Ze("progress"),lo("icon"),Ze("onAction"),Ze("text"),Ze("iconProvider"),Ze("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var wH=(t,s,a,i)=>{const d=s.backstage.shared,g=()=>ct.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),h=()=>{const L=Xs(g());return D.some(L)},w=L=>{h().each(W=>{pt(L,Y=>{Zn(Y.element,"width"),Rn(Y.element)>W.width&&vn(Y.element,"width",W.width+"px")})})};return{open:(L,W,Y)=>{const ne=()=>{const ve=ot=>{Cn.remove(ot,ye),ie()},Re=(ot,$e)=>{mr(ot.element).length===0?Ne(ot,$e):xt(ot,$e)},Ne=(ot,$e)=>{Ps.hide(ot),i.clear(),$e&&t.focus()},xt=(ot,$e)=>{$e&&Gt.focusIn(ot)};i.on(ot=>{W();const $e=Y();ve(ot),Re(ot,$e)})},oe=()=>!qp(t)||!d.header.isPositionedAtTop(),ye=ic(oT.sketch({text:L.text,level:zo(["success","error","warning","warn","info"],L.type)?L.type:void 0,progress:L.progressBar===!0,icon:L.icon,onAction:ne,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const ve=Ai(ye);i.on(Re=>{Cn.append(Re,ve),Ps.reposition(Re),ye.hasConfigured(ys)&&ys.refresh(Re),w(Re.components())})}else{const ve=ic(Ps.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:at([Gt.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Cn.config({}),...oe()?[ys.config({contextual:{lazyContext:()=>D.some(Xs(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:ot=>Gp(t,ot.element).map(Rt=>({bounds:Kp(Rt),optScrollEnv:D.some({currentScrollTop:Rt.element.dom.scrollTop,scrollElmTop:qr(Rt.element).top})})).getOrThunk(()=>({bounds:hr(),optScrollEnv:D.none()}))})]:[]])})),Re=Ai(ye),Ne={maxHeightFunction:eh()},xt={...d.anchors.banner(),overrides:Ne};i.set(ve),a.add(ve),Ps.showWithinBounds(ve,Re,{anchor:xt},h)}On(L.timeout)&&L.timeout>0&&PE.setEditorTimeout(t,()=>{ne()},L.timeout);const ie=()=>{i.on(ve=>{Ps.reposition(ve),ve.hasConfigured(ys)&&ys.refresh(ve),w(ve.components())})};return{close:ne,reposition:ie,text:ve=>{oT.updateText(ye,ve)},settings:L,getEl:()=>ye.element.dom,progressBar:{value:ve=>{oT.updateProgress(ye,ve)}}}},close:L=>{L.close()},getArgs:L=>L.settings}};const XN={setup:(t,s)=>{const a=(d,g)=>{Kt(d,Va(),{raw:g})},i=()=>t.getMenu().bind(Q.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(Hc),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(Q.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var PC;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(PC||(PC={}));var ud=PC;const sT="tox-menu-nav__js",BC="tox-collection__item",rT="tox-swatch",SH={normal:sT,color:rT},aT="tox-collection__item--enabled",xH="tox-collection__group-heading",mA="tox-collection__item-icon",cT="tox-collection__item-label",_b="tox-collection__item-accessory",JN="tox-collection__item-caret",fA="tox-collection__item-checkmark",fg="tox-collection__item--active",QN="tox-collection__item-container",eP="tox-collection__item-container--column",gA="tox-collection__item-container--row",tP="tox-collection__item-container--align-right",hA="tox-collection__item-container--align-left",nP="tox-collection__item-container--valign-top",EH="tox-collection__item-container--valign-middle",oP="tox-collection__item-container--valign-bottom",pA=t=>bt(SH,t).getOr(sT),sP=t=>t==="color"?"tox-swatches":"tox-menu",iT=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:sP(t),tieredMenu:"tox-tiered-menu"}),kb=t=>{const s=iT(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:pA(t)}},rP=(t,s,a)=>{const i=iT(a);return{tag:"div",classes:hn([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},TH=[Eb.parts.items({})],lT=(t,s,a)=>{const i=iT(a);return{dom:{tag:"div",classes:hn([[i.tieredMenu]])},markers:kb(a)}},aP=ae([ss("type","text"),lo("data"),Se("inputAttributes",{}),Se("inputStyles",{}),Se("tag","input"),Se("inputClasses",[]),so("onSetValue"),Po("fromInputValue",bn),Po("toInputValue",bn),Se("styles",{}),Se("eventOrder",{}),ga("inputBehaviours",[Dt,dn]),Se("selectOnFocus",!0)]),cP=t=>at([dn.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=Ie(a);t.type!=="range"&&a.dom.setSelectionRange(0,i.length)}:le})]),iP=t=>({...cP(t),...cr(t.inputBehaviours,[Dt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(Ie(s.element)),setValue:(s,a)=>{Ie(s.element)!==a&&em(s.element,t.toInputValue(a))}},onSetValue:t.onSetValue})])}),zv=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),lP=(t,s)=>({uid:t.uid,dom:zv(t),components:[],behaviours:iP(t),eventOrder:t.eventOrder}),bh=li({name:"Input",configFields:aP(),factory:lP}),uP=Mt("refetch-trigger-event"),dP=Mt("redirect-menu-item-interaction"),mP="tox-menu__searcher",uT=t=>ho(t.element,`.${mP}`).bind(s=>t.getSystem().getByDom(s).toOptional()),$C=uT,_H=(t,s)=>{Dt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},bA=t=>{const s=Dt.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},kH=(t,s)=>{En(s.element,"id").each(a=>je(t.element,"aria-activedescendant",a))},fP=t=>{const s=(d,g)=>(g.cut(),D.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return Kt(d,dP,h),D.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[BC]},components:[bh.sketch({inputClasses:[mP,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:at([Sn(i,[ze(qd(),d=>{Un(d,uP)}),ze(Va(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),Gt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,Gt.name()]}})]}},IC="tox-collection--results__js",gP=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Mt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},dT=(t,s)=>a=>{const i=Sr(a,s);return Ge(i,d=>({dom:t,components:d}))},hP=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Eb.parts.items({preprocess:t!=="auto"?dT({tag:"div",classes:["tox-swatches__row"]},t):bn})]}]}),pP=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Eb.parts.items({preprocess:dT({tag:"div",classes:["tox-collection__group"]},t)})]}),vA=(t,s)=>{const a=[];let i=[];return pt(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(Yn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),Ge(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},yA=(t,s,a)=>Eb.parts.items({preprocess:i=>{const d=Ge(i,a);return t!=="auto"&&t>1?dT({tag:"div",classes:["tox-collection__group"]},t)(d):vA(d,(g,h)=>s[h].type==="separator")}}),bP=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[yA(t,s,bn)]}),AH=(t,s,a=!0)=>{const i=Mt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",IC].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[yA(t,s,gP)]}},OH=(t,s,a)=>{const i=Mt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[fP({i18n:ld.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],IC],attributes:{id:i}},components:[yA(t,s,gP)]}]}},vP=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Eb.parts.items({preprocess:a=>vA(a,(i,d)=>t[d].type==="separator")})]}),LC=t=>wr(t,s=>"icon"in s&&s.icon!==void 0),vh=t=>(console.error(Rl(t)),console.log(t),D.none()),RH=(t,s,a,i,d)=>{const g=vP(a);return{value:t,dom:g.dom,components:g.components,items:a}},CA=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?bP(i,a):d.searchMode.searchMode==="search-with-field"?OH(i,a,d.searchMode):AH(i,a);if(d.menuType==="color"){const h=hP(i);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const h=bP(i,a);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=pP(i);return{value:t,dom:h.dom,components:h.components,items:a}}else return{value:t,dom:rP(s,i,d.menuType),components:TH,items:a}},Nr=Gs("type"),wA=Gs("name"),SA=Gs("label"),yh=Gs("text"),yP=Gs("title"),mT=Gs("icon"),Vv=Gs("value"),DH=Kr("fetch"),MH=Kr("getSubmenuItems"),Ab=Kr("onAction"),NH=Kr("onItemAction"),Ob=Po("onSetup",()=>le),CP=Ms("name"),Ch=Ms("text"),wP=Ms("role"),dd=Ms("icon"),FC=Ms("tooltip"),xA=Ms("label"),fT=Ms("shortcut"),EA=Ju("select"),gT=Fs("active",!1),PH=Fs("borderless",!1),fm=Fs("enabled",!0),hT=Fs("primary",!1),SP=t=>Se("columns",t),TA=Se("meta",{}),pT=Po("onAction",le),Rb=t=>ss("type",t),_A=t=>Rr("name","name",Vn(()=>Mt(`${t}-name`)),_t),BH=t=>Rr("value","value",Vn(()=>Mt(`${t}-value`)),Yi()),xP=mn([Nr,Ch]),Hl=t=>Ss("separatormenuitem",xP,t),gm=mn([Rb("autocompleteitem"),gT,fm,TA,Vv,Ch,dd]),EP=t=>Ss("Autocompleter.Separator",xP,t),kA=t=>Ss("Autocompleter.Item",gm,t),Db=[fm,FC,dd,Ch,Ob,ss("context","mode:design")],bT=mn([Nr,Ab,fT].concat(Db)),TP=t=>Ss("toolbarbutton",bT,t),vT=[gT].concat(Db),HC=mn(vT.concat([Nr,Ab,fT])),_P=t=>Ss("ToggleButton",HC,t),Mb=[Po("predicate",fo),Qi("scope","node",["node","editor"]),Qi("position","selection",["node","selection","line"])],AA=Db.concat([Rb("contextformbutton"),ss("align","end"),hT,Ab,co("original",bn)]),kP=vT.concat([Rb("contextformbutton"),ss("align","end"),hT,Ab,co("original",bn)]),zC=Db.concat([Rb("contextformbutton")]),$H=vT.concat([Rb("contextformtogglebutton")]),IH=Or("type",{contextformbutton:AA,contextformtogglebutton:kP}),md=[xA,Cc("commands",IH),au("launch",Or("type",{contextformbutton:zC,contextformtogglebutton:$H})),Po("onInput",le),Po("onSetup",le)],zl=[...Mb,...md,Ji("type",["contextform"]),Po("initValue",ae("")),Ms("placeholder")],VC=[...Mb,...md,Ji("type",["contextsliderform"]),Po("initValue",ae(0)),Po("min",ae(0)),Po("max",ae(100))],Vl=[...Mb,...md,Ji("type",["contextsizeinputform"]),Po("initValue",ae({width:"",height:""}))],LH=Or("type",{contextform:zl,contextsliderform:VC,contextsizeinputform:Vl}),ms=t=>Ss("ContextForm",LH,t),FH=mn([Rb("contexttoolbar"),io("items",zd([_t,qh([Ms("name"),Ms("label"),Cc("items",_t)])]))].concat(Mb)),Nb=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),UC=t=>({...t,items:se(t.items)?t.items:Ge(t.items,Nb)}),AP=t=>Ss("ContextToolbar",FH,t),OA=[Nr,Gs("src"),Ms("alt"),R("classes",[],_t)],RA=mn(OA),HH=[Nr,yh,CP,R("classes",["tox-collection__item-label"],_t)],DA=mn(HH),OP=rr(()=>Ud("type",{cardimage:RA,cardtext:DA,cardcontainer:RP})),RP=mn([Nr,ss("direction","horizontal"),ss("align","left"),ss("valign","middle"),Cc("items",OP)]),Pb=[fm,Ch,wP,fT,BH("menuitem"),TA,ss("context","mode:design")],MA=mn([Nr,xA,Cc("items",OP),Ob,pT].concat(Pb)),DP=t=>Ss("cardmenuitem",MA,t),yT=mn([Nr,gT,dd].concat(Pb)),zH=t=>Ss("choicemenuitem",yT,t),MP=[Nr,Gs("fancytype"),pT],VH=[Se("initData",{})].concat(MP),UH=[Ju("select"),V("initData",{},[Fs("allowCustomColors",!0),ss("storageKey","default"),E1("colors",Yi())])].concat(MP),WH=Or("fancytype",{inserttable:VH,colorswatch:UH}),NP=t=>Ss("fancymenuitem",WH,t),ZH=mn([Nr,Ob,pT,dd].concat(Pb)),jH=t=>Ss("menuitem",ZH,t),PP=mn([Nr,MH,Ob,dd].concat(Pb)),qH=t=>Ss("nestedmenuitem",PP,t),BP=mn([Nr,dd,gT,Ob,Ab].concat(Pb)),WC=t=>Ss("togglemenuitem",BP,t),NA=(t,s,a)=>{const i=jc(t.element,"."+a);if(i.length>0){const d=vo(i,g=>{const h=g.dom.getBoundingClientRect().top,w=i[0].dom.getBoundingClientRect().top;return Math.abs(h-w)>s}).getOr(i.length);return D.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return D.none()},$P=(t,s)=>at([Sn(t,s)]),Uv={namedEvents:$P,unnamedEvents:t=>$P(Mt("unnamed-events"),t)},PA=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),fd={item:t=>Ft.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Ft.config({disabled:t}),splitButton:t=>Ft.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Ft.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},ZC=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},pf=(t,s)=>Bo(a=>{Ae(t.onBeforeSetup)&&t.onBeforeSetup(a),ZC(t,a)(d=>{const g=t.onSetup(d);Ae(g)&&s.set(g)})}),wh=(t,s)=>ed(a=>ZC(t,a)(s.get())),xu=(t,s,a)=>ed(i=>(a.set(Dt.getValue(i)),ZC(t,i)(s.get()))),IP="silver.uistate",Bb="setDisabled",LP="setEnabled",BA="init",FP=["switchmode",BA],Wv=(t,s)=>{const a=t.mainUi.outerContainer,i=[t.mainUi.mothership,...t.uiMotherships];s===Bb&&pt(i,d=>{d.broadcastOn([ig()],{target:a.element})}),pt(i,d=>{d.broadcastOn([IP],s)})},$A=(t,s)=>{t.on("init SwitchMode",a=>{Wv(s,a.type)}),t.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const i=a.state?Bb:BA;Wv(s,i),a.state||t.nodeChanged()}}),t.on("NodeChange",a=>{const i=t.ui.isEnabled()?a.type:Bb;Wv(s,i)}),R3(t)&&t.mode.set("readonly")},yr=t=>ai.config({channels:{[IP]:{onReceive:(s,a)=>{if(a===Bb||a===LP){Ft.set(s,a===Bb);return}const{contextType:i,shouldDisable:d}=t();i==="mode"&&!zo(FP,a)||Ft.set(s,d)}}}}),YH=(t,s)=>Qm((a,i)=>{ZC(t,a)(t.onAction),!t.triggersSubmenu&&s===ud.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Un(a,Yd()),i.stop())}),XH={[ac()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Zv=pi,jv=(t,s,a,i)=>{const d=Wt(le);return{type:"item",dom:s.dom,components:Zv(s.optComponents),data:t.data,eventOrder:XH,hasSubmenu:t.triggersSubmenu,itemBehaviours:at([Sn("item-events",[YH(t,a),pf(t,d),wh(t,d)]),fd.item(()=>!t.enabled||i.checkUiComponentContext(t.context).shouldDisable),yr(()=>i.checkUiComponentContext(t.context)),Cn.config({})].concat(t.itemBehaviours))}},qv=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),IA=t=>{const s=Zp.os.isMacOS()||Zp.os.isiOS(),d=s?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=Ge(g,w=>{const x=w.toLowerCase().trim();return Yn(d,x)?d[x]:w});return s?h.join(""):h.join("+")},CT=(t,s,a=[mA])=>Su(t,{tag:"div",classes:a},s),LA=t=>({dom:{tag:"div",classes:[cT]},components:[xs(ld.translate(t))]}),FA=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),JH=(t,s)=>({dom:{tag:"div",classes:[cT]},components:[{dom:{tag:t.tag,styles:t.styles},components:[xs(ld.translate(s))]}]}),QH=t=>({dom:{tag:"div",classes:[_b]},components:[xs(IA(t))]}),HP=t=>CT("checkmark",t,[fA]),Gv=t=>CT("chevron-right",t,[JN]),ez=t=>CT("chevron-down",t,[JN]),zP=(t,s)=>{const a=t.direction==="vertical"?eP:gA,i=t.align==="left"?hA:tP;return{dom:{tag:"div",classes:[QN,a,i,(()=>{switch(t.valign){case"top":return nP;case"middle":return EH;case"bottom":return oP}})()]},components:s}},VP=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),UP=(t,s,a)=>{const i="custom",d="remove",g=t.value,h=t.iconContent.map(A=>vH(A,s.icons,a)),w=t.ariaLabel.map(A=>({"aria-label":s.translate(A),"data-mce-name":A})).getOr({});return{dom:(()=>{const A=rT,M=h.getOr(""),L={tag:"div",attributes:w,classes:[A]};return g===i?{...L,tag:"button",classes:[...L.classes,"tox-swatches__picker-btn"],innerHtml:M}:g===d?{...L,classes:[...L.classes,"tox-swatch--remove"],innerHtml:M}:cn(g)?{...L,attributes:{...L.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:M}:L})(),optComponents:[]}},HA=t=>{const s=t.map(a=>({attributes:{id:Mt("menu-item"),"aria-label":ld.translate(a)}})).getOr({});return{tag:"div",classes:[sT,BC],...s}},zA=(t,s,a,i)=>{const d={tag:"div",classes:[mA]},g=W=>Su(W,d,s.icons,i),h=()=>D.some({dom:d}),w=a?t.iconContent.map(g).orThunk(h):D.none(),x=t.checkMark,A=D.from(t.meta).fold(()=>LA,W=>Yn(W,"style")?Nn(JH,W.style):LA),M=t.htmlContent.fold(()=>t.textContent.map(A),W=>D.some(FA(W,[cT])));return{dom:HA(t.ariaLabel),optComponents:[w,M,t.shortcutContent.map(QH),x,t.caret]}},$b=(t,s,a,i=D.none())=>t.presets==="color"?UP(t,s,i):zA(t,s,a,i),wT=(t,s,a)=>bt(t,"tooltipWorker").map(i=>[Hs.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:eh}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{Hs.setComponents(d,[pp({element:ct.fromDom(h)})])})}})]).getOrThunk(()=>a.map(i=>[Hs.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),WP=t=>vC.DOM.encode(t),ZP=(t,s)=>{const a=ld.translate(t),i=WP(a);if(s.length>0){const d=new RegExp(PA(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},jP=(t,s,a,i,d,g,h,w=!0)=>{const x=$b({presets:i,textContent:D.none(),htmlContent:a?t.text.map(M=>ZP(M,s)):D.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:D.none(),checkMark:D.none(),caret:D.none(),value:t.value},h.providers,w,t.icon),A=t.text.filter(M=>!a&&M!=="");return jv({context:"mode:design",data:qv(t),enabled:t.enabled,getApi:ae({}),onAction:M=>d(t.value,t.meta),onSetup:ae(le),triggersSubmenu:!1,itemBehaviours:wT(t,h,A)},x,g,h.providers)},qP=(t,s)=>Ge(t,a=>{switch(a.type){case"cardcontainer":return zP(a,qP(a.items,s));case"cardimage":return VP(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>zo(s.cardText.highlightOn,g))?D.from(s.cardText.matchText).getOr(""):"";return FA(ZP(a.text,d),a.classes)}}),tz=(t,s,a,i)=>{const d=h=>({isEnabled:()=>!Ft.isDisabled(h),setEnabled:w=>{Ft.set(h,!w),pt(jc(h.element,"*"),x=>{h.getSystem().getByDom(x).each(A=>{A.hasConfigured(Ft)&&Ft.set(A,!w)})})}}),g={dom:HA(t.label),optComponents:[D.some({dom:{tag:"div",classes:[QN,gA]},components:qP(t.items,i)})]};return jv({context:"mode:design",data:qv({text:D.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:D.from(i.itemBehaviours).getOr([])},g,s,a.providers)},nz=(t,s,a,i,d,g,h,w=!0)=>{const x=L=>({setActive:W=>{Ln.set(L,W)},isActive:()=>Ln.isOn(L),isEnabled:()=>!Ft.isDisabled(L),setEnabled:W=>Ft.set(L,!W)}),A=$b({presets:a,textContent:s?t.text:D.none(),htmlContent:D.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:D.none(),checkMark:s?D.some(HP(h.icons)):D.none(),caret:D.none(),value:t.value},h,w),M=t.text.filter(ae(!s)).map(L=>Hs.config(h.tooltips.getConfig({tooltipText:h.translate(L)})));return ns(jv({context:t.context,data:qv(t),enabled:t.enabled,getApi:x,onAction:L=>i(t.value),onSetup:L=>(L.setActive(d),le),triggersSubmenu:!1,itemBehaviours:[...M.toArray()]},A,g,h),{toggling:{toggleClass:aT,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},VA=G2(_3(),k3()),UA=t=>({value:YP(t)}),WA=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,GP=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,KP=t=>WA.test(t)||GP.test(t),YP=t=>_m(t,"#").toUpperCase(),oz=t=>KP(t)?D.some({value:YP(t)}):D.none(),sz=t=>({value:t.value.replace(WA,(a,i,d,g)=>i+i+d+d+g+g)}),rz=t=>{const s=sz(t),a=GP.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},ZA=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},jC=t=>{const s=ZA(t.red)+ZA(t.green)+ZA(t.blue);return UA(s)},XP=Math.min,JP=Math.max,ST=Math.round,QP=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,az=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Ib=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),jA=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},eB=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=JP(0,XP(g,1)),h=JP(0,XP(h,1)),g===0)return s=a=i=ST(255*h),Ib(s,a,i,1);const w=d/60,x=h*g,A=x*(1-Math.abs(w%2-1)),M=h-x;switch(Math.floor(w)){case 0:s=x,a=A,i=0;break;case 1:s=A,a=x,i=0;break;case 2:s=0,a=x,i=A;break;case 3:s=0,a=A,i=x;break;case 4:s=A,a=0,i=x;break;case 5:s=x,a=0,i=A;break;default:s=a=i=0}return s=ST(255*(s+M)),a=ST(255*(a+M)),i=ST(255*(i+M)),Ib(s,a,i,1)},qC=t=>{const s=rz(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Ib(a,i,d,1)},GC=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(a,10),w=parseFloat(i);return Ib(d,g,h,w)},xT=t=>{const s=QP.exec(t);if(s!==null)return D.some(GC(s[1],s[2],s[3],"1"));const a=az.exec(t);return a!==null?D.some(GC(a[1],a[2],a[3],a[4])):D.none()},tB=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,nB=Ib(255,0,0,1),cz=t=>{t.dispatch("SkinLoaded")},iz=(t,s)=>{t.dispatch("SkinLoadError",s)},lz=t=>{t.dispatch("ResizeEditor")},qA=(t,s)=>{t.dispatch("ResizeContent",s)},GA=(t,s)=>{t.dispatch("ScrollContent",s)},KA=(t,s)=>{t.dispatch("TextColorChange",s)},oB=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},uz=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),sB=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},dz=(t,s)=>{t.dispatch("StylesTextUpdate",s)},mz=(t,s)=>{t.dispatch("AlignTextUpdate",s)},fz=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},gz=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},hz=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},pz=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},bz=t=>{t.dispatch("ToggleSidebar")},vz=t=>{t.dispatch("ToggleView")},rB=t=>{t.dispatch("ContextToolbarClose")},yz=t=>{t.dispatch("ContextFormSlideBack")},Lb=(t,s)=>()=>{t(),s()},kc=t=>Fb(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),YA=(t,s)=>a=>{const i=bc(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},KC=(t,s)=>a=>{const i=kc(t)(a),d=YA(t,s)(a);return()=>{i(),d()}},Fb=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},aB=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Mi=(t,s)=>()=>t.execCommand(s);var Sh=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const YC={},cB=(t,s=10)=>{const a=Sh.getItem(t),i=se(a)?JSON.parse(a):[],g=(A=>s-A.length<0?A.slice(0,s):A)(i),h=A=>{Je(g,A).each(w),g.unshift(A),g.length>s&&g.pop(),Sh.setItem(t,JSON.stringify(g))},w=A=>{g.splice(A,1)};return{add:h,state:()=>g.slice(0)}},iB=t=>bt(YC,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Sh.getItem(s);if(ln(a)){const d=Sh.getItem("tinymce-custom-colors");Sh.setItem(s,cn(d)?d:"[]")}const i=cB(s,10);return YC[t]=i,i}),Cz=t=>Ge(iB(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),lB=(t,s)=>{iB(t).add(s)},XC=(t,s,a)=>({hue:t,saturation:s,value:a}),XA=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,h=t.blue/255,w=Math.min(d,Math.min(g,h)),x=Math.max(d,Math.max(g,h));if(w===x)return i=w,XC(0,0,i*100);const A=d===w?g-h:h===w?d-g:h-d;return s=d===w?3:h===w?1:5,s=60*(s-A/(x-w)),a=(x-w)/x,i=x,XC(Math.round(s),Math.round(a*100),Math.round(i*100))},wz=t=>XA(qC(t)),uB=t=>jC(eB(t)),Sz=t=>oz(t).orThunk(()=>xT(t).map(jC)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],w=i[3];return jC(Ib(d,g,h,w))}),JA="forecolor",QA="hilitecolor",xz=5,Ez=t=>dB(t.map((s,a)=>a%2===0?"#"+Sz(s).value:s)),dB=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:t[a],icon:"checkmark",type:"choiceitem"});return s},hm=t=>s=>s.options.get(t),eO="#000000",Tz=t=>{const s=t.options.register,a=g=>Tt(g,se)?{value:Ez(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=g=>Tt(g,se)?{value:dB(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>On(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:i}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:d,default:tO(t)}),s("color_cols_foreground",{processor:d,default:mB(t,JA)}),s("color_cols_background",{processor:d,default:mB(t,QA)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:eO}),s("color_default_background",{processor:"string",default:eO})},gd=(t,s)=>s===JA&&t.options.isSet("color_map_foreground")?hm("color_map_foreground")(t):s===QA&&t.options.isSet("color_map_background")?hm("color_map_background")(t):t.options.isSet("color_map_raw")?hm("color_map_raw")(t):hm("color_map")(t),tO=(t,s="default")=>Math.max(xz,Math.ceil(Math.sqrt(gd(t,s).length))),mB=(t,s)=>{const a=hm("color_cols")(t),i=tO(t,s);return a===tO(t)?i:a},ET=(t,s="default")=>Math.round(s===JA?hm("color_cols_foreground")(t):s===QA?hm("color_cols_background")(t):hm("color_cols")(t)),pa=hm("custom_colors"),_z=hm("color_default_foreground"),kz=hm("color_default_background"),Az="rgba(0, 0, 0, 0)",Oz=t=>xT(t).exists(s=>s.alpha!==0),Rz=t=>Wd(t,s=>{if(Rs(s)){const a=Qe(s,"background-color");return an(Oz(a),a)}else return D.none()}).getOr(Az),fB=(t,s)=>{const a=ct.fromDom(t.selection.getStart()),i=s==="hilitecolor"?Rz(a):Qe(a,"color");return xT(i).map(d=>"#"+jC(d).value)},Dz=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},Mz=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},Nz=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{Dz(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{Mz(t,s)})},gB=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},nO=(t,s,a,i)=>{a==="custom"?CB(t)(g=>{g.each(h=>{lB(s,h),t.execCommand("mceApplyTextcolor",s,h),i(h)})},fB(t,s).getOr(eO)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},oO=(t,s,a)=>t.concat(Cz(s).concat(gB(a))),hB=(t,s,a)=>i=>{i(oO(t,s,a))},sO=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},pB=(t,s)=>{t.setTooltip(s)},bB=(t,s)=>a=>{const i=fB(t,s);return Wr(i,a.toUpperCase())},rO=(t,s,a)=>{if(Zo(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=oO(gd(t,s),s,!1),g=gn(d,h=>h.value===a).getOr({text:""}).text;return t.translate([i,t.translate(g)])},vB=(t,s,a,i)=>{t.ui.registry.addSplitButton(s,{tooltip:rO(t,a,i.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:bB(t,a),columns:ET(t,a),fetch:hB(gd(t,a),a,pa(t)),onAction:d=>{nO(t,a,i.get(),le)},onItemAction:(d,g)=>{nO(t,a,g,h=>{i.set(h),KA(t,{name:s,color:h})})},onSetup:d=>{sO(d,s,i.get());const g=h=>{h.name===s&&(sO(d,h.name,h.color),pB(d,rO(t,a,h.color)))};return t.on("TextColorChange",g),Lb(kc(t)(d),()=>{t.off("TextColorChange",g)})}})},yB=(t,s,a,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(pB(g,rO(t,a,d.get())),sO(g,s,d.get()),kc(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:bB(t,a),initData:{storageKey:a},onAction:g=>{nO(t,a,g.value,h=>{d.set(h),KA(t,{name:s,color:h})})}}]})},CB=t=>(s,a)=>{let i=!1;const d=w=>{const A=w.getData().colorpicker;i?(s(D.from(A)),w.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",A]))},g=(w,x)=>{x.name==="hex-valid"&&(i=x.value)},h={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:le,onCancel:()=>{s(D.none())}})},Pz=t=>{Nz(t);const s=_z(t),a=kz(t),i=Wt(s),d=Wt(a);vB(t,"forecolor","forecolor",i),vB(t,"backcolor","hilitecolor",d),yB(t,"forecolor","forecolor","Text color",i),yB(t,"backcolor","hilitecolor","Background color",d)},aO=(t,s,a,i,d,g,h,w)=>{const x=LC(s),M=Bz(s,a,i,d!=="color"?"normal":"color",g,h,w);return CA(t,x,M,i,{menuType:d})},Bz=(t,s,a,i,d,g,h)=>pi(Ge(t,w=>w.type==="choiceitem"?zH(w).fold(vh,x=>D.some(nz(x,a===1,i,s,g(x.value),d,h,LC(t)))):D.none())),TT=(t,s)=>{const a=kb(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?ho(d.element,"[aria-checked=true]"):D.none()}},$z=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${rT}`:`.${BC}`}},wB=(t,s)=>{const a=Iz(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...aO(Mt("menu-value"),a,w=>{t.onAction({value:w})},i,d,ud.CLOSE_ON_EXECUTE,t.select.getOr(fo),s.shared.providers),markers:kb(d),movement:TT(i,d),showMenuRole:!1};return{type:"widget",data:{value:Mt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[VA.widget(Eb.sketch(h))]}},Iz=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>oO(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(gB(a)))},cO=Mt("cell-over"),SB=Mt("cell-execute"),Lz=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),Fz=(t,s,a)=>{const i=h=>Kt(h,cO,{row:t,col:s}),d=h=>Kt(h,SB,{row:t,col:s}),g=(h,w)=>{w.stop(),d(h)};return ic({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:at([Sn("insert-table-picker-cell",[ze(cu(),dn.focus),ze(ac(),d),ze(Gd(),g),ze(T1(),g)]),Ln.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),dn.config({onFocus:i})])})},xB=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const w=t(d+1,h+1);g.push(Fz(d,h,w))}i.push(g)}return i},Hz=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)Ln.set(t[g][h],g<=s&&h<=a)},zz=t=>Te(t,s=>Ge(s,Ai)),EB=(t,s)=>xs(`${s}x${t}`),TB={inserttable:(t,s)=>{const d=Lz(s),g=xB(d,10,10),h=EB(0,0),w=po({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:at([Cn.config({})])});return{type:"widget",data:{value:Mt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[VA.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:zz(g).concat(w.asSpec()),behaviours:at([Sn("insert-table-picker",[Bo(x=>{Cn.set(w.get(x),[h])}),O1(cO,(x,A,M)=>{const{row:L,col:W}=M.event;Hz(g,L,W,10,10),Cn.set(w.get(x),[EB(L+1,W+1)])}),O1(SB,(x,A,M)=>{const{row:L,col:W}=M.event;Un(x,Yd()),t.onAction({numRows:L+1,numColumns:W+1})})]),Gt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:wB},Vz=(t,s)=>bt(TB,t.fancytype).map(a=>a(t,s)),_B=(t,s,a,i=!0,d=!1)=>{const g=d?ez(a.icons):Gv(a.icons),h=x=>({isEnabled:()=>!Ft.isDisabled(x),setEnabled:A=>Ft.set(x,!A),setIconFill:(A,M)=>{ho(x.element,`svg path[class="${A}"], rect[class="${A}"]`).each(L=>{je(L,"fill",M)})},setTooltip:A=>{const M=a.translate(A);je(x.element,"aria-label",M)}}),w=$b({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:D.none(),ariaLabel:t.text,caret:D.some(g),checkMark:D.none(),shortcutContent:t.shortcut},a,i);return jv({context:t.context,data:qv(t),getApi:h,enabled:t.enabled,onAction:le,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},w,s,a)},Uz=(t,s,a,i=!0)=>{const d=h=>({isEnabled:()=>!Ft.isDisabled(h),setEnabled:w=>Ft.set(h,!w)}),g=$b({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:D.none(),ariaLabel:t.text,caret:D.none(),checkMark:D.none(),shortcutContent:t.shortcut},a,i);return jv({context:t.context,data:qv(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},kB=t=>({type:"separator",dom:{tag:"div",classes:[BC,xH]},components:t.text.map(xs).toArray()}),Wz=(t,s,a,i=!0)=>{const d=h=>({setActive:w=>{Ln.set(h,w)},isActive:()=>Ln.isOn(h),isEnabled:()=>!Ft.isDisabled(h),setEnabled:w=>Ft.set(h,!w)}),g=$b({iconContent:t.icon,textContent:t.text,htmlContent:D.none(),ariaLabel:t.text,checkMark:D.some(HP(a.icons)),caret:D.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return ns(jv({context:t.context,data:qv(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:aT,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},Zz=jP,AB=kB,jz=Uz,qz=_B,Gz=Wz,Kz=Vz,Yz=tz;var Xz=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),Jz=[io("others",Ol(Tn.value,Yi()))],OB=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(Uo(g.others).length===0)throw new Error("Cannot find any known coupled components");return bt(t,h)},a=(g,h,w)=>s(h,w).getOrThunk(()=>{const A=bt(h.others,w).getOrDie("No information found for coupled component: "+w)(g),M=g.getSystem().build(A);return t[w]=M,M}),i=(g,h,w)=>s(h,w).orThunk(()=>(bt(h.others,w).getOrDie("No information found for coupled component: "+w),D.none())),d=ae({});return el({readState:d,getExisting:i,getOrCreate:a})}});const ir=ar({fields:Jz,name:"coupling",apis:Xz,state:OB}),iO=t=>{let s=D.none(),a=[];const i=A=>iO(M=>{d(L=>{M(A(L))})}),d=A=>{h()?x(A):a.push(A)},g=A=>{h()||(s=D.some(A),w(a),a=[])},h=()=>s.isSome(),w=A=>{pt(A,x)},x=A=>{s.each(M=>{setTimeout(()=>{A(M)},0)})};return t(g),{get:d,map:i,isReady:h}},Qz={nu:iO,pure:t=>iO(s=>{s(t)})},e9=t=>{setTimeout(()=>{throw t},0)},Xp=t=>{const s=x=>{t().then(x,e9)};return{map:x=>Xp(()=>t().then(x)),bind:x=>Xp(()=>t().then(A=>x(A).toPromise())),anonBind:x=>Xp(()=>t().then(()=>x.toPromise())),toLazy:()=>Qz.nu(s),toCached:()=>{let x=null;return Xp(()=>(x===null&&(x=t()),x))},toPromise:t,get:s}},Ac={nu:t=>Xp(()=>new Promise(t)),pure:t=>Xp(()=>Promise.resolve(t))},lO=ae("sink"),uO=ae(ii({name:lO(),overrides:ae({dom:{tag:"div"},behaviours:at([Za.config({useFixed:Ut})]),events:rs([Wf(Va()),Wf(Fc()),Wf(Gd())])})})),RB=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},t9=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},DB=(t,s,a,i,d,g,h)=>{const w=t9(t,s,i),x=MB(i,t);return w.map(A=>A.bind(M=>{const L=M.menus[M.primary];return D.from(L).each(W=>{t.listRole.each(Y=>{W.role=Y})}),D.from(Wp.sketch({...g.menu(),uid:Kg(""),data:M,highlightOnOpen:h,onOpenMenu:(W,Y)=>{const ne=x().getOrDie();Za.position(ne,Y,{anchor:a}),ro.decloak(d)},onOpenSubmenu:(W,Y,ne)=>{const oe=x().getOrDie();Za.position(oe,ne,{anchor:{type:"submenu",item:Y}}),ro.decloak(d)},onRepositionMenu:(W,Y,ne)=>{const oe=x().getOrDie();Za.position(oe,Y,{anchor:a}),pt(ne,ye=>{Za.position(oe,ye.triggeredMenu,{anchor:{type:"submenu",item:ye.triggeringItem}})})},onEscape:()=>(dn.focus(i),ro.close(d),D.some(!0))}))}))},_T=(t,s,a,i,d,g,h)=>{const w=RB(t,a);return DB(t,s,w,a,i,d,h).map(A=>(A.fold(()=>{ro.isOpen(i)&&ro.close(i)},M=>{ro.cloak(i),ro.open(i,M),g(i)}),i))},n9=(t,s,a,i,d,g,h)=>(ro.close(i),Ac.pure(i)),dO=(t,s,a,i,d,g)=>{const h=ir.getCoupled(a,"sandbox");return(ro.isOpen(h)?n9:_T)(t,s,a,h,i,d,g)},o9=(t,s,a)=>{const i=eo.getCurrent(s).getOr(s),d=Rn(t.element);a?vn(i.element,"min-width",d+"px"):Of(i.element,d)},MB=(t,s)=>t.getSystem().getByUid(s.uid+"-"+lO()).map(a=>()=>Tn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Tn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),NB=t=>{ro.getState(t).each(s=>{Wp.repositionMenus(s)})},Kv=(t,s,a)=>{const i=Jy(),d=(w,x)=>{const A=RB(t,s);i.link(s.element),t.matchWidth&&o9(A.hotspot,x,t.useMinWidth),t.onOpen(A,w,x),a!==void 0&&a.onOpen!==void 0&&a.onOpen(w,x)},g=(w,x)=>{i.unlink(s.element),h().getOr(x).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(w,x)},h=MB(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id}},behaviours:al.augment(t.sandboxBehaviours,[Dt.config({store:{mode:"memory",initialValue:s}}),ro.config({onOpen:d,onClose:g,isPartOf:(w,x,A)=>tg(x,A)||tg(s,A),getAttachPoint:()=>h().getOrDie()}),eo.config({find:w=>ro.getState(w).bind(x=>eo.getCurrent(x))}),ai.config({channels:{...Oi({isExtraPart:fo}),...ih({doReposition:NB})}})])}},PB=t=>{const s=ir.getCoupled(t,"sandbox");NB(s)},Yv=()=>[Se("sandboxClasses",[]),al.field("sandboxBehaviours",[eo,ai,ro,Dt])],s9=ae([Ze("dom"),Ze("fetch"),so("onOpen"),Sc("onExecute"),Se("getHotspot",D.some),Se("getAnchorOverrides",ae({})),og(),ga("dropdownBehaviours",[Ln,ir,Gt,dn]),Ze("toggleClass"),Se("eventOrder",{}),lo("lazySink"),Se("matchWidth",!1),Se("useMinWidth",!1),lo("role"),lo("listRole")].concat(Yv())),r9=ae([Il({schema:[z1(),Se("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),uO()]),a9=(t,s,a,i)=>{const d=M=>bt(t.dom,"attributes").bind(L=>bt(L,M)),g=M=>{ro.getState(M).each(L=>{Wp.highlightPrimary(L)})},h=(M,L,W)=>dO(t,bn,M,i,L,W),w=M=>{h(M,g,ha.HighlightMenuAndItem).get(le)},x={expand:M=>{Ln.isOn(M)||h(M,le,ha.HighlightNone).get(le)},open:M=>{Ln.isOn(M)||h(M,le,ha.HighlightMenuAndItem).get(le)},refetch:M=>ir.getExistingCoupled(M,"sandbox").fold(()=>h(M,le,ha.HighlightMenuAndItem).map(le),W=>_T(t,bn,M,W,i,le,ha.HighlightMenuAndItem).map(le)),isOpen:Ln.isOn,close:M=>{Ln.isOn(M)&&h(M,le,ha.HighlightMenuAndItem).get(le)},repositionMenus:M=>{Ln.isOn(M)&&PB(M)}},A=(M,L)=>(Hc(M),D.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:cr(t.dropdownBehaviours,[Ln.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),ir.config({others:{sandbox:M=>Kv(t,M,{onOpen:()=>Ln.on(M),onClose:()=>Ln.off(M)})}}),Gt.config({mode:"special",onSpace:A,onEnter:A,onDown:(M,L)=>{if(Eu.isOpen(M)){const W=ir.getCoupled(M,"sandbox");g(W)}else Eu.open(M);return D.some(!0)},onEscape:(M,L)=>Eu.isOpen(M)?(Eu.close(M),D.some(!0)):D.none()}),dn.config({})]),events:Bv(D.some(w)),eventOrder:{...t.eventOrder,[ac()]:["disabling","toggling","alloy.base.behaviour"]},apis:x,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),M=>({role:M})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Eu=lc({name:"Dropdown",configFields:s9(),partFields:r9(),factory:a9,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),cY=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},kT=t=>{const s=Dt.getValue(t),a=uT(t).map(bA);Eu.refetch(s).get(()=>{const i=ir.getCoupled(s,"sandbox");a.each(d=>uT(i).each(g=>_H(g,d)))})},Xv=(t,s)=>{BB(t).each(a=>{w0(t,a.element,s.event.eventType,s.event.interactionEvent)})},BB=t=>ro.getState(t).bind(Q.getHighlighted).bind(Q.getHighlighted),$B=t=>cc(t.element,IC)?D.some(t.element):ho(t.element,"."+IC),IB=(t,s,a)=>{$C(t).each(i=>{kH(i,a),$B(s).each(g=>{En(g,"id").each(h=>je(i.element,"aria-controls",h))})}),je(a.element,"aria-selected","true")},c9=(t,s,a)=>{je(a.element,"aria-selected","false")},i9=t=>{$C(t).each(s=>dn.focus(s))},l9=t=>ir.getExistingCoupled(t,"sandbox").bind(uT).map(bA).map(a=>a.fetchPattern).getOr("");var AT;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(AT||(AT={}));const u9=(t,s,a,i,d)=>{const g=a.shared.providers,h=w=>d?{...w,shortcut:D.none(),icon:w.text.isSome()?D.none():w.icon}:w;switch(t.type){case"menuitem":return jH(t).fold(vh,w=>D.some(jz(h(w),s,g,i)));case"nestedmenuitem":return qH(t).fold(vh,w=>D.some(qz(h(w),s,g,i,d)));case"togglemenuitem":return WC(t).fold(vh,w=>D.some(Gz(h(w),s,g,i)));case"separator":return Hl(t).fold(vh,w=>D.some(AB(w)));case"fancymenuitem":return NP(t).fold(vh,w=>Kz(w,a));default:return console.error("Unknown item in general menu",t),D.none()}},d9=(t,s,a,i,d,g,h)=>{const w=i===1,x=!w||LC(t);return pi(Ge(t,A=>{switch(A.type){case"separator":return EP(A).fold(vh,M=>D.some(AB(M)));case"cardmenuitem":return DP(A).fold(vh,M=>D.some(Yz({...M,onAction:L=>{M.onAction(L),a(M.value,M.meta)}},d,g,{itemBehaviours:wT(M.meta,g,D.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return kA(A).fold(vh,M=>D.some(Zz(M,s,w,"normal",a,d,g,x)))}}))},LB=(t,s,a,i,d,g)=>{const h=LC(s),w=pi(Ge(s,M=>{const L=Y=>d?!Yn(Y,"text"):h,W=Y=>u9(Y,a,i,L(Y),d);return M.type==="nestedmenuitem"&&M.getSubmenuItems().length<=0?W({...M,enabled:!1}):W(M)})),x=cY(g);return(d?RH:CA)(t,h,w,1,x)},mO=t=>Wp.singleData(t.value,t),m9=(t,s,a,i)=>{const d=TT(s,i),g=kb(i);return{data:mO({...t,movement:d,menuBehaviours:Uv.unnamedEvents(s!=="auto"?[]:[Bo((h,w)=>{NA(h,4,g.item).each(({numColumns:x,numRows:A})=>{Gt.setGridSize(h,A,x)})})])}),menu:{markers:kb(i),fakeFocus:a===AT.ContentFocus}}},f9=t=>nb.create(ct.fromDom(t.startContainer),t.startOffset,ct.fromDom(t.endContainer),t.endOffset),Jv={register:(t,s)=>{const a=Mt("autocompleter"),i=Wt(!1),d=Wt(!1),g=go(),h=ic(Ps.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:at([Sn("dismissAutocompleter",[ze(Vf(),()=>L()),ze(b0(),(ie,we)=>{En(we.event.target,"id").each(ve=>je(ct.fromDom(t.getBody()),"aria-activedescendant",ve))})])]),lazySink:s.getSink})),w=()=>Ps.isOpen(h),x=d.get,A=()=>{if(w()){Ps.hide(h),t.dom.remove(a,!1);const ie=ct.fromDom(t.getBody());En(ie,"aria-owns").filter(we=>we===a).each(()=>{zn(ie,"aria-owns"),zn(ie,"aria-activedescendant")})}},M=()=>Ps.getContent(h).bind(ie=>Cs(ie.components(),0)),L=()=>t.execCommand("mceAutocompleterClose"),W=ie=>{const we=ks(ie,ve=>D.from(ve.columns)).getOr(1);return Te(ie,ve=>{const Re=ve.items;return d9(Re,ve.matchText,(Ne,xt)=>{const ot={hide:()=>L(),reload:$e=>{A(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:$e})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each($e=>{i.set(!0),ve.onAction(ot,$e,Ne,xt),i.set(!1)})},we,ud.BUBBLE_TO_SANDBOX,s,ve.highlightOn)})},Y=(ie,we)=>{const ve=ks(ie,Re=>D.from(Re.columns)).getOr(1);Ps.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(f9),root:ct.fromDom(t.getBody())}},m9(CA("autocompleter-value",!0,we,ve,{menuType:"normal"}),ve,AT.ContentFocus,"normal")),M().each(Q.highlightFirst)},ne=ie=>{const we=W(ie);we.length>0?(Y(ie,we),je(ct.fromDom(t.getBody()),"aria-owns",a),t.inline||oe()):A()},oe=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const ie=t.getDoc().documentElement,we=t.selection.getNode(),ve=I4(h.element);jr(ve,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${we.offsetTop}px`,left:`${we.offsetLeft}px`}),t.dom.add(ie,ve.dom),ho(ve,'[role="menu"]').each(Re=>{Zn(Re,"position"),Zn(Re,"max-height")})};t.on("AutocompleterStart",({lookupData:ie})=>{d.set(!0),i.set(!1),ne(ie)}),t.on("AutocompleterUpdate",({lookupData:ie})=>ne(ie)),t.on("AutocompleterUpdateActiveRange",({range:ie})=>g.set(ie)),t.on("AutocompleterEnd",()=>{A(),d.set(!1),i.set(!1),g.clear()});const ye={cancelIfNecessary:L,isMenuOpen:w,isActive:x,isProcessingAction:i.get,getMenu:M};XN.setup(ye,t)}},bf=(t,s,a)=>gu(t,s,a).isSome(),FB=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},fO=5,HB=400,JC=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?D.none():D.some(s.touches[0])},h9=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>fO||i>fO},QC=t=>{const s=go(),a=Wt(!1),i=FB(A=>{t.triggerEvent($M(),A),a.set(!0)},HB),d=A=>(JC(A).each(M=>{i.cancel();const L={x:M.clientX,y:M.clientY,target:A.target};i.schedule(A),a.set(!1),s.set(L)}),D.none()),g=A=>(i.cancel(),JC(A).each(M=>{s.on(L=>{h9(M,L)&&s.clear()})}),D.none()),h=A=>{i.cancel();const M=L=>Xn(L.target,A.target);return s.get().filter(M).map(L=>a.get()?(A.prevent(),!1):t.triggerEvent(T1(),A))},w=So([{key:jn(),value:d},{key:ls(),value:g},{key:pr(),value:h}]);return{fireIfReady:(A,M)=>bt(w,M).bind(L=>L(A))}},ew=t=>t.raw.which===fe[0]&&!zo(["input","textarea"],Bs(t.target))&&!bf(t.target,'[contenteditable="true"]'),p9=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=QC(a),g=Ge(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),Y=>Uc(t,Y,ne=>{d.fireIfReady(ne,Y).each(ye=>{ye&&ne.kill()}),a.triggerEvent(Y,ne)&&ne.kill()})),h=go(),w=Uc(t,"paste",Y=>{d.fireIfReady(Y,"paste").each(oe=>{oe&&Y.kill()}),a.triggerEvent("paste",Y)&&Y.kill(),h.set(setTimeout(()=>{a.triggerEvent(Ig(),Y)},0))}),x=Uc(t,"keydown",Y=>{a.triggerEvent("keydown",Y)?Y.kill():a.stopBackspace&&ew(Y)&&Y.prevent()}),A=Uc(t,"focusin",Y=>{a.triggerEvent("focusin",Y)&&Y.kill()}),M=go(),L=Uc(t,"focusout",Y=>{a.triggerEvent("focusout",Y)&&Y.kill(),M.set(setTimeout(()=>{a.triggerEvent(Ym(),Y)},0))});return{unbind:()=>{pt(g,Y=>{Y.unbind()}),x.unbind(),A.unbind(),L.unbind(),w.unbind(),h.on(clearTimeout),M.on(clearTimeout)}}},zB=(t,s)=>{const a=bt(t,"target").getOr(s);return Wt(a)},b9=(t,s)=>{const a=Wt(!1),i=Wt(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},v9=t=>{const s=Wt(!1);return{stop:()=>{s.set(!0)},cut:le,isStopped:s.get,isCut:fo,event:t,setSource:pe("Cannot set source of a broadcasted event"),getSource:pe("Cannot get source of a broadcasted event")}},tw=he.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),VB=(t,s,a,i,d,g)=>{const h=t(s,i),w=b9(a,d);return h.fold(()=>(g.logEventNoHandlers(s,i),tw.complete()),x=>{const A=x.descHandler;return N0(A)(w),w.isStopped()?(g.logEventStopped(s,x.element,A.purpose),tw.stopped()):w.isCut()?(g.logEventCut(s,x.element,A.purpose),tw.complete()):$r(x.element).fold(()=>(g.logNoParent(s,x.element,A.purpose),tw.complete()),L=>(g.logEventResponse(s,x.element,A.purpose),tw.resume(L)))})},nw=(t,s,a,i,d,g)=>VB(t,s,a,i,d,g).fold(Ut,h=>nw(t,s,a,h,d,g),fo),y9=(t,s,a,i,d)=>{const g=zB(a,i);return VB(t,s,a,i,g,d)},gO=(t,s,a)=>{const i=v9(s);return pt(t,d=>{const g=d.descHandler;N0(g)(i)}),i.isStopped()},C9=(t,s,a,i)=>UB(t,s,a,a.target,i),UB=(t,s,a,i,d)=>{const g=zB(a,i);return nw(t,s,a,i,g,d)},WB=(t,s)=>({element:t,descHandler:s}),ZB=(t,s)=>({id:t,descHandler:s}),jB=()=>{const t={},s=(h,w,x)=>{As(x,(A,M)=>{const L=t[M]!==void 0?t[M]:{};L[w]=Yg(A,h),t[M]=L})},a=(h,w)=>Gg(w).bind(x=>bt(h,x)).map(x=>WB(w,x));return{registerId:s,unregisterId:h=>{As(t,(w,x)=>{Yn(w,h)&&delete w[h]})},filterByType:h=>bt(t,h).map(w=>ql(w,(x,A)=>ZB(A,x))).getOr([]),find:(h,w,x)=>bt(t,w).bind(A=>Wd(x,M=>a(A,M),h))}},xh=()=>{const t=jB(),s={},a=A=>{const M=A.element;return Gg(M).getOrThunk(()=>V4("uid-",A.element))},i=(A,M)=>{const L=s[M];if(L===A)g(A);else throw new Error('The tagId "'+M+'" is already used by: '+si(L.element)+`
Cannot use it for: `+si(A.element)+`
The conflicting element is`+(ce(L.element)?" ":" not ")+"already in the DOM")},d=A=>{const M=a(A);Ur(s,M)&&i(A,M);const L=[A];t.registerId(L,M,A.events),s[M]=A},g=A=>{Gg(A.element).each(M=>{delete s[M],t.unregisterId(M)})};return{find:(A,M,L)=>t.find(A,M,L),filter:A=>t.filterByType(A),register:d,unregister:g,getById:A=>bt(s,A)}},vf=li({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:bv(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Se("components",[]),ga("containerBehaviours",[]),Se("events",{}),Se("domModification",{}),Se("eventOrder",{})]}),hO=t=>{const s=ie=>$r(t.element).fold(Ut,we=>Xn(ie,we)),a=xh(),i=(ie,we)=>a.find(s,ie,we),d=p9(t.element,{triggerEvent:(ie,we)=>Fy(ie,we.target,ve=>C9(i,ie,we,ve))}),g={debugInfo:ae("real"),triggerEvent:(ie,we,ve)=>{Fy(ie,we,Re=>UB(i,ie,ve,we,Re))},triggerFocus:(ie,we)=>{Gg(ie).fold(()=>{xc(ie)},ve=>{Fy(Kd(),ie,Re=>(y9(i,Kd(),{originator:we,kill:le,prevent:le,target:ie},ie,Re),!1))})},triggerEscape:(ie,we)=>{g.triggerEvent("keydown",ie.element,we.event)},getByUid:ie=>oe(ie),getByDom:ie=>ye(ie),build:ic,buildOrPatch:V0,addToGui:ie=>{x(ie)},removeFromGui:ie=>{A(ie)},addToWorld:ie=>{h(ie)},removeFromWorld:ie=>{w(ie)},broadcast:ie=>{W(ie)},broadcastOn:(ie,we)=>{Y(ie,we)},broadcastEvent:(ie,we)=>{ne(ie,we)},isConnected:Ut},h=ie=>{ie.connect(g),dr(ie.element)||(a.register(ie),pt(ie.components(),h),g.triggerEvent(_1(),ie.element,{target:ie.element}))},w=ie=>{dr(ie.element)||(pt(ie.components(),w),a.unregister(ie)),ie.disconnect()},x=ie=>{ah(t,ie)},A=ie=>{ad(ie)},M=()=>{d.unbind(),yi(t.element)},L=ie=>{const we=a.filter(lu());pt(we,ve=>{const Re=ve.descHandler;N0(Re)(ie)})},W=ie=>{L({universal:!0,data:ie})},Y=(ie,we)=>{L({universal:!1,channels:ie,data:we})},ne=(ie,we)=>{const ve=a.filter(ie);return gO(ve,we)},oe=ie=>a.getById(ie).fold(()=>Tn.error(new Error('Could not find component with uid: "'+ie+'" in system.')),Tn.value),ye=ie=>{const we=Gg(ie).getOr("not found");return oe(we)};return h(t),{root:t,element:t.element,destroy:M,add:x,remove:A,getByUid:oe,getByDom:ye,addToWorld:h,removeFromWorld:w,broadcast:W,broadcastOn:Y,broadcastEvent:ne}},qB=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ge(t.items,s.interpreter)}),w9=ae([Se("prefix","form-field"),ga("fieldBehaviours",[eo,Dt])]),GB=ae([ii({schema:[Ze("dom")],name:"label"}),ii({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ze("text")],name:"aria-descriptor"}),qa({factory:{sketch:t=>{const s=Bn(t,["factory"]);return t.factory.sketch(s)}},schema:[Ze("factory")],name:"field"})]),S9=(t,s,a,i)=>{const d=cr(t.fieldBehaviours,[eo.config({find:w=>Go(w,t,"field")}),Dt.config({store:{mode:"manual",getValue:w=>eo.getCurrent(w).bind(Dt.getValue),setValue:(w,x)=>{eo.getCurrent(w).each(A=>{Dt.setValue(A,x)})}}})]),g=rs([Bo((w,x)=>{const A=dE(w,t,["label","field","aria-descriptor"]);A.field().each(M=>{const L=Mt(t.prefix);A.label().each(W=>{je(W.element,"for",L),je(M.element,"id",L)}),A["aria-descriptor"]().each(W=>{const Y=Mt(t.prefix);je(W.element,"id",Y),je(M.element,"aria-describedby",Y)})})})]),h={getField:w=>Go(w,t,"field"),getLabel:w=>Go(w,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},qn=lc({name:"FormField",configFields:w9(),partFields:GB(),factory:S9,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var x9=tinymce.util.Tools.resolve("tinymce.html.Entities");const ow=(t,s,a,i)=>{const d=T9(t,s,a,i);return qn.sketch(d)},E9=(t,s)=>ow(t,s,[],[]),T9=(t,s,a,i)=>({dom:KB(a),components:t.toArray().concat([s]),fieldBehaviours:at(i)}),_9=()=>KB([]),KB=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),gg=(t,s)=>qn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[xs(s.translate(t))]}),cl=Mt("form-component-change"),YB=Mt("form-component-input"),sw=Mt("form-close"),Eh=Mt("form-cancel"),hg=Mt("form-action"),rw=Mt("form-submit"),pO=Mt("form-block"),OT=Mt("form-unblock"),XB=Mt("form-tabchange"),JB=Mt("form-resize"),k9=(t,s,a)=>{const i=t.label.map(Y=>gg(Y,s)),d=s.icons(),g=Y=>{var ne;return(ne=d[Y])!==null&&ne!==void 0?ne:Y},h=Y=>(ne,oe)=>{gu(oe.event.target,"[data-collection-item-value]").each(ye=>{Y(ne,oe,ye,$n(ye,"data-collection-item-value"))})},w=(Y,ne)=>{const ye=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",ie=Ge(ne,Re=>{const Ne=ld.translate(Re.text),xt=t.columns===1?`<div class="tox-collection__item-label">${Ne}</div>`:"",ot=`<div class="tox-collection__item-icon">${g(Re.icon)}</div>`,$e={_:" "," - ":" ","-":" "},Rt=Ne.replace(/\_| \- |\-/g,yt=>$e[yt]);return`<div data-mce-tooltip="${Rt}" class="tox-collection__item${ye}" tabindex="-1" data-collection-item-value="${x9.encodeAllRaw(Re.value)}" aria-label="${Rt}">${ot}${xt}</div>`}),we=t.columns!=="auto"&&t.columns>1?Sr(ie,t.columns):[ie],ve=Ge(we,Re=>`<div class="tox-collection__group">${Re.join("")}</div>`);Ns(Y.element,ve.join(""))},x=h((Y,ne,oe,ye)=>{ne.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||Kt(Y,hg,{name:t.name,value:ye})}),A=[ze(cu(),h((Y,ne,oe)=>{xc(oe,!0)})),ze(Gd(),x),ze(T1(),x),ze(iu(),h((Y,ne,oe)=>{ho(Y.element,"."+fg).each(ye=>{Qs(ye,fg)}),Ks(oe,fg)})),ze(mS(),h(Y=>{ho(Y.element,"."+fg).each(ne=>{Qs(ne,fg),om(ne)})})),Qm(h((Y,ne,oe,ye)=>{Kt(Y,hg,{name:t.name,value:ye})}))],M=(Y,ne)=>Ge(jc(Y.element,".tox-collection__item"),ne),L=qn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:bn},behaviours:at([Ft.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:Y=>{M(Y,ne=>{Ks(ne,"tox-collection__item--state-disabled"),je(ne,"aria-disabled",!0)})},onEnabled:Y=>{M(Y,ne=>{Qs(ne,"tox-collection__item--state-disabled"),zn(ne,"aria-disabled")})}}),yr(()=>s.checkUiComponentContext(t.context)),Cn.config({}),Hs.config({...s.tooltips.getConfig({tooltipText:"",onShow:Y=>{ho(Y.element,"."+fg+"[data-mce-tooltip]").each(ne=>{En(ne,"data-mce-tooltip").each(oe=>{Hs.setComponents(Y,s.tooltips.getComponents({tooltipText:oe}))})})}}),mode:"children-keyboard-focus",anchor:Y=>({type:"node",node:ho(Y.element,"."+fg).orThunk(()=>XS(".tox-collection__item")),root:Y.element,layouts:{onLtr:ae([Hr,Xr,br,Ma,Mr,vr]),onRtl:ae([Hr,Xr,br,Ma,Mr,vr])},bubble:Wc(0,-2,{})})}),Dt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(Y,ne)=>{w(Y,ne),t.columns==="auto"&&NA(Y,5,"tox-collection__item").each(({numRows:oe,numColumns:ye})=>{Gt.setGridSize(Y,oe,ye)}),Un(Y,JB)}}),as.config({}),Gt.config($z(t.columns,"normal")),Sn("collection-events",A)]),eventOrder:{[ac()]:["disabling","alloy.base.behaviour","collection-events"],[iu()]:["collection-events","tooltipping"]}});return ow(i,L,["tox-form__group--collection"],[])},A9=["input","textarea"],QB=t=>{const s=Bs(t);return zo(A9,s)},bO=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Qs(a,s.invalidClass),s.notify.each(i=>{QB(t.element)&&je(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{Ns(d,i.validHtml)}),i.onValid(t)})},vO=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);Ks(d,s.invalidClass),s.notify.each(g=>{QB(t.element)&&je(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{Ns(h,i)}),g.onInvalid(t,i)})},e6=(t,s,a)=>s.validator.fold(()=>Ac.pure(Tn.value(!0)),i=>i.validate(t)),yO=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),e6(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(vO(t,s,a,d),Tn.error(d)),d=>(bO(t,s),Tn.value(d))):Tn.error("No longer in system")));var O9=Object.freeze({__proto__:null,markValid:bO,markInvalid:vO,query:e6,run:yO,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return cc(a,s.invalidClass)}}),t6=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>rs([ze(a.onEvent,i=>{yO(i,t,s).get(bn)})].concat(a.validateOnLoad?[Bo(i=>{yO(i,t,s).get(le)})]:[]))).getOr({})}),ey=[Ze("invalidClass"),Se("getRoot",D.none),Oa("notify",[Se("aria","alert"),Se("getContainer",D.none),Se("validHtml",""),so("onValid"),so("onInvalid"),so("onValidate")]),Oa("validator",[Ze("validate"),Se("onEvent","input"),Se("validateOnLoad",!0)])];const pg=ar({fields:ey,name:"invalidating",active:t6,apis:O9,extra:{validation:t=>s=>{const a=Dt.getValue(s);return Ac.pure(t(a))}}});var RT=Object.freeze({__proto__:null,events:()=>rs([Jm(zf(),Ut)]),exhibit:()=>mu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Ni=ar({fields:[],name:"unselecting",active:RT}),CO=(t,s)=>Eu.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:at([fd.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),yr(()=>s.providers.checkUiComponentContext(t.context)),Ni.config({}),as.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Ac.nu(i=>t.fetch(i)).map(i=>D.from(mO(ns(aO(Mt("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,ud.CLOSE_ON_EXECUTE,fo,s.providers),{movement:TT(t.columns,t.presets)})))),parts:{menu:lT(!1,1,t.presets)}}),wO=Mt("color-input-change"),n6=Mt("color-swatch-change"),o6=Mt("color-picker-cancel"),R9=(t,s,a,i)=>{const d=qn.parts.field({factory:bh,inputClasses:["tox-textfield"],data:i,onSetValue:A=>pg.run(A).get(le),inputBehaviours:at([Ft.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),yr(()=>s.providers.checkUiComponentContext(t.context)),as.config({}),pg.config({invalidClass:"tox-textbox-field-invalid",getRoot:A=>Jc(A.element),notify:{onValid:A=>{const M=Dt.getValue(A);Kt(A,wO,{color:M})}},validator:{validateOnLoad:!1,validate:A=>{const M=Dt.getValue(A);if(M.length===0)return Ac.pure(Tn.value(!0));{const L=ct.fromTag("span");vn(L,"background-color",M);const W=$s(L,"background-color").fold(()=>Tn.error("blah"),Y=>Tn.value(M));return Ac.pure(W)}}}})]),selectOnFocus:!1}),g=t.label.map(A=>gg(A,s.providers)),h=(A,M)=>{Kt(A,n6,{value:M})},w=(A,M)=>{x.getOpt(A).each(L=>{M==="custom"?a.colorPicker(W=>{W.fold(()=>Un(L,o6),Y=>{h(L,Y),lB(t.storageKey,Y)})},"#ffffff"):M==="remove"?h(L,""):h(L,M)})},x=po(CO({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Mr,br,Hr],onLtr:()=>[br,Mr,Hr]},components:[],fetch:hB(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:w,context:t.context},s));return qn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,x.asSpec()]}]),fieldBehaviours:at([Sn("form-field-events",[ze(wO,(A,M)=>{x.getOpt(A).each(L=>{vn(L.element,"background-color",M.event.color)}),Kt(A,cl,{name:t.name})}),ze(n6,(A,M)=>{qn.getField(A).each(L=>{Dt.setValue(L,M.event.value),eo.getCurrent(A).each(dn.focus)})}),ze(o6,(A,M)=>{qn.getField(A).each(L=>{eo.getCurrent(A).each(dn.focus)})})])])})},D9=ii({schema:[Ze("dom")],name:"label"}),Th=t=>ii({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:rs([Oy(jn(),(d,g,h)=>i(d,h),[s]),Oy(Fc(),(d,g,h)=>i(d,h),[s]),Oy(Jh(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),s6=Th("top-left"),M9=Th("top"),N9=Th("top-right"),r6=Th("right"),P9=Th("bottom-right"),a6=Th("bottom"),c6=Th("bottom-left"),i6=Th("left"),B9=qa({name:"thumb",defaults:ae({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:rs([Hg(jn(),t,"spectrum"),Hg(ls(),t,"spectrum"),Hg(pr(),t,"spectrum"),Hg(Fc(),t,"spectrum"),Hg(Jh(),t,"spectrum"),Hg(jd(),t,"spectrum")])})}),DT=t=>Tc(t.event),$9=qa({schema:[co("mouseIsDown",()=>Wt(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,t,h));return{behaviours:at([Gt.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,t,DT(g)),onRight:(d,g)=>a.onRight(d,t,DT(g)),onUp:(d,g)=>a.onUp(d,t,DT(g)),onDown:(d,g)=>a.onDown(d,t,DT(g))}),as.config({}),dn.config({})]),events:rs([ze(jn(),i),ze(ls(),i),ze(Fc(),i),ze(Jh(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var I9=[D9,i6,r6,M9,a6,s6,N9,c6,P9,B9,$9];const aw=ae("slider.change.value"),SO=t=>t.type.indexOf("touch")!==-1,xO=t=>{const s=t.event.raw;if(SO(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?D.some(a.touches[0]).map(i=>qo(i.clientX,i.clientY)):D.none()}else{const a=s;return a.clientX!==void 0?D.some(a).map(i=>qo(i.clientX,i.clientY)):D.none()}},L9="top",l6="right",F9="bottom",H9="left",Hb=t=>t.model.minX,zb=t=>t.model.minY,MT=t=>t.model.minX-1,NT=t=>t.model.minY-1,Vb=t=>t.model.maxX,Jp=t=>t.model.maxY,cw=t=>t.model.maxX+1,PT=t=>t.model.maxY+1,u6=(t,s,a)=>s(t)-a(t),EO=t=>u6(t,Vb,Hb),TO=t=>u6(t,Jp,zb),d6=t=>EO(t)/2,m6=t=>TO(t)/2,Ub=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,_O=t=>t.snapToGrid,kO=t=>t.snapStart,BT=t=>t.rounded,$T=(t,s)=>t[s+"-edge"]!==void 0,AO=t=>$T(t,H9),f6=t=>$T(t,l6),g6=t=>$T(t,L9),h6=t=>$T(t,F9),_h=t=>t.model.value.get(),bg=(t,s)=>({x:t,y:s}),Oc=(t,s)=>{Kt(t,aw(),{value:s})},z9=(t,s)=>{Oc(t,bg(MT(s),NT(s)))},iw=(t,s)=>{Oc(t,NT(s))},V9=(t,s)=>{Oc(t,bg(d6(s),NT(s)))},OO=(t,s)=>{Oc(t,bg(cw(s),NT(s)))},U9=(t,s)=>{Oc(t,cw(s))},W9=(t,s)=>{Oc(t,bg(cw(s),m6(s)))},Z9=(t,s)=>{Oc(t,bg(cw(s),PT(s)))},p6=(t,s)=>{Oc(t,PT(s))},j9=(t,s)=>{Oc(t,bg(d6(s),PT(s)))},RO=(t,s)=>{Oc(t,bg(MT(s),PT(s)))},DO=(t,s)=>{Oc(t,MT(s))},MO=(t,s)=>{Oc(t,bg(MT(s),m6(s)))},NO=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),il=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),b6=(t,s,a)=>Math.max(s,Math.min(a,t)),q9=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/i)*i;return b6(s+h,s-1,a+1)},g=>{const h=(t-g)%i,w=Math.round(h/i),x=Math.floor((t-g)/i),A=Math.floor((a-g)/i),M=Math.min(A,x+w),L=g+M*i;return Math.max(g,L)}),v6=(t,s,a)=>Math.min(a,Math.max(t,s))-s,PO=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:h,snapStart:w,rounded:x,hasMinEdge:A,hasMaxEdge:M,minBound:L,maxBound:W,screenRange:Y}=t,ne=A?s-1:s,oe=M?a+1:a;if(d<L)return ne;if(d>W)return oe;{const ye=v6(d,L,W),ie=b6(ye/Y*i+s,ne,oe);return h&&ie>=s&&ie<=a?q9(ie,s,a,g,w):x?Math.round(ie):ie}},y6=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:w,maxOffset:x,centerMinEdge:A,centerMaxEdge:M}=t;return d<s?g?0:A:d>a?h?w:M:(d-s)/i*x},BO="top",C6="right",w6="bottom",$O="left",G9="width",K9="height",yf=t=>t.element.dom.getBoundingClientRect(),pm=(t,s)=>t[s],IT=t=>{const s=yf(t);return pm(s,$O)},S6=t=>{const s=yf(t);return pm(s,C6)},lw=t=>{const s=yf(t);return pm(s,BO)},LT=t=>{const s=yf(t);return pm(s,w6)},IO=t=>{const s=yf(t);return pm(s,G9)},LO=t=>{const s=yf(t);return pm(s,K9)},FO=(t,s,a)=>(t+s)/2-a,HO=(t,s)=>{const a=yf(t),i=yf(s),d=pm(a,$O),g=pm(a,C6),h=pm(i,$O);return FO(d,g,h)},FT=(t,s)=>{const a=yf(t),i=yf(s),d=pm(a,BO),g=pm(a,w6),h=pm(i,BO);return FO(d,g,h)},HT=(t,s)=>{Kt(t,aw(),{value:s})},uw=(t,s,a)=>{const i={min:Hb(s),max:Vb(s),range:EO(s),value:a,step:Ub(s),snap:_O(s),snapStart:kO(s),rounded:BT(s),hasMinEdge:AO(s),hasMaxEdge:f6(s),minBound:IT(t),maxBound:S6(t),screenRange:IO(t)};return PO(i)},ty=(t,s,a)=>{const i=uw(t,s,a);return HT(t,i),i},x6=(t,s)=>{const a=Hb(s);HT(t,a)},E6=(t,s)=>{const a=Vb(s);HT(t,a)},T6=(t,s,a,i)=>{const g=(t>0?il:NO)(_h(a),Hb(a),Vb(a),Ub(a,i));return HT(s,g),D.some(g)},_6=t=>(s,a,i)=>T6(t,s,a,i).map(Ut),Y9=t=>xO(t).map(a=>a.left),zT=(t,s,a,i,d)=>{const h=IO(t),w=i.bind(M=>D.some(HO(M,t))).getOr(0),x=d.bind(M=>D.some(HO(M,t))).getOr(h),A={min:Hb(s),max:Vb(s),range:EO(s),value:a,hasMinEdge:AO(s),hasMaxEdge:f6(s),minBound:IT(t),maxBound:S6(t),maxOffset:h,centerMinEdge:w,centerMaxEdge:x};return y6(A)},zO=(t,s,a,i,d,g)=>{const h=zT(s,g,a,i,d);return IT(s)-IT(t)+h},X9=(t,s,a,i)=>{const d=_h(a),g=zO(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),h=Rn(s.element)/2;vn(s.element,"left",g-h+"px")},k6=_6(-1),A6=_6(1),VO=D.none,O6=D.none,Pi={"top-left":D.none(),top:D.none(),"top-right":D.none(),right:D.some(U9),"bottom-right":D.none(),bottom:D.none(),"bottom-left":D.none(),left:D.some(DO)};var R6=Object.freeze({__proto__:null,setValueFrom:ty,setToMin:x6,setToMax:E6,findValueOfOffset:uw,getValueFromEvent:Y9,findPositionOfValue:zO,setPositionFromValue:X9,onLeft:k6,onRight:A6,onUp:VO,onDown:O6,edgeActions:Pi});const VT=(t,s)=>{Kt(t,aw(),{value:s})},UO=(t,s,a)=>{const i={min:zb(s),max:Jp(s),range:TO(s),value:a,step:Ub(s),snap:_O(s),snapStart:kO(s),rounded:BT(s),hasMinEdge:g6(s),hasMaxEdge:h6(s),minBound:lw(t),maxBound:LT(t),screenRange:LO(t)};return PO(i)},D6=(t,s,a)=>{const i=UO(t,s,a);return VT(t,i),i},J9=(t,s)=>{const a=zb(s);VT(t,a)},Q9=(t,s)=>{const a=Jp(s);VT(t,a)},eV=(t,s,a,i)=>{const g=(t>0?il:NO)(_h(a),zb(a),Jp(a),Ub(a,i));return VT(s,g),D.some(g)},WO=t=>(s,a,i)=>eV(t,s,a,i).map(Ut),vg=t=>xO(t).map(a=>a.top),ZO=(t,s,a,i,d)=>{const h=LO(t),w=i.bind(M=>D.some(FT(M,t))).getOr(0),x=d.bind(M=>D.some(FT(M,t))).getOr(h),A={min:zb(s),max:Jp(s),range:TO(s),value:a,hasMinEdge:g6(s),hasMaxEdge:h6(s),minBound:lw(t),maxBound:LT(t),maxOffset:h,centerMinEdge:w,centerMaxEdge:x};return y6(A)},UT=(t,s,a,i,d,g)=>{const h=ZO(s,g,a,i,d);return lw(s)-lw(t)+h},WT=(t,s,a,i)=>{const d=_h(a),g=UT(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),h=sr(s.element)/2;vn(s.element,"top",g-h+"px")},jO=D.none,tV=D.none,nV=WO(-1),oV=WO(1),sV={"top-left":D.none(),top:D.some(iw),"top-right":D.none(),right:D.none(),"bottom-right":D.none(),bottom:D.some(p6),"bottom-left":D.none(),left:D.none()};var rV=Object.freeze({__proto__:null,setValueFrom:D6,setToMin:J9,setToMax:Q9,findValueOfOffset:UO,getValueFromEvent:vg,findPositionOfValue:UT,setPositionFromValue:WT,onLeft:jO,onRight:tV,onUp:nV,onDown:oV,edgeActions:sV});const ZT=(t,s)=>{Kt(t,aw(),{value:s})},jT=(t,s)=>({x:t,y:s}),M6=(t,s,a)=>{const i=uw(t,s,a.left),d=UO(t,s,a.top),g=jT(i,d);return ZT(t,g),g},aV=(t,s,a,i,d)=>{const g=t>0?il:NO,h=s?_h(i).x:g(_h(i).x,Hb(i),Vb(i),Ub(i,d)),w=s?g(_h(i).y,zb(i),Jp(i),Ub(i,d)):_h(i).y;return ZT(a,jT(h,w)),D.some(h)},hd=(t,s)=>(a,i,d)=>aV(t,s,a,i,d).map(Ut),qT=(t,s)=>{const a=Hb(s),i=zb(s);ZT(t,jT(a,i))},cV=(t,s)=>{const a=Vb(s),i=Jp(s);ZT(t,jT(a,i))},iV=t=>xO(t),N6=(t,s,a,i)=>{const d=_h(a),g=zO(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),h=UT(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),w=Rn(s.element)/2,x=sr(s.element)/2;vn(s.element,"left",g-w+"px"),vn(s.element,"top",h-x+"px")},P6=hd(-1,!1),qO=hd(1,!1),GT=hd(-1,!0),dw=hd(1,!0),mw={"top-left":D.some(z9),top:D.some(V9),"top-right":D.some(OO),right:D.some(W9),"bottom-right":D.some(Z9),bottom:D.some(j9),"bottom-left":D.some(RO),left:D.some(MO)};var B6=Object.freeze({__proto__:null,setValueFrom:M6,setToMin:qT,setToMax:cV,getValueFromEvent:iV,setPositionFromValue:N6,onLeft:P6,onRight:qO,onUp:GT,onDown:dw,edgeActions:mw});const $6=[Se("stepSize",1),Se("speedMultiplier",10),Se("onChange",le),Se("onChoose",le),Se("onInit",le),Se("onDragStart",le),Se("onDragEnd",le),Se("snapToGrid",!1),Se("rounded",!0),lo("snapStart"),io("model",Or("mode",{x:[Se("minX",0),Se("maxX",100),co("value",t=>Wt(t.mode.minX)),Ze("getInitialValue"),us("manager",R6)],y:[Se("minY",0),Se("maxY",100),co("value",t=>Wt(t.mode.minY)),Ze("getInitialValue"),us("manager",rV)],xy:[Se("minX",0),Se("maxX",100),Se("minY",0),Se("maxY",100),co("value",t=>Wt({x:t.mode.minX,y:t.mode.minY})),Ze("getInitialValue"),us("manager",B6)]})),ga("sliderBehaviours",[Gt,Dt]),co("mouseIsDown",()=>Wt(!1))],pd=lc({name:"Slider",configFields:$6,partFields:I9,factory:(t,s,a,i)=>{const d=Ne=>cd(Ne,t,"thumb"),g=Ne=>cd(Ne,t,"spectrum"),h=Ne=>Go(Ne,t,"left-edge"),w=Ne=>Go(Ne,t,"right-edge"),x=Ne=>Go(Ne,t,"top-edge"),A=Ne=>Go(Ne,t,"bottom-edge"),M=t.model,L=M.manager,W=(Ne,xt)=>{L.setPositionFromValue(Ne,xt,t,{getLeftEdge:h,getRightEdge:w,getTopEdge:x,getBottomEdge:A,getSpectrum:g})},Y=(Ne,xt)=>{M.value.set(xt);const ot=d(Ne);W(Ne,ot)},ne=(Ne,xt)=>{Y(Ne,xt);const ot=d(Ne);return t.onChange(Ne,ot,xt),D.some(!0)},oe=Ne=>{L.setToMin(Ne,t)},ye=Ne=>{L.setToMax(Ne,t)},ie=Ne=>{const xt=()=>{Go(Ne,t,"thumb").each($e=>{const Rt=M.value.get();t.onChoose(Ne,$e,Rt)})},ot=t.mouseIsDown.get();t.mouseIsDown.set(!1),ot&&xt()},we=(Ne,xt)=>{xt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Ne,d(Ne))},ve=(Ne,xt)=>{xt.stop(),t.onDragEnd(Ne,d(Ne)),ie(Ne)},Re=Ne=>{Go(Ne,t,"spectrum").map(Gt.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:cr(t.sliderBehaviours,[Gt.config({mode:"special",focusIn:Re}),Dt.config({store:{mode:"manual",getValue:Ne=>M.value.get(),setValue:Y}}),ai.config({channels:{[pv()]:{onReceive:ie}}})]),events:rs([ze(aw(),(Ne,xt)=>{ne(Ne,xt.event.value)}),Bo((Ne,xt)=>{const ot=M.getInitialValue();M.value.set(ot);const $e=d(Ne);W(Ne,$e);const Rt=g(Ne);t.onInit(Ne,$e,Rt,M.value.get())}),ze(jn(),we),ze(pr(),ve),ze(Fc(),(Ne,xt)=>{Re(Ne),we(Ne,xt)}),ze(jd(),ve)]),apis:{resetToMin:oe,resetToMax:ye,setValue:Y,refresh:W},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),GO=Mt("rgb-hex-update"),I6=Mt("slider-update"),L6=Mt("palette-update"),uV=(t,s)=>{const a=pd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=pd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return pd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ae(0)},components:[a,i],sliderBehaviours:at([dn.config({})]),onChange:(d,g,h)=>{je(d.element,"aria-valuenow",Math.floor(360-h*3.6)),Kt(d,I6,{value:h})}})},F6="form",H6=[ga("formBehaviours",[Dt])],KO=t=>"<alloy.field."+t+">",dV=t=>{const s=(()=>{const g=[];return{field:(w,x)=>(g.push(w),Sv(F6,KO(w),x)),record:ae(g)}})(),a=t(s),i=s.record(),d=Ge(i,g=>qa({name:g,pname:KO(g)}));return vb(F6,H6,d,mV,a)},z6=(t,s)=>t.fold(()=>Tn.error(s),Tn.value),mV=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:cr(t.formBehaviours,[Dt.config({store:{mode:"manual",getValue:a=>{const i=mE(a,t);return To(i,(d,g)=>d().bind(h=>{const w=eo.getCurrent(h);return z6(w,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+si(h.element)))}).map(Dt.getValue))},setValue:(a,i)=>{As(i,(d,g)=>{Go(a,t,g).each(h=>{eo.getCurrent(h).each(w=>{Dt.setValue(w,d)})})})}}})]),apis:{getField:(a,i)=>Go(a,t,i).bind(eo.getCurrent)}}),Wb={getField:sd((t,s,a)=>t.getField(s,a)),sketch:dV},Qp=Mt("valid-input"),V6=Mt("invalid-input"),YO=Mt("validating-input"),XO="colorcustom.rgb.",fV={isEnabled:Ut,setEnabled:le,immediatelyShow:le,immediatelyHide:le},gV=(t,s,a,i,d,g)=>{const h=(oe,ye)=>{const ie=ye.get();oe!==ie.isEnabled()&&(ie.setEnabled(oe),oe?ie.immediatelyShow():ie.immediatelyHide())},w=(oe,ye,ie)=>pg.config({invalidClass:s("invalid"),notify:{onValidate:we=>{Kt(we,YO,{type:oe})},onValid:we=>{h(!1,ie),Kt(we,Qp,{type:oe,value:Dt.getValue(we)})},onInvalid:we=>{h(!0,ie),Kt(we,V6,{type:oe,value:Dt.getValue(we)})}},validator:{validate:we=>{const ve=Dt.getValue(we),Re=ye(ve)?Tn.value(!0):Tn.error(t("aria.input.invalid"));return Ac.pure(Re)},validateOnLoad:!1}}),x=(oe,ye,ie,we,ve)=>{const Re=Wt(fV),Ne=t(XO+"range"),xt=qn.parts.label({dom:{tag:"label"},components:[xs(ie)]}),ot=qn.parts.field({data:ve,factory:bh,inputAttributes:{type:"text","aria-label":we,...ye==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:at([w(ye,oe,Re),as.config({}),Hs.config({...d({tooltipText:"",onSetup:mo=>{Re.set({isEnabled:()=>Hs.isEnabled(mo),setEnabled:jt=>Hs.setEnabled(mo,jt),immediatelyShow:()=>Hs.immediateOpenClose(mo,!0),immediatelyHide:()=>Hs.immediateOpenClose(mo,!1)}),Hs.setEnabled(mo,!1)},onShow:(mo,jt)=>{Hs.setComponents(mo,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[xs(t(ye==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:mo=>{pg.isInvalid(mo)&&pg.run(mo).get(le)}}),$e=Mt("aria-invalid"),Rt=po(g("invalid",D.some($e),"warning")),yt=po({dom:{tag:"div",classes:[s("invalid-icon")]},components:[Rt.asSpec()]}),$t=[xt,ot,yt.asSpec()],Hn=ye!=="hex"?[qn.parts["aria-descriptor"]({text:Ne})]:[],Yo=$t.concat(Hn);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:Yo}},A=(oe,ye)=>{const ie=jC(ye);return Wb.getField(oe,"hex").each(we=>{dn.isFocused(we)||Dt.setValue(oe,{hex:ie.value})}),ie},M=(oe,ye)=>{const ie=ye.red,we=ye.green,ve=ye.blue;Dt.setValue(oe,{red:ie,green:we,blue:ve})},L=po({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),W=(oe,ye)=>{L.getOpt(oe).each(ie=>{vn(ie.element,"background-color","#"+ye.value)})};return li({factory:()=>{const oe={red:Wt(D.some(255)),green:Wt(D.some(255)),blue:Wt(D.some(255)),hex:Wt(D.some("ffffff"))},ye=(jt,st)=>{const At=qC(st);M(jt,At),Re(At)},ie=jt=>oe[jt].get(),we=(jt,st)=>{oe[jt].set(st)},ve=()=>ie("red").bind(jt=>ie("green").bind(st=>ie("blue").map(At=>Ib(jt,st,At,1)))),Re=jt=>{const st=jt.red,At=jt.green,pn=jt.blue;we("red",D.some(st)),we("green",D.some(At)),we("blue",D.some(pn))},Ne=(jt,st)=>{const At=st.event;At.type!=="hex"?we(At.type,D.none()):i(jt)},xt=(jt,st)=>{a(jt);const At=UA(st);we("hex",D.some(At.value));const pn=qC(At);M(jt,pn),Re(pn),Kt(jt,GO,{hex:At}),W(jt,At)},ot=(jt,st,At)=>{const pn=parseInt(At,10);we(st,D.some(pn)),ve().each(Pn=>{const nn=A(jt,Pn);Kt(jt,GO,{hex:nn}),W(jt,nn)})},$e=jt=>jt.type==="hex",Rt=(jt,st)=>{const At=st.event;$e(At)?xt(jt,At.value):ot(jt,At.type,At.value)},yt=jt=>({label:t(XO+jt+".label"),description:t(XO+jt+".description")}),$t=yt("red"),Hn=yt("green"),Yo=yt("blue"),mo=yt("hex");return ns(Wb.sketch(jt=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[jt.field("red",qn.sketch(x(jA,"red",$t.label,$t.description,255))),jt.field("green",qn.sketch(x(jA,"green",Hn.label,Hn.description,255))),jt.field("blue",qn.sketch(x(jA,"blue",Yo.label,Yo.description,255))),jt.field("hex",qn.sketch(x(KP,"hex",mo.label,mo.description,"ffffff"))),L.asSpec()],formBehaviours:at([pg.config({invalidClass:s("form-invalid")}),Sn("rgb-form-events",[ze(Qp,Rt),ze(V6,Ne),ze(YO,Ne)])])})),{apis:{updateHex:(jt,st)=>{Dt.setValue(jt,{hex:st.value}),ye(jt,st),W(jt,st)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(oe,ye,ie)=>{oe.updateHex(ye,ie)}},extraApis:{}})},hV=(t,s)=>{const a=pd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=pd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(A,M)=>{const{width:L,height:W}=A,Y=A.getContext("2d");if(Y===null)return;Y.fillStyle=M,Y.fillRect(0,0,L,W);const ne=Y.createLinearGradient(0,0,L,0);ne.addColorStop(0,"rgba(255,255,255,1)"),ne.addColorStop(1,"rgba(255,255,255,0)"),Y.fillStyle=ne,Y.fillRect(0,0,L,W);const oe=Y.createLinearGradient(0,0,0,W);oe.addColorStop(0,"rgba(0,0,0,0)"),oe.addColorStop(1,"rgba(0,0,0,1)"),Y.fillStyle=oe,Y.fillRect(0,0,L,W)},g=(A,M)=>{const L=A.components()[0].element.dom,W=XC(M,100,100),Y=eB(W);d(L,tB(Y))},h=(A,M)=>{const L=XA(qC(M));pd.setValue(A,{x:L.saturation,y:100-L.value}),je(A.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",L.saturation,L.value]))};return li({factory:A=>{const M=ae({x:0,y:0}),L=(ne,oe,ye)=>{On(ye)||je(ne.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(ye.x),Math.floor(100-ye.y)])),Kt(ne,L6,{value:ye})},W=(ne,oe,ye,ie)=>{d(ye.element.dom,tB(nB))},Y=at([eo.config({find:D.some}),dn.config({})]);return pd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:M},rounded:!1,components:[a,i],onChange:L,onInit:W,sliderBehaviours:Y})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(A,M,L)=>{g(M,L)},setThumb:(A,M,L)=>{h(M,L)}},extraApis:{}})},U6=(t,s,a,i)=>{const d=h=>{const w=gV(t,s,h.onValidHex,h.onInvalidHex,a,i),x=hV(t,s),A=$e=>(100-$e)/100*360,M=$e=>100-$e/360*100,L={paletteRgba:Wt(nB),paletteHue:Wt(0)},W=po(uV(t,s)),Y=po(x.sketch({})),ne=po(w.sketch({})),oe=($e,Rt,yt)=>{Y.getOpt($e).each($t=>{x.setHue($t,yt)})},ye=($e,Rt)=>{ne.getOpt($e).each(yt=>{w.updateHex(yt,Rt)})},ie=($e,Rt,yt)=>{W.getOpt($e).each($t=>{pd.setValue($t,M(yt))})},we=($e,Rt)=>{Y.getOpt($e).each(yt=>{x.setThumb(yt,Rt)})},ve=($e,Rt)=>{const yt=qC($e);L.paletteRgba.set(yt),L.paletteHue.set(Rt)},Re=($e,Rt,yt,$t)=>{ve(Rt,yt),pt($t,Hn=>{Hn($e,Rt,yt)})},Ne=()=>{const $e=[ye];return(Rt,yt)=>{const $t=yt.event.value,Hn=L.paletteHue.get(),Yo=XC(Hn,$t.x,100-$t.y),mo=uB(Yo);Re(Rt,mo,Hn,$e)}},xt=()=>{const $e=[oe,ye];return(Rt,yt)=>{const $t=A(yt.event.value),Hn=L.paletteRgba.get(),Yo=XA(Hn),mo=XC($t,Yo.saturation,Yo.value),jt=uB(mo);Re(Rt,jt,$t,$e)}},ot=()=>{const $e=[oe,ie,we];return(Rt,yt)=>{const $t=yt.event.hex,Hn=wz($t);Re(Rt,$t,Hn.hue,$e)}};return{uid:h.uid,dom:h.dom,components:[Y.asSpec(),W.asSpec(),ne.asSpec()],behaviours:at([Sn("colour-picker-events",[ze(GO,ot()),ze(L6,Ne()),ze(I6,xt())]),eo.config({find:$e=>ne.getOpt($e)}),Gt.config({mode:"acyclic"})])}};return li({name:"ColourPicker",configFields:[Ze("dom"),Se("onValidHex",le),Se("onInvalidHex",le)],factory:d})},Rc={self:()=>eo.config({find:D.some}),memento:t=>eo.config({find:t.getOpt}),childAt:t=>eo.config({find:s=>Vi(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},JO=mn([Se("preprocess",bn),Se("postprocess",bn)]),Z6=(t,s)=>{const a=sc("RepresentingConfigs.memento processors",JO,s);return Dt.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=Dt.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),h=t.get(i);Dt.setValue(h,g)}}})},e1=(t,s,a)=>Dt.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),KT=(t,s,a)=>e1(t,i=>s(i.element),(i,d)=>a(i.element,d)),j6=t=>KT(t,H1,Ns),Zb=t=>Dt.config({store:{mode:"memory",initialValue:t}}),q6={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},G6=t=>s=>se(s)?t.translate(q6[s]):t.translate(s),bV=(t,s,a)=>{const i=A=>"tox-"+A,d=(A,M,L=A,W=A)=>Su(L,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+A],attributes:{title:s.translate(W),"aria-live":"polite",...M.fold(()=>({}),Y=>({id:Y}))}},s.icons),g=U6(G6(s),i,s.tooltips.getConfig,d),h=A=>{Kt(A,hg,{name:"hex-valid",value:!0})},w=A=>{Kt(A,hg,{name:"hex-valid",value:!1})},x=po(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:w}));return{dom:{tag:"div"},components:[x.asSpec()],behaviours:at([e1(a,A=>{const M=x.get(A);return eo.getCurrent(M).bind(Y=>Dt.getValue(Y).hex).map(Y=>"#"+_m(Y,"#")).getOr("")},(A,M)=>{const L=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,W=D.from(L.exec(M)).bind(oe=>Cs(oe,1)),Y=x.get(A);eo.getCurrent(Y).fold(()=>{console.log("Can not find form")},oe=>{Dt.setValue(oe,{hex:W.getOr("")}),Wb.getField(oe,"hex").each(ye=>{Un(ye,qd())})})}),Rc.self()])}};var vV=tinymce.util.Tools.resolve("tinymce.Resource");const K6=t=>Yn(t,"init"),yV=t=>{const s=go(),a=po({dom:{tag:t.tag}}),i=go(),d=!K6(t)&&t.onFocus.isSome()?[dn.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),as.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:at([Sn("custom-editor-events",[Bo(g=>{a.getOpt(g).each(h=>{(K6(t)?t.init(h.element.dom):vV.load(t.scriptId,t.scriptUrl).then(w=>w(h.element.dom,t.settings))).then(w=>{i.on(x=>{w.setValue(x)}),i.clear(),s.set(w)})})})]),e1(D.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),w=>w.setValue(h))}),Rc.self()].concat(d)),components:[a.asSpec()]}};var kh=tinymce.util.Tools.resolve("tinymce.util.Tools");const YT=Mt("browse.files.event"),Y6=(t,s)=>{const a=kh.explode(s.getOption("images_file_types")),i=d=>wr(a,g=>fc(d.name.toLowerCase(),`.${g.toLowerCase()}`));return ko(Ca(t),i)},CV=(t,s,a)=>{const i=(W,Y)=>{Y.stop()},d=W=>(Y,ne)=>{pt(W,oe=>{oe(Y,ne)})},g=(W,Y)=>{var ne;if(!Ft.isDisabled(W)){const oe=Y.event.raw;Kt(W,YT,{files:(ne=oe.dataTransfer)===null||ne===void 0?void 0:ne.files})}},h=(W,Y)=>{const ne=Y.event.raw.target;Kt(W,YT,{files:ne.files})},w=(W,Y)=>{Y&&(Dt.setValue(W,Y6(Y,s)),Kt(W,cl,{name:t.name}))},x=po({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:at([Sn("input-file-events",[Wf(Gd()),Wf(T1())])])}),A=t.label.map(W=>gg(W,s)),M=qn.parts.field({factory:na,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[xs(s.translate("Browse for an image")),x.asSpec()],action:W=>{x.get(W).element.dom.click()},buttonBehaviours:at([Rc.self(),Zb(a.getOr([])),as.config({}),fd.button(()=>s.checkUiComponentContext(t.context).shouldDisable),yr(()=>s.checkUiComponentContext(t.context))])}),L={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:at([Ft.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),yr(()=>s.checkUiComponentContext(t.context)),Ln.config({toggleClass:"dragenter",toggleOnExecute:!1}),Sn("dropzone-events",[ze("dragenter",d([i,Ln.toggle])),ze("dragleave",d([i,Ln.toggle])),ze("dragover",i),ze("drop",d([i,g])),ze(Km(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[xs(s.translate("Drop an image here"))]},M]}]};return ow(A,L,["tox-form__group--stretched"],[Sn("handle-files",[ze(YT,(W,Y)=>{qn.getField(W).each(ne=>{w(ne,Y.event.files)})})])])},wV=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ge(t.items,s.interpreter)}),SV=(t,s)=>{let a=null,i=null;return{cancel:()=>{ut(a)||(clearTimeout(a),a=null,i=null)},throttle:(...h)=>{i=h,ut(a)&&(a=setTimeout(()=>{const w=i;a=null,i=null,t.apply(null,w)},s))}}},XT=(t,s)=>{let a=null;return{cancel:()=>{ut(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{ut(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},QO=(t,s)=>{let a=null;const i=()=>{ut(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},eR=Mt("alloy-fake-before-tabstop"),JT=Mt("alloy-fake-after-tabstop"),tR=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:at([dn.config({ignore:!0}),as.config({})])}),X6=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[tR([eR]),s,tR([JT])],behaviours:at([Rc.childAt(1)])}),J6=(t,s)=>{Kt(t,Va(),{raw:{which:9,shiftKey:s}})},nR=(t,s)=>{const a=s.element;cc(a,eR)?J6(t,!0):cc(a,JT)&&J6(t,!1)},fw=t=>bf(t,["."+eR,"."+JT].join(","),fo),gw=Mt("update-dialog"),Q6=Mt("update-title"),e$=Mt("update-body"),t$=Mt("update-footer"),oR=Mt("body-send-message"),hw=Mt("dialog-focus-shifted"),sR=Ts().browser,pw=sR.isSafari(),xV=sR.isFirefox(),n$=pw||xV,o$=sR.isChromium(),EV=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,rR=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),TV=(t,s)=>{const a=t.body;return D.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!o$&&!pw||cn(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},s$=(t,s,a)=>{const i=t.dom;D.from(i.contentDocument).fold(a,d=>{let g=0;const h=TV(d,s).map(x=>(g=x.scrollTop,x)).forall(EV),w=()=>{const x=i.contentWindow;cn(x)&&(h?rR(x,"bottom"):!h&&n$&&g!==0&&rR(x,g))};pw&&i.addEventListener("load",w,{once:!0}),d.open(),d.write(s),d.close(),pw||w()})},_V=an(n$,pw?500:200).map(t=>SV(s$,t)),kV=(t,s)=>{const a=Wt(t.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,h=()=>je(g,"srcdoc",d);s?_V.fold(ae(s$),w=>w.throttle)(g,d,h):h()}a.set(d)}}},AV=(t,s,a)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(L=>({title:L})).getOr({}),...a.map(L=>({srcdoc:L})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},w=kV(a,t.streamContent),x=t.label.map(L=>gg(L,s)),A=L=>X6(D.from(g),{uid:L.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:at([as.config({}),dn.config({}),e1(a,w.getValue,w.setValue),ai.config({channels:{[hw]:{onReceive:(W,Y)=>{Y.newFocus.each(ne=>{Jc(W.element).each(oe=>{(Xn(W.element,ne)?Ks:Qs)(oe,"tox-navobj-bordered-focus")})})}}}})])}),M=qn.parts.field({factory:{sketch:A}});return ow(x,M,["tox-form__group--stretched"],[])},OV=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[Uc(t,"load",i),Uc(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>pt(d,h=>h.unbind());t.dom.complete&&i()}),RV=(t,s,a,i,d)=>{const g=a*d,h=i*d,w=Math.max(0,t/2-g/2),x=Math.max(0,s/2-h/2);return{left:w.toString()+"px",top:x.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},DV=(t,s,a)=>{const i=Rn(t),d=sr(t);return Math.min(i/s,d/a,1)},aR=(t,s)=>{const a=Wt(s.getOr({url:""})),i=po({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(x=>({src:x.url})).getOr({})}}),d=po({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(x,A)=>{const M={url:A.url};A.zoom.each(W=>M.zoom=W),A.cachedWidth.each(W=>M.cachedWidth=W),A.cachedHeight.each(W=>M.cachedHeight=W),a.set(M);const L=()=>{const{cachedWidth:W,cachedHeight:Y,zoom:ne}=M;if(!Mn(W)&&!Mn(Y)){if(Mn(ne)){const ye=DV(x.element,W,Y);M.zoom=ye}const oe=RV(Rn(x.element),sr(x.element),W,Y,M.zoom);d.getOpt(x).each(ye=>{jr(ye.element,oe)})}};i.getOpt(x).each(W=>{const Y=W.element;A.url!==$n(Y,"src")&&(je(Y,"src",A.url),Qs(x.element,"tox-imagepreview__loaded")),L(),OV(Y).then(ne=>{x.getSystem().isConnected()&&(Ks(x.element,"tox-imagepreview__loaded"),M.cachedWidth=ne.dom.naturalWidth,M.cachedHeight=ne.dom.naturalHeight,L())})})},h={};t.height.each(x=>h.height=x);const w=s.map(x=>({url:x.url,zoom:D.from(x.zoom),cachedWidth:D.from(x.cachedWidth),cachedHeight:D.from(x.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:at([Rc.self(),e1(w,()=>a.get(),g)])}},MV=(t,s,a)=>{const i="tox-label",d=t.align==="center"?[`${i}--center`]:[],g=t.align==="end"?[`${i}--end`]:[],h=po({dom:{tag:"label",classes:[i,...d,...g]},components:[xs(s.providers.translate(t.label))]}),w=Ge(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...w],behaviours:at([Rc.self(),Cn.config({}),j6(D.none()),Gt.config({mode:"acyclic"}),Sn("label",[Bo(x=>{t.for.each(A=>{a(A).each(M=>{h.getOpt(x).each(L=>{var W;const Y=(W=$n(M.element,"id"))!==null&&W!==void 0?W:Mt("form-field");je(M.element,"id",Y),je(L.element,"for",Y)})})})})])])}},r$=Mt("toolbar.button.execute"),NV=t=>Qm((s,a)=>{ZC(t,s)(i=>{Kt(s,r$,{buttonApi:i}),t.onAction(i)})}),bm=Mt("common-button-display-events"),QT={[ac()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[uu()]:["toolbar-button-events",bm],[du()]:["toolbar-button-events","dropdown-events","tooltipping"],[Fc()]:["focusing","alloy.base.behaviour",bm]},cR=t=>vn(t.element,"width",Qe(t.element,"width")),a$=(t,s,a)=>Su(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),bw=(t,s)=>a$(t,s,[]),t1=(t,s)=>a$(t,s,[Cn.config({})]),e_=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[xs(a.translate(t))],behaviours:at([Cn.config({})])}),Tu=Mt("update-menu-text"),jb=Mt("update-menu-icon"),iR=(t,s,a,i)=>{const d=Wt(le),g=t.text.map(oe=>po(e_(oe,s,a.providers))),h=t.icon.map(oe=>po(t1(oe,a.providers.icons))),w=(oe,ye)=>{const ie=Dt.getValue(oe);return dn.focus(ie),Kt(ie,"keydown",{raw:ye.event.raw}),Eu.close(ie),D.some(!0)},x=t.role.fold(()=>({}),oe=>({role:oe})),A=D.from(t.listRole).map(oe=>({listRole:oe})).getOr({}),M=t.ariaLabel.fold(()=>({}),oe=>({"aria-label":a.providers.translate(oe)})),L=Su("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),W=Mt("common-button-display-events"),Y="dropdown-events";return po(Eu.sketch({...t.uid?{uid:t.uid}:{},...x,...A,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ge(t.classes,oe=>`${s}--${oe}`)),attributes:{...M,...cn(i)?{"data-mce-name":i}:{}}},components:Zv([h.map(oe=>oe.asSpec()),g.map(oe=>oe.asSpec()),D.some(L)]),matchWidth:!0,useMinWidth:!0,onOpen:(oe,ye,ie)=>{t.searchable&&i9(ie)},dropdownBehaviours:at([...t.dropdownBehaviours,fd.button(()=>t.disabled||a.providers.checkUiComponentContext(t.context).shouldDisable),yr(()=>a.providers.checkUiComponentContext(t.context)),Ni.config({}),Cn.config({}),...t.tooltip.map(oe=>Hs.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(oe)}))).toArray(),Sn(Y,[pf(t,d),wh(t,d)]),Sn(W,[Bo((oe,ye)=>{t.listRole!=="listbox"&&cR(oe)})]),Sn("update-dropdown-width-variable",[ze(ep(),(oe,ye)=>Eu.close(oe))]),Sn("menubutton-update-display-text",[ze(Tu,(oe,ye)=>{g.bind(ie=>ie.getOpt(oe)).each(ie=>{Cn.set(ie,[xs(a.providers.translate(ye.event.text))])})}),ze(jb,(oe,ye)=>{h.bind(ie=>ie.getOpt(oe)).each(ie=>{Cn.set(ie,[t1(ye.event.icon,a.providers.icons)])})})])]),eventOrder:ns(QT,{[Fc()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[uu()]:["toolbar-button-events",Hs.name(),Y,W]}),sandboxBehaviours:at([Gt.config({mode:"special",onLeft:w,onRight:w}),Sn("dropdown-sandbox-events",[ze(uP,(oe,ye)=>{kT(oe),ye.stop()}),ze(dP,(oe,ye)=>{Xv(oe,ye),ye.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...lT(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:IB,onCollapseMenu:(oe,ye,ie)=>{Q.getHighlighted(ie).each(we=>{IB(oe,ie,we)})},onDehighlightItem:c9}}},getAnchorOverrides:()=>({maxHeightFunction:(oe,ye)=>{p2()(oe,ye-10)}}),fetch:oe=>Ac.nu(Nn(t.fetch,oe))})).asSpec()},c$=t=>se(t),lR=t=>t.type==="separator",PV=t=>Yn(t,"getSubmenuItems"),i$={type:"separator"},l$=(t,s)=>{const a=Vo(t,(i,d)=>c$(d)?d===""?i:d==="|"?i.length>0&&!lR(i[i.length-1])?i.concat([i$]):i:Yn(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&lR(a[a.length-1])&&a.pop(),a},BV=(t,s)=>{const a=t.getSubmenuItems(),i=uR(a,s),d=ns(i.menus,{[t.value]:i.items}),g=ns(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},u$=t=>{const s=bt(t,"value").getOrThunk(()=>Mt("generated-menu-item"));return ns({value:s},t)},uR=(t,s)=>{const a=l$(se(t)?t.split(" "):t,s);return gs(a,(i,d)=>{if(PV(d)){const g=u$(d),h=BV(g,s);return{menus:ns(i.menus,h.menus),items:[h.item,...i.items],expansions:ns(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},d$=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),$V=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),ny=(t,s,a,i)=>{const d=Mt("primary-menu"),g=uR(t,a.shared.providers.menuItems());if(g.items.length===0)return D.none();const h=d$(i),w=LB(d,g.items,s,a,i.isHorizontalMenu,h),x=$V(i),A=To(g.menus,(L,W)=>LB(W,L,s,a,!1,x)),M=ns(A,wo(d,w));return D.from(Wp.tieredData(d,M,g.expansions))},t_=t=>!Yn(t,"items"),dR="data-value",m$=(t,s,a,i,d)=>Ge(a,g=>t_(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{Dt.setValue(t,g.value),Kt(t,cl,{name:s}),dn.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>m$(t,s,g.items,i,d)}),n_=(t,s)=>ks(t,a=>t_(a)?an(a.value===s,a):n_(a.items,s)),IV=(t,s,a)=>{const i=wr(t.items,A=>!t_(A)),d=s.shared.providers,g=a.bind(A=>n_(t.items,A)).orThunk(()=>Pr(t.items).filter(t_)),h=t.label.map(A=>gg(A,d)),w=qn.parts.field({dom:{},factory:{sketch:A=>iR({context:t.context,uid:A.uid,text:g.map(M=>M.text),icon:D.none(),tooltip:D.none(),role:an(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(M,L)=>{const W=m$(M,t.name,t.items,Dt.getValue(M),i);L(ny(W,ud.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:D.none()}))},onSetup:ae(le),getApi:ae({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[as.config({}),e1(g.map(M=>M.value),M=>$n(M.element,dR),(M,L)=>{n_(t.items,L).each(W=>{je(M.element,dR,W.value),Kt(M,Tu,{text:W.text})})})]},"tox-listbox",s.shared)}}),x={dom:{tag:"div",classes:["tox-listboxfield"]},components:[w]};return qn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:hn([h.toArray(),[x]]),fieldBehaviours:at([Ft.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:A=>{qn.getField(A).each(Ft.disable)},onEnabled:A=>{qn.getField(A).each(Ft.enable)}})])})},LV=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ge(t.items,s.shared.interpreter)}),mR=(t,s)=>{const a=Ge(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>wo("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:cr(t.selectBehaviours,[dn.config({}),Dt.config({store:{mode:"manual",getValue:d=>Ie(d.element),setValue:(d,g)=>{const h=Pr(t.options);gn(t.options,x=>x.value===g).isSome()?em(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(x=>em(d.element,x.value))},...i}})])}},FV=li({name:"HtmlSelect",configFields:[Ze("options"),ga("selectBehaviours",[dn,Dt]),Se("selectClasses",[]),Se("selectAttributes",{}),lo("data")],factory:mR}),HV=(t,s,a)=>{const i=Ge(t.items,x=>({text:s.translate(x.text),value:x.value})),d=t.label.map(x=>gg(x,s)),g=qn.parts.field({dom:{},...a.map(x=>({data:x})).getOr({}),selectAttributes:{size:t.size},options:i,factory:FV,selectBehaviours:at([Ft.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),as.config({}),Sn("selectbox-change",[ze(Km(),(x,A)=>{Kt(x,cl,{name:t.name})})])])}),h=t.size>1?D.none():D.some(Su("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),w={dom:{tag:"div",classes:["tox-selectfield"]},components:hn([[g],h.toArray()])};return qn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:hn([d.toArray(),[w]]),fieldBehaviours:at([Ft.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:x=>{qn.getField(x).each(Ft.disable)},onEnabled:x=>{qn.getField(x).each(Ft.enable)}}),yr(()=>s.checkUiComponentContext(t.context))])})},zV=ae([Se("field1Name","field1"),Se("field2Name","field2"),nl("onLockedChange"),od(["lockClass"]),Se("locked",!1),al.field("coupledFieldBehaviours",[eo,Dt]),Po("onInput",le)]),fR=(t,s,a)=>Go(t,s,a).bind(eo.getCurrent),f$=(t,s)=>qa({factory:qn,name:t,overrides:a=>({fieldBehaviours:at([Sn("coupled-input-behaviour",[ze(qd(),i=>{fR(i,a,s).each(d=>{Go(i,a,"lock").each(g=>{Ln.isOn(g)&&a.onLockedChange(i,d,g),a.onInput(i)})})})])])})}),g$=ae([f$("field1","field2"),f$("field2","field1"),qa({factory:na,schema:[Ze("dom")],name:"lock",overrides:t=>({buttonBehaviours:at([Ln.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),VV=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:al.augment(t.coupledFieldBehaviours,[eo.config({find:D.some}),Dt.config({store:{mode:"manual",getValue:d=>{const g=Ev(d,t,["field1","field2"]);return{[t.field1Name]:Dt.getValue(g.field1()),[t.field2Name]:Dt.getValue(g.field2())}},setValue:(d,g)=>{const h=Ev(d,t,["field1","field2"]);Ur(g,t.field1Name)&&Dt.setValue(h.field1(),g[t.field1Name]),Ur(g,t.field2Name)&&Dt.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Go(d,t,"field1"),getField2:d=>Go(d,t,"field2"),getLock:d=>Go(d,t,"lock")}}),lr=lc({name:"FormCoupledInputs",configFields:zV(),partFields:g$(),factory:VV,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),h$=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},o_=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return Tn.value({value:i,unit:d})}else return Tn.error(t)},p$=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>Yn(a,d);return t.unit===s?D.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?D.some(t.value):D.some(t.value/a[t.unit]*a[s]):D.none()},s_=t=>D.none(),UV=(t,s)=>a=>p$(a,s).map(i=>({value:i*t,unit:s})),gR=(t,s)=>{const a=o_(t).toOptional(),i=o_(s).toOptional();return mc(a,i,(d,g)=>p$(d,g.unit).map(h=>g.value/h).map(h=>UV(h,g.unit)).getOr(s_)).getOr(s_)},WV=(t,s)=>{let a=s_;const i=Mt("ratio-event"),d=oe=>Su(oe,{tag:"span",classes:["tox-icon","tox-lock-icon__"+oe]},s.icons),g=()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,h=yr(()=>s.checkUiComponentContext(t.context)),w=t.label.getOr("Constrain proportions"),x=s.translate(w),A=lr.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":x,"data-mce-name":w}},components:[d("lock"),d("unlock")],buttonBehaviours:at([Ft.config({disabled:g}),h,as.config({}),Hs.config(s.tooltips.getConfig({tooltipText:x}))])}),M=oe=>({dom:{tag:"div",classes:["tox-form__group"]},components:oe}),L=oe=>qn.parts.field({factory:bh,inputClasses:["tox-textfield"],inputBehaviours:at([Ft.config({disabled:g}),h,as.config({}),Sn("size-input-events",[ze(iu(),(ye,ie)=>{Kt(ye,i,{isField1:oe})}),ze(Km(),(ye,ie)=>{Kt(ye,cl,{name:t.name})})])]),selectOnFocus:!1}),W=oe=>({dom:{tag:"label",classes:["tox-label"]},components:[xs(s.translate(oe))]}),Y=lr.parts.field1(M([qn.parts.label(W("Width")),L(!0)])),ne=lr.parts.field2(M([qn.parts.label(W("Height")),L(!1)]));return lr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[Y,ne,M([W(Sp),A])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(oe,ye,ie)=>{o_(Dt.getValue(oe)).each(we=>{a(we).each(ve=>{Dt.setValue(ye,h$(ve))})})},coupledFieldBehaviours:at([Ft.config({disabled:g,onDisabled:oe=>{lr.getField1(oe).bind(qn.getField).each(Ft.disable),lr.getField2(oe).bind(qn.getField).each(Ft.disable),lr.getLock(oe).each(Ft.disable)},onEnabled:oe=>{lr.getField1(oe).bind(qn.getField).each(Ft.enable),lr.getField2(oe).bind(qn.getField).each(Ft.enable),lr.getLock(oe).each(Ft.enable)}}),yr(()=>s.checkUiComponentContext("mode:design")),Sn("size-input-events2",[ze(i,(oe,ye)=>{const ie=ye.event.isField1,we=ie?lr.getField1(oe):lr.getField2(oe),ve=ie?lr.getField2(oe):lr.getField1(oe),Re=we.map(Dt.getValue).getOr(""),Ne=ve.map(Dt.getValue).getOr("");a=gR(Re,Ne)})])])})},ZV=(t,s,a)=>{const i=pd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[xs(s.translate(t.label))]}),d=pd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=pd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return pd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:ae(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:at([Rc.self(),dn.config({})]),onChoose:(h,w,x)=>{Kt(h,cl,{name:t.name,value:x})},onChange:(h,w,x)=>{Kt(h,cl,{name:t.name,value:x})}})},b$=(t,s)=>{const a=w=>({dom:{tag:"th",innerHtml:s.translate(w)}}),i=w=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ge(w,a)}]}),d=w=>({dom:{tag:"td",innerHtml:s.translate(w)}}),g=w=>({dom:{tag:"tr"},components:Ge(w,d)}),h=w=>({dom:{tag:"tbody"},components:Ge(w,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),h(t.cells)],behaviours:at([as.config({}),dn.config({})])}},v$=(t,s)=>{const a=t.label.map(Y=>gg(Y,s)),i=[Ft.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),yr(()=>s.checkUiComponentContext(t.context)),Gt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:Y=>(Un(Y,rw),D.some(!0))}),Sn("textfield-change",[ze(qd(),(Y,ne)=>{Kt(Y,cl,{name:t.name})}),ze(Ig(),(Y,ne)=>{Kt(Y,cl,{name:t.name})})]),as.config({})],d=t.validation.map(Y=>pg.config({getRoot:ne=>Jc(ne.element),invalidClass:"tox-invalid",validator:{validate:ne=>{const oe=Dt.getValue(ne),ye=Y.validator(oe);return Ac.pure(ye===!0?Tn.value(oe):Tn.error(ye))},validateOnLoad:Y.validateOnLoad}})).toArray(),g=t.placeholder.fold(ae({}),Y=>({placeholder:s.translate(Y)})),h=t.inputMode.fold(ae({}),Y=>({inputmode:Y})),w={...g,...h,"data-mce-name":t.name},x=qn.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(Y=>({data:Y})).getOr({}),inputAttributes:w,inputClasses:[t.classname],inputBehaviours:at(hn([i,d])),selectOnFocus:!1,factory:bh}),A=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[x]}:x,L=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),W=[Ft.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:Y=>{qn.getField(Y).each(Ft.disable)},onEnabled:Y=>{qn.getField(Y).each(Ft.enable)}}),yr(()=>s.checkUiComponentContext(t.context))];return ow(a,A,L,W)},jV=(t,s,a)=>v$({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:D.none(),maximized:t.maximized,data:a,context:t.context},s),qV=(t,s,a)=>v$({name:t.name,multiline:!0,label:t.label,inputMode:D.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:D.none(),maximized:t.maximized,data:a,context:t.context},s),oy=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Ah=t=>t.dimension.property,qb=(t,s)=>t.dimension.getDimension(s),r_=(t,s)=>{const a=oy(t,s);Ml(a,[s.shrinkingClass,s.growingClass])},a_=(t,s)=>{Qs(t.element,s.openClass),Ks(t.element,s.closedClass),vn(t.element,Ah(s),"0px"),tc(t.element)},c_=(t,s)=>{Qs(t.element,s.closedClass),Ks(t.element,s.openClass),Zn(t.element,Ah(s))},hR=(t,s,a,i)=>{a.setCollapsed(),vn(t.element,Ah(s),qb(s,t.element)),r_(t,s),a_(t,s),s.onStartShrink(t),s.onShrunk(t)},i_=(t,s,a,i)=>{const d=i.getOrThunk(()=>qb(s,t.element));a.setCollapsed(),vn(t.element,Ah(s),d),tc(t.element);const g=oy(t,s);Qs(g,s.growingClass),Ks(g,s.shrinkingClass),a_(t,s),s.onStartShrink(t)},y$=(t,s,a)=>{const i=qb(s,t.element);(i==="0px"?hR:i_)(t,s,a,D.some(i))},C$=(t,s,a)=>{const i=oy(t,s),d=cc(i,s.shrinkingClass),g=qb(s,t.element);c_(t,s);const h=qb(s,t.element);(d?()=>{vn(t.element,Ah(s),g),tc(t.element)}:()=>{a_(t,s)})(),Qs(i,s.shrinkingClass),Ks(i,s.growingClass),c_(t,s),vn(t.element,Ah(s),h),a.setExpanded(),s.onStartGrow(t)},GV=(t,s,a)=>{if(a.isExpanded()){Zn(t.element,Ah(s));const i=qb(s,t.element);vn(t.element,Ah(s),i)}},KV=(t,s,a)=>{a.isExpanded()||C$(t,s,a)},w$=(t,s,a)=>{a.isExpanded()&&y$(t,s,a)},YV=(t,s,a)=>{a.isExpanded()&&hR(t,s,a)},XV=(t,s,a)=>a.isExpanded(),JV=(t,s,a)=>a.isCollapsed(),pR=(t,s,a)=>{const i=oy(t,s);return cc(i,s.growingClass)===!0},bR=(t,s,a)=>{const i=oy(t,s);return cc(i,s.shrinkingClass)===!0};var eU=Object.freeze({__proto__:null,refresh:GV,grow:KV,shrink:w$,immediateShrink:YV,hasGrown:XV,hasShrunk:JV,isGrowing:pR,isShrinking:bR,isTransitioning:(t,s,a)=>pR(t,s)||bR(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?y$:C$)(t,s,a)},disableTransitions:r_,immediateGrow:(t,s,a)=>{a.isExpanded()||(c_(t,s),vn(t.element,Ah(s),qb(s,t.element)),r_(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),vw=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return mu(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:wo(s.dimension.property,"0px")})},events:(t,s)=>rs([Xd(Qh(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(r_(a,t),s.isExpanded()&&Zn(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),S$=[Ze("closedClass"),Ze("openClass"),Ze("shrinkingClass"),Ze("growingClass"),lo("getAnimationRoot"),so("onShrunk"),so("onStartShrink"),so("onGrown"),so("onStartGrow"),Se("expanded",!1),io("dimension",Or("property",{width:[us("property","width"),us("getDimension",t=>Rn(t)+"px")],height:[us("property","height"),us("getDimension",t=>sr(t)+"px")]}))],x$=Object.freeze({__proto__:null,init:t=>{const s=Wt(t.expanded),a=()=>"expanded: "+s.get();return el({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Nn(s.set,!1),setExpanded:Nn(s.set,!0),readState:a})}});const Bi=ar({fields:S$,name:"sliding",active:vw,apis:eU,state:x$}),vR=t=>({isEnabled:()=>!Ft.isDisabled(t),setEnabled:s=>Ft.set(t,!s),setActive:s=>{const a=t.element;s?(Ks(a,"tox-tbtn--enabled"),je(a,"aria-pressed",!0)):(Qs(a,"tox-tbtn--enabled"),zn(a,"aria-pressed"))},isActive:()=>cc(t.element,"tox-tbtn--enabled"),setText:s=>{Kt(t,Tu,{text:s})},setIcon:s=>Kt(t,jb,{icon:s})}),l_=(t,s,a,i,d=!0,g)=>iR({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(h,w)=>{const x={pattern:t.search.isSome()?l9(h):""};t.fetch(A=>{w(ny(A,ud.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},x,vR(h))},onSetup:t.onSetup,getApi:vR,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[as.config({})]:[]],context:t.context},s,a.shared,g),yw=(t,s,a)=>{const i=g=>h=>{const w=!h.isActive();h.setActive(w),g.storage.set(w),a.shared.getSink().each(x=>{s().getOpt(x).each(A=>{xc(A.element),Kt(A,hg,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(Ge(t,h=>{const w=h.text.fold(()=>({}),x=>({text:x}));return{type:h.type,active:!1,...w,context:h.context,onAction:i(h),onSetup:d(h)}}))}},E$=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[xs(t)]}),yR=(t,s,a)=>{t.customStateIcon.each(i=>s.push(_$(i,a.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[Hs.config(a.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},T$=Mt("leaf-label-event-id"),CR=({leaf:t,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const h=t.menu.map(x=>l_(x,"tox-mbtn",g,D.none(),a)),w=[E$(t.title)];return yR(t,w,g),h.each(x=>w.push(x)),na.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:w,role:"treeitem",action:x=>{s(t.id),x.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[Va()]:[T$,"keying"]},buttonBehaviours:at([...a?[as.config({})]:[],Ln.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),ai.config({channels:{[`update-active-item-${i}`]:{onReceive:(x,A)=>{(A.value===t.id?Ln.on:Ln.off)(x)}}}}),Sn(T$,[Bo((x,A)=>{d.each(M=>{(M===t.id?Ln.on:Ln.off)(x)})}),ze(Va(),(x,A)=>{const M=A.event.raw.code==="ArrowLeft",L=A.event.raw.code==="ArrowRight";M?(tm(x.element,".tox-tree--directory").each(W=>{x.getSystem().getByDom(W).each(Y=>{JS(W,".tox-tree--directory__label").each(ne=>{Y.getSystem().getByDom(ne).each(dn.focus)})})}),A.stop()):L&&A.stop()})])])})},_$=(t,s,a,i,d)=>Su(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:a,attributes:d},s),k$=(t,s)=>_$(t,s,[]),u_=Mt("directory-label-event-id"),A$=({directory:t,visible:s,noChildren:a,backstage:i})=>{const d=t.menu.map(w=>l_(w,"tox-mbtn",i,D.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[k$("chevron-right",i.shared.providers.icons)]},E$(t.title)];yR(t,g,i),d.each(w=>{g.push(w)});const h=w=>{tm(w.element,".tox-tree--directory").each(x=>{w.getSystem().getByDom(x).each(A=>{const M=!Ln.isOn(A);Ln.toggle(A),Kt(w,"expand-tree-node",{expanded:M,node:t.id})})})};return na.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[Va()]:[u_,"keying"]},buttonBehaviours:at([...s?[as.config({})]:[],Sn(u_,[ze(Va(),(w,x)=>{const A=x.event.raw.code==="ArrowRight",M=x.event.raw.code==="ArrowLeft";A&&a&&x.stop(),(A||M)&&tm(w.element,".tox-tree--directory").each(L=>{w.getSystem().getByDom(L).each(W=>{!Ln.isOn(W)&&A||Ln.isOn(W)&&M?(h(w),x.stop()):M&&!Ln.isOn(W)&&(tm(W.element,".tox-tree--directory").each(Y=>{JS(Y,".tox-tree--directory__label").each(ne=>{W.getSystem().getByDom(ne).each(dn.focus)})}),x.stop())})})})])])})},nU=({children:t,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(w=>w.type==="leaf"?CR({leaf:w,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:h}):wR({directory:w,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:h})),behaviours:at([Bi.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Cn.config({})])}),oU=Mt("directory-event-id"),wR=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:w}=t,x=Wt(g),A=L=>w.map(W=>W.type==="leaf"?CR({leaf:W,selectedId:h,onLeafAction:s,visible:L,treeId:i,backstage:d}):wR({directory:W,expandedIds:x.get(),selectedId:h,onLeafAction:s,labelTabstopping:L,treeId:i,backstage:d})),M=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[A$({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),nU({children:w,expandedIds:g,selectedId:h,onLeafAction:s,visible:M,treeId:i,backstage:d})],behaviours:at([Sn(oU,[Bo((L,W)=>{Ln.set(L,M)}),ze("expand-tree-node",(L,W)=>{const{expanded:Y,node:ne}=W.event;x.set(Y?[...x.get(),ne]:x.get().filter(oe=>oe!==ne))})]),Ln.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(L,W)=>{const Y=L.components()[1],ne=A(W);W?Bi.grow(Y):Bi.shrink(Y),Cn.set(Y,ne)}})])}},sU=Mt("tree-event-id"),rU=(t,s)=>{const a=t.onLeafAction.getOr(le),i=t.onToggleExpand.getOr(le),d=t.defaultExpandedIds,g=Wt(d),h=Wt(t.defaultSelectedId),w=Mt("tree-id"),x=(A,M)=>t.items.map(L=>L.type==="leaf"?CR({leaf:L,selectedId:A,onLeafAction:a,visible:!0,treeId:w,backstage:s}):wR({directory:L,selectedId:A,onLeafAction:a,expandedIds:M,labelTabstopping:!0,treeId:w,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:x(h.get(),g.get()),behaviours:at([Gt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Sn(sU,[ze("expand-tree-node",(A,M)=>{const{expanded:L,node:W}=M.event;g.set(L?[...g.get(),W]:g.get().filter(Y=>Y!==W)),i(g.get(),{expanded:L,node:W})})]),ai.config({channels:{[`update-active-item-${w}`]:{onReceive:(A,M)=>{h.set(D.some(M.value)),Cn.set(A,x(D.some(M.value),g.get()))}}}}),Cn.config({})])}};var aU=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return rs([ze(t.event,i),ed(()=>s.cancel())].concat(t.cancelEvent.map(d=>[ze(d,()=>s.cancel())]).getOr([])))}});const O$=t=>{const s=Wt(null);return el({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var cU=Object.freeze({__proto__:null,throttle:O$,init:t=>t.stream.streams.state(t)});const R$=(t,s)=>{const a=t.stream,i=QO(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var iU=[io("stream",Or("mode",{throttle:[Ze("delay"),Se("stopEvent",!0),us("streams",{setup:R$,state:O$})]})),Se("event","input"),lo("cancelEvent"),nl("onStream")];const SR=ar({fields:iU,name:"streaming",active:aU,state:cU}),d_=(t,s,a)=>{const i=Dt.getValue(a);Dt.setValue(s,i),M$(s)},D$=(t,s)=>{const a=t.element,i=Ie(a),d=a.dom;$n(a,"type")!=="number"&&s(d,i)},M$=t=>{D$(t,(s,a)=>s.setSelectionRange(a.length,a.length))},lU=(t,s)=>{D$(t,(a,i)=>a.setSelectionRange(s,i.length))},uU=(t,s,a)=>{if(t.selectsOver){const i=Dt.getValue(s),d=t.getDisplayText(i),g=Dt.getValue(a);return t.getDisplayText(g).indexOf(d)===0?D.some(()=>{d_(t,s,a),lU(s,d.length)}):D.none()}else return D.none()},xR=ae("alloy.typeahead.itemexecute"),dU=(t,s,a,i)=>{const d=(L,W,Y)=>{t.previewing.set(!1);const ne=ir.getCoupled(L,"sandbox");if(ro.isOpen(ne))eo.getCurrent(ne).each(oe=>{Q.getHighlighted(oe).fold(()=>{Y(oe)},()=>{Ay(ne,oe.element,"keydown",W)})});else{const oe=ye=>{eo.getCurrent(ye).each(Y)};_T(t,h(L),L,ne,i,oe,ha.HighlightMenuAndItem).get(le)}},g=cP(t),h=L=>W=>W.map(Y=>{const ne=Tm(Y.menus),oe=Te(ne,ie=>ko(ie.items,we=>we.type==="item"));return Dt.getState(L).update(Ge(oe,ie=>ie.data)),Y}),w=L=>eo.getCurrent(L),x="typeaheadevents",A=[dn.config({}),Dt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:L=>Ie(L.element),getFallbackEntry:L=>({value:L,meta:{}}),setValue:(L,W)=>{em(L.element,t.model.getDisplayText(W))},...t.initialData.map(L=>wo("initialValue",L)).getOr({})}}),SR.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(L,W)=>{const Y=ir.getCoupled(L,"sandbox");if(dn.isFocused(L)&&Ie(L.element).length>=t.minChars){const oe=w(Y).bind(ie=>Q.getHighlighted(ie).map(Dt.getValue));t.previewing.set(!0);const ye=ie=>{w(Y).each(we=>{oe.fold(()=>{t.model.selectsOver&&Q.highlightFirst(we)},ve=>{Q.highlightBy(we,Re=>Dt.getValue(Re).value===ve.value),Q.getHighlighted(we).orThunk(()=>(Q.highlightFirst(we),D.none()))})})};_T(t,h(L),L,Y,i,ye,ha.HighlightJustMenu).get(le)}},cancelEvent:Ra()}),Gt.config({mode:"special",onDown:(L,W)=>(d(L,W,Q.highlightFirst),D.some(!0)),onEscape:L=>{const W=ir.getCoupled(L,"sandbox");return ro.isOpen(W)?(ro.close(W),D.some(!0)):D.none()},onUp:(L,W)=>(d(L,W,Q.highlightLast),D.some(!0)),onEnter:L=>{const W=ir.getCoupled(L,"sandbox"),Y=ro.isOpen(W);if(Y&&!t.previewing.get())return w(W).bind(ne=>Q.getHighlighted(ne)).map(ne=>(Kt(L,xR(),{item:ne}),!0));{const ne=Dt.getValue(L);return Un(L,Ra()),t.onExecute(W,L,ne),Y&&ro.close(W),D.some(!0)}}}),Ln.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),ir.config({others:{sandbox:L=>Kv(t,L,{onOpen:()=>Ln.on(L),onClose:()=>{t.lazyTypeaheadComp.get().each(W=>zn(W.element,"aria-activedescendant")),Ln.off(L)}})}}),Sn(x,[Bo(L=>{t.lazyTypeaheadComp.set(D.some(L))}),ed(L=>{t.lazyTypeaheadComp.set(D.none())}),Qm(L=>{const W=le;dO(t,h(L),L,i,W,ha.HighlightMenuAndItem).get(le)}),ze(xR(),(L,W)=>{const Y=ir.getCoupled(L,"sandbox");d_(t.model,L,W.event.item),Un(L,Ra()),t.onItemExecute(L,Y,W.event.item,Dt.getValue(L)),ro.close(Y),M$(L)})].concat(t.dismissOnBlur?[ze(Ym(),L=>{const W=ir.getCoupled(L,"sandbox");Ec(W.element).isNone()&&ro.close(W)})]:[]))],M={[du()]:[Dt.name(),SR.name(),x],...t.eventOrder};return{uid:t.uid,dom:zv(ns(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...cr(t.typeaheadBehaviours,A)},eventOrder:M}},mU=ae([lo("lazySink"),Ze("fetch"),Se("minChars",5),Se("responseTime",1e3),so("onOpen"),Se("getHotspot",D.some),Se("getAnchorOverrides",ae({})),Se("layouts",D.none()),Se("eventOrder",{}),V("model",{},[Se("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Se("selectsOver",!0),Se("populateFromBrowse",!0)]),so("onSetValue"),Sc("onExecute"),so("onItemExecute"),Se("inputClasses",[]),Se("inputAttributes",{}),Se("inputStyles",{}),Se("matchWidth",!0),Se("useMinWidth",!1),Se("dismissOnBlur",!0),od(["openClass"]),lo("initialData"),lo("listRole"),ga("typeaheadBehaviours",[dn,Dt,SR,Gt,Ln,ir]),co("lazyTypeaheadComp",()=>Wt(D.none)),co("previewing",()=>Wt(!0))].concat(aP()).concat(Yv())),fU=ae([Il({schema:[z1()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{uU(t.model,d,i).fold(()=>{t.model.selectsOver?(Q.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&d_(t.model,d,i),En(i.element,"id").each(g=>je(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(Kt(i,xR(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&d_(t.model,i,a)})}})})]),N$=lc({name:"Typeahead",configFields:mU(),partFields:fU(),factory:dU}),vm=t=>({...t,toCached:()=>vm(t.toCached()),bindFuture:x=>vm(t.bind(A=>A.fold(M=>Ac.pure(Tn.error(M)),M=>x(M)))),bindResult:x=>vm(t.map(A=>A.bind(x))),mapResult:x=>vm(t.map(A=>A.map(x))),mapError:x=>vm(t.map(A=>A.mapError(x))),foldResult:(x,A)=>t.map(M=>M.fold(x,A)),withTimeout:(x,A)=>vm(Ac.nu(M=>{let L=!1;const W=setTimeout(()=>{L=!0,M(Tn.error(A()))},x);t.get(Y=>{L||(clearTimeout(W),M(Y))})}))}),P$=t=>vm(Ac.nu(t)),B$=t=>vm(Ac.pure(Tn.value(t))),hU={nu:P$,wrap:vm,pure:B$,value:B$,error:t=>vm(Ac.pure(Tn.error(t))),fromResult:t=>vm(Ac.pure(t)),fromFuture:t=>vm(t.map(Tn.value)),fromPromise:t=>P$(s=>{t.then(a=>{s(Tn.value(a))},a=>{s(Tn.error(a))})})},Cw=(t,s,a=[],i,d,g,h)=>{const w=s.fold(()=>({}),M=>({action:M})),x={buttonBehaviours:at([fd.item(()=>!t.enabled||h.checkUiComponentContext(t.context).shouldDisable),yr(()=>h.checkUiComponentContext(t.context)),as.config({}),...g.map(M=>Hs.config(h.tooltips.getConfig({tooltipText:h.translate(M)}))).toArray(),Sn("button press",[gS("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...w},A=ns(x,{dom:i});return ns(A,{components:d})},pU=(t,s,a,i=[],d)=>{const g=t.tooltip.map(A=>({"aria-label":a.translate(A)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},w=t.icon.map(A=>bw(A,a.icons)),x=Zv([w]);return Cw(t,s,i,h,x,t.tooltip,a)},m_=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},ER=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),h=t.icon.map(Y=>bw(Y,a.icons)),w=[h.getOrThunk(()=>xs(g))],x=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),L={tag:"button",classes:[...m_(x),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},W=t.icon.map(ae(g));return Cw(t,s,i,L,w,W,a)},f_=(t,s,a,i=[],d=[])=>{const g=ER(t,D.some(s),a,i,d);return na.sketch(g)},$$=(t,s)=>a=>{s==="custom"?Kt(a,hg,{name:t,value:{}}):s==="submit"?Un(a,rw):s==="cancel"?Un(a,Eh):console.error("Unknown button type: ",s)},I$=(t,s)=>s==="menu",bU=(t,s)=>s==="custom"||s==="cancel"||s==="submit",L$=(t,s)=>s==="togglebutton",vU=(t,s,a)=>{var i,d;const g=t.icon.map(ve=>t1(ve,s.icons)).map(po),h=ve=>{Kt(ve,hg,{name:t.name,value:{setIcon:Re=>{g.map(Ne=>Ne.getOpt(ve).each(xt=>{Cn.set(xt,[t1(Re,s.icons)])}))}}})},w=t.buttonType.getOr(t.primary?"primary":"secondary"),x={...t,name:(i=t.name)!==null&&i!==void 0?i:"",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1},A=x.tooltip.or(t.text).map(ve=>({"aria-label":s.translate(ve)})).getOr({}),M=m_(w??"secondary"),L=t.icon.isSome()&&t.text.isSome(),W={tag:"button",classes:[...M.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...L?["tox-button--icon-and-text"]:[]],attributes:{...A,...cn(a)?{"data-mce-name":a}:{}}},Y=[],ne=s.translate(t.text.getOr("")),oe=xs(ne),ie=[...Zv([g.map(ve=>ve.asSpec())]),...t.text.isSome()?[oe]:[]],we=Cw(x,D.some(h),Y,W,ie,t.tooltip,s);return na.sketch(we)},ww=(t,s,a)=>{if(I$(t,s)){const i=()=>h,d=t,g={...t,type:"menubutton",search:D.none(),onSetup:w=>(w.setEnabled(t.enabled),le),fetch:yw(d.items,i,a)},h=po(l_(g,"tox-tbtn",a,D.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(bU(t,s)){const i=$$(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return f_(d,i,a.shared.providers,[])}else{if(L$(t,s))return vU(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},yU=(t,s)=>{const a=$$(t.name,"custom");return E9(D.none(),qn.parts.field({factory:na,...ER(t,D.some(a),s,[Zb(""),Rc.self()])}))},F$={type:"separator"},CU=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:le}),TR=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:le}),Cf=t=>Ge(t,CU),g_=(t,s)=>ko(s,a=>a.type===t),Sw=(t,s)=>Cf(g_(t,s)),wU=t=>Sw("header",t.targets),_R=t=>Sw("anchor",t.targets),SU=t=>D.from(t.anchorTop).map(s=>TR("<top>",s)).toArray(),kR=t=>D.from(t.anchorBottom).map(s=>TR("<bottom>",s)).toArray(),H$=t=>Ge(t,s=>TR(s,s)),AR=t=>Vo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(F$,a),[]),OR=(t,s)=>{const a=t.toLowerCase();return ko(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,h=(d=i.value)!==null&&d!==void 0?d:"";return hs(g.toLowerCase(),a)||hs(h.toLowerCase(),a)})},xU=(t,s,a)=>{var i,d;const g=Dt.getValue(s),h=(d=(i=g==null?void 0:g.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],x=>{const A=OR(h,H$(a.getHistory(t)));return t==="file"?AR([A,OR(h,wU(x)),OR(h,hn([SU(x),_R(x),kR(x)]))]):A})},RR=Mt("aria-invalid"),EU=(t,s,a,i)=>{const d=s.shared.providers,g=we=>{const ve=Dt.getValue(we);a.addToHistory(ve.value,t.filetype)},h={...i.map(we=>({initialData:we})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":RR,type:"url"},minChars:0,responseTime:0,fetch:we=>{const ve=xU(t.filetype,we,a),Re=ny(ve,ud.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:D.none()});return Ac.pure(Re)},getHotspot:we=>ne.getOpt(we),onSetValue:(we,ve)=>{we.hasConfigured(pg)&&pg.run(we).get(le)},typeaheadBehaviours:at([...a.getValidationHandler().map(we=>pg.config({getRoot:ve=>Jc(ve.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(ve,Re)=>{M.getOpt(ve).each(Ne=>{je(Ne.element,"title",d.translate(Re))})}},validator:{validate:ve=>{const Re=Dt.getValue(ve);return hU.nu(Ne=>{we({type:t.filetype,url:Re.value},xt=>{if(xt.status==="invalid"){const ot=Tn.error(xt.message);Ne(ot)}else{const ot=Tn.value(xt.message);Ne(ot)}})})},validateOnLoad:!1}})).toArray(),Ft.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),as.config({}),Sn("urlinput-events",[ze(qd(),we=>{const ve=Ie(we.element),Re=ve.trim();Re!==ve&&em(we.element,Re),t.filetype==="file"&&Kt(we,cl,{name:t.name})}),ze(Km(),we=>{Kt(we,cl,{name:t.name}),g(we)}),ze(Ig(),we=>{Kt(we,cl,{name:t.name}),g(we)})])]),eventOrder:{[qd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:we=>we.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:lT(!1,1,"normal")},onExecute:(we,ve,Re)=>{Kt(ve,rw,{})},onItemExecute:(we,ve,Re,Ne)=>{g(we),Kt(we,cl,{name:t.name})}},w=qn.parts.field({...h,factory:N$}),x=t.label.map(we=>gg(we,d)),M=po(((we,ve,Re=we,Ne=we)=>Su(Re,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+we],attributes:{title:d.translate(Ne),"aria-live":"polite",...ve.fold(()=>({}),xt=>({id:xt}))}},d.icons))("invalid",D.some(RR),"warning")),L=po({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[M.asSpec()]}),W=a.getUrlPicker(t.filetype),Y=Mt("browser.url.event"),ne=po({dom:{tag:"div",classes:["tox-control-wrap"]},components:[w,L.asSpec()],behaviours:at([Ft.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),oe=po(f_({context:t.context,name:t.name,icon:D.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:D.none(),borderless:!0},we=>Un(we,Y),d,[],["tox-browse-url"])),ye=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:hn([[ne.asSpec()],W.map(()=>oe.asSpec()).toArray()])}),ie=we=>{eo.getCurrent(we).each(ve=>{const Re=Dt.getValue(ve),Ne={fieldname:t.name,...Re};W.each(xt=>{xt(Ne).get(ot=>{Dt.setValue(ve,ot),Kt(we,cl,{name:t.name})})})})};return qn.sketch({dom:_9(),components:x.toArray().concat([ye()]),fieldBehaviours:at([Ft.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:we=>{qn.getField(we).each(Ft.disable),oe.getOpt(we).each(Ft.disable)},onEnabled:we=>{qn.getField(we).each(Ft.enable),oe.getOpt(we).each(Ft.enable)}}),yr(()=>d.checkUiComponentContext(t.context)),Sn("url-input-events",[ze(Y,ie)])])})},TU=(t,s)=>{const a=uA(t.icon,s.icons);return vf.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[na.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:i=>Kt(i,hg,{name:"alert-banner",value:t.url}),buttonBehaviours:at([dA()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},DR=(t,s)=>{t.dom.checked=s},_U=t=>t.dom.checked,kU=(t,s,a)=>{const i=x=>(x.element.dom.click(),D.some(!0)),d=qn.parts.field({factory:{sketch:bn},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:at([Rc.self(),Ft.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:x=>{Jc(x.element).each(A=>Ks(A,"tox-checkbox--disabled"))},onEnabled:x=>{Jc(x.element).each(A=>Qs(A,"tox-checkbox--disabled"))}}),as.config({}),dn.config({}),KT(a,_U,DR),Gt.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Sn("checkbox-events",[ze(Km(),(x,A)=>{Kt(x,cl,{name:t.name})})])])}),g=qn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[xs(s.translate(t.label))],behaviours:at([Ni.config({})])}),h=x=>Su(x==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+x]},s.icons),w=po({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return qn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,w.asSpec(),g],fieldBehaviours:at([Ft.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),yr(()=>s.checkUiComponentContext(t.context))])})},z$=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],i=Sn("htmlpanel",[Bo(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?vf.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:at([Hs.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{ho(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Ec(d.element)).each(g=>{En(g,"data-mce-tooltip").each(h=>{Hs.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:ho(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Ec(d.element).filter(g=>En(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:ae([Hr,Xr,br,Ma,Mr,vr]),onRtl:ae([Hr,Xr,br,Ma,Mr,vr])},bubble:Wc(0,-2,{})})}),i])}):vf.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:at([as.config({}),dn.config({}),i])})},oa=t=>(s,a,i,d,g)=>bt(a,"name").fold(()=>t(a,d,D.none(),g),h=>s.field(h,t(a,d,bt(i,h),g))),AU=t=>(s,a,i,d,g)=>{const h=ns(a,{source:"dynamic"});return oa(t)(s,h,i,d,g)},OU={bar:oa((t,s)=>qB(t,s.shared)),collection:oa((t,s,a)=>k9(t,s.shared.providers,a)),alertbanner:oa((t,s)=>TU(t,s.shared.providers)),input:oa((t,s,a)=>jV(t,s.shared.providers,a)),textarea:oa((t,s,a)=>qV(t,s.shared.providers,a)),label:oa((t,s,a,i)=>MV(t,s.shared,i)),iframe:AU((t,s,a)=>AV(t,s.shared.providers,a)),button:oa((t,s)=>yU(t,s.shared.providers)),checkbox:oa((t,s,a)=>kU(t,s.shared.providers,a)),colorinput:oa((t,s,a)=>R9(t,s.shared,s.colorinput,a)),colorpicker:oa((t,s,a)=>bV(t,s.shared.providers,a)),dropzone:oa((t,s,a)=>CV(t,s.shared.providers,a)),grid:oa((t,s)=>wV(t,s.shared)),listbox:oa((t,s,a)=>IV(t,s,a)),selectbox:oa((t,s,a)=>HV(t,s.shared.providers,a)),sizeinput:oa((t,s)=>WV(t,s.shared.providers)),slider:oa((t,s,a)=>ZV(t,s.shared.providers,a)),urlinput:oa((t,s,a)=>EU(t,s,s.urlinput,a)),customeditor:oa(yV),htmlpanel:oa((t,s)=>z$(t,s.shared.providers)),imagepreview:oa((t,s,a)=>aR(t,a)),table:oa((t,s)=>b$(t,s.shared.providers)),tree:oa((t,s)=>rU(t,s)),panel:oa((t,s)=>LV(t,s))},RU={field:(t,s)=>s,record:ae([])},V$=(t,s,a,i,d)=>{const g=ns(i,{shared:{interpreter:h=>h_(t,h,a,g,d)}});return h_(t,s,a,g,d)},h_=(t,s,a,i,d)=>bt(OU,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,a,i,d)),_u=(t,s,a,i)=>h_(RU,t,s,a,i),yg="layout-inset",MR=t=>t.x,U$=(t,s)=>t.x+t.width/2-s.width/2,NR=(t,s)=>t.x+t.width-s.width,PR=t=>t.y,BR=(t,s)=>t.y+t.height-s.height,$R=(t,s)=>t.y+t.height/2-s.height/2,xw=(t,s,a)=>ma(NR(t,s),BR(t,s),a.insetSouthwest(),t2(),"southwest",Wa(t,{right:0,bottom:3}),yg),IR=(t,s,a)=>ma(MR(t),BR(t,s),a.insetSoutheast(),e2(),"southeast",Wa(t,{left:1,bottom:3}),yg),p_=(t,s,a)=>ma(NR(t,s),PR(t),a.insetNorthwest(),Qy(),"northwest",Wa(t,{right:0,top:2}),yg),ba=(t,s,a)=>ma(MR(t),PR(t),a.insetNortheast(),U0(),"northeast",Wa(t,{left:1,top:2}),yg),ku=(t,s,a)=>ma(U$(t,s),PR(t),a.insetNorth(),nx(),"north",Wa(t,{top:2}),yg),Ew=(t,s,a)=>ma(U$(t,s),BR(t,s),a.insetSouth(),ox(),"south",Wa(t,{bottom:3}),yg),Tw=(t,s,a)=>ma(NR(t,s),$R(t,s),a.insetEast(),rx(),"east",Wa(t,{right:0}),yg),W$=(t,s,a)=>ma(MR(t),$R(t,s),a.insetWest(),sx(),"west",Wa(t,{left:1}),yg),DU=t=>{switch(t){case"north":return ku;case"northeast":return ba;case"northwest":return p_;case"south":return Ew;case"southeast":return IR;case"southwest":return xw;case"east":return Tw;case"west":return W$}},Z$=(t,s,a,i,d)=>Y1(i).map(DU).getOr(ku)(t,s,a,i,d),MU=t=>{switch(t){case"north":return Ew;case"northeast":return IR;case"northwest":return xw;case"south":return ku;case"southeast":return ba;case"southwest":return p_;case"east":return W$;case"west":return Tw}},NU=(t,s,a,i,d)=>Y1(i).map(MU).getOr(ku)(t,s,a,i,d),_w={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},PU=(t,s,a)=>{const d={maxHeightFunction:eh()},g=()=>({type:"node",root:fr(Ys(t())),node:D.from(t()),bubble:Wc(12,12,_w),layouts:{onRtl:()=>[ba],onLtr:()=>[p_]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:Wc(-12,12,_w),layouts:{onRtl:()=>[br,Mr,Hr],onLtr:()=>[Mr,br,Hr]},overrides:d});return()=>a()?g():h()},BU=(t,s,a,i)=>{const g={maxHeightFunction:eh()},h=()=>({type:"node",root:fr(Ys(s())),node:D.from(s()),bubble:Wc(12,12,_w),layouts:{onRtl:()=>[ku],onLtr:()=>[ku]},overrides:g}),w=()=>t?{type:"node",root:fr(Ys(s())),node:D.from(s()),bubble:Wc(0,-zu(s()),_w),layouts:{onRtl:()=>[Xr],onLtr:()=>[Xr]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:Wc(0,0,_w),layouts:{onRtl:()=>[Xr],onLtr:()=>[Xr]},overrides:g};return()=>i()?h():w()},j$=(t,s,a)=>{const i=()=>({type:"node",root:fr(Ys(t())),node:D.from(t()),layouts:{onRtl:()=>[ku],onLtr:()=>[ku]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Hr],onLtr:()=>[Hr]}});return()=>a()?i():d()},b_=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:ct.fromDom(d),lastCell:ct.fromDom(g)};return D.some(h)}return D.some(sg.range(ct.fromDom(a.startContainer),a.startOffset,ct.fromDom(a.endContainer),a.endOffset))}}),q$=t=>s=>({type:"node",root:t(),node:s}),LR=(t,s,a,i)=>{const d=dm(t),g=()=>ct.fromDom(t.getBody()),h=()=>ct.fromDom(t.getContentAreaContainer()),w=()=>d||!i();return{inlineDialog:PU(h,s,w),inlineBottomDialog:BU(t.inline,h,a,w),banner:j$(h,s,w),cursor:b_(t,g),node:q$(g)}},$U=t=>(s,a)=>{CB(t)(s,a)},G$=t=>()=>pa(t),IU=t=>s=>gd(t,s),LU=t=>s=>ET(t,s),K$=t=>({colorPicker:$U(t),hasCustomColors:G$(t),getColors:IU(t),getColorCols:LU(t)}),xY=t=>()=>wN(t),EY=t=>({isDraggableModal:xY(t)}),Y$=t=>{const s=Wt(W3(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},X$=t=>Ur(t,"items"),J$=t=>Ur(t,"format"),FR=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],HR=t=>Yn(t,"items"),FU=t=>Yn(t,"block"),HU=t=>Yn(t,"inline"),Q$=t=>Yn(t,"selector"),eI=t=>Vo(t,(s,a)=>{if(HR(a)){const i=eI(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(HU(a)||FU(a)||Q$(a)){const d=`custom-${se(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),zU=(t,s)=>{const a=eI(s),i=d=>{pt(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},tI=t=>P3(t).map(s=>{const a=zU(t,s);return B3(t)?FR.concat(a):a}).getOr(FR),VU=t=>{const s=Uo(t);return s.length===1&&zo(s,"title")},kw=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),v_=(t,s,a,i)=>{const d=x=>kw(x,a,i),g=x=>{const A=w(x.items);return{...x,type:"submenu",getStyleItems:ae(A)}},h=x=>{const A=se(x.name)?x.name:Mt(x.title),M=`custom-${A}`,L={...x,type:"formatter",format:M,isSelected:a(M),getStylePreview:i(M)};return t.formatter.register(A,L),L},w=x=>Ge(x,A=>X$(A)?g(A):J$(A)?d(A):VU(A)?{...A,type:"separator"}:h(A));return w(s)},UU=t=>{const s=w=>()=>t.formatter.match(w),a=w=>()=>{const x=t.formatter.get(w);return x!==void 0?D.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(w))}):D.none()},i=Wt([]),d=Wt([]),g=Wt(!1);return t.on("PreInit",w=>{const x=tI(t),A=v_(t,x,s,a);i.set(A)}),t.on("addStyleModifications",w=>{const x=v_(t,w.items,s,a);d.set(x),g.set(w.replace)}),{getData:()=>{const w=g.get()?[]:i.get(),x=d.get();return w.concat(x)}}},WU=t=>{let i=0;const d=()=>i>0,g=w=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[xs(w.tooltipText)]}];return{getConfig:w=>({delayForShow:()=>d()?60:300,delayForHide:ae(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(w),onShow:(x,A)=>{i++,w.onShow&&w.onShow(x,A)},onHide:(x,A)=>{i--,w.onHide&&w.onHide(x,A)},onSetup:w.onSetup}),getComponents:g}},ZU=t=>cn(t)&&t.nodeType===1,jU=kh.trim,nI=t=>s=>!!(ZU(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),qU=nI("true"),zR=nI("false"),oI=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),y_=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return qU(s)}return!1},GU=(t,s)=>Ge(jc(ct.fromDom(s),t),a=>a.dom),Gb=t=>t.innerText||t.textContent,KU=t=>t.id?t.id:Mt("h"),VR=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,sy=t=>VR(t)&&WR(t),UR=t=>t&&/^(H[1-6])$/.test(t.nodeName),WR=t=>y_(t)&&!zR(t),ZR=t=>UR(t)&&WR(t),sI=t=>UR(t)?parseInt(t.nodeName.substr(1),10):0,jR=t=>{var s;const a=KU(t),i=()=>{t.id=a};return oI("header",(s=Gb(t))!==null&&s!==void 0?s:"","#"+a,sI(t),i)},rI=t=>{const s=t.id||t.name,a=Gb(t);return oI("anchor",a||"#"+s,"#"+s,0,le)},aI=t=>Ge(ko(t,ZR),jR),qR=t=>Ge(ko(t,sy),rI),Kb=t=>GU("h1,h2,h3,h4,h5,h6,a:not([href])",t),YU=t=>jU(t.title).length>0,ry={find:t=>{const s=Kb(t);return ko(aI(s).concat(qR(s)),YU)}},Aw="tinymce-url-history",Ow=5,GR=t=>se(t)&&/^https?/.test(t),KR=t=>Fe(t)&&t.length<=Ow&&Ja(t,GR),Cg=t=>Ee(t)&&is(t,s=>!KR(s)).isNone(),cI=()=>{const t=Sh.getItem(Aw);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Aw+" was not valid JSON",a),{};throw a}return Cg(s)?s:(console.log("Local storage "+Aw+" was not valid format",s),{})},XU=t=>{if(!Cg(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Sh.setItem(Aw,JSON.stringify(t))},JU=t=>{const s=cI();return bt(s,t).getOr([])},YR=(t,s)=>{if(!GR(t))return;const a=cI(),i=bt(a,s).getOr([]),d=ko(i,g=>g!==t);a[s]=[t].concat(d).slice(0,Ow),XU(a)},iI=t=>!!t,QU=t=>To(kh.makeMap(t,/[, ]/),iI),XR=t=>D.from(vN(t)),eW=t=>{const s=D.from(CN(t)).filter(iI).map(QU);return XR(t).fold(fo,a=>s.fold(Ut,i=>Uo(i).length>0?i:!1))},tW=(t,s)=>{const a=eW(t);return en(a)?a?XR(t):D.none():a[s]?XR(t):D.none()},nW=(t,s)=>tW(t,s).map(a=>i=>Ac.nu(d=>{const g=(w,x)=>{if(!se(w))throw new Error("Expected value to be string");if(x!==void 0&&!Ee(x))throw new Error("Expected meta to be a object");d({value:w,meta:x})},h={filetype:s,fieldname:i.fieldname,...D.from(i.meta).getOr({})};a.call(t,g,i.value,h)})),lI=t=>D.from(t).filter(se).getOrUndefined(),uI=t=>zE(t)?D.some({targets:ry.find(t.getBody()),anchorTop:lI(F3(t)),anchorBottom:lI(H3(t))}):D.none(),oW=t=>D.from(L3(t)),Rw=t=>({getHistory:JU,addToHistory:YR,getLinkInformation:()=>uI(t),getValidationHandler:()=>oW(t),getUrlPicker:s=>nW(t,s)}),sW=(t,s,a,i)=>{const d=Wt(!1),g=Y$(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:ld.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:WU(t.dialog),checkUiComponentContext:ie=>{if(IE(s))return{contextType:"disabled",shouldDisable:!0};const[we,ve=""]=ie.split(":"),Re=s.ui.registry.getAll().contexts,Ne=bt(Re,we).fold(()=>bt(Re,"mode").map(xt=>xt("design")).getOr(!1),xt=>ve.charAt(0)==="!"?!xt(ve.slice(1)):xt(ve));return{contextType:we,shouldDisable:!Ne}}},w=Rw(s),x=UU(s),A=K$(s),M=EY(s),L=()=>d.get(),W=ie=>d.set(ie),Y={shared:{providers:h,anchors:LR(s,a,i,g.isPositionedAtTop),header:g},urlinput:w,styles:x,colorinput:A,dialog:M,isContextMenuOpen:L,setContextMenuState:W},ne=ie=>D.none(),oe={...Y,shared:{...Y.shared,interpreter:ie=>_u(ie,{},oe,ne),getSink:t.popup}},ye={...Y,shared:{...Y.shared,interpreter:ie=>_u(ie,{},ye,ne),getSink:t.dialog}};return{popup:oe,dialog:ye}},rW=(t,s,a)=>{const i=($e,Rt)=>{pt([s,...a],yt=>{yt.broadcastEvent($e,Rt)})},d=($e,Rt)=>{pt([s,...a],yt=>{yt.broadcastOn([$e],Rt)})},g=$e=>d(ig(),{target:$e.target}),h=Bd(),w=Uc(h,"touchstart",g),x=Uc(h,"touchmove",$e=>i(_4(),$e)),A=Uc(h,"touchend",$e=>i(k4(),$e)),M=Uc(h,"mousedown",g),L=Uc(h,"mouseup",$e=>{$e.raw.button===0&&d(pv(),{target:$e.target})}),W=$e=>d(ig(),{target:ct.fromDom($e.target)}),Y=$e=>{$e.button===0&&d(pv(),{target:ct.fromDom($e.target)})},ne=()=>{pt(t.editorManager.get(),$e=>{t!==$e&&$e.dispatch("DismissPopups",{relatedTarget:t})})},oe=$e=>i(ky(),bx($e)),ye=$e=>{d(af(),{}),i(ep(),bx($e))},ie=Ys(ct.fromDom(t.getElement())),we=X0(ie,"scroll",$e=>{requestAnimationFrame(()=>{const Rt=t.getContainer();if(Rt!=null){const $t=Gp(t,s.element).map(Hn=>[Hn.element,...Hn.others]).getOr([]);wr($t,Hn=>Xn(Hn,$e.target))&&(t.dispatch("ElementScroll",{target:$e.target.dom}),i(Xm(),$e))}})}),ve=()=>d(af(),{}),Re=$e=>{$e.state&&d(ig(),{target:ct.fromDom(t.getContainer())})},Ne=$e=>{d(ig(),{target:ct.fromDom($e.relatedTarget.getContainer())})},xt=$e=>t.dispatch("focusin",$e),ot=$e=>t.dispatch("focusout",$e);t.on("PostRender",()=>{t.on("click",W),t.on("tap",W),t.on("mouseup",Y),t.on("mousedown",ne),t.on("ScrollWindow",oe),t.on("ResizeWindow",ye),t.on("ResizeEditor",ve),t.on("AfterProgressState",Re),t.on("DismissPopups",Ne),pt([s,...a],$e=>{$e.element.dom.addEventListener("focusin",xt),$e.element.dom.addEventListener("focusout",ot)})}),t.on("remove",()=>{t.off("click",W),t.off("tap",W),t.off("mouseup",Y),t.off("mousedown",ne),t.off("ScrollWindow",oe),t.off("ResizeWindow",ye),t.off("ResizeEditor",ve),t.off("AfterProgressState",Re),t.off("DismissPopups",Ne),pt([s,...a],$e=>{$e.element.dom.removeEventListener("focusin",xt),$e.element.dom.removeEventListener("focusout",ot)}),M.unbind(),w.unbind(),x.unbind(),A.unbind(),L.unbind(),we.unbind()}),t.on("detach",()=>{pt([s,...a],vu),pt([s,...a],$e=>$e.destroy())})},sa=JM,wf=bb,C_=ae([Se("shell",!1),Ze("makeItem"),Se("setupItem",le),al.field("listBehaviours",[Cn])]),aW=ii({name:"items",overrides:()=>({behaviours:at([Cn.config({})])})}),cW=ae([aW]),iW=ae("CustomList"),lW=(t,s,a,i)=>{const d=(w,x)=>{h(w).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},A=>{const M=Cn.contents(A),L=x.length,W=L-M.length,Y=W>0?Co(W,()=>t.makeItem()):[],ne=M.slice(L);pt(ne,ye=>Cn.remove(A,ye)),pt(Y,ye=>Cn.append(A,ye));const oe=Cn.contents(A);pt(oe,(ye,ie)=>{t.setupItem(w,ye,x[ie],ie)})})},g=t.shell?{behaviours:[Cn.config({})],components:[]}:{behaviours:[],components:s},h=w=>t.shell?D.some(w):Go(w,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:cr(t.listBehaviours,g.behaviours),apis:{setItems:d}}},w_=lc({name:iW(),configFields:C_(),partFields:cW(),factory:lW,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),ay=ae([Ze("dom"),Se("shell",!0),ga("toolbarBehaviours",[Cn])]),uW=ae([ii({name:"groups",overrides:()=>({behaviours:at([Cn.config({})])})})]),dW=(t,s,a,i)=>{const d=(w,x)=>{g(w).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},A=>{Cn.set(A,x)})},g=w=>t.shell?D.some(w):Go(w,t,"groups"),h=t.shell?{behaviours:[Cn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:cr(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:le},domModification:{attributes:{role:"group"}}}},Sf=lc({name:"Toolbar",configFields:ay(),partFields:uW(),factory:dW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),mW=le,AY=fo,dI=ae([]);var mI=Object.freeze({__proto__:null,setup:mW,isDocked:AY,getBehaviours:dI});const S_=ae(Mt("toolbar-height-change")),bd={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},JR="tox-tinymce--toolbar-sticky-on",fI="tox-tinymce--toolbar-sticky-off",fW=(t,s)=>{const a=Es(s),d=zi(s).dom.innerHeight,g=Ta(a),h=ct.fromDom(t.elm),w=pc(h),x=sr(h),A=w.y,M=A+x,L=qr(s),W=sr(s),Y=L.top,ne=Y+W,oe=Math.abs(Y-g.top)<2,ye=Math.abs(ne-(g.top+d))<2;if(oe&&A<ne)Ku(g.left,A-W,a);else if(ye&&M>Y){const ie=A-d+x+W;Ku(g.left,ie,a)}},x_=(t,s)=>zo(ys.getModes(t),s),QR=t=>{const s=i=>zu(i)+(parseInt(Qe(i,"margin-top"),10)||0)+(parseInt(Qe(i,"margin-bottom"),10)||0),a=t.element;Jc(a).each(i=>{const d="padding-"+ys.getModes(t)[0];if(ys.isDocked(t)){const g=Rn(i);vn(a,"width",g+"px"),vn(i,d,s(a)+"px")}else Zn(a,"width"),Zn(i,d)})},gI=(t,s)=>{s?(Qs(t,bd.fadeOutClass),Zf(t,[bd.transitionClass,bd.fadeInClass])):(Qs(t,bd.fadeInClass),Zf(t,[bd.fadeOutClass,bd.transitionClass]))},hI=(t,s)=>{const a=ct.fromDom(t.getContainer());s?(Ks(a,JR),Qs(a,fI)):(Ks(a,fI),Qs(a,JR))},gW=(t,s)=>{const a=Es(s);Bl(a).filter(i=>!Xn(s,i)).filter(i=>Xn(i,ct.fromDom(a.dom.body))||Hi(t,i)).each(()=>xc(s))},pI=(t,s)=>Ec(t).orThunk(()=>s().toOptional().bind(a=>Ec(a.element))),bI=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(ys.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(QR)}),t.on("SkinLoaded",()=>{a().each(i=>{ys.isDocked(i)?ys.reset(i):ys.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(ys.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{ys.refresh(d);const g=d.element;mC(g)&&fW(i,g)})}),t.on("PostRender",()=>{hI(t,!1)})},hW=t=>t().map(ys.isDocked).getOr(!1),vI=()=>[ai.config({channels:{[S_()]:{onReceive:QR}}})],yI=(t,s)=>{const a=go(),i=s.getSink,d=w=>{i().each(x=>w(x.element))},g=w=>{t.inline||QR(w),hI(t,ys.isDocked(w)),w.getSystem().broadcastOn([af()],{}),i().each(x=>x.getSystem().broadcastOn([af()],{}))},h=t.inline?[]:vI();return[dn.config({}),ys.config({contextual:{lazyContext:w=>{const x=zu(w.element),A=t.inline?t.getContentAreaContainer():t.getContainer();return D.from(A).map(M=>{const L=Xs(ct.fromDom(M));return Gp(t,w.element).fold(()=>{const Y=L.height-x,ne=L.y+(x_(w,"top")?0:x);return ws(L.x,ne,L.width,Y)},Y=>{const ne=$d(L,Kp(Y)),oe=x_(w,"top")?ne.y:ne.y+x;return ws(ne.x,oe,ne.width,ne.height-x)})})},onShow:()=>{d(w=>gI(w,!0))},onShown:w=>{d(x=>Ml(x,[bd.transitionClass,bd.fadeInClass])),a.get().each(x=>{gW(w.element,x),a.clear()})},onHide:w=>{pI(w.element,i).fold(a.clear,a.set),d(x=>gI(x,!1))},onHidden:()=>{d(w=>Ml(w,[bd.transitionClass]))},...bd},lazyViewport:w=>Gp(t,w.element).fold(()=>{const A=hr(),M=I3(t),L=A.y+(x_(w,"top")&&!G3(t)?M:0),W=A.height-(x_(w,"bottom")?M:0);return{bounds:ws(A.x,L,A.width,W),optScrollEnv:D.none()}},A=>({bounds:Kp(A),optScrollEnv:D.some({currentScrollTop:A.element.dom.scrollTop,scrollElmTop:qr(A.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var pW=Object.freeze({__proto__:null,setup:bI,isDocked:hW,getBehaviours:yI});const bW=t=>{const s=t.editor,a=t.sticky?yI:dI;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:at(a(s,t.sharedBackstage))}},Yb=mn([Nr,io("items",zd([qh([wA,Cc("items",_t)]),_t]))].concat(Db)),CI=t=>Ss("GroupToolbarButton",Yb,t),Dw=[Ms("text"),Ms("tooltip"),Ms("icon"),ti("search",!1,zd([Ei,mn([Ms("placeholder")])],t=>en(t)?t?D.some({placeholder:D.none()}):D.none():D.some(t))),Kr("fetch"),Po("onSetup",()=>le),ss("context","mode:design")],Mw=mn([Nr,...Dw]),eD=t=>Ss("menubutton",Mw,t),wI=mn([Nr,FC,dd,Ch,EA,DH,Ob,Qi("presets","normal",["normal","color","listpreview"]),SP(1),Ab,NH,ss("context","mode:design")]),SI=t=>Ss("SplitButton",wI,t);var tD=li({factory:(t,s)=>{const a=(d,g)=>{const h=Ge(g,w=>{const x={type:"menubutton",text:w.text,fetch:M=>{M(w.getItems())},context:"any"},A=eD(x).mapError(M=>Rl(M)).getOrDie();return l_(A,"tox-mbtn",s.backstage,D.some("menuitem"))});Cn.set(d,h)},i={focus:Gt.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:at([Cn.config({}),Sn("menubar-events",[Bo(d=>{t.onSetup(d)}),ze(cu(),(d,g)=>{ho(d.element,".tox-mbtn--active").each(h=>{gu(g.event.target,".tox-mbtn").each(w=>{Xn(h,w)||d.getSystem().getByDom(h).each(x=>{d.getSystem().getByDom(w).each(A=>{Eu.expand(A),Eu.close(x),dn.focus(A)})})})})}),ze(k1(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(w=>d.getSystem().getByDom(w).toOptional()).each(w=>{Eu.isOpen(h)&&(Eu.expand(w),Eu.close(h))})})})]),Gt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),D.some(!0))}),as.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ze("dom"),Ze("uid"),Ze("onEscape"),Ze("backstage"),Se("onSetup",le)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const vW="Upgrade",yW="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",CW=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:yW,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:vW}}]}),xI="container",cy=[ga("slotBehaviours",[])],iy=t=>"<alloy.field."+t+">",nD=t=>{const s=(()=>{const g=[];return{slot:(w,x)=>(g.push(w),Sv(xI,iy(w),x)),record:ae(g)}})(),a=t(s),i=s.record(),d=Ge(i,g=>qa({name:g,pname:iy(g)}));return vb(xI,cy,d,wW,a)},wW=(t,s)=>{const a=oe=>X2(t),i=(oe,ye)=>Go(oe,t,ye),d=(oe,ye)=>(ie,we)=>Go(ie,t,we).map(ve=>oe(ve,we)).getOr(ye),g=oe=>(ye,ie)=>{pt(ie,we=>oe(ye,we))},h=(oe,ye)=>$n(oe.element,"aria-hidden")!=="true",w=(oe,ye)=>{if(!h(oe)){const ie=oe.element;Zn(ie,"display"),zn(ie,"aria-hidden"),Kt(oe,tp(),{name:ye,visible:!0})}},x=(oe,ye)=>{if(h(oe)){const ie=oe.element;vn(ie,"display","none"),je(ie,"aria-hidden","true"),Kt(oe,tp(),{name:ye,visible:!1})}},A=d(h,!1),M=d(x),L=g(M),W=oe=>L(oe,a()),Y=d(w),ne={getSlotNames:a,getSlot:i,isShowing:A,hideSlot:M,hideAllSlots:W,showSlot:Y};return{uid:t.uid,dom:t.dom,components:s,behaviours:bv(t.slotBehaviours),apis:ne}},uc={...To({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>sd(t)),sketch:nD},SW=mn([dd,FC,Po("onShow",le),Po("onHide",le),Ob]),Nw=t=>Ss("sidebar",SW,t),EI=t=>{const{sidebars:s}=t.ui.registry.getAll();pt(Uo(s),a=>{const i=s[a],d=()=>Wr(D.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}},context:"any"})})},xW=t=>({element:()=>t.element.dom}),EW=(t,s)=>{const a=Ge(Uo(s),i=>{const d=s[i],g=rt(Nw(d));return{name:i,getApi:xW,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Ge(a,i=>{const d=Wt(le);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Uv.unnamedEvents([pf(i,d),wh(i,d),ze(tp(),(g,h)=>{const w=h.event;gn(a,A=>A.name===w.name).each(A=>{(w.visible?A.onShow:A.onHide)(A.getApi(g))})})])})})},TW=t=>uc.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:EW(s,t),slotBehaviours:Uv.unnamedEvents([Bo(a=>uc.hideAllSlots(a))])})),_W=(t,s,a)=>{eo.getCurrent(t).each(d=>{Cn.set(d,[TW(s)]);const g=a==null?void 0:a.toLowerCase();se(g)&&Yn(s,g)&&eo.getCurrent(d).each(h=>{uc.showSlot(h,g),Bi.immediateGrow(d),Zn(d.element,"width"),E_(t.element,"region")})})},E_=(t,s)=>{je(t,"role",s)},kW=(t,s)=>{eo.getCurrent(t).each(i=>{eo.getCurrent(i).each(g=>{Bi.hasGrown(i)?uc.isShowing(g,s)?(Bi.shrink(i),E_(t.element,"presentation")):(uc.hideAllSlots(g),uc.showSlot(g,s),E_(t.element,"region")):(uc.hideAllSlots(g),uc.showSlot(g,s),Bi.grow(i),E_(t.element,"region"))})})},TI=t=>eo.getCurrent(t).bind(a=>Bi.isGrowing(a)||Bi.hasGrown(a)?eo.getCurrent(a).bind(g=>gn(uc.getSlotNames(g),h=>uc.isShowing(g,h))):D.none()),T_=Mt("FixSizeEvent"),Pw=Mt("AutoSizeEvent"),AW=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:at([as.config({}),dn.config({}),Bi.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{eo.getCurrent(s).each(uc.hideAllSlots),Un(s,Pw)},onGrown:s=>{Un(s,Pw)},onStartGrow:s=>{Kt(s,T_,{width:$s(s.element,"width").getOr("")})},onStartShrink:s=>{Kt(s,T_,{width:Rn(s.element)+"px"})}}),Cn.config({}),eo.config({find:s=>{const a=Cn.contents(s);return Pr(a)}})])}],behaviours:at([Rc.childAt(0),Sn("sidebar-sliding-events",[ze(T_,(s,a)=>{vn(s.element,"width",a.event.width)}),ze(Pw,(s,a)=>{Zn(s.element,"width")})])])});var RW=Object.freeze({__proto__:null,block:(t,s,a,i)=>{je(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=at([Gt.config({mode:"special",onTab:()=>D.some(!0),onShiftTab:()=>D.some(!0)}),dn.config({})]),h=i(d,g),w=d.getSystem().build(h);Cn.append(d,Ai(w)),w.hasConfigured(Gt)&&s.focus&&Gt.focusIn(w),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Cn.remove(d,w))},unblock:(t,s,a)=>{zn(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),DW=[Po("getRoot",D.none),Fs("focus",!0),so("onBlock"),so("onUnblock")],MW=Object.freeze({__proto__:null,init:()=>{const t=wi(),s=a=>{t.set({destroy:a})};return el({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const vd=ar({fields:DW,name:"blocking",apis:RW,state:MW}),NW=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:ff('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),__=t=>eo.getCurrent(t).each(s=>xc(s.element,!0)),PW=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;D.from(t.iframeElement).map(ct.fromDom).each(d=>{s?(En(d,a).each(g=>je(d,i,g)),je(d,a,-1)):(zn(d,a),En(d,i).each(g=>{je(d,a,g),zn(d,i)}))})},rD=(t,s,a,i)=>{const d=s.element;if(PW(t,a),a)vd.block(s,NW(i)),Zn(d,"display"),zn(d,"aria-hidden"),t.hasFocus()&&__(s);else{const g=eo.getCurrent(s).exists(h=>Jr(h.element));vd.unblock(s),vn(d,"display","none"),je(d,"aria-hidden","true"),g&&t.focus()}},BW=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:at([Cn.config({}),vd.config({focus:!1}),eo.config({find:s=>Pr(s.components())})]),components:[]}),$W=t=>t.type==="focusin",IW=t=>$W(t)?(t.composed?Pr(t.composedPath()):D.from(t.target)).map(ct.fromDom).filter(Rs).exists(a=>cc(a,"mce-pastebin")):!1,LW=(t,s,a)=>{const i=Wt(!1),d=go(),g=w=>{i.get()&&!IW(w)&&(w.preventDefault(),__(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",w=>{w.command.toLowerCase()==="mcefocus"&&w.value!==!0&&g(w)})});const h=w=>{w!==i.get()&&(i.set(w),rD(t,s(),w,a.providers),oB(t,w))};t.on("ProgressState",w=>{if(d.on(clearTimeout),On(w.time)){const x=PE.setEditorTimeout(t,()=>h(w.state),w.time);d.set(x)}else h(w.state),d.clear()})},FW=(t,s)=>Vo(t,(d,g)=>s(g,d.len).fold(ae(d),w=>({len:w.finish,list:d.list.concat([w])})),{len:0,list:[]}).list,_I=(t,s,a)=>({within:t,extra:s,withinWidth:a}),HW=(t,s,a)=>{const i=FW(t,(w,x)=>{const A=a(w);return D.some({element:w,start:x,finish:x+A,width:A})}),d=ko(i,w=>w.finish<=s),g=gs(d,(w,x)=>w+x.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},Bw=t=>Ge(t,s=>s.element),zW=(t,s,a)=>{const i=Bw(t.concat(s));return _I(i,[],a)},kI=(t,s,a,i)=>{const d=Bw(t).concat([a]);return _I(d,Bw(s),i)},VW=(t,s,a)=>_I(Bw(t),[],a),UW=(t,s,a)=>{const i=HW(s,t,a);return i.extra.length===0?D.some(i):D.none()},WW=(t,s,a,i)=>{const d=UW(t,s,a).getOrThunk(()=>HW(s,t-a(i),a)),g=d.within,h=d.extra,w=d.withinWidth;return h.length===1&&h[0].width<=a(i)?zW(g,h,w):h.length>=1?kI(g,h,i,w):VW(g,h,w)},AI=(t,s)=>{const a=Ge(s,i=>Ai(i));Sf.setGroups(t,a)},ZW=t=>ks(t,s=>Ec(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),aD=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=cd(t,s,"primary"),g=ir.getCoupled(t,"overflowGroup");vn(d.element,"visibility","hidden");const h=i.concat([g]),w=ZW(h);a([]),AI(d,h);const x=Rn(d.element),A=WW(x,s.builtGroups.get(),M=>Math.ceil(M.element.dom.getBoundingClientRect().width),g);A.extra.length===0?(Cn.remove(d,g),a([])):(AI(d,A.within),a(A.extra)),Zn(d.element,"visibility"),tc(d.element),w.each(dn.focus)},OI=ae([ga("splitToolbarBehaviours",[ir]),co("builtGroups",()=>Wt([]))]),jW=ae([od(["overflowToggledClass"]),Ju("getOverflowBounds"),Ze("lazySink"),co("overflowGroups",()=>Wt([])),so("onOpened"),so("onClosed")].concat(OI())),qW=ae([qa({factory:Sf,schema:ay(),name:"primary"}),Il({schema:ay(),name:"overflow"}),Il({name:"overflow-button"}),Il({name:"overflow-group"})]),RI=ae((t,s)=>{El(t,Math.floor(s))}),DY=ae([od(["toggledClass"]),Ze("lazySink"),Kr("fetch"),Ju("getBounds"),Oa("fireDismissalEventInstead",[Se("event",Vf())]),og(),so("onToggled")]),DI=ae([Il({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:at([Ln.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Il({factory:Sf,schema:ay(),name:"toolbar",overrides:t=>({toolbarBehaviours:at([Gt.config({mode:"cyclic",onEscape:s=>(Go(s,t,"button").each(dn.focus),D.none())})])})})]),$w=go(),GW=(t,s)=>{$w.set(!0),cD(t,s),$w.clear()},cD=(t,s)=>{const a=ir.getCoupled(t,"toolbarSandbox");ro.isOpen(a)?ro.close(a):ro.open(a,s.toolbar())},ll=(t,s,a,i)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(t).getOrDie();Za.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:RI()}}},d)},MI=(t,s,a,i,d)=>{Sf.setGroups(s,d),ll(t,s,a,i),Ln.on(t)},NI=(t,s,a)=>{const i=Jy(),d=(h,w)=>{const x=$w.get().getOr(!1);a.fetch().get(A=>{MI(t,w,a,s.layouts,A),i.link(t.element),x||Gt.focusIn(w)})},g=()=>{Ln.off(t),$w.get().getOr(!1)||dn.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:at([Gt.config({mode:"special",onEscape:h=>(ro.close(h),D.some(!0))}),ro.config({onOpen:d,onClose:g,isPartOf:(h,w,x)=>tg(w,x)||tg(t,x),getAttachPoint:()=>a.lazySink(t).getOrDie()}),ai.config({channels:{...Oi({isExtraPart:fo,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...ih({doReposition:()=>{ro.getState(ir.getCoupled(t,"toolbarSandbox")).each(h=>{ll(t,h,a,s.layouts)})}})}})])}},n1=lc({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...na.sketch({...i.button(),action:d=>{cD(d,i)},buttonBehaviours:al.augment({dump:i.button().buttonBehaviours},[ir.config({others:{toolbarSandbox:d=>NI(d,a,t)}})])}),apis:{setGroups:(d,g)=>{ro.getState(ir.getCoupled(d,"toolbarSandbox")).each(h=>{MI(d,h,t,a.layouts,g)})},reposition:d=>{ro.getState(ir.getCoupled(d,"toolbarSandbox")).each(g=>{ll(d,g,t,a.layouts)})},toggle:d=>{cD(d,i)},toggleWithoutFocusing:d=>{GW(d,i)},getToolbar:d=>ro.getState(ir.getCoupled(d,"toolbarSandbox")),isOpen:d=>ro.isOpen(ir.getCoupled(d,"toolbarSandbox"))}}),configFields:DY(),partFields:DI(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),Iw=ae([Ze("items"),od(["itemSelector"]),ga("tgroupBehaviours",[Gt])]),YW=ae([gh({name:"items",unit:"item"})]),k_=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:cr(t.tgroupBehaviours,[Gt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),A_=lc({name:"ToolbarGroup",configFields:Iw(),partFields:YW(),factory:k_}),Lw=t=>Ge(t,s=>Ai(s)),PI=(t,s,a)=>{aD(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{n1.setGroups(d,Lw(i))})})},XW=(t,s,a,i)=>{const d=po(n1.sketch({fetch:()=>Ac.nu(g=>{g(Lw(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Mr,br],onRtl:()=>[br,Mr],onBottomLtr:()=>[vr,Ma],onBottomRtl:()=>[Ma,vr]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:cr(t.splitToolbarBehaviours,[ir.config({others:{overflowGroup:()=>A_.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(Ge(h,g.getSystem().build)),PI(g,d,t)},refresh:g=>PI(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{n1.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(n1.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(n1.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{n1.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(n1.getToolbar)},domModification:{attributes:{role:"group"}}}},Au=lc({name:"SplitFloatingToolbar",configFields:jW(),partFields:qW(),factory:XW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),JW=ae([od(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),so("onOpened"),so("onClosed")].concat(OI())),O_=ae([qa({factory:Sf,schema:ay(),name:"primary"}),qa({factory:Sf,schema:ay(),name:"overflow",overrides:t=>({toolbarBehaviours:at([Bi.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Go(s,t,"overflow-button").each(a=>{Ln.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Go(s,t,"overflow-button").each(Ln.on)}}),Gt.config({mode:"acyclic",onEscape:s=>(Go(s,t,"overflow-button").each(dn.focus),D.some(!0))})])})}),Il({name:"overflow-button",overrides:t=>({buttonBehaviours:at([Ln.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Il({name:"overflow-group"})]),BI=(t,s)=>Go(t,s,"overflow").map(Bi.hasGrown).getOr(!1),R_=(t,s,a)=>{Go(t,s,"overflow-button").each(i=>{Go(t,s,"overflow").each(d=>{if(iD(t,s),Bi.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||Gt.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||dn.focus(i),g(h),s.onClosed=g}}Bi.toggleGrow(d)})})},iD=(t,s)=>{Go(t,s,"overflow").each(a=>{aD(t,s,i=>{const d=Ge(i,g=>Ai(g));Sf.setGroups(a,d)}),Go(t,s,"overflow-button").each(i=>{Bi.hasGrown(a)&&Ln.on(i)}),Bi.refresh(a)})},$I=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(h,w)=>{const x=Ge(w,h.getSystem().build);t.builtGroups.set(x)};return{uid:t.uid,dom:t.dom,components:s,behaviours:cr(t.splitToolbarBehaviours,[ir.config({others:{overflowGroup:h=>A_.sketch({...i["overflow-group"](),items:[na.sketch({...i["overflow-button"](),action:w=>{Un(h,d)}})]})}}),Sn("toolbar-toggle-events",[ze(d,h=>{R_(h,t,!1)})])]),apis:{setGroups:(h,w)=>{g(h,w),iD(h,t)},refresh:h=>iD(h,t),toggle:h=>{R_(h,t,!1)},toggleWithoutFocusing:h=>{R_(h,t,!0)},isOpen:h=>BI(h,t)},domModification:{attributes:{role:"group"}}}},lD=lc({name:"SplitSlidingToolbar",configFields:JW(),partFields:O_(),factory:$I,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),II=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):t.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[xs(a)]})).toArray(),A_.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:at([as.config({}),dn.config({ignore:!0})])}},D_=t=>A_.sketch(II(t)),LI=(t,s)=>{const a=Bo(i=>{const d=Ge(t.initGroups,D_);Sf.setGroups(i,d)});return at([fd.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),yr(()=>t.providers.checkUiComponentContext("any")),Gt.config({mode:s,onEscape:t.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),Sn("toolbar-events",[a])])},FI=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":II({title:D.none(),label:D.none(),items:[]}),"overflow-button":pU({context:"any",icon:D.some("more-drawer"),enabled:!0,tooltip:D.some("Reveal or hide additional toolbar items")},D.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:LI(t,s)}},QW=t=>{const s=FI(t),a=4,i=Au.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return Au.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=pc(d),h=Xc(d),w=pc(h),x=Math.max(h.dom.scrollHeight,w.height);return ws(g.x+a,w.y,g.width-a*2,x)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},eZ=t=>{const s=lD.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=lD.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=FI(t);return lD.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([S_()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([S_()],{type:"closed"}),t.onToggled(d,!1)}})},Fw=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Sf.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===wu.scrolling?["tox-toolbar--scrolling"]:[])},components:[Sf.parts.groups({})],toolbarBehaviours:LI(t,s)})},uD=[Ch,dd,Ms("tooltip"),Qi("buttonType","secondary",["primary","secondary"]),Fs("borderless",!1),Kr("onAction"),ss("context","mode:design")],HI=[...uD,yh,Ji("type",["button"])],tZ=[...uD,Fs("active",!1),Ji("type",["togglebutton"])],dD={button:HI,togglebutton:tZ},nZ=[Ji("type",["group"]),R("buttons",[],Or("type",dD))],oZ=Or("type",{...dD,group:nZ}),zI=mn([R("buttons",[],oZ),Kr("onShow"),Kr("onHide")]),VI=t=>Ss("view",zI,t),UI=(t,s)=>{var a,i;const d=t.type==="togglebutton",g=t.icon.map(ve=>t1(ve,s.icons)).map(po),w=ve=>{const Re=$e=>{g.map(Rt=>Rt.getOpt(ve).each(yt=>{Cn.set(yt,[t1($e,s.icons)])}))},Ne=$e=>{const Rt=ve.element;$e?(Ks(Rt,"tox-button--enabled"),je(Rt,"aria-pressed",!0)):(Qs(Rt,"tox-button--enabled"),zn(Rt,"aria-pressed"))},xt=()=>cc(ve.element,"tox-button--enabled"),ot=()=>xc(ve.element);if(d)return t.onAction({setIcon:Re,setActive:Ne,isActive:xt,focus:ot});if(t.type==="button")return t.onAction({setIcon:Re})},x={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:D.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},A=m_((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),M=d?t.text.map(s.translate):D.some(s.translate(t.text)),L=M.map(xs),W=x.tooltip.or(M).map(ve=>({"aria-label":s.translate(ve)})).getOr({}),Y=g.map(ve=>ve.asSpec()),ne=Zv([Y,L]),oe=t.icon.isSome()&&L.isSome(),ye={tag:"button",classes:A.concat(...t.icon.isSome()&&!oe?["tox-button--icon"]:[]).concat(...oe?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:W},ie=[],we=Cw(x,D.some(w),ie,ye,ne,t.tooltip,s);return na.sketch(we)},WI=(t,s)=>UI(t,s),sZ=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ge(t.buttons,a=>WI(a,s))}),ZI=Ts().deviceType,jI=ZI.isPhone(),rZ=ZI.isTablet(),aZ=t=>{let s=!1;const a=Ge(t.buttons,i=>i.type==="group"?(s=!0,sZ(i,t.providers)):WI(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...jI||rZ?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:at([dn.config({}),Gt.config({mode:"flow",selector:"button, .tox-button",focusInside:Ka.OnEnterOrSpaceMode})]),components:s?a:[vf.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),vf.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},cZ=t=>({uid:t.uid,behaviours:at([dn.config({}),as.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),iZ=(t,s,a,i)=>{const d={getPane:g=>sa.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:at([dn.config({}),Gt.config({mode:"cyclic",focusInside:Ka.OnEnterOrSpaceMode})]),apis:d}};var ly=lc({name:"silver.View",configFields:[Ze("viewConfig")],partFields:[ii({factory:{sketch:aZ},schema:[Ze("buttons"),Ze("providers")],name:"header"}),ii({factory:{sketch:cZ},schema:[],name:"pane"})],factory:iZ,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const lZ=(t,s,a)=>ql(s,(i,d)=>{const g=rt(VI(i));return t.slot(d,ly.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[ly.parts.header({buttons:g.buttons,providers:a})]:[],ly.parts.pane({})]}))}),uZ=(t,s)=>uc.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:lZ(a,t,s),slotBehaviours:Uv.unnamedEvents([Bo(i=>uc.hideAllSlots(i))])})),qI=t=>gn(uc.getSlotNames(t),s=>uc.isShowing(t,s)),dZ=t=>{const s=t.element;vn(s,"display","none"),je(s,"aria-hidden","true")},mZ=t=>{const s=t.element;Zn(s,"display"),zn(s,"aria-hidden")},GI=t=>({getContainer:ae(t)}),KI=(t,s,a)=>{uc.getSlot(t,s).each(i=>{ly.getPane(i).each(d=>{a(i)(GI(d.element.dom))})})},fZ=(t,s)=>KI(t,s,ly.getOnShow),mD=(t,s)=>KI(t,s,ly.getOnHide);var Xb=li({factory:(t,s)=>{const g={setViews:(h,w)=>{Cn.set(h,[uZ(w,s.backstage.shared.providers)])},whichView:h=>eo.getCurrent(h).bind(qI),toggleView:(h,w,x,A)=>eo.getCurrent(h).exists(M=>{const L=qI(M),W=L.exists(ne=>A===ne),Y=uc.getSlot(M,A).isSome();return Y&&(uc.hideAllSlots(M),W?(dZ(h),w()):(x(),mZ(h),uc.showSlot(M,A),fZ(M,A)),L.each(ne=>mD(M,ne))),Y})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:at([Cn.config({}),eo.config({find:h=>{const w=Cn.contents(h);return Pr(w)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Ze("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const gZ=(t,s,a)=>{let i=!1;const d=h=>{ri(h,".tox-statusbar").each(w=>{Qe(w,"display")==="none"&&$n(w,"aria-hidden")==="true"?(Zn(w,"display"),zn(w,"aria-hidden")):(vn(w,"display","none"),je(w,"aria-hidden","true"))})},g={getSocket:h=>sa.getPart(h,t,"socket"),setSidebar:(h,w,x)=>{sa.getPart(h,t,"sidebar").each(A=>_W(A,w,x))},toggleSidebar:(h,w)=>{sa.getPart(h,t,"sidebar").each(x=>kW(x,w))},whichSidebar:h=>sa.getPart(h,t,"sidebar").bind(TI).getOrNull(),getHeader:h=>sa.getPart(h,t,"header"),getToolbar:h=>sa.getPart(h,t,"toolbar"),setToolbar:(h,w)=>{sa.getPart(h,t,"toolbar").each(x=>{const A=Ge(w,D_);x.getApis().setGroups(x,A)})},setToolbars:(h,w)=>{sa.getPart(h,t,"multiple-toolbar").each(x=>{const A=Ge(w,M=>Ge(M,D_));w_.setItems(x,A)})},refreshToolbar:h=>{sa.getPart(h,t,"toolbar").each(x=>x.getApis().refresh(x))},toggleToolbarDrawer:h=>{sa.getPart(h,t,"toolbar").each(w=>{Mo(w.getApis().toggle,x=>x(w))})},toggleToolbarDrawerWithoutFocusing:h=>{sa.getPart(h,t,"toolbar").each(w=>{Mo(w.getApis().toggleWithoutFocusing,x=>x(w))})},isToolbarDrawerToggled:h=>sa.getPart(h,t,"toolbar").bind(w=>D.from(w.getApis().isOpen).map(x=>x(w))).getOr(!1),getThrobber:h=>sa.getPart(h,t,"throbber"),focusToolbar:h=>{sa.getPart(h,t,"toolbar").orThunk(()=>sa.getPart(h,t,"multiple-toolbar")).each(x=>{Gt.focusIn(x)})},setMenubar:(h,w)=>{sa.getPart(h,t,"menubar").each(x=>{tD.setMenus(x,w)})},focusMenubar:h=>{sa.getPart(h,t,"menubar").each(w=>{tD.focus(w)})},setViews:(h,w)=>{sa.getPart(h,t,"viewWrapper").each(x=>{Xb.setViews(x,w)})},toggleView:(h,w)=>sa.getPart(h,t,"viewWrapper").exists(x=>Xb.toggleView(x,()=>g.showMainView(h),()=>g.hideMainView(h),w)),whichView:h=>sa.getPart(h,t,"viewWrapper").bind(Xb.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),sa.getPart(h,t,"editorContainer").each(w=>{const x=w.element;d(x),vn(x,"display","none"),je(x,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),sa.getPart(h,t,"editorContainer").each(w=>{const x=w.element;d(x),Zn(x,"display"),zn(x,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},YI=wf.optional({factory:tD,name:"menubar",schema:[Ze("backstage")]}),hZ=t=>t.type===wu.sliding?eZ:t.type===wu.floating?QW:Fw,pZ=wf.optional({factory:{sketch:t=>w_.sketch({uid:t.uid,dom:t.dom,listBehaviours:at([Gt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>Fw({type:t.type,uid:Mt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),D.some(!0))}),setupItem:(s,a,i,d)=>{Sf.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[Ze("dom"),Ze("onEscape")]}),NY=wf.optional({factory:{sketch:t=>{const s=hZ(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),D.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Ze("dom"),Ze("onEscape"),Ze("getSink")]}),bZ=wf.optional({factory:{sketch:bW},name:"header",schema:[Ze("dom")]}),vZ=wf.optional({factory:{sketch:CW},name:"promotion",schema:[Ze("dom")]}),fD=wf.optional({name:"socket",schema:[Ze("dom")]}),yZ=wf.optional({factory:{sketch:AW},name:"sidebar",schema:[Ze("dom")]}),M_=wf.optional({factory:{sketch:BW},name:"throbber",schema:[Ze("dom")]}),XI=wf.optional({factory:Xb,name:"viewWrapper",schema:[Ze("backstage")]}),JI=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),gD=wf.optional({factory:{sketch:JI},name:"editorContainer",schema:[]});var fs=lc({name:"OuterContainer",factory:gZ,configFields:[Ze("dom"),Ze("behaviours")],partFields:[bZ,YI,NY,pZ,fD,yZ,vZ,M_,XI,gD],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const QI="file edit view insert format tools table help",Jb={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},eL=(t,s,a)=>{const i=gN(a).split(/[ ,]/);return{text:t.title,getItems:()=>Te(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:wr(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},hD=t=>t.split(" "),tL=(t,s)=>{const a={...Jb,...s.menus},i=Uo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?hD(QI):hD(s.menubar===!1?"":s.menubar),g=ko(d,w=>{const x=Yn(Jb,w);return i?x||bt(s.menus,w).exists(A=>Yn(A,"items")):x}),h=Ge(g,w=>{const x=a[w];return eL({title:x.title,items:hD(x.items)},s,t)});return ko(h,w=>{const x=A=>se(A)||A.type!=="separator";return w.getItems().length>0&&wr(w.getItems(),x)})},CZ=t=>{const s=()=>{t._skinLoaded=!0,cz(t)};return()=>{t.initialized?s():t.on("init",s)}},pD=(t,s)=>()=>iz(t,{message:s}),wZ=t=>{const s=wC(t);return s?D.from(s):D.none()},nL=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),Hw=(t,s,a,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),oL=(t,s)=>"ui/"+t+"/"+s,N_=t=>D.from(tinymce.Resource.get(t)).filter(se),zw=(t,s,a="")=>{const i=wZ(t).map(g=>oL(g,`${s}.css`)),d=i.bind(N_);return mc(i,d,(g,h)=>({_kind:"load-raw",key:g,css:h})).getOrThunk(()=>{const g=t.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${g}.css`}})},SZ=(t,s)=>{const a=t.ui.styleSheetLoader,i=zw(t,"skin",s);switch(i._kind){case"load-raw":const{key:d,css:g}=i;return Hw(t,d,g,a),Promise.resolve();case"load-stylesheet":const{url:h}=i;return nL(t,h,a);default:return Promise.resolve()}},xZ=(t,s)=>{if(hc(ct.fromDom(t.getElement()))){const i=vC.DOM.styleSheetLoader,d=zw(t,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return Hw(t,g,h,i),Promise.resolve();case"load-stylesheet":const{url:w}=d;return nL(t,w,i);default:return Promise.resolve()}}else return Promise.resolve()},sL=(t,s,a)=>{const d=zw(t,s?"content.inline":"content",a);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return s?Hw(t,g,h,t.ui.styleSheetLoader):t.on("PostRender",()=>{Hw(t,g,h,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:w}=d;return a&&t.contentCSS.push(w),Promise.resolve();default:return Promise.resolve()}},EZ=async(t,s)=>{const a=kN(s);if(await sL(s,t,a),!U3(s)&&se(a))return Promise.all([SZ(s,a),xZ(s,a)]).then()},rL=(t,s)=>EZ(t,s).then(CZ(s),pD(s,"Skin could not be loaded")),TZ=Nn(rL,!1),aL=Nn(rL,!0),uy=(t,s,a)=>Zo(a)?t.translate(s):t.translate([s,t.translate(a)]),_Z=(t,s)=>{const a=(h,w,x,A)=>{const M=t.shared.providers.translate(h.title);if(h.type==="separator")return D.some({type:"separator",text:M});if(h.type==="submenu"){const L=Te(h.getStyleItems(),W=>i(W,w,A));return w===0&&L.length<=0?D.none():D.some({type:"nestedmenuitem",text:M,enabled:L.length>0,getSubmenuItems:()=>Te(h.getStyleItems(),W=>i(W,w,A))})}else return D.some({type:"togglemenuitem",text:M,icon:h.icon,active:h.isSelected(A),enabled:!x,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),L=>({meta:{style:L}}))})},i=(h,w,x)=>{const A=h.type==="formatter"&&s.isInvalid(h);return w===0?A?[]:a(h,w,!1,x).toArray():a(h,w,A,x).toArray()},d=h=>{const w=s.getCurrentValue(),x=s.shouldHide?0:1;return Te(h,A=>i(A,x,w))};return{validateItems:d,getFetch:(h,w)=>(x,A)=>{const M=w(),L=d(M),W=ny(L,ud.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:D.none()});A(W)}}},o1=(t,s)=>{const a=s.dataset,i=a.type==="basic"?()=>Ge(a.data,d=>kw(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:_Z(t,s),getStyleItems:i}},Vw=(t,s,a,i,d,g)=>{const{items:h,getStyleItems:w}=o1(s,a),x=Wt(a.tooltip),A=L=>({getComponent:ae(L),setTooltip:W=>{const Y=s.shared.providers.translate(W);je(L.element,"aria-label",Y),x.set(W)}}),M=L=>{const W=Y=>L.setTooltip(uy(t,i(Y.value),Y.value));return t.on(d,W),Lb(Fb(t,"NodeChange",Y=>{const ne=Y.getComponent();a.updateText(ne),Ft.set(Y.getComponent(),!t.selection.isEditable())})(L),()=>t.off(d,W))};return iR({context:"mode:design",text:a.icon.isSome()?D.none():a.text,icon:a.icon,ariaLabel:D.some(a.tooltip),tooltip:D.none(),role:D.none(),fetch:h.getFetch(s,w),onSetup:M,getApi:A,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Hs.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:L=>{if(a.tooltip!==x.get()){const W=s.shared.providers.translate(x.get());Hs.setComponents(L,s.shared.providers.tooltips.getComponents({tooltipText:W}))}}})})]},"tox-tbtn",s.shared,g)},kZ=t=>Ge(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),cL=t=>({type:"basic",data:t});var dy;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(dy||(dy={}));const iL=(t,s)=>s===dy.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),bD=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:kZ(iL(i,a))}},lL="Align",uL=ae("Alignment {0}"),dL="left",vD=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],yD=t=>{const s=()=>gn(vD,w=>t.formatter.match(w.format)),a=w=>()=>t.formatter.match(w),i=w=>D.none,d=w=>{const A=s().fold(ae(dL),M=>M.title.toLowerCase());Kt(w,jb,{icon:`align-${A}`}),mz(t,{value:A})},g=cL(vD),h=w=>()=>gn(vD,x=>x.format===w.format).each(x=>t.execCommand(x.command));return{tooltip:uy(t,uL(),dL),text:D.none(),icon:D.some("align-left"),isSelectedFor:a,getCurrentValue:D.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:w=>!t.formatter.canApply(w.format)}},AZ=(t,s)=>Vw(t,s,yD(t),uL,"AlignTextUpdate","align"),OZ=(t,s)=>{const a=o1(s,yD(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(lL),onSetup:kc(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},mL=(t,s)=>{const a=s(),i=Ge(a,d=>d.format);return D.from(t.formatter.closest(i)).bind(d=>gn(a,g=>g.format===d))},CD="Blocks",P_=ae("Block {0}"),wD="Paragraph",fL=t=>{const s=g=>()=>t.formatter.match(g),a=g=>()=>{const h=t.formatter.get(g);return h?D.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):D.none()},i=g=>{const w=mL(t,()=>d.data).fold(ae(wD),x=>x.title);Kt(g,Tu,{text:w}),hz(t,{value:w})},d=bD(t,"block_formats",dy.SemiColon);return{tooltip:uy(t,P_(),wD),text:D.some(wD),icon:D.none(),isSelectedFor:s,getCurrentValue:D.none,getPreviewFor:a,onAction:aB(t),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},RZ=(t,s)=>Vw(t,s,fL(t),P_,"BlocksTextUpdate","blocks"),DZ=(t,s)=>{const a=o1(s,fL(t));t.ui.registry.addNestedMenuItem("blocks",{text:CD,onSetup:kc(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},MZ="Fonts",gL=ae("Font {0}"),SD="System Font",NZ=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],hL=t=>{const s=t.split(/\s*,\s*/);return Ge(s,a=>a.replace(/^['"]+|['"]+$/g,""))},xD=(t,s)=>s.length>0&&Ja(s,a=>t.indexOf(a.toLowerCase())>-1),B_=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=hL(t.toLowerCase());return xD(a,NZ)||xD(a,s)}else return!1},$_=t=>{const s=()=>{const x=ne=>ne?hL(ne)[0]:"",A=t.queryCommandValue("FontName"),M=w.data,L=A?A.toLowerCase():"",W=_N(t);return{matchOpt:gn(M,ne=>{const oe=ne.format;return oe.toLowerCase()===L||x(oe).toLowerCase()===x(L).toLowerCase()}).orThunk(()=>an(B_(L,W),{title:SD,format:L})),font:A}},a=x=>A=>A.exists(M=>M.format===x),i=()=>{const{matchOpt:x}=s();return x},d=x=>()=>D.some({tag:"div",styles:x.indexOf("dings")===-1?{"font-family":x}:{}}),g=x=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,x.format)})},h=x=>{const{matchOpt:A,font:M}=s(),L=A.fold(ae(M),W=>W.title);Kt(x,Tu,{text:L}),pz(t,{value:L})},w=bD(t,"font_family_formats",dy.SemiColon);return{tooltip:uy(t,gL(),SD),text:D.some(SD),icon:D.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:w,shouldHide:!1,isInvalid:fo}},pL=(t,s)=>Vw(t,s,$_(t),gL,"FontFamilyTextUpdate","fontfamily"),s1=(t,s)=>{const a=o1(s,$_(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(MZ),onSetup:kc(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},bL={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},PZ=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=w=>`(?:${w})?`,h=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),BZ=(t,s)=>wr(s,a=>wr(bL[a],i=>t===i)),I_=(t,s)=>D.from(PZ.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return BZ(g,s)?D.some({value:d,unit:g}):D.none()}),$Z=(t,s)=>I_(t,s).map(({value:a,unit:i})=>a+i),vL={tab:ae(9),escape:ae(27),enter:ae(13),backspace:ae(8),delete:ae(46),left:ae(37),up:ae(38),right:ae(39),down:ae(40),space:ae(32),home:ae(36),end:ae(35),pageUp:ae(33),pageDown:ae(34)},IZ=(t,s,a,i)=>{let d=D.none();const g=ve=>ve.map(Re=>Dt.getValue(Re)).getOr(""),h=Fb(t,"NodeChange SwitchMode DisabledStateChange",ve=>{const Re=ve.getComponent();d=D.some(Re),a.updateInputValue(Re),Ft.set(Re,!t.selection.isEditable()||IE(t))}),w=ve=>({getComponent:ae(ve)}),x=Wt(le),A=Mt("custom-number-input-events"),M=(ve,Re,Ne)=>{const xt=g(d),ot=a.getNewValue(xt,ve),$e=xt.length-`${ot}`.length,Rt=d.map($t=>$t.element.dom.selectionStart-$e),yt=d.map($t=>$t.element.dom.selectionEnd-$e);a.onAction(ot,Ne),d.each($t=>{Dt.setValue($t,ot),Re&&(Rt.each(Hn=>$t.element.dom.selectionStart=Hn),yt.each(Hn=>$t.element.dom.selectionEnd=Hn))})},L=(ve,Re)=>M((Ne,xt)=>Ne-xt,ve,Re),W=(ve,Re)=>M((Ne,xt)=>Ne+xt,ve,Re),Y=ve=>Jc(ve.element).fold(D.none,Re=>(xc(Re),D.some(!0))),ne=ve=>Jr(ve.element)?(Yl(ve.element).each(Re=>xc(Re)),D.some(!0)):D.none(),oe=(ve,Re,Ne,xt)=>{const ot=Wt(le),$e=s.shared.providers.translate(Ne),Rt=Mt("altExecuting"),yt=Fb(t,"NodeChange SwitchMode DisabledStateChange",Hn=>{Ft.set(Hn.getComponent(),!t.selection.isEditable()||IE(t))}),$t=Hn=>{Ft.isDisabled(Hn)||ve(!0)};return na.sketch({dom:{tag:"button",attributes:{"aria-label":$e,"data-mce-name":Re},classes:xt.concat(Re)},components:[bw(Re,s.shared.providers.icons)],buttonBehaviours:at([Ft.config({}),Hs.config(s.shared.providers.tooltips.getConfig({tooltipText:$e})),Sn(Rt,[pf({onSetup:yt,getApi:w},ot),wh({getApi:w},ot),ze(Va(),(Hn,Yo)=>{(Yo.event.raw.keyCode===vL.space()||Yo.event.raw.keyCode===vL.enter())&&(Ft.isDisabled(Hn)||ve(!1))}),ze(Gd(),$t),ze(pr(),$t)])]),eventOrder:{[Va()]:[Rt,"keying"],[Gd()]:[Rt,"alloy.base.behaviour"],[pr()]:[Rt,"alloy.base.behaviour"],[uu()]:["alloy.base.behaviour",Rt,"tooltipping"],[du()]:[Rt,"tooltipping"]}})},ye=po(oe(ve=>L(!1,ve),"minus","Decrease font size",[])),ie=po(oe(ve=>W(!1,ve),"plus","Increase font size",[])),we=po({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[bh.sketch({inputBehaviours:at([Ft.config({}),Sn(A,[pf({onSetup:h,getApi:w},x),wh({getApi:w},x)]),Sn("input-update-display-text",[ze(Tu,(ve,Re)=>{Dt.setValue(ve,Re.event.text)}),ze(mS(),ve=>{a.onAction(Dt.getValue(ve))}),ze(Km(),ve=>{a.onAction(Dt.getValue(ve))})]),Gt.config({mode:"special",onEnter:ve=>(M(bn,!0,!0),D.some(!0)),onEscape:Y,onUp:ve=>(W(!0,!1),D.some(!0)),onDown:ve=>(L(!0,!1),D.some(!0)),onLeft:(ve,Re)=>(Re.cut(),D.none()),onRight:(ve,Re)=>(Re.cut(),D.none())})])})],behaviours:at([dn.config({}),Gt.config({mode:"special",onEnter:ne,onSpace:ne,onEscape:Y}),Sn("input-wrapper-events",[ze(cu(),ve=>{pt([ye,ie],Re=>{const Ne=ct.fromDom(Re.get(ve).element.dom);Jr(Ne)&&om(Ne)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...cn(i)?{"data-mce-name":i}:{}}},components:[ye.asSpec(),we.asSpec(),ie.asSpec()],behaviours:at([dn.config({}),Gt.config({mode:"flow",focusInside:Ka.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:ve=>Jr(ve.element)?D.none():(xc(ve.element),D.some(!0))})])}},LZ="Font sizes",ED=ae("Font size {0}"),yL="12pt",FZ={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},TD={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},HZ=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},zZ=(t,s)=>/[0-9.]+px$/.test(t)?HZ(parseInt(t,10)*72/96,s||0)+"pt":bt(TD,t).getOr(t),VZ=t=>bt(FZ,t).getOr(""),CL=t=>{const s=()=>{let x=D.none();const A=w.data,M=t.queryCommandValue("FontSize");if(M)for(let L=3;x.isNone()&&L>=0;L--){const W=zZ(M,L),Y=VZ(W);x=gn(A,ne=>ne.format===M||ne.format===W||ne.format===Y)}return{matchOpt:x,size:M}},a=x=>A=>A.exists(M=>M.format===x),i=()=>{const{matchOpt:x}=s();return x},d=ae(D.none),g=x=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,x.format)})},h=x=>{const{matchOpt:A,size:M}=s(),L=A.fold(ae(M),W=>W.title);Kt(x,Tu,{text:L}),fz(t,{value:L})},w=bD(t,"font_size_formats",dy.Space);return{tooltip:uy(t,ED(),yL),text:D.some(yL),icon:D.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:w,shouldHide:!1,isInvalid:fo}},UZ=(t,s)=>Vw(t,s,CL(t),ED,"FontSizeTextUpdate","fontsize"),WZ=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},wL=16,SL=t=>t>=0,xL=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>Kt(i,Tu,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{I_(i,["unsupportedLength","empty"]);const g=s(),h=I_(i,["unsupportedLength","empty"]).or(I_(g,["unsupportedLength","empty"])),w=h.map(W=>W.value).getOr(wL),x=yN(t),A=h.map(W=>W.unit).filter(W=>W!=="").getOr(x),M=d(w,WZ(A).step),L=`${SL(M)?M:w}${A}`;return L!==g&&gz(t,{value:L}),L}}},ZZ=(t,s)=>IZ(t,s,xL(t),"fontsizeinput"),EL=(t,s)=>{const a=o1(s,CL(t));t.ui.registry.addNestedMenuItem("fontsize",{text:LZ,onSetup:kc(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},jZ="Formats",TL=t=>Zo(t)?"Formats":"Format {0}",_L=(t,s)=>{const a="Formats",i=h=>()=>t.formatter.match(h),d=h=>()=>{const w=t.formatter.get(h);return w!==void 0?D.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):D.none()},g=h=>{const w=L=>X$(L)?Te(L.items,w):J$(L)?[{title:L.title,format:L.format}]:[],x=Te(tI(t),w),M=mL(t,ae(x)).fold(ae({title:a,tooltipLabel:""}),L=>({title:L.title,tooltipLabel:L.title}));Kt(h,Tu,{text:M.title}),dz(t,{value:M.tooltipLabel})};return{tooltip:uy(t,TL(""),""),text:D.some(a),icon:D.none(),isSelectedFor:i,getCurrentValue:D.none,getPreviewFor:d,onAction:aB(t),updateText:g,shouldHide:mN(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},kL=(t,s)=>{const a={type:"advanced",...s.styles};return Vw(t,s,_L(t,a),TL,"StylesTextUpdate","styles")},qZ=(t,s)=>{const a={type:"advanced",...s.styles},i=o1(s,_L(t,a));t.ui.registry.addNestedMenuItem("styles",{text:jZ,onSetup:kc(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},AL=ae([Ze("toggleClass"),Ze("fetch"),nl("onExecute"),Se("getHotspot",D.some),Se("getAnchorOverrides",ae({})),og(),nl("onItemExecute"),lo("lazySink"),Ze("dom"),so("onOpen"),ga("splitDropdownBehaviours",[ir,Gt,dn]),Se("matchWidth",!1),Se("useMinWidth",!1),Se("eventOrder",{}),lo("role"),lo("listRole")].concat(Yv())),GZ=qa({factory:na,schema:[Ze("dom")],name:"arrow",defaults:()=>({buttonBehaviours:at([dn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Hc)},buttonBehaviours:at([Ln.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),KZ=qa({factory:na,schema:[Ze("dom")],name:"button",defaults:()=>({buttonBehaviours:at([dn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),YZ=ae([GZ,KZ,ii({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ze("text")],name:"aria-descriptor"}),Il({schema:[z1()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),uO()]),XZ=(t,s,a,i)=>{const d=M=>{eo.getCurrent(M).each(L=>{Q.highlightFirst(L),Gt.focusIn(L)})},g=M=>{dO(t,bn,M,i,d,ha.HighlightMenuAndItem).get(le)},h=M=>(g(M),D.some(!0)),w=M=>{const L=cd(M,t,"button");return Hc(L),D.some(!0)},x={...rs([Bo((M,L)=>{Go(M,t,"aria-descriptor").each(Y=>{const ne=Mt("aria");je(Y.element,"id",ne),je(M.element,"aria-describedby",ne)})})]),...Bv(D.some(g))},A={repositionMenus:M=>{Ln.isOn(M)&&PB(M)}};return{uid:t.uid,dom:t.dom,components:s,apis:A,eventOrder:{...t.eventOrder,[ac()]:["disabling","toggling","alloy.base.behaviour"]},events:x,behaviours:cr(t.splitDropdownBehaviours,[ir.config({others:{sandbox:M=>{const L=cd(M,t,"arrow");return Kv(t,M,{onOpen:()=>{Ln.on(L),Ln.on(M)},onClose:()=>{Ln.off(L),Ln.off(M)}})}}}),Gt.config({mode:"special",onSpace:w,onEnter:w,onDown:h}),dn.config({}),Ln.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},L_=lc({name:"SplitDropdown",configFields:AL(),partFields:YZ(),factory:XZ,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),OL=t=>({isEnabled:()=>!Ft.isDisabled(t),setEnabled:s=>Ft.set(t,!s),setText:s=>Kt(t,Tu,{text:s}),setIcon:s=>Kt(t,jb,{icon:s})}),JZ=t=>({setActive:s=>{Ln.set(t,s)},isActive:()=>Ln.isOn(t),isEnabled:()=>!Ft.isDisabled(t),setEnabled:s=>Ft.set(t,!s),setText:s=>Kt(t,Tu,{text:s}),setIcon:s=>Kt(t,jb,{icon:s})}),_D=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),RL=Mt("focus-button"),kD=(t,s,a,i,d,g,h)=>{const w=s.map(A=>po(e_(A,"tox-tbtn",d))),x=t.map(A=>po(t1(A,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{..._D(a,d),...cn(h)?{"data-mce-name":h}:{}}},components:Zv([x.map(A=>A.asSpec()),w.map(A=>A.asSpec())]),eventOrder:{[Fc()]:["focusing","alloy.base.behaviour",bm],[uu()]:[bm,"toolbar-group-button-events"],[du()]:[bm,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:at([fd.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),yr(()=>d.checkUiComponentContext(g)),Sn(bm,[Bo((A,M)=>cR(A)),ze(Tu,(A,M)=>{w.bind(L=>L.getOpt(A)).each(L=>{Cn.set(L,[xs(d.translate(M.event.text))])})}),ze(jb,(A,M)=>{x.bind(L=>L.getOpt(A)).each(L=>{Cn.set(L,[t1(M.event.icon,d.icons)])})}),ze(Fc(),(A,M)=>{M.event.prevent(),Un(A,RL)})])].concat(i.getOr([])))}},QZ=(t,s,a,i,d)=>{const g=s.shared,h=Wt(le),w={toolbarButtonBehaviours:[],getApi:OL,onSetup:t.onSetup},x=[Sn("toolbar-group-button-events",[pf(w,h),wh(w,h)]),...t.tooltip.map(A=>Hs.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(A)}))).toArray()];return n1.sketch({lazySink:g.getSink,fetch:()=>Ac.nu(A=>{A(Ge(a(t.items),D_))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:kD(t.icon,t.text,t.tooltip,D.some(x),g.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},DL=(t,s,a,i)=>{var d;const g=Wt(le),h=kD(t.icon,t.text,t.tooltip,D.none(),a,t.context,i);return na.sketch({dom:h.dom,components:h.components,eventOrder:QT,buttonBehaviours:{...at([Sn("toolbar-button-events",[NV({onAction:t.onAction,getApi:s.getApi}),pf(s,g),wh(s,g)]),...t.tooltip.map(w=>Hs.config(a.tooltips.getConfig({tooltipText:a.translate(w)+t.shortcut.map(x=>` (${IA(x)})`).getOr("")}))).toArray(),fd.toolbarButton(()=>!t.enabled||a.checkUiComponentContext(t.context).shouldDisable),yr(()=>a.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[bm]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[bm]}})},ej=(t,s,a)=>ML(t,s,[],a),ML=(t,s,a,i)=>DL(t,{toolbarButtonBehaviours:a.length>0?[Sn("toolbarButtonWith",a)]:[],getApi:OL,onSetup:t.onSetup},s,i),tj=(t,s,a)=>AD(t,s,[],a),AD=(t,s,a,i)=>DL(t,{toolbarButtonBehaviours:[Cn.config({}),Ln.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Sn("toolbarToggleButtonWith",a)]:[]),getApi:JZ,onSetup:t.onSetup},s,i),nj=(t,s,a)=>i=>Ac.nu(d=>s.fetch(d)).map(d=>D.from(mO(ns(aO(Mt("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,ud.CLOSE_ON_EXECUTE,s.select.getOr(fo),a),{movement:TT(s.columns,s.presets),menuBehaviours:Uv.unnamedEvents(s.columns!=="auto"?[]:[Bo((g,h)=>{NA(g,4,pA(s.presets)).each(({numRows:w,numColumns:x})=>{Gt.setGridSize(g,w,x)})})])})))),oj=(t,s,a)=>{const i=Wt(t.tooltip.getOr("")),d=w=>({isEnabled:()=>!Ft.isDisabled(w),setEnabled:x=>Ft.set(w,!x),setIconFill:(x,A)=>{ho(w.element,`svg path[class="${x}"], rect[class="${x}"]`).each(M=>{je(M,"fill",A)})},setActive:x=>{je(w.element,"aria-pressed",x),ho(w.element,"span").each(A=>{w.getSystem().getByDom(A).each(M=>Ln.set(M,x))})},isActive:()=>ho(w.element,"span").exists(x=>w.getSystem().getByDom(x).exists(Ln.isOn)),setText:x=>ho(w.element,"span").each(A=>w.getSystem().getByDom(A).each(M=>Kt(M,Tu,{text:x}))),setIcon:x=>ho(w.element,"span").each(A=>w.getSystem().getByDom(A).each(M=>Kt(M,jb,{icon:x}))),setTooltip:x=>{const A=s.providers.translate(x);je(w.element,"aria-label",A),i.set(x)}}),g=Wt(le),h={getApi:d,onSetup:t.onSetup};return L_.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,..._D(t.tooltip,s.providers),...cn(a)?{"data-mce-name":a}:{}}},onExecute:w=>{const x=d(w);x.isEnabled()&&t.onAction(x)},onItemExecute:(w,x,A)=>{},splitDropdownBehaviours:at([Sn("split-dropdown-events",[Bo((w,x)=>cR(w)),ze(RL,dn.focus),pf(h,g),wh(h,g)]),fd.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),yr(()=>s.providers.checkUiComponentContext(t.context)),Ni.config({}),...t.tooltip.map(w=>Hs.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(w),onShow:x=>{if(i.get()!==w){const A=s.providers.translate(i.get());Hs.setComponents(x,s.providers.tooltips.getComponents({tooltipText:A}))}}})})).toArray()]),eventOrder:{[uu()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[du()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:nj(d,t,s.providers),parts:{menu:lT(!1,t.columns,t.presets)},components:[L_.parts.button(kD(t.icon,t.text,D.none(),D.some([Ln.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),fd.toolbarButton(fo),yr(ae({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),L_.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:uA("chevron-down",s.providers.icons)},buttonBehaviours:at([fd.splitButton(fo),yr(ae({contextType:"any",shouldDisable:!1}))])}),L_.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},NL=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Uw=(t,s)=>(a,i,d,g)=>{const h=t(a).mapError(w=>Rl(w)).getOrDie();return s(h,i,d,g)},PL={button:Uw(TP,(t,s,a,i)=>ej(t,s.shared.providers,i)),togglebutton:Uw(_P,(t,s,a,i)=>tj(t,s.shared.providers,i)),menubutton:Uw(eD,(t,s,a,i)=>l_(t,"tox-tbtn",s,D.none(),!1,i)),splitbutton:Uw(SI,(t,s,a,i)=>oj(t,s.shared,i)),grouptoolbarbutton:Uw(CI,(t,s,a,i)=>{const d=a.ui.registry.getAll().buttons,g=w=>F_(a,{buttons:d,toolbar:w,allowToolbarGroups:!1},s,D.none()),h={[tv]:s.shared.header.isPositionedAtTop()?sm.TopToBottom:sm.BottomToTop};switch(Lv(a)){case wu.floating:return QZ(t,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},BL=(t,s,a,i)=>bt(PL,t.type).fold(()=>(console.error("skipping button defined by",t),D.none()),d=>D.some(d(t,s,a,i))),$L={styles:kL,fontsize:UZ,fontsizeinput:ZZ,fontfamily:pL,blocks:RZ,align:AZ},sj=t=>{const s=Ge(NL,a=>{const i=ko(a.items,d=>Yn(t,d)||Yn($L,d));return{name:a.name,items:i}});return ko(s,a=>a.items.length>0)},rj=t=>{const s=t.split("|");return Ge(s,a=>({items:a.trim().split(" ")}))},my=t=>Tt(t,s=>(Yn(s,"name")||Yn(s,"label"))&&Yn(s,"items")),aj=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?sj(a):se(s)?rj(s):my(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},cj=(t,s,a,i,d,g)=>bt(s,a.toLowerCase()).orThunk(()=>g.bind(h=>ks(h,w=>bt(s,w+a.toLowerCase())))).fold(()=>bt($L,a.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),D.none()):BL(h,d,t,a.toLowerCase())),F_=(t,s,a,i)=>{const d=aj(s),g=Ge(d,h=>{const w=Te(h.items,x=>x.trim().length===0?[]:cj(t,s.buttons,x,s.allowToolbarGroups,a,i).toArray());return{title:D.from(t.translate(h.name)),label:an(h.label!==void 0,t.translate(h.label)),items:w}});return ko(g,h=>h.items.length>0)},IL=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(Tt(g,se)){const w=g.map(x=>{const A={toolbar:x,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return F_(t,A,i,D.none())});fs.setToolbars(d,w)}else fs.setToolbar(d,F_(t,a,i,D.none()))},LL=Ts(),ij=LL.os.isiOS()&&LL.os.version.major<=12,lj=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=Wt(qo(d.innerWidth,d.innerHeight)),w=Wt(qo(g.offsetWidth,g.offsetHeight)),x=()=>{const W=h.get();(W.left!==d.innerWidth||W.top!==d.innerHeight)&&(h.set(qo(d.innerWidth,d.innerHeight)),qA(t))},A=()=>{const W=t.getDoc().documentElement,Y=w.get();(Y.left!==W.offsetWidth||Y.top!==W.offsetHeight)&&(w.set(qo(W.offsetWidth,W.offsetHeight)),qA(t))},M=W=>{GA(t,W)};i.bind(d,"resize",x),i.bind(d,"scroll",M);const L=X0(ct.fromDom(t.getBody()),"load",A);t.on("hide",()=>{pt(a,W=>{vn(W.element,"display","none")})}),t.on("show",()=>{pt(a,W=>{Zn(W.element,"display")})}),t.on("NodeChange",A),t.on("remove",()=>{L.unbind(),i.unbind(d,"resize",x),i.unbind(d,"scroll",M),d=null})},uj=(t,s,a)=>{ph(t)&&Na(a.mainUi.mothership.element,a.popupUi.mothership),ja(s,a.dialogUi.mothership)};var dj=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=s,w=Wt(0),x=g.outerContainer;TZ(t);const A=ct.fromDom(d.targetNode),M=fr(Ys(A));Na(A,g.mothership),uj(t,M,s),t.on("PostRender",()=>{fs.setSidebar(x,a.sidebar,TN(t))}),t.on("SkinLoaded",()=>{IL(t,s,a,i),w.set(t.getWin().innerWidth),fs.setMenubar(x,tL(t,a)),fs.setViews(x,a.views),lj(t,s)});const L=fs.getSocket(x).getOrDie("Could not find expected socket element");if(ij){jr(L.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const oe=XT(()=>{t.dispatch("ScrollContent")},20),ye=Uc(L.element,"scroll",oe.throttle);t.on("remove",ye.unbind)}$A(t,s),t.addCommand("ToggleSidebar",(oe,ye)=>{fs.toggleSidebar(x,ye),bz(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var oe;return(oe=fs.whichSidebar(x))!==null&&oe!==void 0?oe:""}),t.addCommand("ToggleView",(oe,ye)=>{if(fs.toggleView(x,ye)){const ie=x.element;g.mothership.broadcastOn([ig()],{target:ie}),pt(h,we=>{we.broadcastOn([ig()],{target:ie})}),ut(fs.whichView(x))&&(t.focus(),t.nodeChanged(),fs.refreshToolbar(x)),vz(t)}}),t.addQueryValueHandler("ToggleView",()=>{var oe;return(oe=fs.whichView(x))!==null&&oe!==void 0?oe:""});const W=Lv(t),Y=()=>{fs.refreshToolbar(s.mainUi.outerContainer)};(W===wu.sliding||W===wu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const oe=t.getWin().innerWidth;oe!==w.get()&&(Y(),w.set(oe))});const ne={setEnabled:oe=>{Wv(s,oe?"setEnabled":"setDisabled")},isEnabled:()=>!Ft.isDisabled(x)};return{iframeContainer:L.element.dom,editorContainer:x.element.dom,api:ne}}});const HL=t=>/^[0-9\.]+(|px)$/i.test(""+t)?D.some(parseInt(""+t,10)):D.none(),H_=t=>On(t)?t+"px":t,Ww=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},mj=t=>{const s=D3(t),a=N3(t),i=Iv(t);return HL(s).map(d=>Ww(d,a,i))},fj=t=>mj(t).getOr(D3(t)),zL=t=>{const s=M3(t),a=CC(t),i=jp(t);return HL(s).map(d=>Ww(d,a,i))},gj=t=>zL(t).getOr(M3(t)),{ToolbarLocation:OD,ToolbarMode:VL}=Q7,UL=40,hj=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=a,w=vC.DOM,x=dm(t),A=qp(t),M=jp(t).or(zL(t)),L=i.shared.header,W=L.isPositionedAtTop,Y=150,ne=Lv(t),oe=ne===VL.sliding||ne===VL.floating,ye=Wt(!1),ie=()=>ye.get()&&!t.removed,we=jt=>oe?jt.fold(ae(0),st=>st.components().length>1?sr(st.components()[1].element):0):0,ve=jt=>{switch(FE(t)){case OD.auto:const st=fs.getToolbar(g.outerContainer),At=we(st),pn=sr(jt.element)-At,Pn=Xs(s);if(Pn.y>pn)return"top";{const _n=Xc(s),Fo=Math.max(_n.dom.scrollHeight,sr(_n));return Pn.bottom<Fo-pn||hr().bottom<Pn.bottom-pn?"bottom":"top"}case OD.bottom:return"bottom";case OD.top:default:return"top"}},Re=jt=>{d.on(st=>{ys.setModes(st,[jt]),L.setDockingMode(jt);const At=W()?sm.TopToBottom:sm.BottomToTop;je(st.element,tv,At)})},Ne=()=>{d.on(jt=>{const st=M.getOrThunk(()=>ji().width-La(s).left-10);vn(jt.element,"max-width",st+"px")})},xt=(jt,st)=>{d.on(At=>{const pn=fs.getToolbar(g.outerContainer),Pn=we(pn),nn=Xs(s),_n=ot(t,g.outerContainer.element),Fo=()=>_n.fold(()=>nn.x,Dc=>{const Mu=Xs(Dc);return Xn(Dc,be())?nn.x:nn.x-Mu.x}),Do=()=>_n.fold(()=>W()?Math.max(nn.y-sr(At.element)+Pn,0):nn.bottom,Dc=>{var Mu;const Nu=Xs(Dc),Sm=(Mu=Dc.dom.scrollTop)!==null&&Mu!==void 0?Mu:0,xg=Xn(Dc,be())?Math.max(nn.y-sr(At.element)+Pn,0):nn.y-Nu.y+Sm-sr(At.element)+Pn;return W()?xg:nn.bottom}),fl=Fo(),Us=an(jt,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Dc=>Dc>Y).map(Dc=>{const Mu=st.getOr(Ta()),Nu=window.innerWidth-(fl-Mu.left),Sm=Math.max(Math.min(Dc,Nu),Y);return Nu<Dc&&vn(g.outerContainer.element,"width",Sm+"px"),{width:Sm+"px"}}).getOr({width:"max-content"}),Du={position:"absolute",left:Math.round(fl)+"px",top:Do()+"px"};jr(g.outerContainer.element,{...Du,...Us})})},ot=(jt,st)=>ph(jt)?Ua(st):D.none(),$e=()=>{pt(h,jt=>{jt.broadcastOn([af()],{})})},Rt=()=>!x&&(qr(g.outerContainer.element).left+Wi(g.outerContainer.element)>=window.innerWidth-UL||$s(g.outerContainer.element,"width").isSome())?(vn(g.outerContainer.element,"position","absolute"),vn(g.outerContainer.element,"left","0px"),Zn(g.outerContainer.element,"width"),!0):!1,yt=jt=>{if(!ie())return;x||Ne();const st=Ta(),At=x?!1:Rt();if(oe&&fs.refreshToolbar(g.outerContainer),!x){const pn=Ta(),Pn=an(st.left!==pn.left,st);xt(At,Pn),Pn.each(nn=>{Ku(nn.left,pn.top)})}A&&d.on(jt),$e()},$t=()=>x||!A||!ie()?!1:d.get().exists(jt=>{const st=L.getDockingMode(),At=ve(jt);return At!==st?(Re(At),!0):!1});return{isVisible:ie,isPositionedAtTop:W,show:()=>{ye.set(!0),vn(g.outerContainer.element,"display","flex"),w.addClass(t.getBody(),"mce-edit-focus"),pt(h,jt=>{Zn(jt.element,"display")}),$t(),ph(t)?yt(jt=>ys.isDocked(jt)?ys.reset(jt):ys.refresh(jt)):yt(ys.refresh)},hide:()=>{ye.set(!1),vn(g.outerContainer.element,"display","none"),w.removeClass(t.getBody(),"mce-edit-focus"),pt(h,jt=>{vn(jt.element,"display","none")})},update:yt,updateMode:()=>{$t()&&yt(ys.reset)},repositionPopups:$e}},WL=(t,s)=>{const a=Xs(t);return{pos:s?a.y:a.bottom,bounds:a}},pj=(t,s,a,i)=>{const d=Wt(WL(s,a.isPositionedAtTop())),g=A=>{const{pos:M,bounds:L}=WL(s,a.isPositionedAtTop()),{pos:W,bounds:Y}=d.get(),ne=L.height!==Y.height||L.width!==Y.width;d.set({pos:M,bounds:L}),ne&&qA(t,A),a.isVisible()&&(W!==M?a.update(ys.reset):ne&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(ys.reset)),t.on("NodeChange keydown",A=>{requestAnimationFrame(()=>g(A))});let h=0;const w=QO(()=>a.update(ys.refresh),33);t.on("ScrollWindow",()=>{const A=Ta().left;A!==h&&(h=A,w.throttle()),a.updateMode()}),ph(t)&&t.on("ElementScroll",A=>{a.update(ys.refresh)});const x=bc();x.set(X0(ct.fromDom(t.getBody()),"load",A=>g(A.raw))),t.on("remove",()=>{x.clear()})};var ZL=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g}=s,h=go(),w=ct.fromDom(d.targetNode),x=hj(t,w,s,i,h),A=pN(t);aL(t);const M=()=>{if(h.isSet()){x.show();return}h.set(fs.getHeader(g.outerContainer).getOrDie());const W=Z3(t);ph(t)?(Na(w,g.mothership),Na(w,s.popupUi.mothership)):ja(W,g.mothership),ja(W,s.dialogUi.mothership);const Y=()=>{IL(t,s,a,i),fs.setMenubar(g.outerContainer,tL(t,a)),x.show(),pj(t,w,x,A),t.nodeChanged()};A?t.once("SkinLoaded",Y):Y()};t.on("show",M),t.on("hide",x.hide),A||(t.on("focus",M),t.on("blur",x.hide)),t.on("init",()=>{(t.hasFocus()||A)&&M()}),$A(t,s);const L={show:M,hide:x.hide,setEnabled:W=>{Wv(s,W?"setEnabled":"setDisabled")},isEnabled:()=>!Ft.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:L}}});const bj=()=>{const t=go(),s=go(),a=go();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(w=>w.mothership),h=s.get().map(w=>w.mothership);return g.fold(()=>h.toArray(),w=>h.fold(()=>[w],x=>Xn(w.element,x.element)?[w]:[w,x]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(w=>h(w.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},z_="contexttoolbar-show",Zw="contexttoolbar-hide",jL=".tox-toolbar-slider__input,.tox-toolbar-textfield",RD=t=>{Ps.getContent(t).each(s=>{ho(s.element,jL).fold(()=>Gt.focusIn(s),xc)})},vj=t=>Ec(t.element).each(s=>{tm(s,'[tabindex="-1"]').each(a=>{xc(a)})}),qL=Mt("forward-slide"),DD=Mt("backward-slide"),MD=Mt("change-slide-event"),fy="tox-pop--resizing",GL=t=>{const s=Wt([]);return Ps.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),Ps.getContent(a).each(i=>{Zn(i.element,"visibility")}),Qs(a.element,fy),Zn(a.element,"width")},onHide:()=>{t.onHide()},inlineBehaviours:at([Sn("context-toolbar-events",[Xd(Qh(),(a,i)=>{i.event.raw.propertyName==="width"&&(Qs(a.element,fy),Zn(a.element,"width"))}),ze(MD,(a,i)=>{const d=a.element;Zn(d,"width");const g=Rn(d);Zn(d,"left"),Zn(d,"right"),Zn(d,"max-width"),Ps.setContent(a,i.event.contents),Ks(d,fy);const h=Rn(d);vn(d,"transition","none"),Ps.reposition(a),Zn(d,"transition"),vn(d,"width",g+"px"),i.event.focus.fold(()=>RD(a),w=>{xc(w),Ec(d).isNone()&&RD(a)}),setTimeout(()=>{vn(a.element,"width",h+"px")},0)}),ze(qL,(a,i)=>{Ps.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Bl(Ys(a.element))}]))}),Kt(a,MD,{contents:i.event.forwardContents,focus:D.none()})}),ze(DD,(a,i)=>{t.onBack(),Zl(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),Kt(a,MD,{contents:Ai(d.bar),focus:d.focus})})})]),Gt.config({mode:"special",onEscape:a=>Zl(s.get()).fold(()=>t.onEscape(),i=>(Un(a,DD),D.some(!0)))})]),lazySink:()=>Tn.value(t.sink)})},Qb=(t,s,a)=>({setInputEnabled:i=>{!i&&a&&xc(a),Ft.set(t,!i)},isInputEnabled:()=>!Ft.isDisabled(t),hide:()=>{Un(t,Yd())},back:()=>{Un(t,DD)},getValue:()=>s.get().getOrThunk(()=>Dt.getValue(t)),setValue:i=>{t.getSystem().isConnected()?Dt.setValue(t,i):s.set(i)}}),ND=(t,s,a)=>ze(r$,(i,d)=>{const g=t.get(i),h=Qb(g,a,i.element);s.onAction(h,d.event.buttonApi)}),KL=(t,s,a,i)=>{const{primary:d,...g}=s.original,h=rt(TP({...g,type:"button",onAction:le}));return ML(h,a,[ND(t,s,i)])},yj=(t,s,a,i)=>{const{primary:d,...g}=s.original,h=rt(_P({...g,type:"togglebutton",onAction:le}));return AD(h,a,[ND(t,s,i)])},YL=t=>t.type==="contextformtogglebutton",Cj=(t,s,a,i)=>YL(s)?yj(t,s,a,i):KL(t,s,a,i),XL=(t,s,a,i)=>{const d=Ge(s,w=>po(Cj(t,w,a,i)));return{asSpecs:()=>Ge(d,w=>w.asSpec()),findPrimary:w=>ks(s,(x,A)=>x.primary?D.from(d[A]).bind(M=>M.getOpt(w)).filter(We(Ft.isDisabled)):D.none())}},wj=(t,s,a,i)=>{const{width:d,height:g}=t.initValue();let h=s_;const w=Mt("ratio-event"),x=ot=>Qb(ot,i),A=ot=>Su(ot,{tag:"span",classes:["tox-icon","tox-lock-icon__"+ot]},s.icons),M=()=>!1,L=t.label.getOr("Constrain proportions"),W=s.translate(L),Y=lr.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":W,"data-mce-name":L}},components:[A("lock"),A("unlock")],buttonBehaviours:at([Ft.config({disabled:M}),as.config({}),Hs.config(s.tooltips.getConfig({tooltipText:W}))])}),ne=ot=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:ot}),oe=ot=>tm(ot.element,"div.tox-focusable-wrapper").fold(D.none,Rt=>(xc(Rt),D.some(!0))),ye=ot=>qn.parts.field({factory:bh,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:ot?d:g,inputBehaviours:at([Ft.config({disabled:M}),as.config({}),Sn("size-input-toolbar-events",[ze(iu(),($e,Rt)=>{Kt($e,w,{isField1:ot})})]),Gt.config({mode:"special",onEnter:a,onEscape:oe})]),selectOnFocus:!1}),ie=ot=>({dom:{tag:"label",classes:["tox-label"]},components:[xs(s.translate(ot))]}),we=ot=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[ot],behaviours:at([as.config({}),dn.config({}),Gt.config({mode:"special",onEnter:$e=>ho($e.element,"input").fold(D.none,yt=>(xc(yt),D.some(!0)))})])}),ve=we(lr.parts.field1(ne([qn.parts.label(ie("Width:")),ye(!0)]))),Re=we(lr.parts.field2(ne([qn.parts.label(ie("Height:")),ye(!1)]))),Ne=Wt(le),xt=[pf({onSetup:t.onSetup,getApi:x},Ne),xu({getApi:x},Ne,i)];return lr.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[ve,Re,ne([ie(Sp),Y])],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(ot,$e,Rt)=>{o_(Dt.getValue(ot)).each(yt=>{h(yt).each($t=>{Dt.setValue($e,h$($t))})})},onInput:ot=>Un(ot,YB),coupledFieldBehaviours:at([dn.config({}),Gt.config({mode:"flow",focusInside:Ka.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),Ft.config({disabled:M,onDisabled:ot=>{lr.getField1(ot).bind(qn.getField).each(Ft.disable),lr.getField2(ot).bind(qn.getField).each(Ft.disable),lr.getLock(ot).each(Ft.disable)},onEnabled:ot=>{lr.getField1(ot).bind(qn.getField).each(Ft.enable),lr.getField2(ot).bind(qn.getField).each(Ft.enable),lr.getLock(ot).each(Ft.enable)}}),yr(()=>s.checkUiComponentContext("mode:design")),Sn("size-input-toolbar-events2",[ze(w,(ot,$e)=>{const Rt=$e.event.isField1,yt=Rt?lr.getField1(ot):lr.getField2(ot),$t=Rt?lr.getField2(ot):lr.getField1(ot),Hn=yt.map(Dt.getValue).getOr(""),Yo=$t.map(Dt.getValue).getOr("");h=gR(Hn,Yo)}),ze(YB,ot=>t.onInput(x(ot))),...xt])])})},JL=(t,s,a)=>qn.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:at([Ft.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:i=>{vj(i),qn.getField(i).each(Ft.disable)},onEnabled:i=>{qn.getField(i).each(Ft.enable)}})])}),Sj=(t,s,a,i)=>{const d=Wt(le),g=x=>Qb(x,i),h=t.label.map(x=>qn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[xs(s.translate(x))]})),w=qn.parts.field({factory:bh,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:x=>gc(x).getOr(t.min()),toInputValue:x=>String(x),inputBehaviours:at([Ft.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),yr(()=>s.checkUiComponentContext("mode:design")),Gt.config({mode:"special",onEnter:a,onLeft:(x,A)=>(A.cut(),D.none()),onRight:(x,A)=>(A.cut(),D.none())}),Sn("slider-events",[pf({onSetup:t.onSetup,getApi:g,onBeforeSetup:Gt.focusIn},d),xu({getApi:g},d,i),ze(qd(),x=>{t.onInput(g(x))})])])});return JL(h,w,s)},jw=(t,s,a,i)=>{const d=Wt(le),g=M=>Qb(M,i),h=t.label.map(M=>qn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[xs(s.translate(M))]})),x={...t.placeholder.map(M=>({placeholder:s.translate(M)})).getOr({})},A=qn.parts.field({factory:bh,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:x,data:t.initValue(),selectOnFocus:!0,inputBehaviours:at([Ft.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),yr(()=>s.checkUiComponentContext("mode:design")),Gt.config({mode:"special",onEnter:a,onLeft:(M,L)=>(L.cut(),D.none()),onRight:(M,L)=>(L.cut(),D.none())}),Sn("input-events",[pf({onSetup:t.onSetup,getApi:M=>tm(M.element,".tox-toolbar").bind(W=>ho(W,"button:enabled")).fold(()=>Qb(M,i),W=>Qb(M,i,W)),onBeforeSetup:Gt.focusIn},d),xu({getApi:g},d,i),ze(qd(),M=>{t.onInput(g(M))})])])});return JL(h,A,s)},PD=(t,s,a)=>{const i=go(),g=po(t(a,A=>w.findPrimary(A).orThunk(()=>x.findPrimary(A)).map(M=>(Hc(M),!0)),i)),h=pl(s.commands,A=>A.align==="start"),w=XL(g,h.pass,a,i),x=XL(g,h.fail,a,i);return ko([{title:D.none(),label:D.none(),items:w.asSpecs()},{title:D.none(),label:D.none(),items:[g.asSpec()]},{title:D.none(),label:D.none(),items:x.asSpecs()}],A=>A.items.length>0)},QL=(t,s)=>{switch(t.type){case"contextform":return PD(Nn(jw,t),t,s);case"contextsliderform":return PD(Nn(Sj,t),t,s);case"contextsizeinputform":return PD(Nn(wj,t),t,s)}},e8={renderContextForm:(t,s,a)=>Fw({type:t,uid:Mt("context-toolbar"),initGroups:QL(s,a),onEscape:D.none,cyclicKeying:!0,providers:a}),buildInitGroups:QL},t8=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,n8=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Nm(ct.fromDom(t.startContainer),t.startOffset).element;return(dr(a)?$r(a):D.some(a)).filter(Rs).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},BD=t=>{const s=t.selection.getRng(),a=n8(s);if(t.inline){const i=Ta();return ws(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=pc(ct.fromDom(t.getBody()));return ws(i.x+a.left,i.y+a.top,a.width,a.height)}},xj=(t,s)=>s.filter(a=>ce(a)&&No(a)).map(pc).getOrThunk(()=>BD(t)),Ej=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},Tj=(t,s,a,i,d,g)=>{const h=ct.fromDom(t.getContainer()),w=ho(h,".tox-editor-header").getOr(h),x=Xs(w),A=x.y>=s.bottom,M=i&&!A;if(t.inline&&M)return{y:Math.max(x.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!M)return{y:a.y,bottom:Math.min(x.y-g,a.bottom)};const L=d==="line"?Xs(h):s;return M?{y:Math.max(x.bottom+g,a.y),bottom:Math.min(L.bottom-g,a.bottom)}:{y:Math.max(L.y+g,a.y),bottom:Math.min(x.y-g,a.bottom)}},o8=(t,s,a,i=0)=>{const d=ji(window),g=Xs(ct.fromDom(t.getContentAreaContainer())),h=WE(t)||ZE(t)||SC(t),{x:w,width:x}=Ej(g,d,i);if(t.inline&&!h)return ws(w,d.y,x,d.height);{const A=s.header.isPositionedAtTop(),{y:M,bottom:L}=Tj(t,g,d,A,a,i);return ws(w,M,x,L-M)}},r1=12,$D={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},s8={maxHeightFunction:eh(),maxWidthFunction:RI()},_j=(t,s)=>{const a=t.selection.getRng(),i=Nm(ct.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Xn(i.element,s)},r8=(t,s,a)=>{const i=$s(t,"position");vn(t,"position",s);const d=a(t);return i.each(g=>vn(t,"position",g)),d},V_=t=>t==="node",a8=(t,s,a,i,d)=>{const g=BD(t),h=i.lastElement().exists(w=>Xn(a,w));if(_j(t,a))return h?Z$:ku;if(h)return r8(s,i.getMode(),()=>t8(g,Xs(s),-20)&&!i.isReposition()?NU:Z$);{const w=i.getMode()==="fixed"?d.y+Ta().top:d.y,x=sr(s)+r1;return w+x<=g.y?ku:Ew}},c8=(t,s,a,i)=>{const d=x=>(A,M,L,W,Y)=>{const ne=a8(t,W,x,a,Y),oe={...A,y:Y.y,height:Y.height};return{...ne(oe,M,L,W,Y),alwaysFit:!0}},g=x=>V_(i)?[d(x)]:[];return s?{onLtr:x=>[Hr,br,Mr,Ma,vr,Xr].concat(g(x)),onRtl:x=>[Hr,Mr,br,vr,Ma,Xr].concat(g(x))}:{onLtr:x=>[Xr,Hr,Ma,br,vr,Mr].concat(g(x)),onRtl:x=>[Xr,Hr,vr,Mr,Ma,br].concat(g(x))}},kj=(t,s,a,i)=>s==="line"?{bubble:Wc(r1,0,$D),layouts:{onLtr:()=>[a2],onRtl:()=>[G1]},overrides:s8}:{bubble:Wc(0,r1,$D,1/r1),layouts:c8(t,a,i,s),overrides:s8},a1=(t,s)=>{const a=ko(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=pl(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},U_=t=>{if(t.length<=1)return t;{const s=g=>wr(t,h=>h.position===g),a=g=>ko(t,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),h=Ge(a("selection"),w=>({...w,position:"node"}));return g.concat(h)}else return a(i?"selection":"node");else return a("line")}},W_=t=>{if(t.length<=1)return t;{const s=i=>gn(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>ko(t,d=>d.position===i))}},ID=(t,s,a)=>{const i=a1(t,s);if(i.contextForms.length>0)return D.some({elem:t,toolbars:[i.contextForms[0]]});{const d=a1(t,a);if(d.contextForms.length>0)return D.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=U_(i.contextToolbars.concat(d.contextToolbars));return D.some({elem:t,toolbars:g})}else return D.none()}},LD=(t,s,a)=>t(s)?D.none():Lc(s,i=>{if(Rs(i)){const{contextToolbars:d,contextForms:g}=a1(i,a.inNodeScope),h=g.length>0?g:W_(d);return h.length>0?D.some({elem:i,toolbars:h}):D.none()}else return D.none()},t),i8=(t,s)=>{const a=ct.fromDom(s.getBody()),i=h=>Xn(h,a),d=h=>!i(h)&&!Hi(a,h),g=ct.fromDom(s.selection.getNode());return d(g)?D.none():ID(g,t.inNodeScope,t.inEditorScope).orThunk(()=>LD(i,g,t))},Z_=(t,s)=>{const a={},i=[],d=[],g={},h={},w=(M,L)=>{const W=rt(ms(L));a[M]=W,W.launch.map(Y=>{g["form:"+M]={...L.launch,type:Y.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(W)}}}),W.scope==="editor"?d.push(W):i.push(W),h[M]=W},x=(M,L)=>{AP(L).each(W=>{L.scope==="editor"?d.push(W):i.push(W),h[M]=W})},A=Uo(t);return pt(A,M=>{const L=t[M];L.type==="contextform"||L.type==="contextsliderform"||L.type==="contextsizeinputform"?w(M,L):L.type==="contexttoolbar"&&x(M,L)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},j_="tox-pop--transition",l8=(t,s,a,i)=>{const d=i.backstage,g=d.shared,h=Ts().deviceType.isTouch,w=go(),x=go(),A=go(),M=ic(GL({sink:a,onEscape:()=>(t.focus(),rB(t),D.some(!0)),onHide:()=>{rB(t)},onBack:()=>{yz(t)}})),L=()=>{const yt=A.get().getOr("node"),$t=V_(yt)?1:0;return o8(t,g,yt,$t)},W=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),Y=yt=>Wr(mc(yt,w.get(),Xn),!0),ne=()=>{if(W()){const yt=L(),$t=Wr(A.get(),"node")?xj(t,w.get()):BD(t);return yt.height<=0||!t8($t,yt,.01)}else return!0},oe=()=>{w.clear(),x.clear(),A.clear(),Ps.hide(M)},ye=()=>{if(Ps.isOpen(M)){const yt=M.element;Zn(yt,"display"),ne()?vn(yt,"display","none"):(x.set(0),Ps.reposition(M))}},ie=yt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[yt],behaviours:at([Gt.config({mode:"acyclic"}),Sn("pop-dialog-wrap-events",[Bo($t=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Gt.focusIn($t))}),ed($t=>{t.shortcuts.remove("ctrl+F9")})])])}),we=Tl(()=>Z_(s,yt=>{const $t=Ne([yt]);Kt(M,qL,{forwardContents:ie($t)})})),ve=(yt,$t)=>F_(t,{buttons:yt,toolbar:$t.items,allowToolbarGroups:!1},i.backstage,D.some(["form:"])),Re=(yt,$t)=>e8.buildInitGroups(yt,$t),Ne=yt=>{const{buttons:$t}=t.ui.registry.getAll(),Hn=we(),Yo={...$t,...Hn.formNavigators},mo=Lv(t)===wu.scrolling?wu.scrolling:wu.default,jt=hn(Ge(yt,st=>st.type==="contexttoolbar"?ve(Yo,UC(st)):Re(st,g.providers)));return Fw({type:mo,uid:Mt("context-toolbar"),initGroups:jt,onEscape:D.none,cyclicKeying:!0,providers:g.providers})},xt=(yt,$t)=>{const Hn=yt==="node"?g.anchors.node($t):g.anchors.cursor(),Yo=kj(t,yt,h(),{lastElement:w.get,isReposition:()=>Wr(x.get(),0),getMode:()=>Za.getMode(a)});return ns(Hn,Yo)},ot=(yt,$t)=>{if(Rt.cancel(),!W())return;const Hn=Ne(yt),Yo=yt[0].position,mo=xt(Yo,$t);A.set(Yo),x.set(1);const jt=M.element;Zn(jt,"display"),Y($t)||(Qs(jt,j_),Za.reset(a,M)),Ps.showWithinBounds(M,ie(Hn),{anchor:mo,transition:{classes:[j_],mode:"placement"}},()=>D.some(L())),$t.fold(w.clear,w.set),ne()&&vn(jt,"display","none")};let $e=!1;const Rt=QO(()=>{if(!(!t.hasFocus()||t.removed||$e))if(cc(M.element,j_))Rt.throttle();else{const yt=we();i8(yt,t).fold(oe,$t=>{ot($t.toolbars,D.some($t.elem))})}},17);t.on("init",()=>{t.on("remove",oe),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",ye),t.on("click keyup focus SetContent",Rt.throttle),t.on(Zw,oe),t.on(z_,yt=>{const $t=we();bt($t.lookupTable,yt.toolbarKey).each(Hn=>{ot([Hn],an(yt.target!==t,yt.target)),RD(M)})}),t.on("focusout",yt=>{PE.setEditorTimeout(t,()=>{Ec(a.element).isNone()&&Ec(M.element).isNone()&&oe()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&oe()}),t.on("DisabledStateChange",yt=>{yt.state&&oe()}),t.on("ExecCommand",({command:yt})=>{yt.toLowerCase()==="toggleview"&&oe()}),t.on("AfterProgressState",yt=>{yt.state?oe():t.hasFocus()&&Rt.throttle()}),t.on("dragstart",()=>{$e=!0}),t.on("dragend drop",()=>{$e=!1}),t.on("NodeChange",yt=>{Ec(M.element).fold(Rt.throttle,le)})})},FD=t=>{pt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Mi(t,a.cmd),onSetup:KC(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:kc(t),onAction:Mi(t,"JustifyNone")})},u8=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=go();return Ge(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:w=>{const x=M=>{M&&(g.on(L=>L.setActive(!1)),g.set(w)),w.setActive(M)};x(Wr(d,s.hash(h)));const A=s.watcher(t,h,x);return()=>{g.clear(),A()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},d8=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:AN,hash:s=>$Z(s,["fixed","relative","empty"]).getOr(s),display:bn,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>D.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:kc(t),onMenuSetup:kc(t)}),Aj=t=>D.from(fN(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ae(a),hash:i=>Mn(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var h;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:i=>{const d=ct.fromDom(i.selection.getNode());return Wd(d,g=>D.some(g).filter(Rs).bind(h=>En(h,"lang").map(x=>{const A=En(h,"data-mce-lang").getOrUndefined();return{code:x,customCode:A,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=bc();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),Lb(d.clear,kc(t)(i))},onMenuSetup:kc(t)})),Oj=t=>{u8(t,d8(t)),Aj(t).each(s=>u8(t,s))},q_=(t,s)=>{OZ(t,s),s1(t,s),qZ(t,s),DZ(t,s),EL(t,s)},m8=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",Ut),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},Rj=t=>Fb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),Dj=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Rj(t),onAction:Mi(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:kc(t),onAction:Mi(t,"indent")})},Mj=t=>{Dj(t)},f8=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),Lb(()=>t.off("PastePlainTextToggle",i),kc(t)(a))},Nj=t=>{const s=Wt(EN(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:f8(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:f8(t,s)})},G_=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},g8=t=>{kh.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:KC(t,s.name),onAction:G_(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:KC(t,a),onAction:G_(t,a),shortcut:i})}},h8=t=>{kh.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Mi(t,s.action),shortcut:s.shortcut,context:s.context})}),kh.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:kc(t),onAction:Mi(t,s.action)})})},p8=t=>{kh.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Mi(t,s.action),onSetup:KC(t,s.name)})})},Pj=t=>{g8(t),h8(t),p8(t)},b8=t=>{kh.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Mi(t,s.action),context:s.context})}),kh.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:kc(t),onAction:Mi(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:kc(t),onAction:G_(t,"code")})},v8=t=>{Pj(t),b8(t)},K_=(t,s)=>Fb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),$Y=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:K_(t,"hasUndo"),onAction:Mi(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:K_(t,"hasRedo"),onAction:Mi(t,"redo")})},Bj=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:K_(t,"hasUndo"),onAction:Mi(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:K_(t,"hasRedo"),onAction:Mi(t,"redo"),shortcut:"Meta+Y"})},$j=t=>{$Y(t),Bj(t)},Ij=t=>Fb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),Lj=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:Ij(t),onAction:Mi(t,"mceToggleVisualAid"),context:"any"})},Fj=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Mi(t,"mceToggleVisualAid"),context:"any"})},Hj=t=>{Fj(t),Lj(t)},zj=(t,s)=>{FD(t),v8(t),q_(t,s),$j(t),Pz(t),Hj(t),Mj(t),Oj(t),Nj(t),m8(t)},Vj=t=>se(t)?t.split(/[ ,]/):t,y8=t=>s=>s.options.get(t),Uj=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:se(a)||Tt(a,se)?{value:Vj(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},C8=y8("contextmenu_never_use_native"),Wj=y8("contextmenu_avoid_overlap"),Zj=t=>HD(t).length===0,HD=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:ko(a,i=>Yn(s,i))},qw=(t,s)=>({type:"makeshift",x:t,y:s}),jj=(t,s,a)=>qw(t.x+s,t.y+a),w8=t=>t.type==="longpress"||t.type.indexOf("touch")===0,qj=t=>{if(w8(t)){const s=t.touches[0];return qw(s.pageX,s.pageY)}else return qw(t.pageX,t.pageY)},Gj=t=>{if(w8(t)){const s=t.touches[0];return qw(s.clientX,s.clientY)}else return qw(t.clientX,t.clientY)},Kj=(t,s)=>{const a=vC.DOM.getPos(t);return jj(s,a.x,a.y)},Yj=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?qj(s):Kj(t.getContentAreaContainer(),Gj(s)):S8(t),S8=t=>({type:"selection",root:ct.fromDom(t.selection.getNode())}),Xj=t=>({type:"node",node:D.some(ct.fromDom(t.selection.getNode())),root:ct.fromDom(t.getBody())}),Y_=(t,s,a)=>{switch(a){case"node":return Xj(t);case"point":return Yj(t,s);case"selection":return S8(t)}},Jj=(t,s,a,i,d,g)=>{const h=a(),w=Y_(t,s,g);ny(h,ud.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:D.none()}).map(x=>{s.preventDefault(),Ps.showMenuAt(d,{anchor:w},{menu:{markers:kb("normal")},data:x})})},Qj={onLtr:()=>[Hr,br,Mr,Ma,vr,Xr,ku,Ew,ba,IR,p_,xw],onRtl:()=>[Hr,Mr,br,vr,Ma,Xr,ku,Ew,p_,xw,ba,IR]},zD=12,x8={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},E8=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return rg(t.getWin(),sg.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},eq=t=>{const s=t.selection.getRng(),a=()=>{PE.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},tq=(t,s,a)=>{const i=Y_(t,s,a);return{bubble:Wc(0,a==="point"?zD:0,x8),layouts:Qj,overrides:{maxWidthFunction:RI(),maxHeightFunction:eh()},...i}},nq=(t,s,a,i,d,g,h)=>{const w=tq(t,s,g);ny(a,ud.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:D.none()}).map(x=>{s.preventDefault();const A=h?ha.HighlightMenuAndItem:ha.HighlightNone;Ps.showMenuWithinBounds(d,{anchor:w},{menu:{markers:kb("normal"),highlightOnOpen:A},data:x,type:"horizontal"},()=>D.some(o8(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(Zw)})},oq=(t,s,a,i,d,g)=>{const h=Ts(),w=h.os.isiOS(),x=h.os.isMacOS(),A=h.os.isAndroid(),M=h.deviceType.isTouch(),L=()=>!(A||w||x&&M),W=()=>{const Y=a();nq(t,s,Y,i,d,g,L())};if((x||w)&&g!=="node"){const Y=()=>{eq(t),W()};E8(t,s)?Y():(t.once("selectionchange",Y),t.once("touchend",()=>t.off("selectionchange",Y)))}else W()},T8=t=>se(t)?t==="|":t.type==="separator",Gw={type:"separator"},_8=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(se(t))return t;switch(t.type){case"separator":return Gw;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return se(i)?i:Ge(i,_8)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Ot(a.onAction)}}},VD=(t,s)=>{if(s.length===0)return t;const i=Zl(t).filter(d=>!T8(d)).fold(()=>[],d=>[Gw]);return t.concat(i).concat(s).concat([Gw])},sq=(t,s,a)=>{const i=Vo(s,(d,g)=>bt(t,g.toLowerCase()).map(h=>{const w=h.update(a);if(se(w)&&Tr(vi(w)))return VD(d,w.split(" "));if(Fe(w)&&w.length>0){const x=Ge(w,_8);return VD(d,x)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&T8(i[i.length-1])&&i.pop(),i},rq=(t,s)=>s.ctrlKey&&!C8(t),UD=t=>t.type==="longpress"||Yn(t,"touches"),k8=(t,s)=>!UD(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),WD=(t,s)=>k8(t,s)?t.selection.getStart(!0):s.target,aq=(t,s)=>{const a=Wj(t),i=k8(t,s)?"selection":"point";if(Tr(a)){const d=WD(t,s);return bf(ct.fromDom(d),a)?"node":i}else return i},cq=(t,s,a)=>{const d=Ts().deviceType.isTouch,g=ic(Ps.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:at([Sn("dismissContextMenu",[ze(Vf(),(x,A)=>{ro.close(x),t.focus()})])])})),h=()=>Ps.hide(g),w=x=>{if(C8(t)&&x.preventDefault(),rq(t,x)||Zj(t))return;const A=aq(t,x),M=()=>{const W=WD(t,x),Y=t.ui.registry.getAll(),ne=HD(t);return sq(Y.contextMenus,ne,W)};(d()?oq:Jj)(t,x,M,a,g,A)};t.on("init",()=>{const x="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(x,h),t.on("longpress contextmenu",w)})},Kw=he.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),X_=t=>s=>s.translate(-t.left,-t.top),J_=t=>s=>s.translate(t.left,t.top),Oh=t=>(s,a)=>Vo(t,(i,d)=>d(i),qo(s,a)),Q_=(t,s,a)=>t.fold(Oh([J_(a),X_(s)]),Oh([X_(s)]),Oh([])),gy=(t,s,a)=>t.fold(Oh([J_(a)]),Oh([]),Oh([J_(s)])),ZD=(t,s,a)=>t.fold(Oh([]),Oh([X_(a)]),Oh([J_(s),X_(a)])),iq=(t,s,a,i,d,g)=>{const h=gy(t,d,g),w=gy(s,d,g);return Math.abs(h.left-w.left)<=a&&Math.abs(h.top-w.top)<=i},lq=(t,s,a,i,d,g)=>{const h=gy(t,d,g),w=gy(s,d,g),x=Math.abs(h.left-w.left),A=Math.abs(h.top-w.top);return qo(x,A)},A8=(t,s,a)=>{const i=t.fold((d,g)=>({position:D.some("absolute"),left:D.some(d+"px"),top:D.some(g+"px")}),(d,g)=>({position:D.some("absolute"),left:D.some(d-a.left+"px"),top:D.some(g-a.top+"px")}),(d,g)=>({position:D.some("fixed"),left:D.some(d+"px"),top:D.some(g+"px")}));return{right:D.none(),bottom:D.none(),...i}},uq=(t,s,a)=>t.fold((i,d)=>e4(i+s,d+a),(i,d)=>c1(i+s,d+a),(i,d)=>e0(i+s,d+a)),jD=(t,s,a,i)=>{const d=(g,h)=>(w,x)=>{const A=g(s,a,i);return h(w.getOr(A.left),x.getOr(A.top))};return t.fold(d(ZD,e4),d(gy,c1),d(Q_,e0))},e4=Kw.offset,c1=Kw.absolute,e0=Kw.fixed,qD=(t,s)=>{const a=$n(t,s);return Mn(a)?NaN:parseInt(a,10)},dq=(t,s)=>{const a=t.element,i=qD(a,s.leftAttr),d=qD(a,s.topAttr);return isNaN(i)||isNaN(d)?D.none():D.some(qo(i,d))},O8=(t,s,a)=>{const i=t.element;je(i,s.leftAttr,a.left+"px"),je(i,s.topAttr,a.top+"px")},mq=(t,s)=>{const a=t.element;zn(a,s.leftAttr),zn(a,s.topAttr)},fq=(t,s,a,i)=>dq(t,s).fold(()=>a,d=>e0(d.left+i.left,d.top+i.top)),gq=(t,s,a,i,d,g)=>{const h=fq(t,s,a,i),w=s.mustSnap?hq(t,s,h,d,g):pq(t,s,h,d,g),x=Q_(h,d,g);return O8(t,s,x),w.fold(()=>({coord:e0(x.left,x.top),extra:D.none()}),A=>({coord:A.output,extra:A.extra}))},t0=(t,s)=>{mq(t,s)},GD=(t,s,a,i)=>ks(t,d=>{const g=d.sensor;return iq(s,g,d.range.left,d.range.top,a,i)?D.some({output:jD(d.output,s,a,i),extra:d.extra}):D.none()}),hq=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return GD(g,a,i,d).orThunk(()=>Vo(g,(x,A)=>{const M=A.sensor,L=lq(a,M,A.range.left,A.range.top,i,d);return x.deltas.fold(()=>({deltas:D.some(L),snap:D.some(A)}),W=>{const Y=(L.left+L.top)/2,ne=(W.left+W.top)/2;return Y<=ne?{deltas:D.some(L),snap:D.some(A)}:x})},{deltas:D.none(),snap:D.none()}).snap.map(x=>({output:jD(x.output,a,i,d),extra:x.extra})))},pq=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return GD(g,a,i,d)},bq=(t,s,a)=>({coord:jD(t.output,t.output,s,a),extra:t.extra});var R8=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Es(t.element),h=Ta(g),w=rp(d),x=bq(i,h,w),A=A8(x.coord,h,w);Pm(d,A)}}});const KD="data-initial-z-index",vq=t=>{$r(t.element).filter(Rs).each(s=>{En(s,KD).fold(()=>Zn(s,"z-index"),a=>vn(s,"z-index",a)),zn(s,KD)})},yq=t=>{$r(t.element).filter(Rs).each(s=>{$s(s,"z-index").each(a=>{je(s,KD,a)}),vn(s,"z-index",Qe(t.element,"z-index"))})},D8=(t,s)=>{t.getSystem().addToGui(s),yq(s)},Cq=t=>{vq(t),t.getSystem().removeFromGui(t)},M8=(t,s,a)=>t.getSystem().build(vf.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var wq=Oa("snaps",[Ze("getSnapPoints"),so("onSensor"),Ze("leftAttr"),Ze("topAttr"),Se("lazyViewport",hr),Se("mustSnap",!1)]);const YD=[Se("useFixed",fo),Ze("blockerClass"),Se("getTarget",bn),Se("onDrag",le),Se("repositionTarget",!0),Se("onDrop",le),Po("getBounds",hr),wq],Sq=t=>Ii($s(t,"left"),$s(t,"top"),$s(t,"position"),(s,a,i)=>(i==="fixed"?e0:e4)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=qr(t);return c1(s.left,s.top)}),xq=(t,s,a,i,d)=>{const g=d.bounds,h=gy(s,a,i),w=Pl(h.left,g.x,g.x+g.width-d.width),x=Pl(h.top,g.y,g.y+g.height-d.height),A=c1(w,x);return s.fold(()=>{const M=ZD(A,a,i);return e4(M.left,M.top)},ae(A),()=>{const M=Q_(A,a,i);return e0(M.left,M.top)})},N8=(t,s,a,i,d,g,h)=>{const w=s.fold(()=>{const x=uq(a,g.left,g.top),A=Q_(x,i,d);return e0(A.left,A.top)},x=>{const A=gq(t,x,a,g,i,d);return A.extra.each(M=>{x.onSensor(t,M)}),A.coord});return xq(t,w,i,d,h)},P8=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Es(t.element),h=Ta(g),w=rp(d),x=Sq(d),A=N8(t,s.snaps,x,h,w,i,a),M=A8(A,h,w);Pm(d,M)}s.onDrag(t,d,i)},B8=(t,s)=>({bounds:t.getBounds(),height:zu(s.element),width:Wi(s.element)}),n0=(t,s,a,i,d)=>{const g=a.update(i,d),h=a.getStartData().getOrThunk(()=>B8(s,t));g.each(w=>{P8(t,s,h,w)})},$8=(t,s,a,i)=>{s.each(Cq),a.snaps.each(g=>{t0(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},XD=t=>(s,a)=>{const i=d=>{a.setStartData(B8(s,d))};return rs([ze(ky(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},JD=t=>rs([ze(Fc(),t.forceDrop),ze(jd(),t.drop),ze(Jh(),(s,a)=>{t.move(a.event)}),ze(Zd(),t.delayDrop)]);var Eq=Object.freeze({__proto__:null,getData:t=>D.from(qo(t.x,t.y)),getDelta:(t,s)=>qo(s.left-t.left,s.top-t.top)});const I8=(t,s,a)=>[ze(Fc(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>$8(i,D.some(A),t,s),w=FB(h,200),x={drop:h,delayDrop:w.schedule,forceDrop:h,move:L=>{w.cancel(),n0(i,t,s,Eq,L)}},A=M8(i,t.blockerClass,JD(x));(()=>{a(i),D8(i,A)})()})],Tq=[...YD,us("dragger",{handlers:XD(I8)})],_q=t=>rs([ze(jn(),t.forceDrop),ze(pr(),t.drop),ze(_i(),t.drop),ze(ls(),(s,a)=>{t.move(a.event)})]),kq=t=>{const s=t[0];return D.some(qo(s.clientX,s.clientY))};var L8=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?kq(a):D.none()},getDelta:(t,s)=>qo(s.left-t.left,s.top-t.top)});const F8=(t,s,a)=>{const i=go(),d=g=>{$8(g,i.get(),t,s),i.clear()};return[ze(jn(),(g,h)=>{h.stop();const w=()=>d(g),x={drop:w,delayDrop:le,forceDrop:w,move:L=>{n0(g,t,s,L8,L)}},A=M8(g,t.blockerClass,_q(x));i.set(A),(()=>{a(g),D8(g,A)})()}),ze(ls(),(g,h)=>{h.stop(),n0(g,t,s,L8,h.event)}),ze(pr(),(g,h)=>{h.stop(),d(g)}),ze(_i(),d)]},Aq=[...YD,us("dragger",{handlers:XD(F8)})],Oq=(t,s,a)=>[...I8(t,s,a),...F8(t,s,a)],Rq=[...YD,us("dragger",{handlers:XD(Oq)})];var t4=Object.freeze({__proto__:null,mouse:Tq,touch:Aq,mouseOrTouch:Rq}),Dq=Object.freeze({__proto__:null,init:()=>{let t=D.none(),s=D.none();const a=()=>{t=D.none(),s=D.none()},i=(x,A)=>{const M=t.map(L=>x.getDelta(L,A));return t=D.some(A),M},d=(x,A)=>x.getData(A).bind(M=>i(x,M)),g=x=>{s=D.some(x)},h=()=>s,w=ae({});return el({readState:w,reset:a,update:d,getStartData:h,setStartData:g})}});const o0=vS({branchKey:"mode",branches:t4,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:D.from(t.extra)})},state:Dq,apis:R8}),QD=40,n4=QD/2,H8=(t,s,a,i,d,g)=>t.fold(()=>o0.snap({sensor:c1(a-n4,i-n4),range:qo(d,g),output:c1(D.some(a),D.some(i)),extra:{td:s}}),h=>{const w=a-n4,x=i-n4,A=QD,M=QD,L=h.element.dom.getBoundingClientRect();return o0.snap({sensor:c1(w,x),range:qo(A,M),output:c1(D.some(a-L.width/2),D.some(i-L.height/2)),extra:{td:s}})}),eM=(t,s,a)=>{const i=(d,g)=>d.exists(h=>Xn(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},z8=t=>po(na.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:at([o0.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Ni.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),Mq=(t,s)=>{const a=Wt([]),i=Wt([]),d=Wt(!1),g=go(),h=go(),w=ot=>{const $e=pc(ot);return H8(Y.getOpt(s),ot,$e.x,$e.y,$e.width,$e.height)},x=()=>Ge(a.get(),ot=>w(ot)),A=ot=>{const $e=pc(ot);return H8(ne.getOpt(s),ot,$e.right,$e.bottom,$e.width,$e.height)},M=()=>Ge(i.get(),ot=>A(ot)),L=eM(x,g,ot=>{h.get().each($e=>{t.dispatch("TableSelectorChange",{start:ot,finish:$e})})}),W=eM(M,h,ot=>{g.get().each($e=>{t.dispatch("TableSelectorChange",{start:$e,finish:ot})})}),Y=z8(L),ne=z8(W),oe=ic(Y.asSpec()),ye=ic(ne.asSpec()),ie=(ot,$e,Rt,yt)=>{const $t=$e.dom.getBoundingClientRect();Zn(ot.element,"display");const Hn=zi(ct.fromDom(t.getBody())).dom.innerHeight,Yo=Rt($t),mo=yt($t,Hn);(Yo||mo)&&vn(ot.element,"display","none")},we=(ot,$e,Rt,yt)=>{const $t=Rt($e);o0.snapTo(ot,$t),ie(ot,$e,mo=>mo[yt]<0,(mo,jt)=>mo[yt]>jt)},ve=ot=>we(oe,ot,w,"top"),Re=()=>g.get().each(ve),Ne=ot=>we(ye,ot,A,"bottom"),xt=()=>h.get().each(Ne);if(Ts().deviceType.isTouch()){const ot=$e=>Ge($e,ct.fromDom);t.on("TableSelectionChange",$e=>{d.get()||(ah(s,oe),ah(s,ye),d.set(!0));const Rt=ct.fromDom($e.start),yt=ct.fromDom($e.finish);g.set(Rt),h.set(yt),D.from($e.otherCells).each($t=>{a.set(ot($t.upOrLeftCells)),i.set(ot($t.downOrRightCells)),ve(Rt),Ne(yt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Re(),xt()}),t.on("TableSelectionClear",()=>{d.get()&&(ad(oe),ad(ye),d.set(!1)),g.clear(),h.clear()})}};var Nq=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const Pq=(t,s)=>{const a=D.from($n(t,"id")).getOrThunk(()=>{const i=Mt("aria");return je(s,"id",i),i});je(t,"aria-describedby",a)},Bq=t=>{zn(t,"aria-describedby")},tM=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",V8=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"",g=(A,M,L)=>na.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":L}},components:[xs(A)],action:W=>{t.focus(),t.selection.select(M),t.nodeChanged()},buttonBehaviours:at([Hs.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",M.nodeName.toLowerCase()]),onShow:(W,Y)=>{Pq(W.element,Y.element)},onHide:W=>{Bq(W.element)}})}),fd.button(a.isDisabled),yr(()=>a.checkUiComponentContext("any"))])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[xs(` ${d} `)]}),w=A=>Vo(A,(M,L,W)=>{const Y=g(L.name,L.element,W);return W===0?M.concat([Y]):M.concat([h(),Y])},[]),x=A=>{const M=[];let L=A.length;for(;L-- >0;){const W=A[L];if(W.nodeType===1&&!tM(W)){const Y=uz(t,W);if(Y.isDefaultPrevented()||M.push({name:Y.name,element:W}),Y.isPropagationStopped())break}}return M};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:at([Gt.config({mode:"flow",selector:"div[role=button]"}),Ft.config({disabled:a.isDisabled}),yr(()=>a.checkUiComponentContext("any")),as.config({}),Cn.config({}),Sn("elementPathEvents",[Bo((A,M)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Gt.focusIn(A)),t.on("NodeChange",L=>{const W=x(L.parents),Y=W.length>0?w(W):[];Cn.set(A,Y)})})])]),components:[]}};var i1;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(i1||(i1={}));const $q=(t,s,a,i,d)=>{const g={height:Ww(i+s.top,N3(t),Iv(t))};return a===i1.Both&&(g.width=Ww(d+s.left,CC(t),jp(t))),g},U8=(t,s,a)=>{const i=ct.fromDom(t.getContainer()),d=$q(t,s,a,sr(i),Rn(i));As(d,(g,h)=>{On(g)&&vn(i,h,H_(g))}),lz(t)},Iq=t=>{const s=xN(t);return s===!1?i1.None:s==="both"?i1.Both:i1.Vertical},o4=(t,s,a,i)=>{const g=qo(a*20,i*20);return U8(t,g,s),D.some(!0)},Lq=(t,s)=>{const a=Iq(t);if(a===i1.None)return D.none();const i=a===i1.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return D.some(Su("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle"},behaviours:[o0.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,h)=>U8(t,h,a),blockerClass:"tox-blocker"}),Gt.config({mode:"special",onLeft:()=>o4(t,a,-1,0),onRight:()=>o4(t,a,1,0),onUp:()=>o4(t,a,0,-1),onDown:()=>o4(t,a,0,1)}),as.config({}),dn.config({}),Hs.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},Fq=(t,s)=>{const a=(i,d,g)=>Cn.set(i,[xs(s.translate(["{0} "+g,d[g]]))]);return na.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:at([fd.button(s.isDisabled),yr(()=>s.checkUiComponentContext("any")),as.config({}),Cn.config({}),Dt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Sn("wordcount-events",[Qm(i=>{const d=Dt.getValue(i),g=d.mode==="words"?"characters":"words";Dt.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),Bo(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=Dt.getValue(i);Dt.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[ac()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},Hq=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",Nq.trim()])},behaviours:at([dn.config({})])}]}),i=()=>{const w=IA("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[xs(ld.translate(["Press {0} for help",w]))]}},d=()=>{const w=[];return t.hasPlugin("wordcount")&&w.push(Fq(t,s)),z3(t)&&w.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:w}},g=()=>{const w=[],x=UE(t),A=SN(t),M=z3(t)||t.hasPlugin("wordcount"),L=()=>{const W="tox-statusbar__text-container--flex-start",Y="tox-statusbar__text-container--flex-end",ne="tox-statusbar__text-container--space-around";if(x){const oe="tox-statusbar__text-container-3-cols";return!M&&!A?[oe,ne]:M&&!A?[oe,Y]:[oe,W]}return[M&&!A?Y:W]};return A&&w.push(V8(t,{},s)),x&&w.push(i()),M&&w.push(d()),w.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...L()]},components:w}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const w=g(),x=Lq(t,s);return w.concat(x.toArray())})()}},W8=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),zq=(t,s)=>{const a=t.inline,i=a?ZL:dj,d=qp(t)?pW:mI,g=bj(),h=go(),w=go(),x=go(),W=Ts().deviceType.isTouch()?["tox-platform-touch"]:[],Y=W3(t),ne=Lv(t),oe=po({dom:{tag:"div",classes:["tox-anchorbar"]}}),ye=po({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),ie=()=>g.mainUi.get().map(nn=>nn.outerContainer).bind(fs.getHeader),we=()=>Tn.fromOption(g.dialogUi.get().map(nn=>nn.sink),"UI has not been rendered"),ve=()=>Tn.fromOption(g.popupUi.get().map(nn=>nn.sink),"(popup) UI has not been rendered"),Re=g.lazyGetInOuterOrDie("anchor bar",oe.getOpt),Ne=g.lazyGetInOuterOrDie("bottom anchor bar",ye.getOpt),xt=g.lazyGetInOuterOrDie("toolbar",fs.getToolbar),ot=g.lazyGetInOuterOrDie("throbber",fs.getThrobber),$e=sW({popup:ve,dialog:we},t,Re,Ne),Rt=()=>{const nn={attributes:{[tv]:Y?sm.BottomToTop:sm.TopToBottom}},_n=fs.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:$e.popup,onEscape:()=>{t.focus()}}),Fo=fs.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:$e.popup.shared.getSink,providers:$e.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:xg=>{sB(t,xg)},type:ne,lazyToolbar:xt,lazyHeader:()=>ie().getOrDie("Could not find header element"),...nn}),Do=fs.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:$e.popup.shared.providers,onEscape:()=>{t.focus()},type:ne}),fl=SC(t),Us=ZE(t),Du=WE(t),Dc=V3(t),Mu=yt(),Nu=fl||Us||Du,Sm=()=>fl?[Do]:Us?[Fo]:[],eS=Dc?[Mu,_n]:[_n];return fs.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Nu?[]:["tox-editor-header--empty"]),...nn},components:hn([Du?eS:[],Sm(),dm(t)?[]:[oe.asSpec()]]),sticky:qp(t),editor:t,sharedBackstage:$e.popup.shared})},yt=()=>fs.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),$t=()=>{const nn=fs.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),_n=fs.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[nn,_n]}},Hn=()=>{const nn=Z3(t),_n=Xn(be(),nn)&&Qe(nn,"display")==="grid",Fo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(W),attributes:{...ld.isRtl()?{dir:"rtl"}:{}}},behaviours:at([Za.config({useFixed:()=>d.isDocked(ie)})])},Do={dom:{styles:{width:document.body.clientWidth+"px"}},events:rs([ze(ep(),Du=>{vn(Du.element,"width",document.body.clientWidth+"px")})])},fl=ic(ns(Fo,_n?Do:{})),Us=hO(fl);return w.set(Us),{sink:fl,mothership:Us}},Yo=()=>{const nn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(W),attributes:{...ld.isRtl()?{dir:"rtl"}:{}}},behaviours:at([Za.config({useFixed:()=>d.isDocked(ie),getBounds:()=>s.getPopupSinkBounds()})])},_n=ic(nn),Fo=hO(_n);return x.set(Fo),{sink:_n,mothership:Fo}},mo=()=>{const nn=Rt(),_n=$t(),Fo=fs.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:$e.popup}),Do=fs.parts.viewWrapper({backstage:$e.popup}),fl=VE(t)&&!a?D.some(Hq(t,$e.popup.shared.providers)):D.none(),Us=hn([Y?[]:[nn],a?[]:[_n],Y?[nn]:[]]),Du=fs.parts.editorContainer({components:hn([Us,a?[]:[ye.asSpec()]])}),Dc=j3(t),Mu={role:"application",...ld.isRtl()?{dir:"rtl"}:{},...Dc?{"aria-hidden":"true"}:{}},Nu=ic(fs.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(Y?["tox-tinymce--toolbar-bottom"]:[]).concat(W),styles:{visibility:"hidden",...Dc?{opacity:"0",border:"0"}:{}},attributes:Mu},components:[Du,...a?[]:[Do,...fl.toArray()],Fo],behaviours:at([yr(()=>$e.popup.shared.providers.checkUiComponentContext("any")),Ft.config({disableClass:"tox-tinymce--disabled"}),Gt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Sm=hO(Nu);return h.set(Sm),{mothership:Sm,outerContainer:Nu}},jt=nn=>{const _n=H_(fj(t)),Fo=H_(gj(t));return t.inline||(Is("div","width",Fo)&&vn(nn.element,"width",Fo),Is("div","height",_n)?vn(nn.element,"height",_n):vn(nn.element,"height","400px")),_n},st=nn=>{t.addShortcut("alt+F9","focus menubar",()=>{fs.focusMenubar(nn)}),t.addShortcut("alt+F10","focus toolbar",()=>{fs.focusToolbar(nn)}),t.addCommand("ToggleToolbarDrawer",(_n,Fo)=>{Fo!=null&&Fo.skipFocus?fs.toggleToolbarDrawerWithoutFocusing(nn):fs.toggleToolbarDrawer(nn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>fs.isToolbarDrawerToggled(nn))},At=nn=>{const{mainUi:_n,popupUi:Fo,uiMotherships:Do}=nn;To(LE(t),(i0,bM)=>{t.ui.registry.addGroupToolbarButton(bM,i0)});const{buttons:fl,menuItems:Us,contextToolbars:Du,sidebars:Dc,views:Mu}=t.ui.registry.getAll(),Nu=jE(t),Sm={menuItems:Us,menus:ON(t),menubar:bN(t),toolbar:Nu.getOrThunk(()=>HE(t)),allowToolbarGroups:ne===wu.floating,buttons:fl,sidebar:Dc,views:Mu};st(_n.outerContainer),rW(t,_n.mothership,Do),d.setup(t,$e.popup.shared,ie),zj(t,$e.popup),cq(t,$e.popup.shared.getSink,$e.popup),EI(t),LW(t,ot,$e.popup.shared),l8(t,Du,Fo.sink,{backstage:$e.popup}),Mq(t,Fo.sink);const eS=t.getElement(),xg=jt(_n.outerContainer),pM={targetNode:eS,height:xg};return i.render(t,nn,Sm,$e.popup,pM)},pn=nn=>(x.set(nn.mothership),nn),Pn=()=>{const nn=mo(),_n=Hn(),Fo=ph(t)?Yo():pn(_n);g.dialogUi.set(_n),g.popupUi.set(Fo),g.mainUi.set(nn);const Do={popupUi:Fo,dialogUi:_n,mainUi:nn,uiMotherships:g.getUiMotherships()};return At(Do)};return{popups:{backstage:$e.popup,getMothership:()=>W8("popups",x)},dialogs:{backstage:$e.dialog,getMothership:()=>W8("dialogs",w)},renderUI:Pn}},Vq=t=>t.dom.textContent,Uq=(t,s)=>{const a=En(t,"id").fold(()=>{const i=Mt("dialog-label");return je(s,"id",i),i},bn);je(t,"aria-labelledby",a)},Wq=ae([Ze("lazySink"),lo("dragBlockClass"),Po("getBounds",hr),Se("useTabstopAt",Ut),Se("firstTabstop",0),Se("eventOrder",{}),ga("modalBehaviours",[Gt]),Sc("onExecute"),zy("onEscape")]),nM={sketch:bn},Z8=ae([ii({name:"draghandle",overrides:(t,s)=>({behaviours:at([o0.config({mode:"mouse",getTarget:a=>tm(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),qa({schema:[Ze("dom")],name:"title"}),qa({factory:nM,schema:[Ze("dom")],name:"close"}),qa({factory:nM,schema:[Ze("dom")],name:"body"}),ii({factory:nM,schema:[Ze("dom")],name:"footer"}),Il({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Se("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Se("components",[])],name:"blocker"})]),Zq=(t,s,a,i)=>{const d=go(),g=ne=>{d.set(ne);const oe=t.lazySink(ne).getOrDie(),ye=i.blocker(),ie=oe.getSystem().build({...ye,components:ye.components.concat([Ai(ne)]),behaviours:at([dn.config({}),Sn("dialog-blocker-events",[Xd(iu(),()=>{vd.isBlocked(ne)?le():Gt.focusIn(ne)})])])});ah(oe,ie),Gt.focusIn(ne)},h=ne=>{d.clear(),$r(ne.element).each(oe=>{ne.getSystem().getByDom(oe).each(ye=>{ad(ye)})})},w=ne=>cd(ne,t,"body"),x=ne=>Go(ne,t,"footer"),A=(ne,oe)=>{vd.block(ne,oe)},M=ne=>{vd.unblock(ne)},L=Mt("modal-events"),W={...t.eventOrder,[uu()]:[L].concat(t.eventOrder["alloy.system.attached"]||[])},Y=Ts();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:w,getFooter:x,setIdle:M,setBusy:A},eventOrder:W,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:cr(t.modalBehaviours,[Cn.config({}),Gt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),vd.config({getRoot:d.get}),Sn(L,[Bo(ne=>{const oe=cd(ne,t,"title").element,ye=Vq(oe);Y.os.isMacOS()&&cn(ye)?je(ne.element,"aria-label",ye):Uq(ne.element,oe)})])])}},va=lc({name:"ModalDialog",configFields:Wq(),partFields:Z8(),factory:Zq,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),jq=mn([Nr,wA].concat(Pb)),qq=Ei,oM=[_A("button"),dd,Qi("align","end",["start","end"]),hT,fm,Kh("buttonType",["primary","secondary"]),ss("context","mode:design")],j8=[...oM,yh],sM=[Ji("type",["submit","cancel","custom"]),...j8],Gq=[Ji("type",["menu"]),Ch,FC,dd,Cc("items",jq),...oM],q8=[...oM,Ji("type",["togglebutton"]),FC,dd,Ch,Fs("active",!1)],G8=Or("type",{submit:sM,cancel:sM,custom:sM,menu:Gq,togglebutton:q8}),Kq=[Nr,yh,Ji("level",["info","warn","error","success"]),mT,Se("url","")],rM=mn(Kq),Yw=t=>[Nr,t],aM=[Nr,yh,fm,_A("button"),dd,PH,Kh("buttonType",["primary","secondary","toolbar"]),hT,ss("context","mode:design")],s4=mn(aM),ym=[Nr,wA],Ou=ym.concat([xA]),Yq=ym.concat([SA,fm,ss("context","mode:design")]),K8=mn(Yq),Y8=Ei,X8=Ou.concat([SP("auto"),ss("context","mode:design")]),Xq=mn(X8),Jq=qh([Vv,yh,mT]),Qq=Ou.concat([ss("storageKey","default"),ss("context","mode:design")]),J8=mn(Qq),Q8=_t,eG=mn(Ou),tG=_t,nG=ym.concat([ss("tag","textarea"),Gs("scriptId"),Gs("scriptUrl"),Ju("onFocus"),E("settings",void 0)]),oG=ym.concat([ss("tag","textarea"),Kr("init")]),Xw=Bg(t=>Ss("customeditor.old",Aa(oG),t).orThunk(()=>Ss("customeditor.new",Aa(nG),t))),sG=_t,rG=Ou.concat([ss("context","mode:design")]),tF=mn(rG),aG=Zm(),cG=t=>[Nr,x1("columns"),t],iG=[Nr,Gs("html"),Qi("presets","presentation",["presentation","document"]),Po("onInit",le),Fs("stretched",!1)],cM=mn(iG),iM=Ou.concat([Fs("border",!1),Fs("sandboxed",!0),Fs("streamContent",!1),Fs("transparent",!0)]),lG=mn(iM),nF=_t,uG=mn(ym.concat([Ms("height")])),dG=mn([Gs("url"),$g("zoom"),$g("cachedWidth"),$g("cachedHeight")]),oF=Ou.concat([Ms("inputMode"),Ms("placeholder"),Fs("maximized",!1),fm,ss("context","mode:design")]),mG=mn(oF),fG=_t,s0=t=>[Nr,SA,t,Qi("align","start",["start","center","end"]),Ms("for")],sF=[yh,Vv],gG=[yh,Cc("items",Hf("items",()=>Jw))],Jw=zd([mn(sF),mn(gG)]),hy=Ou.concat([Cc("items",Jw),fm,ss("context","mode:design")]),r4=mn(hy),rF=_t,a4=Ou.concat([g0("items",[yh,Vv]),Dr("size",1),fm,ss("context","mode:design")]),ul=mn(a4),c4=_t,aF=Ou.concat([Fs("constrain",!0),fm,ss("context","mode:design")]),cF=mn(aF),iF=mn([Gs("width"),Gs("height")]),hG=ym.concat([SA,Dr("min",0),Dr("max",0)]),l1=mn(hG),jY=Vd,pG=[Nr,Cc("header",_t),Cc("cells",xi(_t))],lF=mn(pG),py=Ou.concat([Ms("placeholder"),Fs("maximized",!1),fm,ss("context","mode:design")]),i4=mn(py),uF=_t,dF=[Ji("type",["directory","leaf"]),yP,Gs("id"),au("menu",Mw),Ms("customStateIcon"),Ms("customStateIconTooltip")],mF=mn(dF),bG=dF.concat([Cc("children",Hf("children",()=>Ud("type",{directory:r0,leaf:mF})))]),r0=mn(bG),GY=Ud("type",{directory:r0,leaf:mF}),vG=[Nr,Cc("items",GY),Ju("onLeafAction"),Ju("onToggleExpand"),R("defaultExpandedIds",[],_t),Ms("defaultSelectedId")],yG=mn(vG),KY=Ou.concat([Qi("filetype","file",["image","media","file"]),fm,Ms("picker_text"),ss("context","mode:design")]),CG=mn(KY),wG=mn([Vv,TA]),a0=t=>Rr("items","items",Si(),xi(Bg(s=>Ss(`Checking item of ${t}`,lM,s).fold(a=>Tn.error(Rl(a)),a=>Tn.value(a))))),lM=rr(()=>Ud("type",{alertbanner:rM,bar:mn(Yw(a0("bar"))),button:s4,checkbox:K8,colorinput:J8,colorpicker:eG,dropzone:tF,grid:mn(cG(a0("grid"))),iframe:lG,input:mG,listbox:r4,selectbox:ul,sizeinput:cF,slider:l1,textarea:i4,urlinput:CG,customeditor:Xw,htmlpanel:cM,imagepreview:uG,collection:Xq,label:mn(s0(a0("label"))),table:lF,tree:yG,panel:uM})),SG=[Nr,Se("classes",[]),Cc("items",lM)],uM=mn(SG),xG=[_A("tab"),yP,Cc("items",lM)],YY=[Nr,g0("tabs",xG)],e=mn(YY),n=j8,o=G8,r=mn([Gs("title"),io("body",Ud("type",{panel:uM,tabpanel:e})),ss("size","normal"),R("buttons",[],o),Se("initialData",{}),Po("onAction",le),Po("onChange",le),Po("onSubmit",le),Po("onClose",le),Po("onCancel",le),Po("onTabChange",le)]),c=t=>Ss("dialog",r,t),u=mn([Ji("type",["cancel","custom"]),...n]),f=mn([Gs("title"),Gs("url"),$g("height"),$g("width"),E1("buttons",u),Po("onAction",le),Po("onCancel",le),Po("onClose",le),Po("onMessage",le)]),v=t=>Ss("dialog",f,t),C=t=>Ee(t)?[t].concat(Te(Tm(t),C)):Fe(t)?Te(t,C):[],T=t=>se(t.type)&&se(t.name),B={checkbox:Y8,colorinput:Q8,colorpicker:tG,dropzone:aG,input:fG,iframe:nF,imagepreview:dG,selectbox:c4,sizeinput:iF,slider:jY,listbox:rF,size:iF,textarea:uF,urlinput:wG,customeditor:sG,collection:Jq,togglemenuitem:qq},I=t=>D.from(B[t.type]),H=t=>ko(C(t),T),G=t=>{const s=H(t),a=Te(s,i=>I(i).fold(()=>[],d=>[io(i.name,d)]));return mn(a)},ee=t=>{var s;const a=rt(c(t)),i=G(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},J={open:(t,s)=>{const a=ee(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=rt(v(s));return t(a)},redial:t=>ee(t)};var me=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const h=g(i,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?q5:h3)(i,h)})};return rs([ze(lu(),(i,d)=>{const g=d;if(!g.universal){const h=t.channel;zo(g.channels,h)&&a(i,g.data)}}),Bo((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),xe=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),Oe=[Ze("channel"),lo("renderComponents"),lo("updateState"),lo("initialData"),Fs("reuseDom",!0)],mt=Object.freeze({__proto__:null,init:()=>{const t=Wt(D.none()),s=()=>t.set(D.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Ct=ar({fields:Oe,name:"reflecting",active:me,apis:xe,state:mt}),He=t=>{const s=[],a={};return As(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Tn.error(s):Tn.value(a)},Be=(t,s,a,i)=>{const d=po(Wb.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ge(t.items,h=>V$(g,h,s,a,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:at([Gt.config({mode:"acyclic",useTabstopAt:We(fw)}),Rc.memento(d),Z6(d,{postprocess:g=>He(g).fold(h=>(console.error(h),{}),bn)}),Sn("dialog-body-panel",[ze(iu(),(g,h)=>{g.getSystem().broadcastOn([hw],{newFocus:D.some(h.event.target)})})])])}},Xe=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Bv(t.action),behaviours:cr(t.tabButtonBehaviours,[dn.config({}),Gt.config({mode:"execution",useSpace:!0,useEnter:!0}),Dt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Bt=li({name:"TabButton",configFields:[Se("uid",void 0),Ze("value"),Rr("dom","dom",_(()=>({attributes:{role:"tab",id:Mt("aria"),"aria-selected":"false"}})),Yi()),lo("action"),Se("domModification",{}),ga("tabButtonBehaviours",[dn,Gt,Dt]),Ze("view")],factory:Xe}),Yt=ae([Ze("tabs"),Ze("dom"),Se("clickToDismiss",!1),ga("tabbarBehaviours",[Q,Gt]),od(["tabClass","selectedClass"])]),Fn=gh({factory:Bt,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{Q.dehighlight(i,d),Kt(i,A1(),{tabbar:i,button:d})},a=(i,d)=>{Q.highlight(i,d),Kt(i,Uf(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=Q.isHighlighted(d,i);(g&&t.clickToDismiss?s:g?le:a)(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),Wn=ae([Fn]),yo=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:cr(t.tabbarBehaviours,[Q.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{je(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{je(g.element,"aria-selected","false")}}),Gt.config({mode:"flow",getInitial:d=>Q.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Ro=lc({name:"Tabbar",configFields:Yt(),partFields:Wn(),factory:yo}),Cr=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:cr(t.tabviewBehaviours,[Cn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Pa=li({name:"Tabview",configFields:[ga("tabviewBehaviours",[Cn])],factory:Cr}),Ba=ae([Se("selectFirst",!0),so("onChangeTab"),so("onDismissTab"),Se("tabs",[]),ga("tabSectionBehaviours",[])]),St=qa({factory:Ro,schema:[Ze("dom"),ru("markers",[Ze("tabClass"),Ze("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),Xt=qa({factory:Pa,name:"tabview"}),bo=ae([St,Xt]),It=(t,s,a,i)=>{const d=h=>{const w=Dt.getValue(h);Go(h,t,"tabview").each(x=>{gn(t.tabs,M=>M.value===w).each(M=>{const L=M.view();En(h.element,"id").each(W=>{je(x.element,"aria-labelledby",W)}),Cn.set(x,L),t.onChangeTab(x,h,L)})})},g=(h,w)=>{Go(h,t,"tabbar").each(x=>{w(x).each(Hc)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:bv(t.tabSectionBehaviours),events:rs(hn([t.selectFirst?[Bo((h,w)=>{g(h,Q.getFirst)})]:[],[ze(Uf(),(h,w)=>{const x=w.event.button;d(x)}),ze(A1(),(h,w)=>{const x=w.event.button;t.onDismissTab(h,x)})]])),apis:{getViewItems:h=>Go(h,t,"tabview").map(w=>Cn.contents(w)).getOr([]),showTab:(h,w)=>{g(h,A=>{const M=Q.getCandidates(A);return gn(M,W=>Dt.getValue(W)===w).filter(W=>!Q.isHighlighted(A,W))})}}}},Ye=lc({name:"TabSection",configFields:Ba(),partFields:bo(),factory:It,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),Nt=(t,s,a)=>Ge(t,(i,d)=>{Cn.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return Cn.set(a,[]),g.height}),yn=t=>Pr(bl(t,(s,a)=>s>a?-1:s<a?1:0)),Lo=(t,s,a)=>{const i=Xc(t).dom,d=tm(t,".tox-dialog-wrap").getOr(t),g=Qe(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const w=sr(s),A=s.dom.offsetLeft>=a.dom.offsetLeft+Rn(a)?Math.max(sr(a),w):w,M=parseInt(Qe(t,"margin-top"),10)||0,L=parseInt(Qe(t,"margin-bottom"),10)||0,Y=sr(t)+M+L-A;return h-Y},Jn=(t,s)=>{Pr(t).each(a=>Ye.showTab(s,a.value))},Ya=(t,s)=>{vn(t,"height",s+"px"),vn(t,"flex-basis",s+"px")},dl=(t,s,a)=>{tm(t,'[role="dialog"]').each(i=>{ho(i,'[role="tablist"]').each(d=>{a.get().map(g=>(vn(s,"height","0"),vn(s,"flex-basis","0"),Math.min(g,Lo(i,s,d)))).each(g=>{Ya(s,g)})})})},Cm=t=>ho(t,'[role="tabpanel"]'),$i=t=>{const s=go();return{extraEvents:[Bo(d=>{const g=d.element;Cm(g).each(h=>{vn(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(w=>{const x=Nt(t,h,w);yn(x).fold(s.clear,s.set)}),dl(g,h,s),Zn(h,"visibility"),Jn(t,d),requestAnimationFrame(()=>{dl(g,h,s)})})}),ze(ep(),d=>{const g=d.element;Cm(g).each(h=>{dl(g,h,s)})}),ze(JB,(d,g)=>{const h=d.element;Cm(h).each(w=>{const x=Bl(Ys(w));vn(w,"visibility","hidden");const A=$s(w,"height").map(W=>parseInt(W,10));Zn(w,"height"),Zn(w,"flex-basis");const M=w.dom.getBoundingClientRect().height;A.forall(W=>M>W)?(s.set(M),dl(h,w,s)):A.each(W=>{Ya(w,W)}),Zn(w,"visibility"),x.each(xc)})})],selectFirst:!1}},yd="send-data-to-section",Ul="send-data-to-view",di=(t,s,a,i)=>{const d=Wt({}),g=M=>{const L=Dt.getValue(M),W=He(L).getOr({}),Y=d.get(),ne=ns(Y,W);d.set(ne)},h=M=>{const L=d.get();Dt.setValue(M,L)},w=Wt(null),x=Ge(t.tabs,M=>({value:M.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[xs(a.shared.providers.translate(M.title))],view:()=>[Wb.sketch(L=>({dom:{tag:"div",classes:["tox-form"]},components:Ge(M.items,W=>V$(L,W,s,a,i)),formBehaviours:at([Gt.config({mode:"acyclic",useTabstopAt:We(fw)}),Sn("TabView.form.events",[Bo(h),ed(g)]),ai.config({channels:So([{key:yd,value:{onReceive:g}},{key:Ul,value:{onReceive:h}}])})])}))]})),A=$i(x);return Ye.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(M,L,W)=>{const Y=Dt.getValue(L);Kt(M,XB,{name:Y,oldName:w.get()}),w.set(Y)},tabs:x,components:[Ye.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Ro.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:at([as.config({})])}),Ye.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:A.selectFirst,tabSectionBehaviours:at([Sn("tabpanel",A.extraEvents),Gt.config({mode:"acyclic"}),eo.config({find:M=>Pr(Ye.getViewItems(M))}),e1(D.none(),M=>(M.getSystem().broadcastOn([yd],{}),d.get()),(M,L)=>{d.set(L),M.getSystem().broadcastOn([Ul],{})})])})},mi=(t,s,a,i,d,g)=>{const h=A=>{const M=A.body;switch(M.type){case"tabpanel":return[di(M,A.initialData,i,g)];default:return[Be(M,A.initialData,i,g)]}},w=(A,M)=>D.some({isTabPanel:()=>M.body.type==="tabpanel"}),x={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(A=>({id:A})).getOr({}),...d?x:{}}},components:[],behaviours:at([Rc.childAt(0),Ct.config({channel:`${e$}-${s}`,updateState:w,renderComponents:h,initialData:t})])}},Cd=(t,s,a,i,d,g)=>mi(t,s,D.some(a),i,d,g),u1=(t,s,a,i)=>{const d=mi(t,s,D.none(),a,!1,i);return va.parts.body(d)},tn=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[X6(D.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:at([as.config({}),dn.config({})])})]}],behaviours:at([Gt.config({mode:"acyclic",useTabstopAt:We(fw)})])};return va.parts.body(s)},ao=Zp.deviceType.isTouch(),er=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),ra=(t,s)=>va.parts.close(na.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:at([as.config({})])})),ya=()=>va.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Vr=(t,s)=>va.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:ff(`<p>${jN(s.translate(t))}</p>`)}]}]}),zs=t=>va.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Vs=(t,s)=>[vf.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),vf.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],qc=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return va.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),D.some(!0)),useTabstopAt:g=>!fw(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:ff(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:ao?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:at([dn.config({}),Sn("dialog-events",t.dialogEvents.concat([Xd(iu(),(g,h)=>{vd.isBlocked(g)?le():Gt.focusIn(g)}),ze(k1(),(g,h)=>{g.getSystem().broadcastOn([hw],{newFocus:h.event.newFocus})})])),Sn("scroll-lock",[Bo(()=>{Ks(be(),d)}),ed(()=>{Qs(be(),d)})]),...t.extraBehaviours]),eventOrder:{[ac()]:["dialog-events"],[uu()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[du()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},wd=t=>na.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:at([as.config({}),Hs.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Su("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Un(s,Eh)}}),xf=(t,s,a,i)=>{const d=g=>[xs(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:at([Ct.config({channel:`${Q6}-${s}`,initialData:t,renderComponents:d})])}},wm=()=>({dom:ff('<div class="tox-dialog__draghandle"></div>')}),by=(t,s,a,i)=>vf.sketch({dom:ff('<div class="tox-dialog__header"></div>'),components:[xf(t,s,D.some(a),i),wm(),wd(i)],containerBehaviours:at([o0.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>gu(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),vy=(t,s,a)=>{const i=va.parts.title(xf(t,s,D.none(),a)),d=va.parts.draghandle(wm()),g=va.parts.close(wd(a)),h=[i].concat(t.draggable?[d]:[]).concat([g]);return vf.sketch({dom:ff('<div class="tox-dialog__header"></div>'),components:h})},d1=(t,s,a)=>vy({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),Sd=(t,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:ff('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Rh=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=ho(t().element,".tox-dialog__header").map(g=>sr(g));va.setBusy(t(),(g,h)=>Sd(i.message,h,s,d))},onUnblock:()=>{va.setIdle(t())}}),yy="tox-dialog--fullscreen",m1="tox-dialog--width-lg",l4="tox-dialog--width-md",f1=t=>{switch(t){case"large":return D.some(m1);case"medium":return D.some(l4);default:return D.none()}},Cy=(t,s)=>{const a=ct.fromDom(s.element.dom);cc(a,yy)||(Ml(a,[m1,l4]),f1(t).each(i=>Ks(a,i)))},dM=(t,s)=>{const a=ct.fromDom(t.element.dom),i=M4(a),d=gn(i,g=>g===m1||g===l4).or(f1(s));tf(a,[yy,...d.toArray()])},c0=(t,s,a)=>ic(qc({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[Zb({}),...t.extraBehaviours],onEscape:i=>{Un(i,Eh)},dialogEvents:s,eventOrder:{[lu()]:[Ct.name(),ai.name()],[uu()]:["scroll-lock",Ct.name(),"messages","dialog-events","alloy.base.behaviour"],[du()]:["alloy.base.behaviour","dialog-events","messages",Ct.name(),"scroll-lock"]}})),wg=(t,s={})=>{const a=i=>{const d=Ge(i.items,g=>{const h=bt(s,g.name).getOr(Wt(!1));return{...g,storage:h}});return{...i,items:d}};return Ge(t,i=>i.type==="menu"?a(i):i)},Qw=t=>Vo(t,(s,a)=>a.type==="menu"?Vo(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),ke=(t,s)=>[O1(iu(),nR),t(sw,(a,i,d,g)=>{Jr(g.element)&&Bl(Ys(g.element)).each(om),s.onClose(),i.onClose()}),t(Eh,(a,i,d,g)=>{i.onCancel(a),Un(g,sw)}),ze(OT,(a,i)=>s.onUnblock()),ze(pO,(a,i)=>s.onBlock(i.event))],De=(t,s)=>{const a=(d,g)=>ze(d,(h,w)=>{i(h,(x,A)=>{g(t(),x,w.event,h)})}),i=(d,g)=>{Ct.getState(d).get().each(h=>{g(h,d)})};return[...ke(a,s),a(hg,(d,g,h)=>{g.onAction(d,{name:h.name})})]},wt=(t,s,a)=>{const i=(g,h)=>ze(g,(w,x)=>{d(w,(A,M)=>{h(t(),A,x.event,w)})}),d=(g,h)=>{Ct.getState(g).get().each(w=>{h(w.internalDialog,g)})};return[...ke(i,s),i(rw,(g,h)=>h.onSubmit(g)),i(cl,(g,h,w)=>{h.onChange(g,{name:w.name})}),i(hg,(g,h,w,x)=>{const A=()=>x.getSystem().isConnected()?Gt.focusIn(x):void 0,M=Y=>Zs(Y,"disabled")||En(Y,"aria-disabled").exists(ne=>ne==="true"),L=Ys(x.element),W=Bl(L);h.onAction(g,{name:w.name,value:w.value}),Bl(L).fold(A,Y=>{M(Y)||W.exists(ne=>Hi(Y,ne)&&M(ne))?A():a().toOptional().filter(ne=>!Hi(ne.element,Y)).each(A)})}),i(XB,(g,h,w)=>{h.onTabChange(g,{newTabName:w.name,oldTabName:w.oldName})}),ed(g=>{const h=t();Dt.setValue(g,h.getData())})]},ht=(t,s)=>ww(t,t.type,s),un=(t,s,a)=>gn(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),uo=(t,s)=>{const a=s.map(w=>w.footerButtons).getOr([]),i=pl(a,w=>w.align==="start"),d=(w,x)=>vf.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${w}`]},components:Ge(x,A=>A.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},tr=(t,s,a)=>{const i=(d,g)=>{const h=Ge(g.buttons,x=>{const A=po(ht(x,a));return{name:x.name,align:x.align,memento:A}}),w=x=>un(d,h,x);return D.some({lookupByName:w,footerButtons:h})};return{dom:ff('<div class="tox-dialog__footer"></div>'),components:[],behaviours:at([Ct.config({channel:`${t$}-${s}`,initialData:t,updateState:i,renderComponents:uo})])}},Ef=(t,s,a)=>tr(t,s,a),xd=(t,s,a)=>va.parts.footer(tr(t,s,a)),g1=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=eo.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Wb.getField(i,s).orThunk(()=>t.getFooter().bind(h=>Ct.getState(h).get()).bind(h=>h.lookupByName(s)))}else return D.none()},fF=(t,s)=>{const a=t.getRoot();return Ct.getState(a).get().map(i=>rt(Ss("data",i.dataValidator,s))).getOr(s)},mM=(t,s,a)=>{const i=ne=>{const oe=t.getRoot();oe.getSystem().isConnected()&&ne(oe)},Y={getData:()=>{const ne=t.getRoot(),oe=ne.getSystem().isConnected()?t.getFormWrapper():ne,ye=Dt.getValue(oe),ie=To(a,we=>we.get());return{...ye,...ie}},setData:ne=>{i(oe=>{const ye=Y.getData(),ie=ns(ye,ne),we=fF(t,ie),ve=t.getFormWrapper();Dt.setValue(ve,we),As(a,(Re,Ne)=>{Yn(ie,Ne)&&Re.set(ie[Ne])})})},setEnabled:(ne,oe)=>{g1(t,ne).each(oe?Ft.enable:Ft.disable)},focus:ne=>{g1(t,ne).each(dn.focus)},block:ne=>{if(!se(ne))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(oe=>{Kt(oe,pO,{message:ne})})},unblock:()=>{i(ne=>{Un(ne,OT)})},showTab:ne=>{i(oe=>{const ye=t.getBody();Ct.getState(ye).get().exists(we=>we.isTabPanel())&&eo.getCurrent(ye).each(we=>{Ye.showTab(we,ne)})})},redial:ne=>{i(oe=>{const ye=t.getId(),ie=s(ne),we=wg(ie.internalDialog.buttons,a);oe.getSystem().broadcastOn([`${gw}-${ye}`],ie),oe.getSystem().broadcastOn([`${Q6}-${ye}`],ie.internalDialog),oe.getSystem().broadcastOn([`${e$}-${ye}`],ie.internalDialog),oe.getSystem().broadcastOn([`${t$}-${ye}`],{...ie.internalDialog,buttons:we}),Y.setData(ie.initialData)})},close:()=>{i(ne=>{Un(ne,sw)})},toggleFullscreen:t.toggleFullscreen};return Y},fM=(t,s,a)=>{const i=Mt("dialog"),d=t.internalDialog,g=d1(d.title,i,a),h=Wt(d.size),w=ve=>g1(ie,ve),x=f1(h.get()).toArray(),A=(ve,Re)=>(h.set(Re.internalDialog.size),Cy(Re.internalDialog.size,ve),D.some(Re)),M=u1({body:d.body,initialData:d.initialData},i,a,w),L=wg(d.buttons),W=Qw(L),Y=an(L.length!==0,xd({buttons:L},i,a)),ne=wt(()=>we,Rh(()=>ye,a.shared.providers,s),a.shared.getSink),oe={id:i,header:g,body:M,footer:Y,extraClasses:x,extraBehaviours:[Ct.config({channel:`${gw}-${i}`,updateState:A,initialData:t})],extraStyles:{}},ye=c0(oe,ne,a),ie=(()=>{const ve=()=>{const Ne=va.getBody(ye);return eo.getCurrent(Ne).getOr(Ne)},Re=()=>{dM(ye,h.get())};return{getId:ae(i),getRoot:ae(ye),getBody:()=>va.getBody(ye),getFooter:()=>va.getFooter(ye),getFormWrapper:ve,toggleFullscreen:Re}})(),we=mM(ie,s.redial,W);return{dialog:ye,instanceApi:we}},gM=(t,s,a,i=!1,d)=>{const g=Mt("dialog"),h=Mt("dialog-label"),w=Mt("dialog-content"),x=t.internalDialog,A=Rt=>g1(ot,Rt),M=Wt(x.size),L=f1(M.get()).toArray(),W=(Rt,yt)=>(M.set(yt.internalDialog.size),Cy(yt.internalDialog.size,Rt),d(),D.some(yt)),Y=po(by({title:x.title,draggable:!0},g,h,a.shared.providers)),ne=po(Cd({body:x.body,initialData:x.initialData},g,w,a,i,A)),oe=wg(x.buttons),ye=Qw(oe),ie=an(oe.length!==0,po(Ef({buttons:oe},g,a))),we=wt(()=>$e,{onBlock:Rt=>{vd.block(Ne,(yt,$t)=>{const Hn=Y.getOpt(Ne).map(Yo=>sr(Yo.element));return Sd(Rt.message,$t,a.shared.providers,Hn)})},onUnblock:()=>{vd.unblock(Ne)},onClose:()=>s.closeWindow()},a.shared.getSink),ve="tox-dialog-inline",Re=Ts().os,Ne=ic({dom:{tag:"div",classes:["tox-dialog",ve,...L],attributes:{role:"dialog",...Re.isMacOS()?{"aria-label":x.title}:{"aria-labelledby":h}}},eventOrder:{[lu()]:[Ct.name(),ai.name()],[ac()]:["execute-on-form"],[uu()]:["reflecting","execute-on-form"]},behaviours:at([Gt.config({mode:"cyclic",onEscape:Rt=>(Un(Rt,sw),D.some(!0)),useTabstopAt:Rt=>!fw(Rt)&&(Bs(Rt)!=="button"||$n(Rt,"disabled")!=="disabled"),firstTabstop:1}),Ct.config({channel:`${gw}-${g}`,updateState:W,initialData:t}),dn.config({}),Sn("execute-on-form",we.concat([Xd(iu(),(Rt,yt)=>{Gt.focusIn(Rt)}),ze(k1(),(Rt,yt)=>{Rt.getSystem().broadcastOn([hw],{newFocus:yt.event.newFocus})})])),vd.config({getRoot:()=>D.some(Ne)}),Cn.config({}),Zb({})]),components:[Y.asSpec(),ne.asSpec(),...ie.map(Rt=>Rt.asSpec()).toArray()]}),xt=()=>{dM(Ne,M.get())},ot={getId:ae(g),getRoot:ae(Ne),getFooter:()=>ie.map(Rt=>Rt.get(Ne)),getBody:()=>ne.get(Ne),getFormWrapper:()=>{const Rt=ne.get(Ne);return eo.getCurrent(Rt).getOr(Rt)},toggleFullscreen:xt},$e=mM(ot,s.redial,ye);return{dialog:Ne,instanceApi:$e}};var Tf=tinymce.util.Tools.resolve("tinymce.util.URI");const gF=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!se(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(w=>{Kt(w,pO,{message:h})})},unblock:()=>{s(h=>{Un(h,OT)})},close:()=>{s(h=>{Un(h,sw)})},sendMessage:h=>{s(w=>{w.getSystem().broadcastOn([oR],h)})}}},hF=["insertContent","setContent","execCommand","close","block","unblock"],hM=t=>Ee(t)&&hF.indexOf(t.mceAction)!==-1,pF=t=>!hM(t)&&Ee(t)&&Yn(t,"mceAction"),EG=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=en(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},Qn=(t,s,a,i)=>{const d=Mt("dialog"),g=d1(t.title,d,i),h=tn(t),w=t.buttons.bind(ve=>ve.length===0?D.none():D.some(xd({buttons:ve},d,i))),x=De(()=>we,Rh(()=>ie,i.shared.providers,s)),A={...t.height.fold(()=>({}),ve=>({height:ve+"px","max-height":ve+"px"})),...t.width.fold(()=>({}),ve=>({width:ve+"px","max-width":ve+"px"}))},M=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],L=new Tf(t.url,{base_uri:new Tf(window.location.href)}),W=`${L.protocol}://${L.host}${L.port?":"+L.port:""}`,Y=bc(),ne=(ve,Re)=>D.some(Re),oe=[Ct.config({channel:`${gw}-${d}`,updateState:ne,initialData:t}),Sn("messages",[Bo(()=>{const ve=Uc(ct.fromDom(window),"message",Re=>{if(L.isSameOrigin(new Tf(Re.raw.origin))){const Ne=Re.raw.data;hM(Ne)?EG(a,we,Ne):pF(Ne)&&t.onMessage(we,Ne)}});Y.set(ve)}),ed(Y.clear)]),ai.config({channels:{[oR]:{onReceive:(ve,Re)=>{ho(ve.element,"iframe").each(Ne=>{const xt=Ne.dom.contentWindow;cn(xt)&&xt.postMessage(Re,W)})}}}})],ie=c0({id:d,header:g,body:h,footer:w,extraClasses:M,extraBehaviours:oe,extraStyles:A},x,i),we=gF(ie);return{dialog:ie,instanceApi:we}},Me=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{va.hide(A),d()},h=po(ww({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:D.some("primary"),align:"end",enabled:!0,icon:D.none()},"cancel",t)),w=ya(),x=ra(g,s.providers),A=ic(qc({lazySink:()=>s.getSink(),header:er(w,x),body:Vr(i,s.providers),footer:D.some(zs(Vs([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ze(Eh,g)],eventOrder:{}}));va.show(A);const M=h.get(A);dn.focus(M)}}},Jt=t=>{const s=t.shared;return{open:(i,d)=>{const g=W=>{va.hide(M),d(W)},h=po(ww({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:D.some("primary"),align:"end",enabled:!0,icon:D.none()},"submit",t)),w=ww({context:"any",name:"no",text:"No",primary:!1,buttonType:D.some("secondary"),align:"end",enabled:!0,icon:D.none()},"cancel",t),x=ya(),A=ra(()=>g(!1),s.providers),M=ic(qc({lazySink:()=>s.getSink(),header:er(x,A),body:Vr(i,s.providers),footer:D.some(zs(Vs([],[w,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ze(Eh,()=>g(!1)),ze(rw,()=>g(!0))],eventOrder:{}}));va.show(M);const L=h.get(M);dn.focus(L)}}},In=(t,s)=>rt(Ss("data",s,t)),aa=t=>bf(t,".tox-alert-dialog")||bf(t,".tox-confirm-dialog"),ml=(t,s,a)=>s&&a?[]:[ys.config({contextual:{lazyContext:()=>D.some(Xs(ct.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>Gp(t,i.element).map(g=>({bounds:Kp(g),optScrollEnv:D.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:qr(g.element).top})})).getOrThunk(()=>({bounds:hr(),optScrollEnv:D.none()}))})],fi=t=>{const s=t.editor,a=qp(s),i=Me(t.backstages.dialog),d=Jt(t.backstages.dialog),g=(ne,oe,ye)=>{if(!Mn(oe)){if(oe.inline==="toolbar")return A(ne,t.backstages.popup.shared.anchors.inlineDialog(),ye,oe);if(oe.inline==="bottom")return M(ne,t.backstages.popup.shared.anchors.inlineBottomDialog(),ye,oe);if(oe.inline==="cursor")return A(ne,t.backstages.popup.shared.anchors.cursor(),ye,oe)}return x(ne,ye)},h=(ne,oe)=>w(ne,oe),w=(ne,oe)=>{const ye=ie=>{const we=Qn(ie,{closeWindow:()=>{va.hide(we.dialog),oe(we.instanceApi)}},s,t.backstages.dialog);return va.show(we.dialog),we.instanceApi};return J.openUrl(ye,ne)},x=(ne,oe)=>{const ye=(ie,we,ve)=>{const Re=we,xt=fM({dataValidator:ve,initialData:Re,internalDialog:ie},{redial:J.redial,closeWindow:()=>{va.hide(xt.dialog),oe(xt.instanceApi)}},t.backstages.dialog);return va.show(xt.dialog),xt.instanceApi.setData(Re),xt.instanceApi};return J.open(ye,ne)},A=(ne,oe,ye,ie)=>{const we=(ve,Re,Ne)=>{const xt=In(Re,Ne),ot=go(),$e=t.backstages.popup.shared.header.isPositionedAtTop(),Rt={dataValidator:Ne,initialData:xt,internalDialog:ve},yt=()=>ot.on(mo=>{Ps.reposition(mo),(!a||!$e)&&ys.refresh(mo)}),$t=gM(Rt,{redial:J.redial,closeWindow:()=>{ot.on(Ps.hide),s.off("ResizeEditor",yt),ot.clear(),ye($t.instanceApi)}},t.backstages.popup,ie.ariaAttrs,yt),Hn=ic(Ps.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ie.persistent?{event:"doNotDismissYet"}:{},...$e?{}:{fireRepositionEventInstead:{}},inlineBehaviours:at([Sn("window-manager-inline-events",[ze(Vf(),(mo,jt)=>{Un($t.dialog,Eh)})]),...ml(s,a,$e)]),isExtraPart:(mo,jt)=>aa(jt)}));ot.set(Hn);const Yo=()=>{const mo=s.inline?be():ct.fromDom(s.getContainer()),jt=Xs(mo);return D.some(jt)};return Ps.showWithinBounds(Hn,Ai($t.dialog),{anchor:oe},Yo),(!a||!$e)&&(ys.refresh(Hn),s.on("ResizeEditor",yt)),$t.instanceApi.setData(xt),Gt.focusIn($t.dialog),$t.instanceApi};return J.open(we,ne)},M=(ne,oe,ye,ie)=>{const we=(ve,Re,Ne)=>{const xt=In(Re,Ne),ot=go(),$e=t.backstages.popup.shared.header.isPositionedAtTop(),Rt={dataValidator:Ne,initialData:xt,internalDialog:ve},yt=()=>ot.on(mo=>{Ps.reposition(mo),ys.refresh(mo)}),$t=gM(Rt,{redial:J.redial,closeWindow:()=>{ot.on(Ps.hide),s.off("ResizeEditor ScrollWindow ElementScroll",yt),ot.clear(),ye($t.instanceApi)}},t.backstages.popup,ie.ariaAttrs,yt),Hn=ic(Ps.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ie.persistent?{event:"doNotDismissYet"}:{},...$e?{}:{fireRepositionEventInstead:{}},inlineBehaviours:at([Sn("window-manager-inline-events",[ze(Vf(),(mo,jt)=>{Un($t.dialog,Eh)})]),ys.config({contextual:{lazyContext:()=>D.some(Xs(ct.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:mo=>Gp(s,mo.element).map(st=>({bounds:Kp(st),optScrollEnv:D.some({currentScrollTop:st.element.dom.scrollTop,scrollElmTop:qr(st.element).top})})).getOrThunk(()=>({bounds:hr(),optScrollEnv:D.none()}))})]),isExtraPart:(mo,jt)=>aa(jt)}));ot.set(Hn);const Yo=()=>t.backstages.popup.shared.getSink().toOptional().bind(mo=>{const jt=Gp(s,mo.element),st=15,At=jt.map(nn=>Kp(nn)).getOr(hr()),pn=Xs(ct.fromDom(s.getContentAreaContainer())),Pn=$d(pn,At);return D.some(ws(Pn.x,Pn.y,Pn.width,Pn.height-st))});return Ps.showWithinBounds(Hn,Ai($t.dialog),{anchor:oe},Yo),ys.refresh(Hn),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",yt),$t.instanceApi.setData(xt),Gt.focusIn($t.dialog),$t.instanceApi};return J.open(we,ne)};return{open:g,openUrl:h,alert:(ne,oe)=>{i.open(ne,oe)},close:ne=>{ne.close()},confirm:(ne,oe)=>{d.open(ne,oe)}}},Ru=t=>{$E(t),Tz(t),Uj(t)};var Sg=()=>{Yu.add("silver",t=>{Ru(t);let s=()=>hr();const{dialogs:a,popups:i,renderUI:d}=zq(t,{getPopupSinkBounds:()=>s()}),g=()=>{const A=d();return Gp(t,i.getMothership().element).each(L=>{s=()=>Kp(L)}),A};Jv.register(t,i.backstage.shared);const h=fi({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),w=go(),x=()=>wH(t,{backstage:i.backstage},i.getMothership(),w);return{renderUI:g,getWindowManagerImpl:ae(h),getNotificationManagerImpl:x}})};Sg()}()),GX}var YX;function Xoe(){return YX||(YX=1,Yoe()),qX}Xoe();var XX={},JX={},QX;function Joe(){return QX||(QX=1,function(){var p=tinymce.util.Tools.resolve("tinymce.ModelManager");const S=(l,m,b)=>{var y;return b(l,m.prototype)?!0:((y=l.constructor)===null||y===void 0?void 0:y.name)===m.name},O=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&S(l,String,(b,y)=>y.isPrototypeOf(b))?"string":m},P=l=>m=>O(m)===l,F=l=>m=>typeof m===l,Z=l=>m=>l===m,q=P("string"),se=P("object"),Ee=P("array"),Le=Z(null),Fe=F("boolean"),ut=Z(void 0),en=l=>l==null,Mn=l=>!en(l),ln=F("function"),cn=F("number"),Ae=()=>{},On=(l,m)=>(...b)=>l(m.apply(null,b)),Tt=(l,m)=>b=>l(m(b)),le=l=>()=>l,Ot=l=>l,Io=(l,m)=>l===m;function kn(l,...m){return(...b)=>{const y=m.concat(b);return l.apply(null,y)}}const ae=l=>m=>!l(m),bn=l=>()=>{throw new Error(l)},Xo=l=>l(),Nn=le(!1),We=le(!0);class pe{constructor(m,b){this.tag=m,this.value=b}static some(m){return new pe(!0,m)}static none(){return pe.singletonNone}fold(m,b){return this.tag?b(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?pe.some(m(this.value)):pe.none()}bind(m){return this.tag?m(this.value):pe.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:pe.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Mn(m)?pe.some(m):pe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}pe.singletonNone=new pe(!1);const _s=Array.prototype.slice,fo=Array.prototype.indexOf,Ut=Array.prototype.push,D=(l,m)=>fo.call(l,m),_o=(l,m)=>D(l,m)>-1,vt=(l,m)=>{for(let b=0,y=l.length;b<y;b++){const k=l[b];if(m(k,b))return!0}return!1},Jo=(l,m)=>{const b=[];for(let y=0;y<l;y++)b.push(m(y));return b},fn=(l,m)=>{const b=l.length,y=new Array(b);for(let k=0;k<b;k++){const N=l[k];y[k]=m(N,k)}return y},Je=(l,m)=>{for(let b=0,y=l.length;b<y;b++){const k=l[b];m(k,b)}},zo=(l,m)=>{for(let b=l.length-1;b>=0;b--){const y=l[b];m(y,b)}},wr=(l,m)=>{const b=[],y=[];for(let k=0,N=l.length;k<N;k++){const z=l[k];(m(z,k)?b:y).push(z)}return{pass:b,fail:y}},Co=(l,m)=>{const b=[];for(let y=0,k=l.length;y<k;y++){const N=l[y];m(N,y)&&b.push(N)}return b},Sr=(l,m,b)=>(zo(l,(y,k)=>{b=m(b,y,k)}),b),Ge=(l,m,b)=>(Je(l,(y,k)=>{b=m(b,y,k)}),b),pt=(l,m,b)=>{for(let y=0,k=l.length;y<k;y++){const N=l[y];if(m(N,y))return pe.some(N);if(b(N,y))break}return pe.none()},U=(l,m)=>pt(l,m,Nn),pl=(l,m)=>{for(let b=0,y=l.length;b<y;b++){const k=l[b];if(m(k,b))return pe.some(b)}return pe.none()},ko=l=>{const m=[];for(let b=0,y=l.length;b<y;++b){if(!Ee(l[b]))throw new Error("Arr.flatten item "+b+" was not an array, input: "+l);Ut.apply(m,l[b])}return m},gs=(l,m)=>ko(fn(l,m)),Vo=(l,m)=>{for(let b=0,y=l.length;b<y;++b){const k=l[b];if(m(k,b)!==!0)return!1}return!0},kf=l=>{const m=_s.call(l,0);return m.reverse(),m},gn=(l,m)=>{const b={};for(let y=0,k=l.length;y<k;y++){const N=l[y];b[String(N)]=m(N,y)}return b},vo=(l,m)=>{const b=_s.call(l,0);return b.sort(m),b},hn=(l,m)=>m>=0&&m<l.length?pe.some(l[m]):pe.none(),Te=l=>hn(l,0),Ja=l=>hn(l,l.length-1),nr=(l,m)=>{for(let b=0;b<l.length;b++){const y=m(l[b],b);if(y.isSome())return y}return pe.none()},Qt=Object.keys,hi=Object.hasOwnProperty,cs=(l,m)=>{const b=Qt(l);for(let y=0,k=b.length;y<k;y++){const N=b[y],z=l[N];m(z,N)}},bl=(l,m)=>Cs(l,(b,y)=>({k:y,v:m(b,y)})),Cs=(l,m)=>{const b={};return cs(l,(y,k)=>{const N=m(y,k);b[N.k]=N.v}),b},Pr=l=>(m,b)=>{l[b]=m},Zl=(l,m,b,y)=>{cs(l,(k,N)=>{(m(k,N)?b:y)(k,N)})},Ca=(l,m)=>{const b={};return Zl(l,m,Pr(b),Ae),b},ks=(l,m)=>{const b=[];return cs(l,(y,k)=>{b.push(m(y,k))}),b},Uo=l=>ks(l,Ot),Mc=(l,m)=>As(l,m)?pe.from(l[m]):pe.none(),As=(l,m)=>hi.call(l,m),To=(l,m)=>As(l,m)&&l[m]!==void 0&&l[m]!==null,jl=l=>{for(const m in l)if(hi.call(l,m))return!1;return!0},to=typeof window<"u"?window:Function("return this;")(),xr=(l,m)=>{let b=m??to;for(let y=0;y<l.length&&b!==void 0&&b!==null;++y)b=b[l[y]];return b},Br=(l,m)=>{const b=l.split(".");return xr(b,m)},vl=(l,m)=>Br(l,m),ql=(l,m)=>{const b=vl(l,m);if(b==null)throw new Error(l+" not available on this browser");return b},is=Object.getPrototypeOf,Tm=l=>ql("HTMLElement",l),bt=l=>{const m=Br("ownerDocument.defaultView",l);return se(l)&&(Tm(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(is(l).constructor.name))},Yn=8,Ur=9,Wr=11,Nc=1,pi=3,Wo=l=>l.dom.nodeName.toLowerCase(),mc=l=>l.dom.nodeType,Ii=l=>m=>mc(m)===l,Mo=l=>mc(l)===Yn||Wo(l)==="#comment",an=l=>ur(l)&&bt(l.dom),ur=Ii(Nc),bi=Ii(pi),$u=Ii(Ur),_m=Ii(Wr),Er=l=>m=>ur(m)&&Wo(m)===l,hs=(l,m,b)=>{if(q(b)||Fe(b)||cn(b))l.setAttribute(m,b+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",b,":: Element ",l),new Error("Attribute value was not simple")},Os=(l,m,b)=>{hs(l.dom,m,b)},fc=(l,m)=>{const b=l.dom;cs(m,(y,k)=>{hs(b,k,y)})},Iu=(l,m)=>{cs(m,(b,y)=>{b.fold(()=>{Zo(l,y)},k=>{hs(l.dom,y,k)})})},vi=(l,m)=>{const b=l.dom.getAttribute(m);return b===null?void 0:b},Tr=(l,m)=>pe.from(vi(l,m)),Zo=(l,m)=>{l.dom.removeAttribute(m)},gc=l=>Ge(l.dom.attributes,(m,b)=>(m[b.name]=b.value,m),{}),Zr=(l,m)=>{const y=(m||document).createElement("div");if(y.innerHTML=l,!y.hasChildNodes()||y.childNodes.length>1){const k="HTML does not have a single root node";throw console.error(k,l),new Error(k)}return Kc(y.childNodes[0])},km=(l,m)=>{const y=(m||document).createElement(l);return Kc(y)},Af=(l,m)=>{const y=(m||document).createTextNode(l);return Kc(y)},Kc=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},Et={fromHtml:Zr,fromTag:km,fromText:Af,fromDom:Kc,fromPoint:(l,m,b)=>pe.from(l.dom.elementFromPoint(m,b)).map(Kc)},ct=(l,m)=>{const b=l.dom;if(b.nodeType!==Nc)return!1;{const y=b;if(y.matches!==void 0)return y.matches(m);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(m);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(m);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Cl=l=>l.nodeType!==Nc&&l.nodeType!==Ur&&l.nodeType!==Wr||l.childElementCount===0,Tg=(l,m)=>{const b=m===void 0?document:m.dom;return Cl(b)?[]:fn(b.querySelectorAll(l),Et.fromDom)},Td=(l,m)=>{const b=m===void 0?document:m.dom;return Cl(b)?pe.none():pe.from(b.querySelector(l)).map(Et.fromDom)},Qo=(l,m)=>l.dom===m.dom,Am=(l,m)=>{const b=l.dom,y=m.dom;return b===y?!1:b.contains(y)},Li=ct,wl=l=>Et.fromDom(l.dom.ownerDocument),Ia=l=>$u(l)?l:wl(l),or=l=>Et.fromDom(Ia(l).dom.documentElement),Ws=l=>Et.fromDom(Ia(l).dom.defaultView),wa=l=>pe.from(l.dom.parentNode).map(Et.fromDom),Gl=l=>pe.from(l.dom.parentElement).map(Et.fromDom),Bs=(l,m)=>{const b=ln(m)?m:Nn;let y=l.dom;const k=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const N=y.parentNode,z=Et.fromDom(N);if(k.push(z),b(z)===!0)break;y=N}return k},Kl=l=>pe.from(l.dom.previousSibling).map(Et.fromDom),Qa=l=>pe.from(l.dom.nextSibling).map(Et.fromDom),No=l=>fn(l.dom.childNodes,Et.fromDom),Rs=(l,m)=>{const b=l.dom.childNodes;return pe.from(b[m]).map(Et.fromDom)},dr=l=>Rs(l,0),Yc=(l,m)=>{wa(l).each(y=>{y.dom.insertBefore(m.dom,l.dom)})},ec=(l,m)=>{Qa(l).fold(()=>{wa(l).each(k=>{jo(k,m)})},y=>{Yc(y,m)})},ca=(l,m)=>{dr(l).fold(()=>{jo(l,m)},y=>{l.dom.insertBefore(m.dom,y.dom)})},jo=(l,m)=>{l.dom.appendChild(m.dom)},Om=(l,m,b)=>{Rs(l,b).fold(()=>{jo(l,m)},y=>{Yc(y,m)})},Fi=(l,m)=>{Yc(l,m),jo(m,l)},_d=(l,m)=>{Je(m,(b,y)=>{const k=y===0?l:m[y-1];ec(k,b)})},Xn=(l,m)=>{Je(m,b=>{jo(l,b)})},Hi=l=>{l.dom.textContent="",Je(No(l),m=>{Es(m)})},Es=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Rm=l=>{const m=No(l);m.length>0&&_d(l,m),Es(l)},Xc=(l,m)=>Et.fromDom(l.dom.cloneNode(m)),zi=l=>Xc(l,!1),$r=l=>Xc(l,!0),Lu=(l,m)=>{const b=Et.fromTag(m),y=gc(l);return fc(b,y),b},Jc=(l,m)=>{const b=Lu(l,m),y=No($r(l));return Xn(b,y),b},kd=(l,m)=>{const b=Lu(l,m);ec(l,b);const y=No(l);return Xn(b,y),Es(l),b},Dm=["tfoot","thead","tbody","colgroup"],Mm=l=>_o(Dm,l),mr=(l,m)=>({rows:l,columns:m}),Vi=(l,m)=>({row:l,column:m}),Yl=(l,m,b)=>({element:l,rowspan:m,colspan:b}),Fu=(l,m,b,y)=>({element:l,rowspan:m,colspan:b,isNew:y}),Nm=(l,m,b,y,k,N)=>({element:l,rowspan:m,colspan:b,row:y,column:k,isLocked:N}),Qc=(l,m,b)=>({element:l,cells:m,section:b}),Ys=(l,m,b,y)=>({element:l,cells:m,section:b,isNew:y}),fr=(l,m,b)=>({element:l,isNew:m,isLocked:b}),hc=(l,m,b,y)=>({element:l,cells:m,section:b,isNew:y}),Hu=(l,m,b,y)=>({startRow:l,startCol:m,finishRow:b,finishCol:y}),Ad=(l,m,b)=>({element:l,colspan:m,column:b}),ia=(l,m)=>({element:l,columns:m}),K=l=>_m(l)&&Mn(l.dom.host),ce=l=>Et.fromDom(l.dom.getRootNode()),be=l=>K(l)?l:Et.fromDom(Ia(l).dom.body),Ve=l=>{const m=ce(l);return K(m)?pe.some(m):pe.none()},lt=l=>Et.fromDom(l.dom.host),je=l=>{if(Mn(l.target)){const m=Et.fromDom(l.target);if(ur(m)&&Vt(m)&&l.composed&&l.composedPath){const b=l.composedPath();if(b)return Te(b)}}return pe.from(l.target)},Vt=l=>Mn(l.dom.shadowRoot),$n=l=>{const m=bi(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const b=m.ownerDocument;return Ve(Et.fromDom(m)).fold(()=>b.body.contains(m),Tt($n,lt))},En=()=>Zs(Et.fromDom(document)),Zs=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return Et.fromDom(m)},zn=(l,m,b)=>Co(Bs(l,b),m),Xl=(l,m)=>Co(No(l),m),la=(l,m)=>{let b=[];return Je(No(l),y=>{m(y)&&(b=b.concat([y])),b=b.concat(la(y,m))}),b},Ui=(l,m,b)=>zn(l,y=>ct(y,m),b),vn=(l,m)=>Xl(l,b=>ct(b,m)),jr=(l,m)=>Tg(m,l);var Pm=(l,m,b,y,k)=>l(b,y)?pe.some(b):ln(k)&&k(b)?pe.none():m(b,y,k);const Qe=(l,m,b)=>{let y=l.dom;const k=ln(b)?b:Nn;for(;y.parentNode;){y=y.parentNode;const N=Et.fromDom(y);if(m(N))return pe.some(N);if(k(N))break}return pe.none()},Sl=(l,m,b)=>Pm((k,N)=>N(k),Qe,l,m,b),$s=(l,m)=>{const b=k=>m(Et.fromDom(k));return U(l.dom.childNodes,b).map(Et.fromDom)},Bm=(l,m)=>{const b=y=>{for(let k=0;k<y.childNodes.length;k++){const N=Et.fromDom(y.childNodes[k]);if(m(N))return pe.some(N);const z=b(y.childNodes[k]);if(z.isSome())return z}return pe.none()};return b(l.dom)},Is=(l,m,b)=>Qe(l,y=>ct(y,m),b),Zn=(l,m)=>$s(l,b=>ct(b,m)),tc=(l,m)=>Td(m,l),Ir=(l,m,b)=>Pm((k,N)=>ct(k,N),Is,l,m,b),Od=(l,m,b=Io)=>l.exists(y=>b(y,m)),sr=l=>{const m=[],b=y=>{m.push(y)};for(let y=0;y<l.length;y++)l[y].each(b);return m},zu=(l,m)=>l!=null?m(l):pe.none(),Ph=(l,m)=>l?pe.some(m):pe.none(),y1=(l,m)=>l.substring(m),qo=(l,m,b)=>m===""||l.length>=m.length&&l.substr(b,b+m.length)===m,xl=(l,m)=>qr(l,m)?y1(l,m.length):l,gr=(l,m,b=0,y)=>{const k=l.indexOf(m,b);return k!==-1?ut(y)?!0:k+m.length<=y:!1},qr=(l,m)=>qo(l,m,0),La=(l,m)=>qo(l,m,l.length-m.length),Of=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),Rn=l=>l.length>0,Wi=l=>{const m=parseFloat(l);return isNaN(m)?pe.none():pe.some(m)},El=l=>l.style!==void 0&&ln(l.style.getPropertyValue),Tl=(l,m,b)=>{if(!q(b))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",b,":: Element ",l),new Error("CSS value must be a string: "+b);El(l)&&l.style.setProperty(m,b)},$m=(l,m)=>{El(l)&&l.style.removeProperty(m)},es=(l,m,b)=>{const y=l.dom;Tl(y,m,b)},_r=(l,m)=>{const b=l.dom;cs(m,(y,k)=>{Tl(b,k,y)})},Vu=(l,m)=>{const b=l.dom,k=window.getComputedStyle(b).getPropertyValue(m);return k===""&&!$n(l)?_g(b,m):k},_g=(l,m)=>El(l)?l.style.getPropertyValue(m):"",_l=(l,m)=>{const b=l.dom,y=_g(b,m);return pe.from(y).filter(k=>k.length>0)},Fa=(l,m)=>{const b=l.dom;$m(b,m),Od(Tr(l,"style").map(Of),"")&&Zo(l,"style")},kr=(l,m)=>{const b=l.dom,y=m.dom;El(b)&&El(y)&&(y.style.cssText=b.style.cssText)},ua=(l,m,b=0)=>Tr(l,m).map(y=>parseInt(y,10)).getOr(b),Sa=(l,m)=>ua(l,m,1),js=l=>Er("col")(l)?ua(l,"span",1)>1:Sa(l,"colspan")>1,Uu=l=>Sa(l,"rowspan")>1,ts=(l,m)=>parseInt(Vu(l,m),10),Rd=le(10),Im=le(10),kl=(l,m)=>Dd(l,m,We),Dd=(l,m,b)=>gs(No(l),y=>ct(y,m)?b(y)?[y]:[]:Dd(y,m,b)),Md=(l,m,b=Nn)=>{if(b(m))return pe.none();if(_o(l,Wo(m)))return pe.some(m);const y=k=>ct(k,"table")||b(k);return Is(m,l.join(","),y)},Wu=(l,m)=>Md(["td","th"],l,m),Zu=l=>kl(l,"th,td"),Pc=l=>ct(l,"colgroup")?vn(l,"col"):gs(Zi(l),m=>vn(m,"col")),xa=(l,m)=>Ir(l,"table",m),Bh=l=>kl(l,"tr"),Zi=l=>xa(l).fold(le([]),m=>vn(m,"colgroup")),Rf=(l,m)=>fn(l,b=>{if(Wo(b)==="colgroup"){const y=fn(Pc(b),k=>{const N=ua(k,"span",1);return Yl(k,1,N)});return Qc(b,y,"colgroup")}else{const y=fn(Zu(b),k=>{const N=ua(k,"rowspan",1),z=ua(k,"colspan",1);return Yl(k,N,z)});return Qc(b,y,m(b))}}),Nd=l=>wa(l).map(m=>{const b=Wo(m);return Mm(b)?b:"tbody"}).getOr("tbody"),kg=l=>{const m=Bh(l),y=[...Zi(l),...m];return Rf(y,Nd)},Df=(l,m)=>Rf(l,()=>m),Pd=l=>{let m=!1,b;return(...y)=>(m||(m=!0,b=l.apply(null,y)),b)},Mf=(l,m,b,y)=>{const k=l.isiOS()&&/ipad/i.test(b)===!0,N=l.isiOS()&&!k,z=l.isiOS()||l.isAndroid(),X=z||y("(pointer:coarse)"),Q=k||!N&&z&&y("(min-device-width:768px)"),fe=N||z&&!Q,_e=m.isSafari()&&l.isiOS()&&/safari/i.test(b)===!1,et=!fe&&!Q&&!_e;return{isiPad:le(k),isiPhone:le(N),isTablet:le(Q),isPhone:le(fe),isTouch:le(X),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:le(_e),isDesktop:le(et)}},Ag=(l,m)=>{for(let b=0;b<l.length;b++){const y=l[b];if(y.test(m))return y}},ju=(l,m)=>{const b=Ag(l,m);if(!b)return{major:0,minor:0};const y=k=>Number(m.replace(b,"$"+k));return qu(y(1),y(2))},Og=(l,m)=>{const b=String(m).toLowerCase();return l.length===0?de():ju(l,b)},de=()=>qu(0,0),qu=(l,m)=>({major:l,minor:m}),Ha={nu:qu,detect:Og,unknown:de},C1=(l,m)=>nr(m.brands,b=>{const y=b.brand.toLowerCase();return U(l,k=>{var N;return y===((N=k.brand)===null||N===void 0?void 0:N.toLowerCase())}).map(k=>({current:k.name,version:Ha.nu(parseInt(b.version,10),0)}))}),$h=(l,m)=>{const b=String(m).toLowerCase();return U(l,y=>y.search(b))},Ql=(l,m)=>$h(l,m).map(b=>{const y=Ha.detect(b.versionRegexes,m);return{current:b.name,version:y}}),oo=(l,m)=>$h(l,m).map(b=>{const y=Ha.detect(b.versionRegexes,m);return{current:b.name,version:y}}),Ts=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Gr=l=>m=>gr(m,l),Al=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>gr(l,"edge/")&&gr(l,"chrome")&&gr(l,"safari")&&gr(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ts],search:l=>gr(l,"chrome")&&!gr(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>gr(l,"msie")||gr(l,"trident")},{name:"Opera",versionRegexes:[Ts,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Gr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Gr("firefox")},{name:"Safari",versionRegexes:[Ts,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(gr(l,"safari")||gr(l,"mobile/"))&&gr(l,"applewebkit")}],Rg=[{name:"Windows",search:Gr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>gr(l,"iphone")||gr(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Gr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Gr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Gr("linux"),versionRegexes:[]},{name:"Solaris",search:Gr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Gr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Gr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Gu={browsers:le(Al),oses:le(Rg)},Ea="Edge",Nf="Chromium",Pf="IE",eu="Opera",tu="Firefox",Lm="Safari",Bc=()=>Fm({current:void 0,version:Ha.unknown()}),Fm=l=>{const m=l.current,b=l.version,y=k=>()=>m===k;return{current:m,version:b,isEdge:y(Ea),isChromium:y(Nf),isIE:y(Pf),isOpera:y(eu),isFirefox:y(tu),isSafari:y(Lm)}},Lr={unknown:Bc,nu:Fm},nu="Windows",yi="iOS",Ta="Android",Ku="Linux",w1="macOS",Bf="Solaris",ji="FreeBSD",Bd="ChromeOS",Ih=()=>$f({current:void 0,version:Ha.unknown()}),$f=l=>{const m=l.current,b=l.version,y=k=>()=>m===k;return{current:m,version:b,isWindows:y(nu),isiOS:y(yi),isAndroid:y(Ta),isMacOS:y(w1),isLinux:y(Ku),isSolaris:y(Bf),isFreeBSD:y(ji),isChromeOS:y(Bd)}},Lh={unknown:Ih,nu:$f},Hh={detect:(l,m,b)=>{const y=Gu.browsers(),k=Gu.oses(),N=m.bind(Q=>C1(y,Q)).orThunk(()=>Ql(y,l)).fold(Lr.unknown,Lr.nu),z=oo(k,l).fold(Lh.unknown,Lh.nu),X=Mf(z,N,l,b);return{browser:N,os:z,deviceType:X}}},qi=l=>window.matchMedia(l).matches;let Dg=Pd(()=>Hh.detect(window.navigator.userAgent,pe.from(window.navigator.userAgentData),qi));const Ci=()=>Dg(),ws=(l,m)=>{const b=(X,Q)=>{if(!cn(Q)&&!Q.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+Q);const fe=X.dom;El(fe)&&(fe.style[l]=Q+"px")},y=X=>{const Q=m(X);if(Q<=0||Q===null){const fe=Vu(X,l);return parseFloat(fe)||0}return Q},k=y,N=(X,Q)=>Ge(Q,(fe,_e)=>{const et=Vu(X,_e),kt=et===void 0?0:parseInt(et,10);return isNaN(kt)?fe:fe+kt},0);return{set:b,get:y,getOuter:k,aggregate:N,max:(X,Q,fe)=>{const _e=N(X,fe);return Q>_e?Q-_e:0}}},Xs=(l,m)=>Wi(l).getOr(m),pc=(l,m,b)=>Xs(Vu(l,m),b),$d=(l,m,b,y)=>{const k=pc(l,`padding-${b}`,0),N=pc(l,`padding-${y}`,0),z=pc(l,`border-${b}-width`,0),X=pc(l,`border-${y}-width`,0);return m-k-N-z-X},Id=(l,m)=>{const b=l.dom,y=b.getBoundingClientRect().width||b.offsetWidth;return $d(l,y,"left","right")},hr=l=>pc(l,"height",l.dom.offsetHeight),Wt=l=>pc(l,"width",l.dom.offsetWidth),Mg=l=>Id(l),wi=ws("width",l=>l.dom.offsetWidth),bc=l=>wi.get(l),go=l=>wi.getOuter(l),Yu=Mg,Hm=Wt,zm=(l,m,b)=>{const y=l.cells,k=y.slice(0,m),N=y.slice(m),z=k.concat(b).concat(N);return Ls(l,z)},zh=(l,m,b)=>zm(l,m,[b]),Tn=(l,m,b)=>{const y=l.cells;y[m]=b},Ls=(l,m)=>hc(l.element,m,l.section,l.isNew),Ld=(l,m)=>{const b=l.cells,y=fn(b,m);return hc(l.element,y,l.section,l.isNew)},nc=(l,m)=>l.cells[m],_a=(l,m)=>nc(l,m).element,vc=l=>l.cells.length,Ar=l=>{const m=wr(l,b=>b.section==="colgroup");return{rows:m.fail,cols:m.pass}},za=(l,m,b)=>{const y=fn(l.cells,b);return hc(m(l.element),y,l.section,!0)},$c="data-snooker-locked-cols",Fd=l=>Tr(l,$c).bind(m=>pe.from(m.match(/\d+/g))).map(m=>gn(m,We)),ps=l=>{const m=Ge(Ar(l).rows,(y,k)=>(Je(k.cells,(N,z)=>{N.isLocked&&(y[z]=!0)}),y),{}),b=ks(m,(y,k)=>parseInt(k,10));return vo(b)},If=(l,m)=>l+","+m,qs=(l,m,b)=>pe.from(l.access[If(m,b)]),Gi=(l,m,b)=>{const y=Ki(l,k=>b(m,k.element));return y.length>0?pe.some(y[0]):pe.none()},Ki=(l,m)=>{const b=gs(l.all,y=>y.cells);return Co(b,m)},Ao=l=>{const m={};let b=0;return Je(l.cells,y=>{const k=y.colspan;Jo(k,N=>{const z=b+N;m[z]=Ad(y.element,k,z)}),b+=k}),m},oc=l=>{const m={},b=[],k=Te(l).map(it=>it.element).bind(xa).bind(Fd).getOr({});let N=0,z=0,X=0;const{pass:Q,fail:fe}=wr(l,it=>it.section==="colgroup");Je(fe,it=>{const dt=[];Je(it.cells,zt=>{let nt=0;for(;m[If(X,nt)]!==void 0;)nt++;const rn=To(k,nt.toString()),qe=Nm(zt.element,zt.rowspan,zt.colspan,X,nt,rn);for(let Pt=0;Pt<zt.colspan;Pt++)for(let xo=0;xo<zt.rowspan;xo++){const Eo=X+xo,qt=nt+Pt,Ko=If(Eo,qt);m[Ko]=qe,z=Math.max(z,qt+1)}dt.push(qe)}),N++,b.push(Qc(it.element,dt,it.section)),X++});const{columns:_e,colgroups:et}=Ja(Q).map(it=>{const dt=Ao(it);return{colgroups:[ia(it.element,Uo(dt))],columns:dt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:mr(N,z),access:m,all:b,columns:_e,colgroups:et}},Vn={fromTable:l=>{const m=kg(l);return oc(m)},generate:oc,getAt:qs,findItem:Gi,filterItems:Ki,justCells:l=>gs(l.all,m=>m.cells),justColumns:l=>Uo(l.columns),hasColumns:l=>Qt(l.columns).length>0,getColumnAt:(l,m)=>pe.from(l.columns[m])},Hd=(l,m=We)=>{const b=l.grid,y=Jo(b.columns,Ot),k=Jo(b.rows,Ot);return fn(y,N=>Lf(()=>gs(k,fe=>Vn.getAt(l,fe,N).filter(_e=>_e.column===N).toArray()),fe=>fe.colspan===1&&m(fe.element),()=>Vn.getAt(l,0,N)))},Lf=(l,m,b)=>{const y=l();return U(y,m).orThunk(()=>pe.from(y[0]).orThunk(b)).map(z=>z.element)},_=l=>{const m=l.grid,b=Jo(m.rows,Ot),y=Jo(m.columns,Ot);return fn(b,k=>Lf(()=>gs(y,Q=>Vn.getAt(l,k,Q).filter(fe=>fe.row===k).fold(le([]),fe=>[fe])),Q=>Q.rowspan===1,()=>Vn.getAt(l,k,0)))},$=(l,m)=>{if(m<0||m>=l.length-1)return pe.none();const b=l[m].fold(()=>{const k=kf(l.slice(0,m));return nr(k,(N,z)=>N.map(X=>({value:X,delta:z+1})))},k=>pe.some({value:k,delta:0})),y=l[m+1].fold(()=>{const k=l.slice(m+1);return nr(k,(N,z)=>N.map(X=>({value:X,delta:z+1})))},k=>pe.some({value:k,delta:1}));return b.bind(k=>y.map(N=>{const z=N.delta+k.delta;return Math.abs(N.value-k.value)/z}))},j=(l,m)=>b=>ue(b)==="rtl"?m:l,ue=l=>Vu(l,"direction")==="rtl"?"rtl":"ltr",ge=ws("height",l=>{const m=l.dom;return $n(l)?m.getBoundingClientRect().height:m.offsetHeight}),tt=l=>ge.get(l),sn=l=>ge.getOuter(l),Dn=hr,An=(l,m)=>({left:l,top:m,translate:(y,k)=>An(l+y,m+k)}),Zt=An,os=l=>{const m=l.getBoundingClientRect();return Zt(m.left,m.top)},Ds=(l,m)=>l!==void 0?l:m!==void 0?m:0,Ic=l=>{const m=l.dom.ownerDocument,b=m.body,y=m.defaultView,k=m.documentElement;if(b===l.dom)return Zt(b.offsetLeft,b.offsetTop);const N=Ds(y==null?void 0:y.pageYOffset,k.scrollTop),z=Ds(y==null?void 0:y.pageXOffset,k.scrollLeft),X=Ds(k.clientTop,b.clientTop),Q=Ds(k.clientLeft,b.clientLeft);return yc(l).translate(z-Q,N-X)},yc=l=>{const m=l.dom,y=m.ownerDocument.body;return y===m?Zt(y.offsetLeft,y.offsetTop):$n(l)?os(m):Zt(0,0)},Vh=(l,m)=>({row:l,y:m}),Um=(l,m)=>({col:l,x:m}),Ng=l=>Ic(l).left+go(l),ka=l=>Ic(l).left,Uh=(l,m)=>Um(l,ka(m)),Ty=(l,m)=>Um(l,Ng(m)),Wh=l=>Ic(l).top,da=(l,m)=>Vh(l,Wh(m)),Zh=(l,m)=>Vh(l,Wh(m)+sn(m)),rr=(l,m,b)=>{if(b.length===0)return[];const y=fn(b.slice(1),(N,z)=>N.map(X=>l(z,X))),k=b[b.length-1].map(N=>m(b.length-1,N));return y.concat([k])},Ff=l=>-l,Aa={delta:Ot,positions:l=>rr(da,Zh,l),edge:Wh},zd=j({delta:Ot,edge:ka,positions:l=>rr(Uh,Ty,l)},{delta:Ff,edge:Ng,positions:l=>rr(Ty,Uh,l)}),jh={delta:(l,m)=>zd(m).delta(l,m),positions:(l,m)=>zd(m).positions(l,m),edge:l=>zd(l).edge(l)},m0={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},qh=(()=>{const l="[0-9]+",b="[eE]"+("[+-]?"+l),y="\\.",k=X=>`(?:${X})?`,z=`[+-]?(?:${["Infinity",l+y+k(l)+k(b),y+l+k(b),l+k(b)].join("|")})`;return new RegExp(`^(${z})(.*)$`)})(),Yi=(l,m)=>vt(m,b=>vt(m0[b],y=>l===y)),su=(l,m)=>pe.from(qh.exec(l)).bind(y=>{const k=Number(y[1]),N=y[2];return Yi(N,m)?pe.some({value:k,unit:N}):pe.none()}),Vd=/(\d+(\.\d+)?)%/,_t=/(\d+(\.\d+)?)px|em/,Ei=Er("col"),S1=Er("tr"),Wm=(l,m,b)=>{const y=Gl(l).getOrThunk(()=>Zs(wl(l)));return m(l)/b(y)*100},Xi=(l,m)=>{es(l,"width",m+"px")},Pg=(l,m)=>{es(l,"width",m+"%")},Ud=(l,m)=>{es(l,"height",m+"px")},Zm=l=>{Fa(l,"height")},Bg=l=>Dn(l)+"px",Ol=(l,m,b,y)=>{const k=xa(l).map(N=>{const z=b(N);return Math.floor(m/100*z)}).getOr(m);return y(l,k),k},f0=(l,m,b,y)=>{const k=parseFloat(l);return La(l,"%")&&Wo(m)!=="table"?Ol(m,k,b,y):k},Ss=l=>{const m=Bg(l);return m?f0(m,l,tt,Ud):tt(l)},rt=(l,m,b)=>{const y=b(l),k=Sa(l,m);return y/k},sc=(l,m)=>_l(l,m).orThunk(()=>Tr(l,m).map(b=>b+"px")),Rl=l=>sc(l,"width"),Or=l=>sc(l,"height"),Hf=l=>Wm(l,bc,Yu),Rr=l=>Ei(l)?bc(l):Hm(l),co=l=>S1(l)?tt(l):rt(l,"rowspan",Ss),Gh=l=>Rl(l).bind(b=>su(b,["fixed","relative","empty"])),Ze=(l,m,b)=>{es(l,"width",m+b)},io=l=>bc(l)+"px",x1=l=>tt(l)+"px",Gs=l=>Wm(l,bc,Yu)+"%",Ji=l=>Rl(l).exists(m=>Vd.test(m)),Kr=l=>Rl(l).exists(m=>_t.test(m)),_y=l=>Rl(l).isNone(),ru=le(Vd),g0=Er("col"),Cc=l=>Rl(l).getOrThunk(()=>Rr(l)+"px"),lo=l=>Or(l).getOrThunk(()=>co(l)+"px"),au=l=>fn(Vn.justColumns(l),m=>pe.from(m.element)),$g=l=>{const m=Ci().browser,b=m.isChromium()||m.isFirefox();return g0(l)?b:!0},Ms=(l,m,b,y,k,N)=>l.filter(y).fold(()=>N($(b,m)),z=>k(z)),Kh=(l,m,b,y)=>{const k=Hd(l),N=Vn.hasColumns(l)?au(l):k,z=[pe.some(jh.edge(m))].concat(fn(jh.positions(k,m),Q=>Q.map(fe=>fe.x))),X=ae(js);return fn(N,(Q,fe)=>Ms(Q,fe,z,X,_e=>{if($g(_e))return b(_e);{const et=zu(k[fe],Ot);return Ms(et,fe,z,X,kt=>y(pe.some(bc(kt))),y)}},y))},Ju=l=>l.map(m=>m+"px").getOr(""),E1=(l,m)=>Kh(l,m,Cc,Ju),Oa=(l,m,b)=>Kh(l,m,Hf,y=>y.fold(()=>b.minCellWidth(),k=>k/b.pixelWidth()*100)),ei=(l,m,b)=>Kh(l,m,Rr,y=>y.getOrThunk(b.minCellWidth)),Se=(l,m,b,y)=>{const k=_(l),N=fn(l.all,X=>pe.some(X.element)),z=[pe.some(Aa.edge(m))].concat(fn(Aa.positions(k,m),X=>X.map(Q=>Q.y)));return fn(N,(X,Q)=>Ms(X,Q,z,We,b,y))},ti=(l,m)=>Se(l,m,co,b=>b.getOrThunk(Im)),Dr=(l,m)=>Se(l,m,lo,Ju),ss=(l,m)=>()=>$n(l)?m(l):parseFloat(_l(l,"width").getOr("0")),Qi=l=>{const m=ss(l,bc),b=le(0);return{width:m,pixelWidth:m,getWidths:(k,N)=>ei(k,l,N),getCellDelta:b,singleColumnWidth:le([0]),minCellWidth:b,setElementWidth:Ae,adjustTableWidth:Ae,isRelative:!0,label:"none"}},Fs=l=>{const m=ss(l,Q=>parseFloat(Gs(Q))),b=ss(l,bc);return{width:m,pixelWidth:b,getWidths:(Q,fe)=>Oa(Q,l,fe),getCellDelta:Q=>Q/b()*100,singleColumnWidth:(Q,fe)=>[100-Q],minCellWidth:()=>Rd()/b()*100,setElementWidth:Pg,adjustTableWidth:Q=>{const fe=m(),_e=Q/100*fe,et=fe+_e;Pg(l,et)},isRelative:!0,label:"percent"}},Po=l=>{const m=ss(l,bc);return{width:m,pixelWidth:m,getWidths:(z,X)=>ei(z,l,X),getCellDelta:Ot,singleColumnWidth:(z,X)=>[Math.max(Rd(),z+X)-z],minCellWidth:Rd,setElementWidth:Xi,adjustTableWidth:z=>{const X=m()+z;Xi(l,X)},isRelative:!1,label:"pixel"}},E=(l,m)=>ru().exec(m)!==null?Fs(l):Po(l),V={getTableSize:l=>Rl(l).fold(()=>Qi(l),b=>E(l,b)),pixelSize:Po,percentageSize:Fs,noneSize:Qi},te=(l,m,b,y,k,N)=>({minRow:l,minCol:m,maxRow:b,maxCol:y,allCells:k,selectedCells:N}),he=(l,m)=>{const b=l.grid.columns;let k=l.grid.rows,N=b,z=0,X=0;const Q=[],fe=[];return cs(l.access,_e=>{if(Q.push(_e),m(_e)){fe.push(_e);const et=_e.row,kt=et+_e.rowspan-1,it=_e.column,dt=it+_e.colspan-1;et<k?k=et:kt>z&&(z=kt),it<N?N=it:dt>X&&(X=dt)}}),te(k,N,z,X,Q,fe)},Ue=(l,m,b)=>{const y=l[b].element,k=Et.fromTag("td");jo(k,Et.fromTag("br")),(m?jo:ca)(y,k)},gt=(l,m,b,y)=>{const k=Co(l,X=>X.section!=="colgroup"),N=m.grid.columns,z=m.grid.rows;for(let X=0;X<z;X++){let Q=!1;for(let fe=0;fe<N;fe++)X<b.minRow||X>b.maxRow||fe<b.minCol||fe>b.maxCol||(Vn.getAt(m,X,fe).filter(y).isNone()?Ue(k,Q,X):Q=!0)}},Ht=(l,m,b,y)=>{cs(b.columns,z=>{(z.column<m.minCol||z.column>m.maxCol)&&Es(z.element)});const k=Co(kl(l,"tr"),z=>z.dom.childElementCount===0);Je(k,Es),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Je(kl(l,"th,td"),z=>{Zo(z,"rowspan"),Zo(z,"colspan")}),Zo(l,$c),Zo(l,"data-snooker-col-series"),V.getTableSize(l).adjustTableWidth(y)},wn=(l,m,b,y)=>{if(y.minCol===0&&m.grid.columns===y.maxCol+1)return 0;const k=ei(m,l,b),N=Ge(k,(fe,_e)=>fe+_e,0),Q=Ge(k.slice(y.minCol,y.maxCol+1),(fe,_e)=>fe+_e,0)/N*b.pixelWidth()-b.pixelWidth();return b.getCellDelta(Q)},Bn=(l,m)=>{const b=kt=>ct(kt.element,m),y=$r(l),k=kg(y),N=V.getTableSize(l),z=Vn.generate(k),X=he(z,b),Q="th:not("+m+"),td:not("+m+")",fe=Dd(y,"th,td",kt=>ct(kt,Q));Je(fe,Es),gt(k,z,X,b);const _e=Vn.fromTable(l),et=wn(l,_e,N,X);return Ht(y,X,z,et),y},wo="",bs=((l,m)=>{const b=N=>{if(!l(N))throw new Error("Can only get "+m+" value of a "+m+" node");return y(N).getOr("")},y=N=>l(N)?pe.from(N.dom.nodeValue):pe.none();return{get:b,getOption:y,set:(N,z)=>{if(!l(N))throw new Error("Can only set raw "+m+" value of a "+m+" node");N.dom.nodeValue=z}}})(bi,"text"),wc=l=>bs.get(l),Ti=l=>bs.getOption(l),Qu=(l,m)=>bs.set(l,m),Lc=l=>Wo(l)==="img"?1:Ti(l).fold(()=>No(l).length,m=>m.length),Wd=l=>Ti(l).filter(m=>m.trim().length!==0||m.indexOf(wo)>-1).isSome(),jm=l=>an(l)&&vi(l,"contenteditable")==="false",qm=["img","br"],rc=l=>Wd(l)||_o(qm,Wo(l))||jm(l),Yh=l=>Bm(l,rc),Gm=l=>Xh(l,rc),Xh=(l,m)=>{const b=y=>{const k=No(y);for(let N=k.length-1;N>=0;N--){const z=k[N];if(m(z))return pe.some(z);const X=b(z);if(X.isSome())return X}return pe.none()};return b(l)},h0={scope:["row","col"]},Fr=l=>()=>{const m=Et.fromTag("td",l.dom);return jo(m,Et.fromTag("br",l.dom)),m},jn=l=>()=>Et.fromTag("col",l.dom),ls=l=>()=>Et.fromTag("colgroup",l.dom),pr=l=>()=>Et.fromTag("tr",l.dom),_i=(l,m,b)=>{const y=Jc(l,m);return cs(b,(k,N)=>{k===null?Zo(y,N):Os(y,N,k)}),y},Fc=l=>l,Jh=(l,m,b)=>Yh(l).map(k=>{const N=b.join(","),z=Ui(k,N,X=>Qo(X,l));return Sr(z,(X,Q)=>{const fe=zi(Q);return jo(X,fe),fe},m)}).getOr(m),Zd=(l,m)=>{cs(h0,(b,y)=>Tr(l,y).filter(k=>_o(b,k)).each(k=>Os(m,y,k)))},jd=(l,m,b)=>{const y=(z,X)=>{kr(z.element,X),Fa(X,"height"),z.colspan!==1&&Fa(X,"width")},k=z=>{const X=Et.fromTag(Wo(z.element),m.dom),Q=b.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),fe=Q.length>0?Jh(z.element,X,Q):X;return jo(fe,Et.fromTag("br")),y(z,X),Zd(z.element,X),l(z.element,X),X};return{col:z=>{const X=Et.fromTag(Wo(z.element),m.dom);return y(z,X),l(z.element,X),X},colgroup:ls(m),row:pr(m),cell:k,replace:_i,colGap:jn(m),gap:Fr(m)}},cu=l=>({col:jn(l),colgroup:ls(l),row:pr(l),cell:Fr(l),replace:Fc,colGap:jn(l),gap:Fr(l)}),iu=(l,m)=>{const y=document.createElement("div");return y.innerHTML=l,No(Et.fromDom(y))},mS=l=>fn(l,Et.fromDom),Va=l=>m=>m.options.get(l),p0="100%",qd=l=>{var m;const b=l.dom,y=(m=b.getParent(l.selection.getStart(),b.isBlock))!==null&&m!==void 0?m:l.getBody();return Yu(Et.fromDom(y))+"px"},Km=(l,m)=>ac(l)||!T1(l)?m:lu(l)?{...m,width:qd(l)}:{...m,width:p0},Gd=(l,m)=>ac(l)||T1(l)?m:lu(l)?{...m,width:qd(l)}:{...m,width:p0},E4=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:b=>{const y=_o(["section","cells","sectionCells","auto"],b);return y?{value:b,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:b=>{const y=_o(["preservetable","resizetable"],b);return y?{value:b,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},Qh=l=>pe.from(l.options.get("table_clone_elements")),T4=l=>{const m=l.options.get("object_resizing");return _o(m.split(","),"table")},zf=Va("table_header_type"),Js=Va("table_column_resizing"),fS=l=>Js(l)==="preservetable",Kd=l=>Js(l)==="resizetable",Ym=Va("table_sizing_mode"),Ig=l=>Ym(l)==="relative",lu=l=>Ym(l)==="fixed",ac=l=>Ym(l)==="responsive",Lg=Va("table_resize_bars"),T1=Va("table_style_by_css"),$M=Va("table_merge_content_on_paste"),Yd=l=>{const m=l.options,b=m.get("table_default_attributes");return m.isSet("table_default_attributes")?b:Gd(l,b)},Ra=l=>{const m=l.options,b=m.get("table_default_styles");return m.isSet("table_default_styles")?b:Km(l,b)},_1=Va("table_use_colgroups"),_4=Va("fixed_toolbar_container"),k4=Va("fixed_toolbar_container_target"),ky=l=>{var m;if(!l.inline)return pe.none();const b=(m=_4(l))!==null&&m!==void 0?m:"";if(b.length>0)return tc(En(),b);const y=k4(l);return Mn(y)?pe.some(Et.fromDom(y)):pe.none()},ep=l=>l.inline&&ky(l).isSome(),uu=Va("ui_mode"),du=l=>!ep(l)&&uu(l)==="split",Vf=l=>Ir(l,"[contenteditable]"),Fg=(l,m=!1)=>$n(l)?l.dom.isContentEditable:Vf(l).fold(le(m),b=>k1(b)==="true"),k1=l=>l.dom.contentEditable,tp=l=>Et.fromDom(l.getBody()),Xm=l=>m=>Qo(m,tp(l)),Uf=l=>{Zo(l,"data-mce-style");const m=b=>Zo(b,"data-mce-style");Je(Zu(l),m),Je(Pc(l),m),Je(Bh(l),m)},A1=l=>Et.fromDom(l.selection.getStart()),b0=l=>l.getBoundingClientRect().width,v0=l=>l.getBoundingClientRect().height,Un=l=>(m,b)=>{const y=m.dom.getStyle(b,l)||m.dom.getAttrib(b,l);return pe.from(y).filter(Rn)},Kt=Un("width"),Hc=Un("height"),y0=l=>/^(\d+(\.\d+)?)%$/.test(l),C0=l=>/^(\d+(\.\d+)?)px$/.test(l),w0=l=>Sl(l,Er("table")).exists(Fg),Ay=(l,m)=>{const b=m.column,y=m.column+m.colspan-1,k=m.row,N=m.row+m.rowspan-1;return b<=l.finishCol&&y>=l.startCol&&k<=l.finishRow&&N>=l.startRow},rs=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,Jm=(l,m)=>{let b=!0;const y=kn(rs,m);for(let k=m.startRow;k<=m.finishRow;k++)for(let N=m.startCol;N<=m.finishCol;N++)b=b&&Vn.getAt(l,k,N).exists(y);return b?pe.some(m):pe.none()},A4=(l,m)=>Hu(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),gS=(l,m,b)=>{const y=Vn.findItem(l,m,Qo),k=Vn.findItem(l,b,Qo);return y.bind(N=>k.map(z=>A4(N,z)))},ze=(l,m,b)=>gS(l,m,b).bind(y=>Jm(l,y)),Oy=(l,m,b,y)=>Vn.findItem(l,m,Qo).bind(k=>{const N=b>0?k.row+k.rowspan-1:k.row,z=y>0?k.column+k.colspan-1:k.column;return Vn.getAt(l,N+b,z+y).map(Q=>Q.element)}),Ry=(l,m,b)=>gS(l,m,b).map(y=>{const k=Vn.filterItems(l,kn(Ay,y));return fn(k,N=>N.element)}),np=(l,m)=>{const b=(y,k)=>Am(k,y);return Vn.findItem(l,m,b).map(y=>y.element)},O4=(l,m,b)=>xa(l).bind(y=>{const k=S0(y);return Oy(k,l,m,b)}),Hg=(l,m,b)=>{const y=S0(l);return Ry(y,m,b)},O1=(l,m,b,y,k)=>{const N=S0(l),z=Qo(l,b)?pe.some(m):np(N,m),X=Qo(l,k)?pe.some(y):np(N,y);return z.bind(Q=>X.bind(fe=>Ry(N,Q,fe)))},Wf=(l,m,b)=>{const y=S0(l);return ze(y,m,b)},S0=Vn.fromTable;var Xd=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Bo=()=>{const l=fe=>Et.fromDom(fe.dom.cloneNode(!1)),m=fe=>Ia(fe).dom,b=fe=>ur(fe)?Wo(fe)==="body"?!0:_o(Xd,Wo(fe)):!1,y=fe=>ur(fe)?_o(["br","img","hr","input"],Wo(fe)):!1,k=fe=>ur(fe)&&vi(fe,"contenteditable")==="false",N=(fe,_e)=>fe.dom.compareDocumentPosition(_e.dom),z=(fe,_e)=>{const et=gc(fe);fc(_e,et)},X=fe=>{const _e=Wo(fe);return _o(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],_e)},Q=fe=>ur(fe)?Tr(fe,"lang"):pe.none();return{up:le({selector:Is,closest:Ir,predicate:Qe,all:Bs}),down:le({selector:jr,predicate:la}),styles:le({get:Vu,getRaw:_l,set:es,remove:Fa}),attrs:le({get:vi,set:Os,remove:Zo,copyTo:z}),insert:le({before:Yc,after:ec,afterAll:_d,append:jo,appendAll:Xn,prepend:ca,wrap:Fi}),remove:le({unwrap:Rm,remove:Es}),create:le({nu:Et.fromTag,clone:l,text:Et.fromText}),query:le({comparePosition:N,prevSibling:Kl,nextSibling:Qa}),property:le({children:No,name:Wo,parent:wa,document:m,isText:bi,isComment:Mo,isElement:ur,isSpecial:X,getLanguage:Q,getText:wc,setText:Qu,isBoundary:b,isEmptyTag:y,isNonEditable:k}),eq:Qo,is:Li}};const ed=(l,m,b,y)=>{const k=b[0],N=b.slice(1);return y(l,m,k,N)},hS=(l,m,b)=>b.length>0?ed(l,m,b,Qm):pe.none(),Qm=(l,m,b,y)=>{const k=m(l,b);return Sr(y,(N,z)=>{const X=m(l,z);return R4(l,N,X)},k)},R4=(l,m,b)=>m.bind(y=>b.filter(kn(l.eq,y))),x0=(l,m)=>kn(l.eq,m),R1=(l,m,b,y=Nn)=>{const k=[m].concat(l.up().all(m)),N=[b].concat(l.up().all(b)),z=_e=>pl(_e,y).fold(()=>_e,kt=>_e.slice(0,kt+1)),X=z(k),Q=z(N),fe=U(X,_e=>vt(Q,x0(l,_e)));return{firstpath:X,secondpath:Q,shared:fe}},D4=hS,mu=R1,E0=Bo(),op=(l,m)=>D4(E0,(b,y)=>l(y),m),Dy=(l,m,b)=>mu(E0,l,m,b),zg=l=>Is(l,"table"),T0=(l,m,b)=>{const y=k=>N=>b!==void 0&&b(N)||Qo(N,k);return Qo(l,m)?pe.some({boxes:pe.some([l]),start:l,finish:m}):zg(l).bind(k=>zg(m).bind(N=>{if(Qo(k,N))return pe.some({boxes:Hg(k,l,m),start:l,finish:m});if(Am(k,N)){const z=Ui(m,"td,th",y(k)),X=z.length>0?z[z.length-1]:m;return pe.some({boxes:O1(k,l,k,m,N),start:l,finish:X})}else if(Am(N,k)){const z=Ui(l,"td,th",y(N)),X=z.length>0?z[z.length-1]:l;return pe.some({boxes:O1(N,l,k,m,N),start:l,finish:X})}else return Dy(l,m).shared.bind(z=>Ir(z,"table",b).bind(X=>{const Q=Ui(m,"td,th",y(X)),fe=Q.length>0?Q[Q.length-1]:m,_e=Ui(l,"td,th",y(X)),et=_e.length>0?_e[_e.length-1]:l;return pe.some({boxes:O1(X,l,k,m,N),start:et,finish:fe})}))}))},ef=(l,m)=>{const b=jr(l,m);return b.length>0?pe.some(b):pe.none()},My=(l,m)=>U(l,b=>ct(b,m)),Ny=(l,m,b)=>tc(l,m).bind(y=>tc(l,b).bind(k=>op(zg,[y,k]).map(N=>({first:y,last:k,table:N})))),Dl=(l,m)=>Is(l,"table").bind(b=>tc(b,m).bind(y=>T0(y,l).bind(k=>k.boxes.map(N=>({boxes:N,start:k.start,finish:k.finish}))))),el=(l,m,b,y,k)=>My(l,k).bind(N=>O4(N,m,b).bind(z=>Dl(z,y))),at=(l,m)=>ef(l,m),pS=(l,m,b)=>Ny(l,m,b).bind(y=>{const k=Q=>Qo(l,Q),N="thead,tfoot,tbody,table",z=Is(y.first,N,k),X=Is(y.last,N,k);return z.bind(Q=>X.bind(fe=>Qo(Q,fe)?Wf(y.table,y.first,y.last):pe.none()))}),ar=Ot,bS=l=>{const m=(y,k)=>Tr(y,k).exists(N=>parseInt(N,10)>1),b=y=>m(y,"rowspan")||m(y,"colspan");return l.length>0&&Vo(l,b)?pe.some(l):pe.none()},vS=(l,m,b)=>m.length<=1?pe.none():pS(l,b.firstSelectedSelector,b.lastSelectedSelector).map(y=>({bounds:y,cells:m})),D1="data-mce-selected",Py="td["+D1+"],th["+D1+"]",vs="["+D1+"]",By="data-mce-first-selected",sp="td["+By+"],th["+By+"]",M1="data-mce-last-selected",N1="td["+M1+"],th["+M1+"]",$y=vs,ki={selected:D1,selectedSelector:Py,firstSelected:By,firstSelectedSelector:sp,lastSelected:M1,lastSelectedSelector:N1},Ks=(l,m,b)=>({element:b,mergable:vS(m,l,ki),unmergable:bS(l),selection:ar(l)}),yS=(l,m,b)=>({element:l,clipboard:m,generators:b}),Qs=(l,m,b,y)=>({selection:ar(l),clipboard:b,generators:y}),P1=l=>xa(l).bind(m=>at(m,ki.firstSelectedSelector)).fold(le(l),m=>m[0]),cc=l=>(m,b)=>{const y=Wo(m),k=y==="col"||y==="colgroup"?P1(m):m;return Ir(k,l,b)},Zf=cc("th,td,caption"),Ml=cc("th,td"),tf=l=>mS(l.model.table.getSelectedCells()),IM=l=>Co(tf(l),m=>ct(m,ki.selectedSelector)),LM=l=>xa(l[0]).map(m=>{const b=Bn(m,$y);return Uf(b),[b]}),M4=(l,m)=>fn(m,b=>l.selection.serializer.serialize(b.dom,{})).join(""),td=(l,m)=>{const b=l.getDoc(),y=ce(Et.fromDom(l.getBody())),k=Et.fromTag("div",b);Os(k,"data-mce-bogus","all"),_r(k,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const N=be(y);Xn(k,m),jo(N,k);const z=k.dom.innerText;return Es(k),z},FM=(l,m)=>{l.on("BeforeGetContent",b=>{const y=k=>{b.preventDefault(),LM(k).each(N=>{const z=b.format==="text"?td(l,N):M4(l,N);b.content=z})};if(b.selection===!0){const k=IM(l);k.length>=1&&y(k)}}),l.on("BeforeSetContent",b=>{if(b.selection===!0&&b.paste===!0){const y=tf(l);Te(y).each(k=>{xa(k).each(N=>{const z=Co(iu(b.content),Q=>Wo(Q)!=="meta"),X=Er("table");if($M(l)&&z.length===1&&X(z[0])){b.preventDefault();const Q=Et.fromDom(l.getDoc()),fe=cu(Q),_e=yS(k,z[0],fe);m.pasteCells(N,_e).each(()=>{l.focus()})}})})}})},ni=(l,m)=>({element:l,offset:m}),Ua=(l,m,b)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?b(m).bind(y=>Ua(l,y,b).orThunk(()=>pe.some(y))):pe.none(),rp=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,_0=(l,m)=>{const b=Ua(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(b))return ni(b,rp(l,b));const y=l.property().children(b);return y.length>0?_0(l,y[y.length-1]):ni(b,rp(l,b))},N4=_0,B1=Bo(),jf=l=>N4(B1,l),Vg=(l,m)=>{js(l)||Gh(l).each(y=>{const k=y.value/2;Ze(l,k,y.unit),Ze(m,k,y.unit)})},Jd=l=>fn(l,le(0)),qf=(l,m,b,y,k)=>k(l.slice(0,m)).concat(y).concat(k(l.slice(b))),Gf=l=>(m,b,y,k)=>{if(l(y)){const N=Math.max(k,m[b]-Math.abs(y)),z=Math.abs(N-m[b]);return y>=0?z:-z}else return y},$1=Gf(l=>l<0),CS=Gf(We),wS=()=>{const l=(X,Q,fe,_e,et)=>{const kt=$1(X,Q,_e,et);return qf(X,Q,fe+1,[kt,0],Jd)},m=(X,Q,fe,_e)=>{const et=(100+fe)/100,kt=Math.max(_e,(X[Q]+fe)/et);return fn(X,(it,dt)=>(dt===Q?kt:it/et)-it)},b=(X,Q,fe,_e,et,kt)=>kt?m(X,Q,_e,et):l(X,Q,fe,_e,et);return{resizeTable:(X,Q)=>X(Q),clampTableDelta:$1,calcLeftEdgeDeltas:b,calcMiddleDeltas:(X,Q,fe,_e,et,kt,it)=>b(X,fe,_e,et,kt,it),calcRightEdgeDeltas:(X,Q,fe,_e,et,kt)=>{if(kt)return m(X,fe,_e,et);{const it=$1(X,fe,_e,et);return Jd(X.slice(0,fe)).concat([it])}},calcRedestributedWidths:(X,Q,fe,_e)=>{if(_e){const kt=(Q+fe)/Q,it=fn(X,dt=>dt/kt);return{delta:kt*100-100,newSizes:it}}else return{delta:fe,newSizes:X}}}},k0=()=>{const l=(z,X,Q,fe,_e)=>{const et=fe>=0?Q:X,kt=CS(z,et,fe,_e);return qf(z,X,Q+1,[kt,-kt],Jd)};return{resizeTable:(z,X,Q)=>{Q&&z(X)},clampTableDelta:(z,X,Q,fe,_e)=>{if(_e){if(Q>=0)return Q;{const et=Ge(z,(kt,it)=>kt+it-fe,0);return Math.max(-et,Q)}}else return $1(z,X,Q,fe)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(z,X,Q,fe,_e,et)=>l(z,Q,fe,_e,et),calcRightEdgeDeltas:(z,X,Q,fe,_e,et)=>{if(et)return Jd(z);{const kt=fe/z.length;return fn(z,le(kt))}},calcRedestributedWidths:(z,X,Q,fe)=>({delta:0,newSizes:z})}},Ug=l=>Vn.fromTable(l).grid,ap=Er("th"),A0=l=>Vo(l,m=>ap(m.element)),SS=(l,m)=>l&&m?"sectionCells":l?"section":"cells",xS=l=>{const m=l.section==="thead",b=Od(I1(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||b?{type:"header",subType:SS(m,b)}:{type:"body"}},I1=l=>{const m=Co(l,b=>ap(b.element));return m.length===0?pe.some("td"):m.length===l.length?pe.some("th"):pe.none()},ES=l=>{const m=fn(l,k=>xS(k).type),b=_o(m,"header"),y=_o(m,"footer");if(!b&&!y)return pe.some("body");{const k=_o(m,"body");return b&&!k&&!y?pe.some("header"):!b&&!k&&y?pe.some("footer"):pe.none()}},TS=l=>nr(l.all,m=>{const b=xS(m);return b.type==="header"?pe.from(b.subType):pe.none()}),Wg=(l,m,b)=>fr(b(l.element,m),!0,l.isLocked),Iy=(l,m)=>l.section!==m?hc(l.element,l.cells,m,l.isNew):l,_S=()=>({transformRow:Iy,transformCell:(l,m,b)=>{const y=b(l.element,m),k=Wo(y)!=="td"?kd(y,"td"):y;return fr(k,l.isNew,l.isLocked)}}),O0=()=>({transformRow:Iy,transformCell:Wg}),Qd=()=>({transformRow:(l,m)=>Iy(l,m==="thead"?"tbody":m),transformCell:Wg}),L1={getTableSectionType:(l,m)=>{const b=Vn.fromTable(l);switch(TS(b).getOr(m)){case"section":return _S();case"sectionCells":return O0();case"cells":return Qd()}},section:_S,sectionCells:O0,cells:Qd,fallback:()=>({transformRow:Ot,transformCell:Wg})},cp=(l,m,b,y)=>{b===y?Zo(l,m):Os(l,m,b)},Kf=(l,m,b)=>{Ja(vn(l,m)).fold(()=>ca(l,b),y=>ec(y,b))},Ly=(l,m)=>{const b=Zn(l,m).getOrThunk(()=>{const y=Et.fromTag(m,wl(l).dom);return m==="thead"?Kf(l,"caption,colgroup",y):m==="colgroup"?Kf(l,"caption",y):jo(l,y),y});return Hi(b),b},R0=(l,m)=>{const b=[],y=[],k=it=>fn(it,dt=>{dt.isNew&&b.push(dt.element);const zt=dt.element;return Hi(zt),Je(dt.cells,nt=>{nt.isNew&&y.push(nt.element),cp(nt.element,"colspan",nt.colspan,1),cp(nt.element,"rowspan",nt.rowspan,1),jo(zt,nt.element)}),zt}),N=it=>gs(it,dt=>fn(dt.cells,zt=>(cp(zt.element,"span",zt.colspan,1),zt.element))),z=(it,dt)=>{const zt=Ly(l,dt),rn=(dt==="colgroup"?N:k)(it);Xn(zt,rn)},X=it=>{Zn(l,it).each(Es)},Q=(it,dt)=>{it.length>0?z(it,dt):X(dt)},fe=[],_e=[],et=[],kt=[];return Je(m,it=>{switch(it.section){case"thead":fe.push(it);break;case"tbody":_e.push(it);break;case"tfoot":et.push(it);break;case"colgroup":kt.push(it);break}}),Q(kt,"colgroup"),Q(fe,"thead"),Q(_e,"tbody"),Q(et,"tfoot"),{newRows:b,newCells:y}},ip=l=>fn(l,m=>{const b=zi(m.element);return Je(m.cells,y=>{const k=$r(y.element);cp(k,"colspan",y.colspan,1),cp(k,"rowspan",y.rowspan,1),jo(b,k)}),b}),B4=(l,m)=>fn(l,b=>nc(b,m)),AS=(l,m)=>l[m],$4=(l,m)=>{if(l.length===0)return 0;const b=l[0];return pl(l,k=>!m(b.element,k.element)).getOr(l.length)},HM=(l,m,b,y)=>{const k=AS(l,m),N=k.section==="colgroup",z=$4(k.cells.slice(b),y),X=N?1:$4(B4(l.slice(m),b),y);return{colspan:z,rowspan:X}},zM=(l,m)=>{const b=fn(l,k=>fn(k.cells,Nn)),y=(k,N,z,X)=>{for(let Q=k;Q<k+z;Q++)for(let fe=N;fe<N+X;fe++)b[Q][fe]=!0};return fn(l,(k,N)=>{const z=gs(k.cells,(X,Q)=>{if(b[N][Q]===!1){const fe=HM(l,N,Q,m);return y(N,Q,fe.rowspan,fe.colspan),[Fu(X.element,fe.rowspan,fe.colspan,X.isNew)]}else return[]});return Ys(k.element,z,k.section,k.isNew)})},F1=(l,m,b)=>{const y=[];Je(l.colgroups,k=>{const N=[];for(let z=0;z<l.grid.columns;z++){const X=Vn.getColumnAt(l,z).map(Q=>fr(Q.element,b,!1)).getOrThunk(()=>fr(m.colGap(),!0,!1));N.push(X)}y.push(hc(k.element,N,"colgroup",b))});for(let k=0;k<l.grid.rows;k++){const N=[];for(let Q=0;Q<l.grid.columns;Q++){const fe=Vn.getAt(l,k,Q).map(_e=>fr(_e.element,b,_e.isLocked)).getOrThunk(()=>fr(m.gap(),!0,!1));N.push(fe)}const z=l.all[k],X=hc(z.element,N,z.section,b);y.push(X)}return y},VM=(l,m)=>F1(l,m,!1),D0=l=>zM(l,Qo),Yf=(l,m)=>nr(l.all,b=>U(b.cells,y=>Qo(m,y.element))),H1=(l,m,b)=>{const y=fn(m.selection,N=>Wu(N).bind(z=>Yf(l,z)).filter(b)),k=sr(y);return Ph(k.length>0,k)},Ns=(l,m,b,y,k)=>(N,z,X,Q)=>{const fe=Vn.fromTable(N),_e=pe.from(Q==null?void 0:Q.section).getOrThunk(L1.fallback);return m(fe,z).map(kt=>{const it=VM(fe,X),dt=l(it,kt,Qo,k(X),_e),zt=ps(dt.grid),nt=D0(dt.grid);return{info:kt,grid:nt,cursor:dt.cursor,lockedColumns:zt}}).bind(kt=>{const it=R0(N,kt.grid),dt=pe.from(Q==null?void 0:Q.sizing).getOrThunk(()=>V.getTableSize(N)),zt=pe.from(Q==null?void 0:Q.resize).getOrThunk(k0);return b(N,kt.grid,kt.info,{sizing:dt,resize:zt,section:_e}),y(N),Zo(N,$c),kt.lockedColumns.length>0&&Os(N,$c,kt.lockedColumns.join(",")),pe.some({cursor:kt.cursor,newRows:it.newRows,newCells:it.newCells})})},OS=(l,m)=>Wu(m.element).bind(b=>Yf(l,b).map(y=>({...y,generators:m.generators,clipboard:m.clipboard}))),lp=(l,m)=>H1(l,m,We).map(b=>({cells:b,generators:m.generators,clipboard:m.clipboard})),up=(l,m)=>m.mergable,I4=(l,m)=>m.unmergable,oi=(l,m)=>H1(l,m,We),si=(l,m)=>H1(l,m,b=>!b.isLocked),RS=(l,m)=>Yf(l,m).exists(b=>!b.isLocked),Zg=(l,m)=>Vo(m,b=>RS(l,b)),Xf=(l,m)=>up(l,m).filter(b=>Zg(l,b.cells)),Jf=(l,m)=>I4(l,m).filter(b=>Zg(l,b)),L4=(l,m,b,y)=>{const k=Ar(l).rows;if(k.length===0)return l;for(let N=m.startRow;N<=m.finishRow;N++)for(let z=m.startCol;z<=m.finishCol;z++){const X=k[N],Q=nc(X,z).isLocked;Tn(X,z,fr(y(),!1,Q))}return l},Yr=(l,m,b,y)=>{const k=Ar(l).rows;let N=!0;for(let z=0;z<k.length;z++)for(let X=0;X<vc(k[0]);X++){const Q=k[z],fe=nc(Q,X),_e=fe.element,et=b(_e,m);et&&!N?Tn(Q,X,fr(y(),!0,fe.isLocked)):et&&(N=!1)}return l},M0=(l,m)=>Ge(l,(b,y)=>vt(b,k=>m(k.element,y.element))?b:b.concat([y]),[]),tl=(l,m,b,y)=>(m>0&&m<l[0].cells.length&&Je(l,k=>{const N=k.cells[m-1];let z=0;const X=y();for(;k.cells.length>m+z&&b(N.element,k.cells[m+z].element);)Tn(k,m+z,fr(X,!0,k.cells[m+z].isLocked)),z++}),l),Fy=(l,m,b,y)=>{const k=Ar(l).rows;if(m>0&&m<k.length){const N=k[m-1].cells,z=M0(N,b);Je(z,X=>{let Q=pe.none();for(let fe=m;fe<k.length;fe++)for(let _e=0;_e<vc(k[0]);_e++){const et=k[fe],kt=nc(et,_e);b(kt.element,X.element)&&(Q.isNone()&&(Q=pe.some(y())),Q.each(dt=>{Tn(et,_e,fr(dt,!0,kt.isLocked))}))}})}return l},DS=l=>{const m=N=>N(l),b=le(l),y=()=>k,k={tag:!0,inner:l,fold:(N,z)=>z(l),isValue:We,isError:Nn,map:N=>nd.value(N(l)),mapError:y,bind:m,exists:m,forall:m,getOr:b,or:y,getOrThunk:b,orThunk:y,getOrDie:b,each:N=>{N(l)},toOptional:()=>pe.some(l)};return k},Qf=l=>{const m=()=>b,b={tag:!1,inner:l,fold:(y,k)=>y(l),isValue:Nn,isError:We,map:m,mapError:y=>nd.error(y(l)),bind:m,exists:Nn,forall:We,getOr:Ot,or:Ot,getOrThunk:Xo,orThunk:Xo,getOrDie:bn(String(l)),each:Ae,toOptional:pe.none};return b},nd={value:DS,error:Qf,fromOption:(l,m)=>l.fold(()=>Qf(m),DS)},Nl=(l,m,b)=>{if(l.row>=m.length||l.column>vc(m[0]))return nd.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const y=m.slice(l.row),k=y[0].cells.slice(l.column),N=vc(b[0]),z=b.length;return nd.value({rowDelta:y.length-z,colDelta:k.length-N})},Hy=(l,m)=>{const b=vc(l[0]),y=vc(m[0]);return{rowDelta:0,colDelta:b-y}},z1=(l,m)=>{const b=l.length,y=m.length;return{rowDelta:b-y,colDelta:0}},od=(l,m,b,y)=>{const k=m.section==="colgroup"?b.col:b.cell;return Jo(l,N=>fr(k(),!0,y(N)))},dp=(l,m,b,y)=>{const k=l[l.length-1];return l.concat(Jo(m,()=>{const N=k.section==="colgroup"?b.colgroup:b.row,z=za(k,N,Ot),X=od(z.cells.length,z,b,Q=>As(y,Q.toString()));return Ls(z,X)}))},so=(l,m,b,y)=>fn(l,k=>{const N=od(m,k,b,Nn);return zm(k,y,N)}),Sc=(l,m,b)=>fn(l,y=>Ge(b,(k,N)=>{const z=od(1,y,m,We)[0];return zh(k,N,z)},y)),nl=(l,m,b)=>{const y=m.colDelta<0?so:Ot,k=m.rowDelta<0?dp:Ot,N=ps(l),z=vc(l[0]),X=vt(N,_e=>_e===z-1),Q=y(l,Math.abs(m.colDelta),b,X?z-1:z),fe=ps(Q);return k(Q,Math.abs(m.rowDelta),b,gn(fe,We))},zy=(l,m,b,y)=>{const k=nc(l[m],b),N=kn(y,k.element),z=l[m];return l.length>1&&vc(z)>1&&(b>0&&N(_a(z,b-1))||b<z.cells.length-1&&N(_a(z,b+1))||m>0&&N(_a(l[m-1],b))||m<l.length-1&&N(_a(l[m+1],b)))},us=(l,m,b,y,k,N)=>{const z=l.row,X=l.column,Q=b.length,fe=vc(b[0]),_e=z+Q,et=X+fe+N.length,kt=gn(N,We);for(let it=z;it<_e;it++){let dt=0;for(let zt=X;zt<et;zt++){if(kt[zt]){dt++;continue}zy(m,it,zt,k)&&Yr(m,_a(m[it],zt),k,y.cell);const nt=zt-X-dt,rn=nc(b[it-z],nt),qe=rn.element,Pt=y.replace(qe);Tn(m[it],zt,fr(Pt,!0,rn.isLocked))}}return m},Vy=(l,m,b)=>{const y=vc(m[0]),k=Ar(m).cols.length+l.row,N=Jo(y-l.column,X=>X+l.column),z=U(N,X=>Vo(b,Q=>Q!==X)).getOr(y-1);return{row:k,column:z}},eg=(l,m,b)=>Co(b,y=>y>=l.column&&y<=vc(m[0])+l.column),qg=(l,m,b,y,k)=>{const N=ps(m),z=Vy(l,m,N),X=Ar(b).rows,Q=eg(z,X,N);return Nl(z,m,X).map(_e=>{const et={..._e,colDelta:_e.colDelta-Q.length},kt=nl(m,et,y),it=ps(kt),dt=eg(z,X,it);return us(z,kt,X,y,k,dt)})},MS=(l,m,b,y,k)=>{tl(m,l,k,y.cell);const N=z1(b,m),z=nl(b,N,y),X=z1(m,z),Q=nl(m,X,y);return fn(Q,(fe,_e)=>zm(fe,l,z[_e].cells))},NS=(l,m,b,y,k)=>{Fy(m,l,k,y.cell);const N=ps(m),z=Hy(m,b),X={...z,colDelta:z.colDelta-N.length},Q=nl(m,X,y),{cols:fe,rows:_e}=Ar(Q),et=ps(Q),kt=Hy(b,m),it={...kt,colDelta:kt.colDelta+et.length},dt=Sc(b,y,et),zt=nl(dt,it,y);return[...fe,..._e.slice(0,l),...zt,..._e.slice(l,_e.length)]},ys=(l,m,b,y)=>za(l,k=>y(k,b),m),mp=(l,m,b,y,k)=>{const{rows:N,cols:z}=Ar(l),X=N.slice(0,m),Q=N.slice(m),fe=ys(N[b],(_e,et)=>m>0&&m<N.length&&y(_a(N[m-1],et),_a(N[m],et))?nc(N[m],et):fr(k(_e.element,y),!0,_e.isLocked),y,k);return[...z,...X,fe,...Q]},V1=(l,m,b,y,k,N,z)=>{if(b==="colgroup"||!y){const X=nc(l,k);return fr(z(X.element,N),!0,!1)}else return nc(l,m)},PS=(l,m,b,y,k)=>fn(l,N=>{const z=m>0&&m<vc(N)&&y(_a(N,m-1),_a(N,m)),X=V1(N,m,N.section,z,b,y,k);return zh(N,m,X)}),fp=(l,m)=>gs(l,b=>{const y=b.cells,k=Sr(m,(N,z)=>z>=0&&z<N.length?N.slice(0,z).concat(N.slice(z+1)):N,y);return k.length>0?[hc(b.element,k,b.section,b.isNew)]:[]}),Pl=(l,m,b)=>{const{rows:y,cols:k}=Ar(l);return[...k,...y.slice(0,m),...y.slice(b+1)]},F4=(l,m,b,y)=>_a(l[m],b)!==void 0&&m>0&&y(_a(l[m-1],b),_a(l[m],b)),U1=(l,m,b)=>m>0&&b(_a(l,m-1),_a(l,m)),Mt=(l,m,b,y)=>F4(l,m,b,y)||U1(l[m],b,y),H4=(l,m)=>Vo(m,Ot)&&A0(l.cells)?We:(y,k,N)=>!(Wo(y.element)==="th"&&m[N]),z4=(l,m)=>Vo(m,Ot)&&A0(l)?We:(y,k,N)=>!(Wo(y.element)==="th"&&m[k]),Uy=(l,m,b,y)=>{const k=z=>z==="row"?Uu(m):js(m),N=z=>k(z)?`${z}group`:z;return l?ap(m)?N(b):null:y&&ap(m)?N(b==="row"?"col":"row"):null},BS=(l,m)=>(b,y,k)=>pe.some(Uy(l,b.element,"col",m[k])),V4=(l,m)=>(b,y)=>pe.some(Uy(l,b.element,"row",m[y])),W1=(l,m,b)=>fr(b(l.element,m),!0,l.isLocked),Gg=(l,m,b,y,k,N,z)=>{const X=Q=>vt(m,fe=>b(Q.element,fe.element));return fn(l,(Q,fe)=>Ld(Q,(_e,et)=>{if(X(_e)){const kt=z(_e,fe,et)?k(_e,b,y):_e;return N(kt,fe,et).each(it=>{Iu(kt.element,{scope:pe.from(it)})}),kt}else return _e}))},Kg=(l,m,b)=>gs(l,(y,k)=>Mt(l,k,m,b)?[]:[nc(y,m)]),U4=(l,m,b)=>{const y=l[m];return gs(y.cells,(k,N)=>Mt(l,m,N,b)?[]:[k])},Z1=(l,m,b,y,k)=>{const N=Ar(l).rows,z=gs(m,_e=>Kg(N,_e,y)),X=fn(N,_e=>A0(_e.cells)),Q=z4(z,X),fe=V4(b,X);return Gg(l,z,y,k,W1,fe,Q)},$S=(l,m,b,y,k,N,z)=>{const{cols:X,rows:Q}=Ar(l),fe=Q[m[0]],_e=gs(m,nt=>U4(Q,nt,k)),et=fn(fe.cells,(nt,rn)=>A0(Kg(Q,rn,k))),kt=[...Q];Je(m,nt=>{kt[nt]=z.transformRow(Q[nt],b)});const it=[...X,...kt],dt=H4(fe,et),zt=BS(y,et);return Gg(it,_e,k,N,z.transformCell,zt,dt)},j1=(l,m,b,y)=>{const k=Ar(l).rows,N=fn(m,z=>nc(k[z.row],z.column));return Gg(l,N,b,y,W1,pe.none,We)},zc={generate:l=>{if(!Ee(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],b={};return Je(l,(y,k)=>{const N=Qt(y);if(N.length!==1)throw new Error("one and only one name per case");const z=N[0],X=y[z];if(b[z]!==void 0)throw new Error("duplicate key detected:"+z);if(z==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ee(X))throw new Error("case arguments must be an array");m.push(z),b[z]=(...Q)=>{const fe=Q.length;if(fe!==X.length)throw new Error("Wrong number of arguments to case "+z+". Expected "+X.length+" ("+X+"), got "+fe);return{fold:(...et)=>{if(et.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+et.length);return et[k].apply(null,Q)},match:et=>{const kt=Qt(et);if(m.length!==kt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+kt.join(","));if(!Vo(m,dt=>_o(kt,dt)))throw new Error("Not all branches were specified when using match. Specified: "+kt.join(", ")+`
Required: `+m.join(", "));return et[z].apply(null,Q)},log:et=>{console.log(et,{constructors:m,constructor:z,params:Q})}}}}),b}},sd={...zc.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},j4=(l,m)=>l.length===0?sd.none():l.length===1?sd.only(0):m===0?sd.left(0,1):m===l.length-1?sd.right(m-1,m):m>0&&m<l.length-1?sd.middle(m-1,m,m+1):sd.none(),q4=(l,m,b,y,k)=>{const N=l.slice(0),z=j4(l,m),X=le(fn(N,le(0))),Q=kt=>y.singleColumnWidth(N[kt],b),fe=(kt,it)=>k.calcLeftEdgeDeltas(N,kt,it,b,y.minCellWidth(),y.isRelative),_e=(kt,it,dt)=>k.calcMiddleDeltas(N,kt,it,dt,b,y.minCellWidth(),y.isRelative),et=(kt,it)=>k.calcRightEdgeDeltas(N,kt,it,b,y.minCellWidth(),y.isRelative);return z.fold(X,Q,fe,_e,et)},G4=(l,m,b)=>{let y=0;for(let k=l;k<m;k++)y+=b[k]!==void 0?b[k]:0;return y},Wy=(l,m)=>{const b=Vn.justCells(l);return fn(b,y=>{const k=G4(y.column,y.column+y.colspan,m);return{element:y.element,width:k,colspan:y.colspan}})},IS=(l,m)=>{const b=Vn.justColumns(l);return fn(b,(y,k)=>({element:y.element,width:m[k],colspan:y.colspan}))},K4=(l,m)=>fn(l.all,(b,y)=>({element:b.element,height:m[y]})),LS=l=>Sr(l,(m,b)=>m+b,0),Y4=(l,m)=>Vn.hasColumns(l)?IS(l,m):Wy(l,m),Yg=(l,m,b)=>{const y=Y4(l,m);Je(y,k=>{b.setElementWidth(k.element,k.width)})},N0=(l,m,b,y,k)=>{const N=Vn.fromTable(l),z=k.getCellDelta(m),X=k.getWidths(N,k),Q=b===N.grid.columns-1,fe=y.clampTableDelta(X,b,z,k.minCellWidth(),Q),_e=q4(X,b,fe,k,y),et=fn(_e,(kt,it)=>kt+X[it]);Yg(N,et,k),y.resizeTable(k.adjustTableWidth,fe,Q)},gp=(l,m,b)=>{const y=Vn.fromTable(l),k=ti(y,l),N=fn(k,(Q,fe)=>b===fe?Math.max(m+Q,Im()):Q),z=K4(y,N);Je(z,Q=>{Ud(Q.element,Q.height)}),Je(Vn.justCells(y),Q=>{Zm(Q.element)});const X=LS(N);Ud(l,X)},Zy=(l,m,b,y,k)=>{const N=Vn.generate(m),z=y.getWidths(N,y),X=y.pixelWidth(),{newSizes:Q,delta:fe}=k.calcRedestributedWidths(z,X,b.pixelDelta,y.isRelative);Yg(N,Q,y),y.adjustTableWidth(fe)},FS=(l,m,b,y)=>{const k=Vn.generate(m),N=y.getWidths(k,y);Yg(k,N,y)},nf=l=>Ge(l,(b,y)=>vt(b,N=>N.column===y.column)?b:b.concat([y]),[]).sort((b,y)=>b.column-y.column),P0=Er("col"),B0=Er("colgroup"),jy=l=>Wo(l)==="tr"||B0(l),qy=l=>{const m=ua(l,"colspan",1),b=ua(l,"rowspan",1);return{element:l,colspan:m,rowspan:b}},Xg=(l,m=qy)=>{const b=X=>P0(X.element)?l.col(X):l.cell(X),y=X=>B0(X.element)?l.colgroup(X):l.row(X),k=X=>{if(jy(X))return y({element:X});{const Q=X,fe=b(m(Q));return N=pe.some({item:Q,replacement:fe}),fe}};let N=pe.none();return{getOrInit:(X,Q)=>N.fold(()=>k(X),fe=>Q(X,fe.item)?fe.replacement:k(X))}},X4=l=>m=>{const b=[],y=(z,X)=>U(b,Q=>X(Q.item,z)),k=z=>{const X=l==="td"?{scope:null}:{},Q=m.replace(z,l,X);return b.push({item:z,sub:Q}),Q};return{replaceOrInit:(z,X)=>{if(jy(z)||P0(z))return z;{const Q=z;return y(Q,X).fold(()=>k(Q),fe=>X(z,fe.item)?fe.sub:k(Q))}}}},Gy=l=>Tr(l,"scope").map(m=>m.substr(0,3)),Da={modification:Xg,transform:X4,merging:l=>({unmerge:y=>{const k=Gy(y);return k.each(N=>Os(y,"scope",N)),()=>{const N=l.cell({element:y,colspan:1,rowspan:1});return Fa(N,"width"),Fa(y,"width"),k.each(z=>Os(N,"scope",z)),N}},merge:y=>{const k=()=>{const N=sr(fn(y,Gy));if(N.length===0)return pe.none();{const z=N[0],X=["row","col"];return vt(N,fe=>fe!==z&&_o(X,fe))?pe.none():pe.from(z)}};return Fa(y[0],"width"),k().fold(()=>Zo(y[0],"scope"),N=>Os(y[0],"scope",N+"group")),le(y[0])}})},J4=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ie=(l,m)=>{const b=l.property().name(m);return _o(["ol","ul"],b)},em=(l,m)=>{const b=l.property().name(m);return _o(J4,b)},Q4=(l,m)=>_o(["br","img","hr","input"],l.property().name(m)),$0=Bo(),hp=l=>em($0,l),fu=l=>Ie($0,l),HS=l=>Q4($0,l),zS=l=>{const m=Er("br"),b=Q=>Vo(Q,fe=>m(fe)||bi(fe)&&wc(fe).trim().length===0),y=Q=>Wo(Q)==="li"||Qe(Q,fu).isSome(),k=Q=>Qa(Q).map(fe=>hp(fe)?!0:HS(fe)?Wo(fe)!=="img":!1).getOr(!1),N=Q=>Gm(Q).bind(fe=>{const _e=k(fe);return wa(fe).map(et=>_e===!0||y(et)||m(fe)||hp(et)&&!Qo(Q,et)?[]:[Et.fromTag("br")])}).getOr([]),X=(()=>{const Q=gs(l,fe=>{const _e=No(fe);return b(_e)?[]:_e.concat(N(fe))});return Q.length===0?[Et.fromTag("br")]:Q})();Hi(l[0]),Xn(l[0],X)},I0=l=>Fg(l,!0),L0=l=>{Zu(l).length===0&&Es(l)},F0=(l,m)=>({grid:l,cursor:m}),VS=l=>nr(l,m=>nr(m.cells,b=>{const y=b.element;return Ph(I0(y),y)})),ek=(l,m,b)=>{var y,k;const N=Ar(l).rows;return pe.from((k=(y=N[m])===null||y===void 0?void 0:y.cells[b])===null||k===void 0?void 0:k.element).filter(I0).orThunk(()=>VS(N))},Vc=(l,m,b)=>{const y=ek(l,m,b);return F0(l,y)},H0=l=>Ge(l,(b,y)=>vt(b,N=>N.row===y.row)?b:b.concat([y]),[]).sort((b,y)=>b.row-y.row),US=(l,m,b,y)=>{const k=m[0].row,N=H0(m),z=Sr(N,(X,Q)=>({grid:mp(X.grid,k,Q.row+X.delta,b,y.getOrInit),delta:X.delta+1}),{grid:l,delta:0}).grid;return Vc(z,k,m[0].column)},tk=(l,m,b,y)=>{const k=H0(m),N=k[k.length-1],z=N.row+N.rowspan,X=Sr(k,(Q,fe)=>mp(Q,z,fe.row,b,y.getOrInit),l);return Vc(X,z,m[0].column)},nk=(l,m,b,y)=>{const k=m.details,N=nf(k),z=N[0].column,X=Sr(N,(Q,fe)=>({grid:PS(Q.grid,z,fe.column+Q.delta,b,y.getOrInit),delta:Q.delta+1}),{grid:l,delta:0}).grid;return Vc(X,k[0].row,z)},WS=(l,m,b,y)=>{const k=m.details,N=k[k.length-1],z=N.column+N.colspan,X=nf(k),Q=Sr(X,(fe,_e)=>PS(fe,z,_e.column,b,y.getOrInit),l);return Vc(Q,k[0].row,z)},z0=(l,m,b,y)=>{const k=nf(m),N=fn(k,X=>X.column),z=Z1(l,N,!0,b,y.replaceOrInit);return Vc(z,m[0].row,m[0].column)},ok=(l,m,b,y)=>{const k=j1(l,m,b,y.replaceOrInit);return Vc(k,m[0].row,m[0].column)},ZS=(l,m,b,y)=>{const k=nf(m),N=fn(k,X=>X.column),z=Z1(l,N,!1,b,y.replaceOrInit);return Vc(z,m[0].row,m[0].column)},xs=(l,m,b,y)=>{const k=j1(l,m,b,y.replaceOrInit);return Vc(k,m[0].row,m[0].column)},pp=(l,m)=>(b,y,k,N,z)=>{const X=H0(y),Q=fn(X,_e=>_e.row),fe=$S(b,Q,l,m,k,N.replaceOrInit,z);return Vc(fe,y[0].row,y[0].column)},jS=pp("thead",!0),qS=pp("tbody",!1),V0=pp("tfoot",!1),ic=(l,m,b,y)=>{const k=nf(m.details),N=fp(l,fn(k,X=>X.column)),z=N.length>0?N[0].cells.length-1:0;return Vc(N,k[0].row,Math.min(k[0].column,z))},Ai=(l,m,b,y)=>{const k=H0(m),N=Pl(l,k[0].row,k[k.length-1].row),z=Math.max(Ar(N).rows.length-1,0);return Vc(N,Math.min(m[0].row,z),m[0].column)},GS=(l,m,b,y)=>{const k=m.cells;zS(k);const N=L4(l,m.bounds,b,y.merge(k));return F0(N,pe.from(k[0]))},KS=(l,m,b,y)=>{const N=Sr(m,(z,X)=>Yr(z,X,b,y.unmerge(X)),l);return F0(N,pe.from(m[0]))},Ky=(l,m,b,y)=>{const N=((Q,fe)=>{const _e=Vn.fromTable(Q);return F1(_e,fe,!0)})(m.clipboard,m.generators),z=Vi(m.row,m.column);return qg(z,l,N,m.generators,b).fold(()=>F0(l,pe.some(m.element)),Q=>Vc(Q,m.row,m.column))},q1=(l,m,b)=>{const y=Df(l,b.section),k=Vn.generate(y);return F1(k,m,!0)},YS=(l,m,b,y)=>{const k=Ar(l).rows,N=m.cells[0].column,z=k[m.cells[0].row],X=q1(m.clipboard,m.generators,z),Q=MS(N,l,X,m.generators,b);return Vc(Q,m.cells[0].row,m.cells[0].column)},Yy=(l,m,b,y)=>{const k=Ar(l).rows,N=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,z=k[m.cells[0].row],X=q1(m.clipboard,m.generators,z),Q=MS(N,l,X,m.generators,b);return Vc(Q,m.cells[0].row,N)},Xy=(l,m,b,y)=>{const k=Ar(l).rows,N=m.cells[0].row,z=k[N],X=q1(m.clipboard,m.generators,z),Q=NS(N,l,X,m.generators,b);return Vc(Q,m.cells[0].row,m.cells[0].column)},XS=(l,m,b,y)=>{const k=Ar(l).rows,N=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,z=k[m.cells[0].row],X=q1(m.clipboard,m.generators,z),Q=NS(N,l,X,m.generators,b);return Vc(Q,N,m.cells[0].column)},tm=(l,m)=>{const b=Vn.fromTable(l);return oi(b,m).bind(k=>{const N=k[k.length-1],z=k[0].column,X=N.column+N.colspan,Q=ko(fn(b.all,fe=>Co(fe.cells,_e=>_e.column>=z&&_e.column<X)));return I1(Q)}).getOr("")},ri=(l,m)=>{const b=Vn.fromTable(l);return oi(b,m).bind(I1).getOr("")},JS=(l,m)=>{const b=Vn.fromTable(l);return oi(b,m).bind(k=>{const N=k[k.length-1],z=k[0].row,X=N.row+N.rowspan,Q=b.all.slice(z,X);return ES(Q)}).getOr("")},ho=(l,m,b,y)=>FS(l,m,b,y.sizing),gu=(l,m,b,y)=>Zy(l,m,b,y.sizing,y.resize),bp=(l,m)=>vt(m,b=>b.column===0&&b.isLocked),QS=(l,m)=>vt(m,b=>b.column+b.colspan>=l.grid.columns&&b.isLocked),Jy=(l,m)=>{const b=Hd(l),y=nf(m);return Ge(y,(k,N)=>{const X=b[N.column].map(go).getOr(0);return k+X},0)},ex=l=>(m,b)=>oi(m,b).filter(y=>!(l?bp:QS)(m,y)).map(y=>({details:y,pixelDelta:Jy(m,y)})),tg=(l,m)=>si(l,m).map(b=>({details:b,pixelDelta:-Jy(l,b)})),ma=l=>(m,b)=>lp(m,b).filter(y=>!(l?bp:QS)(m,y.cells)),nm=Da.transform("th"),vp=Da.transform("td"),tx=Ns(US,oi,Ae,Ae,Da.modification),sk=Ns(tk,oi,Ae,Ae,Da.modification),U0=Ns(nk,ex(!0),gu,Ae,Da.modification),Qy=Ns(WS,ex(!1),gu,Ae,Da.modification),e2=Ns(ic,tg,gu,L0,Da.modification),t2=Ns(Ai,oi,Ae,L0,Da.modification),nx=Ns(z0,si,Ae,Ae,nm),ox=Ns(ZS,si,Ae,Ae,vp),sx=Ns(jS,oi,Ae,Ae,nm),rx=Ns(qS,oi,Ae,Ae,vp),rk=Ns(V0,oi,Ae,Ae,vp),Wa=Ns(ok,si,Ae,Ae,nm),ak=Ns(xs,si,Ae,Ae,vp),of=Ns(GS,Xf,ho,Ae,Da.merging),n2=Ns(KS,Jf,ho,Ae,Da.merging),o2=Ns(Ky,OS,ho,Ae,Da.modification),ax=Ns(YS,ma(!0),Ae,Ae,Da.modification),W0=Ns(Yy,ma(!1),Ae,Ae,Da.modification),s2=Ns(Xy,lp,Ae,Ae,Da.modification),r2=Ns(XS,lp,Ae,Ae,Da.modification),ck=tm,ik=ri,br=JS,Mr=(l,m)=>l.dispatch("NewRow",{node:m}),Ma=(l,m)=>l.dispatch("NewCell",{node:m}),vr=(l,m,b)=>{l.dispatch("TableModified",{...b,table:m})},Xr=(l,m,b,y,k)=>{l.dispatch("TableSelectionChange",{cells:m,start:b,finish:y,otherCells:k})},Hr=l=>{l.dispatch("TableSelectionClear")},a2=(l,m,b,y,k)=>{l.dispatch("ObjectResizeStart",{target:m,width:b,height:y,origin:k})},G1=(l,m,b,y,k)=>{l.dispatch("ObjectResized",{target:m,width:b,height:y,origin:k})},K1={structure:!1,style:!0},fa={structure:!0,style:!1},cx={structure:!0,style:!0},Z0=(l,m)=>Ig(l)?V.percentageSize(m):lu(l)?V.pixelSize(m):V.getTableSize(m),Lt=(l,m,b)=>{const y=_c=>Wo(tp(_c))==="table",k=_c=>!y(l)||Ug(_c).rows>1,N=_c=>!y(l)||Ug(_c).columns>1,z=Qh(l),X=Kd(l)?Ae:Vg,Q=_c=>{switch(zf(l)){case"section":return L1.section();case"sectionCells":return L1.sectionCells();case"cells":return L1.cells();default:return L1.getTableSectionType(_c,"section")}},fe=(_c,iC)=>iC.cursor.fold(()=>{const wb=Zu(_c);return Te(wb).filter($n).map(um=>{b.clearSelectedCells(_c.dom);const ta=l.dom.createRng();return ta.selectNode(um.dom),l.selection.setRng(ta),Os(um,"data-mce-selected","1"),ta})},wb=>{const um=jf(wb),ta=l.dom.createRng();return ta.setStart(um.element.dom,um.offset),ta.setEnd(um.element.dom,um.offset),l.selection.setRng(ta),b.clearSelectedCells(_c.dom),pe.some(ta)}),_e=(_c,iC,wb,um)=>(ta,mf,s3=!1)=>{Uf(ta);const lC=Et.fromDom(l.getDoc()),r3=jd(wb,lC,z),uC={sizing:Z0(l,ta),resize:Kd(l)?wS():k0(),section:Q(ta)};return iC(ta)?_c(ta,mf,r3,uC).bind(dC=>{m.refresh(ta.dom),Je(dC.newRows,Sb=>{Mr(l,Sb.dom)}),Je(dC.newCells,Sb=>{Ma(l,Sb.dom)});const CE=fe(ta,dC);return $n(ta)&&(Uf(ta),s3||vr(l,ta.dom,um)),CE.map(Sb=>({rng:Sb,effect:um}))}):pe.none()},et=_e(t2,k,Ae,fa),kt=_e(e2,N,Ae,fa),it=_e(tx,We,Ae,fa),dt=_e(sk,We,Ae,fa),zt=_e(U0,We,X,fa),nt=_e(Qy,We,X,fa),rn=_e(of,We,Ae,fa),qe=_e(n2,We,Ae,fa),Pt=_e(ax,We,Ae,fa),xo=_e(W0,We,Ae,fa),Eo=_e(s2,We,Ae,fa),qt=_e(r2,We,Ae,fa),Ko=_e(o2,We,Ae,cx),Tc=_e(Wa,We,Ae,fa),mg=_e(ak,We,Ae,fa),yu=_e(nx,We,Ae,fa),Kn=_e(ox,We,Ae,fa),Oo=_e(sx,We,Ae,fa),Ga=_e(rx,We,Ae,fa),ea=_e(rk,We,Ae,fa);return{deleteRow:et,deleteColumn:kt,insertRowsBefore:it,insertRowsAfter:dt,insertColumnsBefore:zt,insertColumnsAfter:nt,mergeCells:rn,unmergeCells:qe,pasteColsBefore:Pt,pasteColsAfter:xo,pasteRowsBefore:Eo,pasteRowsAfter:qt,pasteCells:Ko,makeCellsHeader:Tc,unmakeCellsHeader:mg,makeColumnsHeader:yu,unmakeColumnsHeader:Kn,makeRowsHeader:Oo,makeRowsBody:Ga,makeRowsFooter:ea,getTableRowType:br,getTableCellType:ik,getTableColType:ck}},Qg=(l,m,b)=>{const y=ua(l,m,1);b===1||y<=1?Zo(l,m):Os(l,m,Math.min(b,y))},c2=(l,m)=>b=>{const y=b.column+b.colspan-1,k=b.column;return y>=l&&k<m},UM=(l,m,b)=>{if(Vn.hasColumns(l)){const y=Co(Vn.justColumns(l),c2(m,b)),k=fn(y,z=>{const X=$r(z.element);return Qg(X,"span",b-m),X}),N=Et.fromTag("colgroup");return Xn(N,k),[N]}else return[]},lk=(l,m,b)=>fn(l.all,y=>{const k=Co(y.cells,c2(m,b)),N=fn(k,X=>{const Q=$r(X.element);return Qg(Q,"colspan",b-m),Q}),z=Et.fromTag("tr");return Xn(z,N),z}),uk=(l,m)=>{const b=Vn.fromTable(l);return si(b,m).map(k=>{const N=k[k.length-1],z=k[0].column,X=N.column+N.colspan,Q=UM(b,z,X),fe=lk(b,z,X);return[...Q,...fe]})},ai=(l,m,b)=>{const y=Vn.fromTable(l);return oi(y,m).bind(N=>{const z=F1(y,b,!1),Q=Ar(z).rows.slice(N[0].row,N[N.length-1].row+N[N.length-1].rowspan),fe=gs(Q,et=>{const kt=Co(et.cells,it=>!it.isLocked);return kt.length>0?[{...et,cells:kt}]:[]}),_e=D0(fe);return Ph(_e.length>0,_e)}).map(N=>ip(N))},j0=zc.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),ix=(l,m,b)=>{const y=b.substring(0,b.length-l.length),k=parseFloat(y);return y===k.toString()?m(k):j0.invalid(b)},om={...j0,from:l=>La(l,"%")?ix("%",j0.percent,l):La(l,"px")?ix("px",j0.pixels,l):j0.invalid(l)},Jr=(l,m)=>fn(l,b=>om.from(b).fold(()=>b,k=>k/m*100+"%",k=>k+"%")),Bl=(l,m,b)=>{const y=b/m;return fn(l,k=>om.from(k).fold(()=>k,z=>z*y+"px",z=>z/100*b+"px"))},Ec=(l,m)=>{const b=l.fold(()=>le(""),y=>{const k=y/m;return le(k+"px")},()=>{const y=100/m;return le(y+"%")});return Jo(m,b)},i2=(l,m,b)=>l.fold(()=>m,y=>Bl(m,b,y),y=>Jr(m,b)),q0=(l,m,b)=>{const y=om.from(b),k=Vo(l,N=>N==="0px")?Ec(y,l.length):i2(y,l,m);return ux(k)},l2=(l,m)=>l.length===0?m:Sr(l,(b,y)=>om.from(y).fold(le(0),Ot,Ot)+b,0),lx=(l,m)=>{const b=Math.floor(l);return{value:b+m,remainder:l-b}},G0=(l,m)=>om.from(l).fold(le(l),b=>b+m+"px",b=>b+m+"%"),ux=l=>{if(l.length===0)return l;const m=Sr(l,(y,k)=>{const N=om.from(k).fold(()=>({value:k,remainder:0}),z=>lx(z,"px"),z=>({value:z+"%",remainder:0}));return{output:[N.value].concat(y.output),remainder:y.remainder+N.remainder}},{output:[],remainder:0}),b=m.output;return b.slice(0,b.length-1).concat([G0(b[b.length-1],Math.round(m.remainder))])},dx=om.from,mx=(l,m,b)=>{Je(m,y=>{const k=l.slice(y.column,y.colspan+y.column),N=l2(k,Rd());es(y.element,"width",N+b)})},dk=(l,m,b)=>{Je(m,(y,k)=>{const N=l2([l[k]],Rd());es(y.element,"width",N+b)})},mk=(l,m,b)=>{Je(b,y=>{Fa(y.element,"height")}),Je(m,(y,k)=>{es(y.element,"height",l[k])})},fk=l=>dx(l).fold(le("px"),le("px"),le("%")),u2=(l,m,b)=>{const y=Vn.fromTable(l),k=y.all,N=Vn.justCells(y),z=Vn.justColumns(y);m.each(X=>{const Q=fk(X),fe=bc(l),_e=E1(y,l),et=q0(_e,fe,X);Vn.hasColumns(y)?dk(et,z,Q):mx(et,N,Q),es(l,"width",X)}),b.each(X=>{const Q=tt(l),fe=Dr(y,l),_e=q0(fe,Q,X);mk(_e,k,N),es(l,"height",X)})},K0=Ji,fx=Kr,Y1=_y,yp=l=>{Zo(l,"width"),Zo(l,"height")},ng=l=>{const m=Gs(l);u2(l,pe.some(m),pe.none()),yp(l)},Y0=l=>{const m=io(l);u2(l,pe.some(m),pe.none()),yp(l)},gk=l=>{const m=x1(l);u2(l,pe.none(),pe.some(m)),yp(l)},gx=l=>{Fa(l,"width");const m=Pc(l),b=m.length>0?m:Zu(l);Je(b,y=>{Fa(y,"width"),yp(y)}),yp(l)},hk={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},hx=()=>Et.fromTag("th"),px=()=>Et.fromTag("td"),Uc=()=>Et.fromTag("col"),X0=(l,m,b,y)=>{const k=Et.fromTag("tr");for(let N=0;N<l;N++){const z=y<m||N<b?hx():px();N<b&&Os(z,"scope","row"),y<m&&Os(z,"scope","col"),jo(z,Et.fromTag("br")),jo(k,z)}return k},bx=l=>{const m=Et.fromTag("colgroup");return Jo(l,()=>jo(m,Uc())),m},d2=(l,m,b,y)=>Jo(l,k=>X0(m,b,y,k)),X1=(l,m,b,y,k,N=hk)=>{const z=Et.fromTag("table"),X=k!=="cells";_r(z,N.styles),fc(z,N.attributes),N.colGroups&&jo(z,bx(m));const Q=Math.min(l,b);if(X&&b>0){const it=Et.fromTag("thead");jo(z,it);const zt=d2(b,m,k==="sectionCells"?Q:0,y);Xn(it,zt)}const fe=Et.fromTag("tbody");jo(z,fe);const _e=X?l-Q:l,kt=d2(_e,m,X?0:b,y);return Xn(fe,kt),z},pk=l=>l.dom.innerHTML,Cp=l=>{const m=Et.fromTag("div"),b=Et.fromDom(l.dom.cloneNode(!0));return jo(m,b),pk(m)},bk=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},m2=(l,m)=>{tc(m,"td,th").each(kn(bk,l))},vk=(l,m)=>{Je(jr(m,"tr"),b=>{Mr(l,b.dom),Je(jr(b,"th,td"),y=>{Ma(l,y.dom)})})},J1=l=>q(l)&&l.indexOf("%")!==-1,yk=(l,m,b,y,k)=>{const N=Ra(l),z={styles:N,attributes:Yd(l),colGroups:_1(l)};return l.undoManager.ignore(()=>{const X=X1(b,m,k,y,zf(l),z);Os(X,"data-mce-id","__mce");const Q=Cp(X);l.insertContent(Q),l.addVisual()}),tc(tp(l),'table[data-mce-id="__mce"]').map(X=>(lu(l)?Y0(X):ac(l)?gx(X):(Ig(l)||J1(N.width))&&ng(X),Uf(X),Zo(X,"data-mce-id"),vk(l,X),m2(l,X),X.dom)).getOrNull()},Ck=(l,m,b,y={})=>{const k=N=>cn(N)&&N>0;if(k(m)&&k(b)){const N=y.headerRows||0,z=y.headerColumns||0;return yk(l,b,m,z,N)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var J0=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const vx="x-tinymce/dom-table-",f2=vx+"rows",Q1=vx+"columns",yx=l=>{const m=J0.FakeClipboardItem(l);J0.write([m])},g2=l=>{var m;const b=(m=J0.read())!==null&&m!==void 0?m:[];return nr(b,y=>pe.from(y.getType(l)))},h2=l=>{g2(l).isSome()&&J0.clear()},p2=l=>{l.fold(Cx,m=>yx({[f2]:m}))},eh=()=>g2(f2),Cx=()=>h2(f2),b2=l=>{l.fold(Sx,m=>yx({[Q1]:m}))},wx=()=>g2(Q1),Sx=()=>h2(Q1),Wc=l=>Zf(A1(l),Xm(l)).filter(w0),Q0=l=>Ml(A1(l),Xm(l)).filter(w0),ev=(l,m)=>{const b=Xm(l),y=()=>Wc(l).each(nt=>{xa(nt,b).filter(ae(b)).each(rn=>{const qe=Et.fromText("");if(ec(rn,qe),Es(rn),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Pt=l.dom.createRng();Pt.setStart(qe.dom,0),Pt.setEnd(qe.dom,0),l.selection.setRng(Pt),l.nodeChanged()}})}),k=nt=>Wc(l).each(rn=>{ac(l)||lu(l)||Ig(l)||xa(rn,b).each(Pt=>{nt==="relative"&&!K0(Pt)?ng(Pt):nt==="fixed"&&!fx(Pt)?Y0(Pt):nt==="responsive"&&!Y1(Pt)&&gx(Pt),Uf(Pt),vr(l,Pt.dom,fa)})}),N=nt=>xa(nt,b),z=nt=>Q0(l).bind(rn=>N(rn).map(qe=>nt(qe,rn))),X=(nt,rn)=>{z(qe=>{l.formatter.toggle("tableclass",{value:rn},qe.dom),vr(l,qe.dom,K1)})},Q=(nt,rn)=>{z(qe=>{const Pt=tf(l),Eo=Vo(Pt,qt=>l.formatter.match("tablecellclass",{value:rn},qt.dom))?l.formatter.remove:l.formatter.apply;Je(Pt,qt=>Eo("tablecellclass",{value:rn},qt.dom)),vr(l,qe.dom,K1)})},fe=()=>{Wc(l).each(nt=>{xa(nt,b).each(rn=>{Zn(rn,"caption").fold(()=>{const qe=Et.fromTag("caption");jo(qe,Et.fromText("Caption")),Om(rn,qe,0),l.selection.setCursorLocation(qe.dom,0)},qe=>{Er("caption")(nt)&&Td("td",rn).each(Pt=>l.selection.setCursorLocation(Pt.dom,0)),Es(qe)}),vr(l,rn.dom,fa)})})},_e=nt=>{l.focus()},et=(nt,rn=!1)=>z((qe,Pt)=>{const xo=Ks(tf(l),qe,Pt);nt(qe,xo,rn).each(_e)}),kt=()=>z((nt,rn)=>{const qe=Ks(tf(l),nt,rn),Pt=jd(Ae,Et.fromDom(l.getDoc()),pe.none());return ai(nt,qe,Pt)}),it=()=>z((nt,rn)=>{const qe=Ks(tf(l),nt,rn);return uk(nt,qe)}),dt=(nt,rn)=>rn().each(qe=>{const Pt=fn(qe,xo=>$r(xo));z((xo,Eo)=>{const qt=cu(Et.fromDom(l.getDoc())),Ko=Qs(tf(l),Eo,Pt,qt);nt(xo,Ko).each(_e)})}),zt=nt=>(rn,qe)=>Mc(qe,"type").each(Pt=>{et(nt(Pt),qe.no_events)});cs({mceTableSplitCells:()=>et(m.unmergeCells),mceTableMergeCells:()=>et(m.mergeCells),mceTableInsertRowBefore:()=>et(m.insertRowsBefore),mceTableInsertRowAfter:()=>et(m.insertRowsAfter),mceTableInsertColBefore:()=>et(m.insertColumnsBefore),mceTableInsertColAfter:()=>et(m.insertColumnsAfter),mceTableDeleteCol:()=>et(m.deleteColumn),mceTableDeleteRow:()=>et(m.deleteRow),mceTableCutCol:()=>it().each(nt=>{b2(nt),et(m.deleteColumn)}),mceTableCutRow:()=>kt().each(nt=>{p2(nt),et(m.deleteRow)}),mceTableCopyCol:()=>it().each(nt=>b2(nt)),mceTableCopyRow:()=>kt().each(nt=>p2(nt)),mceTablePasteColBefore:()=>dt(m.pasteColsBefore,wx),mceTablePasteColAfter:()=>dt(m.pasteColsAfter,wx),mceTablePasteRowBefore:()=>dt(m.pasteRowsBefore,eh),mceTablePasteRowAfter:()=>dt(m.pasteRowsAfter,eh),mceTableDelete:y,mceTableCellToggleClass:Q,mceTableToggleClass:X,mceTableToggleCaption:fe,mceTableSizingMode:(nt,rn)=>k(rn),mceTableCellType:zt(nt=>nt==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:zt(nt=>nt==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:zt(nt=>{switch(nt){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(nt,rn)=>l.addCommand(rn,nt)),l.addCommand("mceInsertTable",(nt,rn)=>{Ck(l,rn.rows,rn.columns,rn.options)}),l.addCommand("mceTableApplyCellStyle",(nt,rn)=>{const qe=Eo=>"tablecell"+Eo.toLowerCase().replace("-","");if(!se(rn))return;const Pt=Co(tf(l),w0);if(Pt.length===0)return;const xo=Ca(rn,(Eo,qt)=>l.formatter.has(qe(qt))&&q(Eo));jl(xo)||(cs(xo,(Eo,qt)=>{const Ko=qe(qt);Je(Pt,Tc=>{Eo===""?l.formatter.remove(Ko,{value:null},Tc.dom,!0):l.formatter.apply(Ko,{value:Eo},Tc.dom)})}),N(Pt[0]).each(Eo=>vr(l,Eo.dom,K1)))})},v2=(l,m)=>{const b=Xm(l),y=k=>Ml(A1(l)).bind(N=>xa(N,b).map(z=>{const X=Ks(tf(l),z,N);return k(z,X)})).getOr("");cs({mceTableRowType:()=>y(m.getTableRowType),mceTableCellType:()=>y(m.getTableCellType),mceTableColType:()=>y(m.getTableColType)},(k,N)=>l.addQueryValueHandler(N,k))},y2=zc.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),sm=(l,m,b,y)=>l.fold(m,b,y),tv=l=>l.fold(Ot,Ot,Ot),wk=y2.before,og=y2.on,nv=y2.after,Zc={before:wk,on:og,after:nv,cata:sm,getStart:tv},wp={create:(l,m)=>({selection:l,kill:m})},Sk=(l,m)=>{const b=l.document.createRange();return b.selectNode(m.dom),b},eb=(l,m)=>{const b=l.document.createRange();return xk(b,m),b},xk=(l,m)=>l.selectNodeContents(m.dom),Ek=(l,m)=>{m.fold(b=>{l.setStartBefore(b.dom)},(b,y)=>{l.setStart(b.dom,y)},b=>{l.setStartAfter(b.dom)})},xx=(l,m)=>{m.fold(b=>{l.setEndBefore(b.dom)},(b,y)=>{l.setEnd(b.dom,y)},b=>{l.setEndAfter(b.dom)})},Ex=(l,m,b)=>{const y=l.document.createRange();return Ek(y,m),xx(y,b),y},ov=(l,m,b,y,k)=>{const N=l.document.createRange();return N.setStart(m.dom,b),N.setEnd(y.dom,k),N},Tk=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),_k=l=>{const m=l.getClientRects(),b=m.length>0?m[0]:l.getBoundingClientRect();return b.width>0||b.height>0?pe.some(b).map(Tk):pe.none()},tb=zc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),C2=(l,m,b)=>m(Et.fromDom(b.startContainer),b.startOffset,Et.fromDom(b.endContainer),b.endOffset),w2=(l,m)=>m.match({domRange:b=>({ltr:le(b),rtl:pe.none}),relative:(b,y)=>({ltr:Pd(()=>Ex(l,b,y)),rtl:Pd(()=>pe.some(Ex(l,y,b)))}),exact:(b,y,k,N)=>({ltr:Pd(()=>ov(l,b,y,k,N)),rtl:Pd(()=>pe.some(ov(l,k,N,b,y)))})}),Tx=(l,m)=>{const b=m.ltr();return b.collapsed?m.rtl().filter(k=>k.collapsed===!1).map(k=>tb.rtl(Et.fromDom(k.endContainer),k.endOffset,Et.fromDom(k.startContainer),k.startOffset)).getOrThunk(()=>C2(l,tb.ltr,b)):C2(l,tb.ltr,b)},_x=(l,m)=>{const b=w2(l,m);return Tx(l,b)},sv=(l,m)=>_x(l,m).match({ltr:(y,k,N,z)=>{const X=l.document.createRange();return X.setStart(y.dom,k),X.setEnd(N.dom,z),X},rtl:(y,k,N,z)=>{const X=l.document.createRange();return X.setStart(N.dom,z),X.setEnd(y.dom,k),X}});tb.ltr,tb.rtl;const Sp={create:(l,m,b,y)=>({start:l,soffset:m,finish:b,foffset:y})},nb={create:(l,m,b,y)=>({start:Zc.on(l,m),finish:Zc.on(b,y)})},ob=(l,m)=>{const b=sv(l,m);return Sp.create(Et.fromDom(b.startContainer),b.startOffset,Et.fromDom(b.endContainer),b.endOffset)},rv=nb.create,kk=(l,m,b,y,k,N,z)=>Qo(b,k)&&y===N?pe.none():Ir(b,"td,th",m).bind(X=>Ir(k,"td,th",m).bind(Q=>kx(l,m,X,Q,z))),kx=(l,m,b,y,k)=>Qo(b,y)?pe.none():T0(b,y,m).bind(N=>{const z=N.boxes.getOr([]);return z.length>1?(k(l,z,N.start,N.finish),pe.some(wp.create(pe.some(rv(b,0,b,Lc(b))),!0))):pe.none()}),Ak=(l,m,b,y,k)=>{const N=z=>(k.clearBeforeUpdate(b),k.selectRange(b,z.boxes,z.start,z.finish),z.boxes);return el(y,l,m,k.firstSelectedSelector,k.lastSelectedSelector).map(N)},S2=(l,m)=>({item:l,mode:m}),x2=(l,m,b,y=sf)=>l.property().parent(m).map(k=>S2(k,y)),sf=(l,m,b,y=sb)=>b.sibling(l,m).map(k=>S2(k,y)),sb=(l,m,b,y=sb)=>{const k=l.property().children(m);return b.first(k).map(z=>S2(z,y))},Ok=[{current:x2,next:sf,fallback:pe.none()},{current:sf,next:sb,fallback:pe.some(x2)},{current:sb,next:sb,fallback:pe.some(sf)}],E2=(l,m,b,y,k=Ok)=>U(k,z=>z.current===b).bind(z=>z.current(l,m,y,z.next).orThunk(()=>z.fallback.bind(X=>E2(l,m,X,y)))),Ox={left:()=>({sibling:(b,y)=>b.query().prevSibling(y),first:b=>b.length>0?pe.some(b[b.length-1]):pe.none()}),right:()=>({sibling:(b,y)=>b.query().nextSibling(y),first:b=>b.length>0?pe.some(b[0]):pe.none()})},T2=(l,m,b,y,k,N)=>E2(l,m,y,k).bind(X=>N(X.item)?pe.none():b(X.item)?pe.some(X.item):T2(l,X.item,b,X.mode,k,N)),sg=(l,m,b,y)=>T2(l,m,b,sf,Ox.left(),y),Rk=(l,m,b,y)=>T2(l,m,b,sf,Ox.right(),y),_2=l=>m=>l.property().children(m).length===0,k2=(l,m,b)=>av(l,m,_2(l),b),A2=(l,m,b)=>O2(l,m,_2(l),b),av=sg,O2=Rk,cv=Bo(),xp=(l,m)=>k2(cv,l,m),R2=(l,m)=>A2(cv,l,m),Dk=(l,m,b)=>av(cv,l,m,b),Mk=(l,m,b)=>O2(cv,l,m,b),th=(l,m,b)=>Qe(l,m,b).isSome(),rb=zc.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Rx=(l,m,b)=>{const y=l.getRect(m),k=l.getRect(b);return k.right>y.left&&k.left<y.right},jc=l=>Ir(l,"tr"),Ep={...rb,verify:(l,m,b,y,k,N,z)=>Ir(y,"td,th",z).bind(X=>Ir(m,"td,th",z).map(Q=>Qo(X,Q)?Qo(y,X)&&Lc(X)===k?N(Q):rb.none("in same cell"):op(jc,[X,Q]).fold(()=>Rx(l,Q,X)?rb.success():N(Q),fe=>N(Q)))).getOr(rb.none("default")),cata:(l,m,b,y,k)=>l.fold(m,b,y,k)},Dx=(l,m,b,y)=>({parent:l,children:m,element:b,index:y}),Mx=l=>wa(l).bind(m=>{const b=No(m);return ab(b,l).map(y=>Dx(m,b,l,y))}),ab=(l,m)=>pl(l,kn(Qo,m)),rg=Er("br"),D2=(l,m,b)=>m(l,b).bind(y=>bi(y)&&wc(y).trim().length===0?D2(y,m,b):pe.some(y)),Nx=(l,m,b)=>b.traverse(m).orThunk(()=>D2(m,b.gather,l)).map(b.relative),Pk=(l,m)=>Rs(l,m).filter(rg).orThunk(()=>Rs(l,m-1).filter(rg)),Px=(l,m,b,y)=>Pk(m,b).bind(k=>y.traverse(k).fold(()=>D2(k,y.gather,l).map(y.relative),N=>Mx(N).map(z=>Zc.on(z.parent,z.index)))),cb=(l,m,b,y)=>(rg(m)?Nx(l,m,y):Px(l,m,b,y)).map(N=>({start:N,finish:N})),Bx=l=>Ep.cata(l,m=>pe.none(),()=>pe.none(),m=>pe.some(ni(m,0)),m=>pe.some(ni(m,Lc(m)))),ib=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),Tp=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),M2=(l,m,b)=>({left:l.left+m,top:l.top+b,right:l.right+m,bottom:l.bottom+b}),_p=l=>l.top,nh=l=>l.bottom,oh=(l,m,b)=>b>=0&&b<Lc(m)?l.getRangedRect(m,b,m,b+1):b>0?l.getRangedRect(m,b-1,m,b):pe.none(),rf=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),N2=(l,m)=>pe.some(l.getRect(m)),rm=(l,m,b)=>ur(m)?N2(l,m).map(rf):bi(m)?oh(l,m,b).map(rf):pe.none(),hu=(l,m)=>ur(m)?N2(l,m).map(rf):bi(m)?l.getRangedRect(m,0,m,Lc(m)).map(rf):pe.none(),am=5,P2=100,rd=zc.generate([{none:[]},{retry:["caret"]}]),B2=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,sh=(l,m,b)=>Sl(m,hp).fold(Nn,y=>hu(l,y).exists(k=>B2(b,k))),kp=(l,m,b,y,k)=>{const N=ib(k,am);return Math.abs(b.bottom-y.bottom)<1||b.top>k.bottom?rd.retry(N):b.top===k.bottom?rd.retry(ib(k,1)):sh(l,m,k)?rd.retry(M2(N,am,0)):rd.none()},Ix={point:_p,adjuster:(l,m,b,y,k)=>{const N=Tp(k,am);return Math.abs(b.top-y.top)<1||b.bottom<k.top?rd.retry(N):b.bottom===k.top?rd.retry(Tp(k,1)):sh(l,m,k)?rd.retry(M2(N,am,0)):rd.none()},move:Tp,gather:xp},lb={point:nh,adjuster:kp,move:ib,gather:R2},iv=(l,m,b)=>l.elementFromPoint(m,b).filter(y=>Wo(y)==="table").isSome(),Bk=(l,m,b,y,k)=>ub(l,m,b,m.move(y,am),k),ub=(l,m,b,y,k)=>k===0?pe.some(y):iv(l,y.left,m.point(y))?Bk(l,m,b,y,k-1):l.situsFromPoint(y.left,m.point(y)).bind(N=>N.start.fold(pe.none,z=>hu(l,z).bind(X=>m.adjuster(l,z,X,b,y).fold(pe.none,Q=>ub(l,m,b,Q,k-1))).orThunk(()=>pe.some(y)),pe.none)),lv=(l,m,b)=>l.point(m)>b.getInnerHeight()?pe.some(l.point(m)-b.getInnerHeight()):l.point(m)<0?pe.some(-l.point(m)):pe.none(),Lx=(l,m,b)=>{const y=l.move(b,am),k=ub(m,l,b,y,P2).getOr(y);return lv(l,k,m).fold(()=>m.situsFromPoint(k.left,l.point(k)),N=>(m.scrollBy(0,N),m.situsFromPoint(k.left,l.point(k)-N)))},pu={tryUp:kn(Lx,Ix),tryDown:kn(Lx,lb),getJumpSize:le(am)},Fx=20,uv=(l,m,b)=>l.getSelection().bind(y=>cb(m,y.finish,y.foffset,b).fold(()=>pe.some(ni(y.finish,y.foffset)),k=>{const N=l.fromSitus(k),z=Ep.verify(l,y.finish,y.foffset,N.finish,N.foffset,b.failure,m);return Bx(z)})),rh=(l,m,b,y,k,N)=>N===0?pe.none():GM(l,m,b,y,k).bind(z=>{const X=l.fromSitus(z),Q=Ep.verify(l,b,y,X.finish,X.foffset,k.failure,m);return Ep.cata(Q,()=>pe.none(),()=>pe.some(z),fe=>Qo(b,fe)&&y===0?Hx(l,b,y,Tp,k):rh(l,m,fe,0,k,N-1),fe=>Qo(b,fe)&&y===Lc(fe)?Hx(l,b,y,ib,k):rh(l,m,fe,Lc(fe),k,N-1))}),Hx=(l,m,b,y,k)=>rm(l,m,b).bind(N=>db(l,k,y(N,pu.getJumpSize()))),db=(l,m,b)=>{const y=Ci().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?m.retry(l,b):pe.none()},GM=(l,m,b,y,k)=>rm(l,b,y).bind(N=>db(l,k,N)),zx=(l,m,b)=>uv(l,m,b).bind(y=>rh(l,m,y.element,y.offset,b,Fx).map(l.fromSitus)),Za=(l,m)=>th(l,b=>wa(b).exists(y=>Qo(y,m))),dv=(l,m,b,y,k)=>Ir(y,"td,th",m).bind(N=>Ir(N,"table",m).bind(z=>Za(k,z)?zx(l,m,b).bind(X=>Ir(X.finish,"td,th",m).map(Q=>({start:N,finish:Q,range:X}))):pe.none())),ag=(l,m,b,y,k,N)=>N(y,m).orThunk(()=>dv(l,m,b,y,k).map(z=>{const X=z.range;return wp.create(pe.some(rv(X.start,X.soffset,X.finish,X.foffset)),!0)})),ol=(l,m)=>Ir(l,"tr",m).bind(b=>Ir(b,"table",m).bind(y=>{const k=jr(y,"tr");return Qo(b,k[0])?Dk(y,N=>Gm(N).isSome(),m).map(N=>{const z=Lc(N);return wp.create(pe.some(rv(N,z,N,z)),!0)}):pe.none()})),Vx=(l,m)=>Ir(l,"tr",m).bind(b=>Ir(b,"table",m).bind(y=>{const k=jr(y,"tr");return Qo(b,k[k.length-1])?Mk(y,N=>Yh(N).isSome(),m).map(N=>wp.create(pe.some(rv(N,0,N,0)),!0)):pe.none()})),mv=(l,m,b,y,k,N,z)=>dv(l,b,y,k,N).bind(X=>kx(m,b,X.start,X.finish,z)),mb=l=>{let m=l;return{get:()=>m,set:k=>{m=k}}},Ux=l=>{const m=mb(pe.none()),b=()=>m.get().each(l);return{clear:()=>{b(),m.set(pe.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:X=>{b(),m.set(pe.some(X))}}},fb=()=>{const l=Ux(Ae);return{...l,on:b=>l.get().each(b)}},Wx=(l,m)=>Ir(l,"td,th",m),ah=l=>Gl(l).exists(Fg),sl=(l,m,b,y)=>{const k=fb(),N=k.clear,z=_e=>{k.on(et=>{y.clearBeforeUpdate(m),Wx(_e.target,b).each(kt=>{T0(et,kt,b).each(it=>{const dt=it.boxes.getOr([]);if(dt.length===1){const zt=dt[0],nt=k1(zt)==="false",rn=Od(Vf(_e.target),zt,Qo);nt&&rn&&y.selectRange(m,dt,zt,zt)}else dt.length>1&&(y.selectRange(m,dt,it.start,it.finish),l.selectContents(kt))})})})};return{clearstate:N,mousedown:_e=>{y.clear(m),Wx(_e.target,b).filter(ah).each(k.set)},mouseover:_e=>{z(_e)},mouseup:_e=>{z(_e),N()}}},cg={traverse:Qa,gather:R2,relative:Zc.before,retry:pu.tryDown,failure:Ep.failedDown},ad={traverse:Kl,gather:xp,relative:Zc.before,retry:pu.tryUp,failure:Ep.failedUp},bu=l=>m=>m===l,ja=bu(38),Na=bu(40),zr=l=>l>=37&&l<=40,vu={isBackward:bu(37),isForward:bu(39)},fv={isBackward:bu(39),isForward:bu(37)},rl=l=>{const m=l!==void 0?l.dom:document,b=m.body.scrollLeft||m.documentElement.scrollLeft,y=m.body.scrollTop||m.documentElement.scrollTop;return Zt(b,y)},ch=(l,m,b)=>{const k=(b!==void 0?b.dom:document).defaultView;k&&k.scrollBy(l,m)},gv=zc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Zx=l=>gv.exact(l.start,l.soffset,l.finish,l.foffset),jx=l=>l.match({domRange:m=>Et.fromDom(m.startContainer),relative:(m,b)=>Zc.getStart(m),exact:(m,b,y,k)=>m}),qx=gv.domRange,Gx=gv.relative,hv=gv.exact,Kx=l=>{const m=jx(l);return Ws(m)},Yx=Sp.create,Ap={domRange:qx,relative:Gx,exact:hv,exactFromRange:Zx,getWin:Kx,range:Yx},Xx=(l,m,b)=>{var y;return pe.from((y=l.caretPositionFromPoint)===null||y===void 0?void 0:y.call(l,m,b)).bind(k=>{if(k.offsetNode===null)return pe.none();const N=l.createRange();return N.setStart(k.offsetNode,k.offset),N.collapse(),pe.some(N)})},$k=(l,m,b)=>{var y;return pe.from((y=l.caretRangeFromPoint)===null||y===void 0?void 0:y.call(l,m,b))},Ik=(l,m,b)=>l.caretPositionFromPoint?Xx(l,m,b):l.caretRangeFromPoint?$k(l,m,b):pe.none(),Jx=(l,m,b)=>{const y=l.document;return Ik(y,m,b).map(k=>Sp.create(Et.fromDom(k.startContainer),k.startOffset,Et.fromDom(k.endContainer),k.endOffset))},Op=(l,m)=>{const b=Wo(l);return b==="input"?Zc.after(l):_o(["br","img"],b)?m===0?Zc.before(l):Zc.after(l):Zc.on(l,m)},Lk=(l,m)=>{const b=l.fold(Zc.before,Op,Zc.after),y=m.fold(Zc.before,Op,Zc.after);return Ap.relative(b,y)},Fk=(l,m,b,y)=>{const k=Op(l,m),N=Op(b,y);return Ap.relative(k,N)},ro=(l,m,b,y)=>{const N=wl(l).dom.createRange();return N.setStart(l.dom,m),N.setEnd(b.dom,y),N},ig=(l,m,b,y)=>{const k=ro(l,m,b,y),N=Qo(l,b)&&m===y;return k.collapsed&&!N},af=l=>pe.from(l.getSelection()),pv=(l,m)=>{af(l).each(b=>{b.removeAllRanges(),b.addRange(m)})},$2=(l,m,b,y,k)=>{const N=ov(l,m,b,y,k);pv(l,N)},Oi=(l,m,b,y,k,N)=>{m.collapse(b.dom,y),m.extend(k.dom,N)},Hk=(l,m)=>_x(l,m).match({ltr:(b,y,k,N)=>{$2(l,b,y,k,N)},rtl:(b,y,k,N)=>{af(l).each(z=>{if(z.setBaseAndExtent)z.setBaseAndExtent(b.dom,y,k.dom,N);else if(z.extend)try{Oi(l,z,b,y,k,N)}catch{$2(l,k,N,b,y)}else $2(l,k,N,b,y)})}}),ih=(l,m,b,y,k)=>{const N=Fk(m,b,y,k);Hk(l,N)},cm=(l,m,b)=>{const y=Lk(m,b);Hk(l,y)},gb=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),b=l.getRangeAt(l.rangeCount-1);return pe.some(Sp.create(Et.fromDom(m.startContainer),m.startOffset,Et.fromDom(b.endContainer),b.endOffset))}else return pe.none()},Qx=l=>{if(l.anchorNode===null||l.focusNode===null)return gb(l);{const m=Et.fromDom(l.anchorNode),b=Et.fromDom(l.focusNode);return ig(m,l.anchorOffset,b,l.focusOffset)?pe.some(Sp.create(m,l.anchorOffset,b,l.focusOffset)):gb(l)}},zk=(l,m,b=!0)=>{const k=(b?eb:Sk)(l,m);pv(l,k)},KM=l=>af(l).filter(m=>m.rangeCount>0).bind(Qx),eE=l=>KM(l).map(m=>Ap.exact(m.start,m.soffset,m.finish,m.foffset)),YM=(l,m)=>{const b=sv(l,m);return _k(b)},tE=(l,m,b)=>Jx(l,m,b),lh=l=>{af(l).each(m=>m.removeAllRanges())},uh=l=>({elementFromPoint:(nt,rn)=>Et.fromPoint(Et.fromDom(l.document),nt,rn),getRect:nt=>nt.dom.getBoundingClientRect(),getRangedRect:(nt,rn,qe,Pt)=>{const xo=Ap.exact(nt,rn,qe,Pt);return YM(l,xo)},getSelection:()=>eE(l).map(nt=>ob(l,nt)),fromSitus:nt=>{const rn=Ap.relative(nt.start,nt.finish);return ob(l,rn)},situsFromPoint:(nt,rn)=>tE(l,nt,rn).map(qe=>nb.create(qe.start,qe.soffset,qe.finish,qe.foffset)),clearSelection:()=>{lh(l)},collapseSelection:(nt=!1)=>{eE(l).each(rn=>rn.fold(qe=>qe.collapse(nt),(qe,Pt)=>{const xo=nt?qe:Pt;cm(l,xo,xo)},(qe,Pt,xo,Eo)=>{const qt=nt?qe:xo,Ko=nt?Pt:Eo;ih(l,qt,Ko,qt,Ko)}))},setSelection:nt=>{ih(l,nt.start,nt.soffset,nt.finish,nt.foffset)},setRelativeSelection:(nt,rn)=>{cm(l,nt,rn)},selectNode:nt=>{zk(l,nt,!1)},selectContents:nt=>{zk(l,nt)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>rl(Et.fromDom(l.document)).top,scrollBy:(nt,rn)=>{ch(nt,rn,Et.fromDom(l.document))}}),dh=(l,m)=>({rows:l,cols:m}),XM=(l,m,b,y)=>{const k=uh(l),N=sl(k,m,b,y);return{clearstate:N.clearstate,mousedown:N.mousedown,mouseover:N.mouseover,mouseup:N.mouseup}},I2=l=>Sl(l,an).exists(Fg),Rp=(l,m)=>I2(l)||I2(m),L2=(l,m,b,y)=>{const k=uh(l),N=()=>(y.clear(m),pe.none());return{keydown:(Q,fe,_e,et,kt,it)=>{const dt=Q.raw,zt=dt.which,nt=dt.shiftKey===!0;return ef(m,y.selectedSelector).fold(()=>(zr(zt)&&!nt&&y.clearBeforeUpdate(m),zr(zt)&&nt&&!Rp(fe,et)?pe.none:Na(zt)&&nt?kn(mv,k,m,b,cg,et,fe,y.selectRange):ja(zt)&&nt?kn(mv,k,m,b,ad,et,fe,y.selectRange):Na(zt)?kn(ag,k,b,cg,et,fe,Vx):ja(zt)?kn(ag,k,b,ad,et,fe,ol):pe.none),qe=>{const Pt=xo=>()=>nr(xo,qt=>Ak(qt.rows,qt.cols,m,qe,y)).fold(()=>Ny(m,y.firstSelectedSelector,y.lastSelectedSelector).map(qt=>{const Ko=Na(zt)||it.isForward(zt)?Zc.after:Zc.before;return k.setRelativeSelection(Zc.on(qt.first,0),Ko(qt.table)),y.clear(m),wp.create(pe.none(),!0)}),qt=>pe.some(wp.create(pe.none(),!0)));return zr(zt)&&nt&&!Rp(fe,et)?pe.none:Na(zt)&&nt?Pt([dh(1,0)]):ja(zt)&&nt?Pt([dh(-1,0)]):it.isBackward(zt)&&nt?Pt([dh(0,-1),dh(-1,0)]):it.isForward(zt)&&nt?Pt([dh(0,1),dh(1,0)]):zr(zt)&&!nt?N:pe.none})()},keyup:(Q,fe,_e,et,kt)=>ef(m,y.selectedSelector).fold(()=>{const it=Q.raw,dt=it.which;return it.shiftKey===!0&&zr(dt)&&Rp(fe,et)?kk(m,b,fe,_e,et,kt,y.selectRange):pe.none()},pe.none)}},F2=(l,m,b,y)=>{const k=uh(l);return(N,z)=>{y.clearBeforeUpdate(m),T0(N,z,b).each(X=>{const Q=X.boxes.getOr([]);y.selectRange(m,Q,X.start,X.finish),k.selectContents(z),k.collapseSelection()})}},Dp=(l,m)=>{const b=vi(l,m);return b===void 0||b===""?[]:b.split(" ")},H2=(l,m,b)=>{const k=Dp(l,m).concat([b]);return Os(l,m,k.join(" ")),!0},nE=(l,m,b)=>{const y=Co(Dp(l,m),k=>k!==b);return y.length>0?Os(l,m,y.join(" ")):Zo(l,m),!1},lg=l=>l.dom.classList!==void 0,z2=l=>Dp(l,"class"),Vk=(l,m)=>H2(l,"class",m),oE=(l,m)=>nE(l,"class",m),cf=(l,m)=>{lg(l)?l.dom.classList.add(m):Vk(l,m)},sE=l=>{(lg(l)?l.dom.classList:z2(l)).length===0&&Zo(l,"class")},V2=(l,m)=>{lg(l)?l.dom.classList.remove(m):oE(l,m),sE(l)},ug=(l,m)=>lg(l)&&l.dom.classList.contains(m),U2=(l,m)=>{Je(m,b=>{V2(l,b)})},Dt=l=>m=>{cf(m,l)},ga=l=>m=>{U2(m,l)},al={byClass:l=>{const m=Dt(l.selected),b=ga([l.selected,l.lastSelected,l.firstSelected]),y=N=>{const z=jr(N,l.selectedSelector);Je(z,b)};return{clearBeforeUpdate:y,clear:y,selectRange:(N,z,X,Q)=>{y(N),Je(z,m),cf(X,l.firstSelected),cf(Q,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,b)=>{const y=Q=>{Zo(Q,l.selected),Zo(Q,l.firstSelected),Zo(Q,l.lastSelected)},k=Q=>{Os(Q,l.selected,"1")},N=Q=>{z(Q),b()},z=Q=>{const fe=jr(Q,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Je(fe,y)};return{clearBeforeUpdate:z,clear:N,selectRange:(Q,fe,_e,et)=>{N(Q),Je(fe,k),Os(_e,l.firstSelected,"1"),Os(et,l.lastSelected,"1"),m(fe,_e,et)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},vv=(l,m,b,y)=>{switch(l.tag){case"none":return m();case"single":return y(l.element);case"multiple":return b(l.elements)}},mh=()=>({tag:"none"}),yv=l=>({tag:"multiple",elements:l}),Cv=l=>({tag:"single",element:l}),W2=(l,m,b)=>({get:()=>at(l(),b).fold(()=>m().fold(mh,Cv),yv)}),rE=(l,m)=>{const b=l.slice(0,m[m.length-1].row+1),y=D0(b);return gs(y,k=>{const N=k.cells.slice(0,m[m.length-1].column+1);return fn(N,z=>z.element)})},Uk=(l,m)=>{const b=l.slice(m[0].row+m[0].rowspan-1,l.length),y=D0(b);return gs(y,k=>{const N=k.cells.slice(m[0].column+m[0].colspan-1,k.cells.length);return fn(N,z=>z.element)})},im=(l,m,b)=>{const y=Vn.fromTable(l);return oi(y,m).map(N=>{const z=F1(y,b,!1),{rows:X}=Ar(z),Q=rE(X,N),fe=Uk(X,N);return{upOrLeftCells:Q,downOrRightCells:fe}})},Wk=(l,m,b,y,k,N,z)=>({target:l,x:m,y:b,stop:y,prevent:k,kill:N,raw:z}),Z2=l=>{const m=Et.fromDom(je(l).getOr(l.target)),b=()=>l.stopPropagation(),y=()=>l.preventDefault(),k=On(y,b);return Wk(m,l.clientX,l.clientY,b,y,k,l)},$l=(l,m)=>b=>{l(b)&&m(Z2(b))},Qr=(l,m,b,y,k)=>{const N=$l(b,y);return l.dom.addEventListener(m,N,k),{unbind:kn(Mp,l,m,N,k)}},wv=(l,m,b,y)=>Qr(l,m,b,y,!1),Mp=(l,m,b,y)=>{l.dom.removeEventListener(m,b,y)},j2=We,lm=(l,m,b)=>wv(l,m,j2,b),lf=Z2,dg=l=>!ug(Et.fromDom(l.target),"ephox-snooker-resizer-bar"),hb=(l,m)=>{const b=W2(()=>Et.fromDom(l.getBody()),()=>Ml(A1(l),Xm(l)),ki.selectedSelector),y=(Q,fe,_e)=>{xa(fe).each(kt=>{const it=fn(Q,qe=>qe.dom),dt=Qh(l),zt=jd(Ae,Et.fromDom(l.getDoc()),dt),nt=tf(l),rn=im(kt,{selection:nt},zt).map(qe=>bl(qe,Pt=>fn(Pt,xo=>xo.dom))).getOrUndefined();Xr(l,it,fe.dom,_e.dom,rn)})},k=()=>Hr(l),N=al.byAttr(ki,y,k);return l.on("init",Q=>{const fe=l.getWin(),_e=tp(l),et=Xm(l),kt=()=>{const Oo=l.selection,Ga=Et.fromDom(Oo.getStart()),ea=Et.fromDom(Oo.getEnd());op(xa,[Ga,ea]).fold(()=>N.clear(_e),Ae)},it=XM(fe,_e,et,N),dt=L2(fe,_e,et,N),zt=F2(fe,_e,et,N),nt=Oo=>Oo.raw.shiftKey===!0;l.on("TableSelectorChange",Oo=>zt(Oo.start,Oo.finish));const rn=(Oo,Ga)=>{nt(Oo)&&(Ga.kill&&Oo.kill(),Ga.selection.each(ea=>{const Ll=Ap.relative(ea.start,ea.finish),Ka=sv(fe,Ll);l.selection.setRng(Ka)}))},qe=Oo=>{const Ga=lf(Oo);if(Ga.raw.shiftKey&&zr(Ga.raw.which)){const ea=l.selection.getRng(),Ll=Et.fromDom(ea.startContainer),Ka=Et.fromDom(ea.endContainer);dt.keyup(Ga,Ll,ea.startOffset,Ka,ea.endOffset).each(Cu=>{rn(Ga,Cu)})}},Pt=Oo=>{const Ga=lf(Oo);m.hide();const ea=l.selection.getRng(),Ll=Et.fromDom(ea.startContainer),Ka=Et.fromDom(ea.endContainer),Cu=j(vu,fv)(Et.fromDom(l.selection.getStart()));dt.keydown(Ga,Ll,ea.startOffset,Ka,ea.endOffset,Cu).each(_c=>{rn(Ga,_c)}),m.show()},xo=Oo=>Oo.button===0,Eo=Oo=>Oo.buttons===void 0?!0:(Oo.buttons&1)!==0,qt=Oo=>{it.clearstate()},Ko=Oo=>{xo(Oo)&&dg(Oo)&&it.mousedown(lf(Oo))},Tc=Oo=>{Eo(Oo)&&dg(Oo)&&it.mouseover(lf(Oo))},mg=Oo=>{xo(Oo)&&dg(Oo)&&it.mouseup(lf(Oo))},Kn=(()=>{const Oo=mb(Et.fromDom(_e)),Ga=mb(0);return{touchEnd:Ll=>{const Ka=Et.fromDom(Ll.target);if(Er("td")(Ka)||Er("th")(Ka)){const Cu=Oo.get(),_c=Ga.get();Qo(Cu,Ka)&&Ll.timeStamp-_c<300&&(Ll.preventDefault(),zt(Ka,Ka))}Oo.set(Ka),Ga.set(Ll.timeStamp)}}})();l.on("dragstart",qt),l.on("mousedown",Ko),l.on("mouseover",Tc),l.on("mouseup",mg),l.on("touchend",Kn.touchEnd),l.on("keyup",qe),l.on("keydown",Pt),l.on("NodeChange",kt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(ki.firstSelected),l.serializer.addTempAttr(ki.lastSelected)}),{getSelectedCells:()=>vv(b.get(),le([]),Q=>fn(Q,fe=>fe.dom),Q=>[Q.dom]),clearSelectedCells:Q=>N.clear(Et.fromDom(Q))}},ci=l=>{let m=[];return{bind:N=>{if(N===void 0)throw new Error("Event bind error: undefined handler");m.push(N)},unbind:N=>{m=Co(m,z=>z!==N)},trigger:(...N)=>{const z={};Je(l,(X,Q)=>{z[X]=N[Q]}),Je(m,X=>{X(z)})}}},fh=l=>{const m=bl(l,y=>({bind:y.bind,unbind:y.unbind})),b=bl(l,y=>y.trigger);return{registry:m,trigger:b}},Zk=(l,m)=>{let b=null;const y=()=>{Le(b)||(clearTimeout(b),b=null)};return{cancel:y,throttle:(...N)=>{y(),b=setTimeout(()=>{b=null,l.apply(null,N)},m)}}},Np=l=>l.slice(0).sort(),aE=(l,m)=>{throw new Error("All required keys ("+Np(l).join(", ")+") were not specified. Specified keys were: "+Np(m).join(", ")+".")},cE=l=>{throw new Error("Unsupported keys for object: "+Np(l).join(", "))},iE=(l,m)=>{if(!Ee(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Je(m,b=>{if(!q(b))throw new Error("The value "+b+" in the "+l+" fields was not a string.")})},lE=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Np(l).join(", ")+") were not.")},pb=l=>{const m=Np(l);U(m,(y,k)=>k<m.length-1&&y===m[k+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},qa=(l,m)=>Il(l,m,{validate:ln,label:"function"}),Il=(l,m,b)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return iE("required",m),pb(m),y=>{const k=Qt(y);Vo(m,X=>_o(k,X))||aE(m,k),l(m,k);const z=Co(m,X=>!b.validate(y[X],X));return z.length>0&&lE(z,b.label),y}},ii=(l,m)=>{const b=Co(m,y=>!_o(l,y));b.length>0&&cE(b)},gh=l=>qa(ii,l),uf=gh(["compare","extract","mutate","sink"]),bb=gh(["element","start","stop","destroy"]),q2=gh(["forceDrop","drop","move","delayDrop"]),jk=()=>{let l=pe.none();const m=()=>{l=pe.none()},b=(N,z)=>{const X=l.map(Q=>N.compare(Q,z));return l=pe.some(z),X},y=(N,z)=>{z.extract(N).each(Q=>{b(z,Q).each(_e=>{k.trigger.move(_e)})})},k=fh({move:ci(["info"])});return{onEvent:y,reset:m,events:k.registry}},G2=()=>{const l=fh({move:ci(["info"])});return{onEvent:Ae,reset:Ae,events:l.registry}},qk=()=>{const l=G2(),m=jk();let b=l;return{on:()=>{b.reset(),b=m},off:()=>{b.reset(),b=l},isOn:()=>b===m,onEvent:(X,Q)=>{b.onEvent(X,Q)},events:m.events}},Sv=(l,m,b)=>{let y=!1;const k=fh({start:ci([]),stop:ci([])}),N=qk(),z=()=>{dt.stop(),N.isOn()&&(N.off(),k.trigger.stop())},X=Zk(z,200),Q=nt=>{dt.start(nt),N.on(),k.trigger.start()},fe=nt=>{X.cancel(),N.onEvent(nt,m)};N.events.move.bind(nt=>{m.mutate(l,nt.info)});const _e=()=>{y=!0},et=()=>{y=!1},kt=()=>y,it=nt=>(...rn)=>{y&&nt.apply(null,rn)},dt=m.sink(q2({forceDrop:z,drop:it(z),move:it(fe),delayDrop:it(X.throttle)}),b),zt=()=>{dt.destroy()};return{element:dt.element,go:Q,on:_e,off:et,isActive:kt,destroy:zt,events:k.registry}},K2=l=>{const m=l.replace(/\./g,"-");return{resolve:y=>m+"-"+y}},xv=K2("ephox-dragster").resolve,Y2=l=>{const m={layerClass:xv("blocker"),...l},b=Et.fromTag("div");return Os(b,"role","presentation"),_r(b,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),cf(b,xv("blocker")),cf(b,m.layerClass),{element:le(b),destroy:()=>{Es(b)}}};var X2=uf({compare:(l,m)=>Zt(m.left-l.left,m.top-l.top),extract:l=>pe.some(Zt(l.x,l.y)),sink:(l,m)=>{const b=Y2(m),y=lm(b.element(),"mousedown",l.forceDrop),k=lm(b.element(),"mouseup",l.drop),N=lm(b.element(),"mousemove",l.move),z=lm(b.element(),"mouseout",l.delayDrop),X=()=>{b.destroy(),k.unbind(),N.unbind(),z.unbind(),y.unbind()},Q=_e=>{jo(_e,b.element())},fe=()=>{Es(b.element())};return bb({element:b.element,start:Q,stop:fe,destroy:X})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const Ev=(l,m={})=>{var b;const y=(b=m.mode)!==null&&b!==void 0?b:X2;return Sv(l,y,m)},Pp=K2("ephox-snooker").resolve,JM=()=>{const l=fh({drag:ci(["xDelta","yDelta"])});return{mutate:(b,y)=>{l.trigger.drag(b,y)},events:l.registry}},fE=()=>{const l=fh({drag:ci(["xDelta","yDelta","target"])});let m=pe.none();const b=JM();return b.events.drag.bind(N=>{m.each(z=>{l.trigger.drag(N.xDelta,N.yDelta,z)})}),{assign:N=>{m=pe.some(N)},get:()=>m,mutate:b.mutate,events:l.registry}},Tv=(l,m,b,y,k)=>{const N=Et.fromTag("div");return _r(N,{position:"absolute",left:m-y/2+"px",top:b+"px",height:k+"px",width:y+"px"}),fc(N,{"data-column":l,role:"presentation"}),N},Gk=(l,m,b,y,k)=>{const N=Et.fromTag("div");return _r(N,{position:"absolute",left:m+"px",top:b-k/2+"px",height:k+"px",width:y+"px"}),fc(N,{"data-row":l,role:"presentation"}),N},vb=Pp("resizer-bar"),gE=Pp("resizer-rows"),Q2=Pp("resizer-cols"),hE=7,df=(l,m)=>gs(l.all,(b,y)=>m(b.element)?[y]:[]),_v=(l,m)=>{const b=[];return Jo(l.grid.columns,y=>{Vn.getColumnAt(l,y).map(N=>N.element).forall(m)&&b.push(y)}),Co(b,y=>{const k=Vn.filterItems(l,N=>N.column===y);return Vo(k,N=>m(N.element))})},li=l=>{const m=jr(l.parent(),"."+vb);Je(m,Es)},lc=(l,m,b)=>{const y=l.origin();Je(m,k=>{k.each(N=>{const z=b(y,N);cf(z,vb),jo(l.parent(),z)})})},Bp=(l,m,b,y)=>{lc(l,m,(k,N)=>{const z=Tv(N.col,N.x-k.left,b.top-k.top,hE,y);return cf(z,Q2),z})},QM=(l,m,b,y)=>{lc(l,m,(k,N)=>{const z=Gk(N.row,b.left-k.left,N.y-k.top,y,hE);return cf(z,gE),z})},Kk=(l,m,b,y,k)=>{const N=Ic(b),z=m.isResizable,X=y.length>0?Aa.positions(y,b):[],Q=X.length>0?df(l,z):[],fe=Co(X,(it,dt)=>vt(Q,zt=>dt===zt));QM(m,fe,N,go(b));const _e=k.length>0?jh.positions(k,b):[],et=_e.length>0?_v(l,z):[],kt=Co(_e,(it,dt)=>vt(et,zt=>dt===zt));Bp(m,kt,N,sn(b))},eC=(l,m)=>{if(li(l),l.isResizable(m)){const b=Vn.fromTable(m),y=_(b),k=Hd(b);Kk(b,l,m,y,k)}},eo=(l,m)=>{const b=jr(l.parent(),"."+vb);Je(b,m)},$p=l=>{eo(l,m=>{es(m,"display","none")})},tC=l=>{eo(l,m=>{es(m,"display","block")})},nC=l=>ug(l,gE),pE=l=>ug(l,Q2),bE=Pp("resizer-bar-dragging"),Yk=l=>{const m=fE(),b=Ev(m,{});let y=pe.none();const k=(dt,zt)=>pe.from(vi(dt,zt));m.events.drag.bind(dt=>{k(dt.target,"data-row").each(zt=>{const nt=ts(dt.target,"top");es(dt.target,"top",nt+dt.yDelta+"px")}),k(dt.target,"data-column").each(zt=>{const nt=ts(dt.target,"left");es(dt.target,"left",nt+dt.xDelta+"px")})});const N=(dt,zt)=>{const nt=ts(dt,zt),rn=ua(dt,"data-initial-"+zt,0);return nt-rn};b.events.stop.bind(()=>{m.get().each(dt=>{y.each(zt=>{k(dt,"data-row").each(nt=>{const rn=N(dt,"top");Zo(dt,"data-initial-top"),it.trigger.adjustHeight(zt,rn,parseInt(nt,10))}),k(dt,"data-column").each(nt=>{const rn=N(dt,"left");Zo(dt,"data-initial-left"),it.trigger.adjustWidth(zt,rn,parseInt(nt,10))}),eC(l,zt)})})});const z=(dt,zt)=>{it.trigger.startAdjust(),m.assign(dt),Os(dt,"data-initial-"+zt,ts(dt,zt)),cf(dt,bE),es(dt,"opacity","0.2"),b.go(l.dragContainer())},X=lm(l.parent(),"mousedown",dt=>{nC(dt.target)&&z(dt.target,"top"),pE(dt.target)&&z(dt.target,"left")}),Q=dt=>Qo(dt,l.view()),fe=dt=>Ir(dt,"table",Q).filter(Fg),_e=lm(l.view(),"mouseover",dt=>{fe(dt.target).fold(()=>{$n(dt.target)&&li(l)},zt=>{b.isActive()&&(y=pe.some(zt),eC(l,zt))})}),et=()=>{X.unbind(),_e.unbind(),b.destroy(),li(l)},kt=dt=>{eC(l,dt)},it=fh({adjustHeight:ci(["table","delta","row"]),adjustWidth:ci(["table","delta","column"]),startAdjust:ci([])});return{destroy:et,refresh:kt,on:b.on,off:b.off,hideBars:kn($p,l),showBars:kn(tC,l),events:it.registry}},Xk={create:(l,m,b)=>{const y=Aa,k=jh,N=Yk(l),z=fh({beforeResize:ci(["table","type"]),afterResize:ci(["table","type"]),startDrag:ci([])});return N.events.adjustHeight.bind(X=>{const Q=X.table;z.trigger.beforeResize(Q,"row");const fe=y.delta(X.delta,Q);gp(Q,fe,X.row),z.trigger.afterResize(Q,"row")}),N.events.startAdjust.bind(X=>{z.trigger.startDrag()}),N.events.adjustWidth.bind(X=>{const Q=X.table;z.trigger.beforeResize(Q,"col");const fe=k.delta(X.delta,Q),_e=b(Q);N0(Q,fe,X.column,m,_e),z.trigger.afterResize(Q,"col")}),{on:N.on,off:N.off,refreshBars:N.refresh,hideBars:N.hideBars,showBars:N.showBars,destroy:N.destroy,events:z.registry}}},Jk=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let kv=0;const oC=l=>{const b=new Date().getTime(),y=Math.floor(Jk()*1e9);return kv++,l+"_"+y+kv+String(b)},sC={only:(l,m)=>{const b=$u(l)?or(l):l;return{parent:le(b),view:le(l),dragContainer:le(b),origin:le(Zt(0,0)),isResizable:m}},detached:(l,m,b)=>{const y=()=>Ic(m);return{parent:le(m),view:le(l),dragContainer:le(m),origin:y,isResizable:b}},body:(l,m,b)=>({parent:le(m),view:le(l),dragContainer:le(m),origin:le(Zt(0,0)),isResizable:b}),scrollable:(l,m,b,y)=>({parent:le(m),view:le(l),dragContainer:le(b),origin:()=>Ic(m),isResizable:y})},e3=l=>{const m=oC("resizer-container"),b=Et.fromTag("div");return Os(b,"id",m),_r(b,{position:l,height:"0",width:"0",padding:"0",margin:"0",border:"0"}),b},t3=(l,m)=>{const b=du(l),y=Et.fromDom(l.getBody()),k=e3(b?"relative":"static"),N=En();return b?(ec(y,k),sC.scrollable(y,k,N,m)):(jo(N,k),sC.body(y,k,m))},Ft=(l,m)=>l.inline?t3(l,m):sC.only(Et.fromDom(l.getDoc()),m),vE=(l,m)=>{l.inline&&Es(m.parent())},yE=l=>Mn(l)&&l.nodeName==="TABLE",rC="bar-",yb=l=>vi(l,"data-mce-resize")!=="false",n3=l=>{const m=Vn.fromTable(l);Vn.hasColumns(m)||Je(Zu(l),b=>{const y=Vu(b,"width");es(b,"width",y),Zo(b,"width")})},Ip=l=>qr(l,"corner-"),aC=l=>xl(l,"corner-"),o3=l=>{const m=fb(),b=fb(),y=fb();let k,N,z,X;const Q=Pt=>Z0(l,Pt),fe=()=>fS(l)?k0():wS(),_e=Pt=>Ug(Pt).columns,et=Pt=>Ug(Pt).rows,kt=(Pt,xo,Eo,qt)=>{const Ko=aC(xo),Tc=La(Ko,"e"),mg=qr(Ko,"n");if(N===""&&ng(Pt),X===""&&gk(Pt),Eo!==k&&N!==""){es(Pt,"width",N);const yu=fe(),Kn=Q(Pt),Oo=fS(l)||Tc?_e(Pt)-1:0;N0(Pt,Eo-k,Oo,yu,Kn)}else if(y0(N)){const yu=parseFloat(N.replace("%","")),Kn=Eo*yu/k;es(Pt,"width",Kn+"%")}if(C0(N)&&n3(Pt),qt!==z&&X!==""){es(Pt,"height",X);const yu=mg?0:et(Pt)-1;gp(Pt,qt-z,yu)}},it=()=>{b.on(Pt=>{Pt.destroy()}),y.on(Pt=>{vE(l,Pt)})};l.on("init",()=>{const Pt=Ft(l,yb);if(y.set(Pt),T4(l)&&Lg(l)){const xo=fe(),Eo=Xk.create(Pt,xo,Q);l.mode.isReadOnly()||Eo.on(),Eo.events.startDrag.bind(qt=>{m.set(l.selection.getRng())}),Eo.events.beforeResize.bind(qt=>{const Ko=qt.table.dom;a2(l,Ko,b0(Ko),v0(Ko),rC+qt.type)}),Eo.events.afterResize.bind(qt=>{const Ko=qt.table,Tc=Ko.dom;Uf(Ko),m.on(mg=>{l.selection.setRng(mg),l.focus()}),G1(l,Tc,b0(Tc),v0(Tc),rC+qt.type),l.undoManager.add()}),b.set(Eo)}}),l.on("ObjectResizeStart",Pt=>{const xo=Pt.target;if(yE(xo)&&!l.mode.isReadOnly()){const Eo=Et.fromDom(xo);Je(l.dom.select(".mce-clonedresizable"),qt=>{l.dom.addClass(qt,"mce-"+Js(l)+"-columns")}),!fx(Eo)&&lu(l)?Y0(Eo):!K0(Eo)&&Ig(l)&&ng(Eo),Y1(Eo)&&qr(Pt.origin,rC)&&ng(Eo),k=Pt.width,N=ac(l)?"":Kt(l,xo).getOr(""),z=Pt.height,X=Hc(l,xo).getOr("")}}),l.on("ObjectResized",Pt=>{const xo=Pt.target;if(yE(xo)){const Eo=Et.fromDom(xo),qt=Pt.origin;Ip(qt)&&kt(Eo,qt,Pt.width,Pt.height),Uf(Eo),vr(l,Eo.dom,K1)}});const dt=()=>{b.on(Pt=>{Pt.on(),Pt.showBars()})},zt=()=>{b.on(Pt=>{Pt.off(),Pt.hideBars()})};return l.on("DisabledStateChange",Pt=>{Pt.state?zt():dt()}),l.on("SwitchMode",()=>{l.mode.isReadOnly()?zt():dt()}),l.on("dragstart dragend",Pt=>{Pt.type==="dragstart"?zt():dt()}),l.on("remove",()=>{it()}),{refresh:Pt=>{b.on(xo=>xo.refreshBars(Et.fromDom(Pt)))},hide:()=>{b.on(Pt=>Pt.hideBars())},show:()=>{b.on(Pt=>Pt.showBars())}}},Cb=l=>{E4(l);const m=o3(l),b=hb(l,m),y=Lt(l,m,b);return ev(l,y),v2(l,y),FM(l,y),{getSelectedCells:b.getSelectedCells,clearSelectedCells:b.clearSelectedCells}},Ov=l=>({table:Cb(l)});var cC=()=>{p.add("dom",Ov)};cC()}()),JX}var eJ;function Qoe(){return eJ||(eJ=1,Joe()),XX}Qoe();var tJ={},nJ={},oJ;function ese(){return oJ||(oJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const S=(K,ce,be)=>{var Ve;return be(K,ce.prototype)?!0:((Ve=K.constructor)===null||Ve===void 0?void 0:Ve.name)===ce.name},O=K=>{const ce=typeof K;return K===null?"null":ce==="object"&&Array.isArray(K)?"array":ce==="object"&&S(K,String,(be,Ve)=>Ve.isPrototypeOf(be))?"string":ce},P=K=>ce=>O(ce)===K,F=K=>ce=>typeof ce===K,Z=K=>ce=>K===ce,q=P("string"),se=P("object"),Ee=P("array"),Le=Z(null),Fe=F("boolean"),ut=K=>K==null,en=K=>!ut(K),Mn=F("function"),ln=(K,ce)=>{if(Ee(K)){for(let be=0,Ve=K.length;be<Ve;++be)if(!ce(K[be]))return!1;return!0}return!1},cn=()=>{},Ae=K=>()=>K,On=(K,ce)=>K===ce;class Tt{constructor(ce,be){this.tag=ce,this.value=be}static some(ce){return new Tt(!0,ce)}static none(){return Tt.singletonNone}fold(ce,be){return this.tag?be(this.value):ce()}isSome(){return this.tag}isNone(){return!this.tag}map(ce){return this.tag?Tt.some(ce(this.value)):Tt.none()}bind(ce){return this.tag?ce(this.value):Tt.none()}exists(ce){return this.tag&&ce(this.value)}forall(ce){return!this.tag||ce(this.value)}filter(ce){return!this.tag||ce(this.value)?this:Tt.none()}getOr(ce){return this.tag?this.value:ce}or(ce){return this.tag?this:ce}getOrThunk(ce){return this.tag?this.value:ce()}orThunk(ce){return this.tag?this:ce()}getOrDie(ce){if(this.tag)return this.value;throw new Error(ce??"Called getOrDie on None")}static from(ce){return en(ce)?Tt.some(ce):Tt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ce){this.tag&&ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Tt.singletonNone=new Tt(!1);const le=Array.prototype.indexOf,Ot=Array.prototype.push,Io=(K,ce)=>le.call(K,ce),kn=(K,ce)=>Io(K,ce)>-1,ae=(K,ce)=>{const be=K.length,Ve=new Array(be);for(let lt=0;lt<be;lt++){const je=K[lt];Ve[lt]=ce(je,lt)}return Ve},bn=(K,ce)=>{for(let be=0,Ve=K.length;be<Ve;be++){const lt=K[be];ce(lt,be)}},Xo=(K,ce,be)=>(bn(K,(Ve,lt)=>{be=ce(be,Ve,lt)}),be),Nn=K=>{const ce=[];for(let be=0,Ve=K.length;be<Ve;++be){if(!Ee(K[be]))throw new Error("Arr.flatten item "+be+" was not an array, input: "+K);Ot.apply(ce,K[be])}return ce},We=(K,ce)=>Nn(ae(K,ce)),pe=(K,ce)=>{for(let be=0;be<K.length;be++){const Ve=ce(K[be],be);if(Ve.isSome())return Ve}return Tt.none()},_s=(K,ce,be=On)=>K.exists(Ve=>be(Ve,ce)),fo=K=>{const ce=[],be=Ve=>{ce.push(Ve)};for(let Ve=0;Ve<K.length;Ve++)K[Ve].each(be);return ce},Ut=(K,ce)=>K?Tt.some(ce):Tt.none(),D=K=>ce=>ce.options.get(K),_o=K=>{const ce=K.options.register;ce("link_assume_external_targets",{processor:be=>{const Ve=q(be)||Fe(be);return Ve?be===!0?{value:1,valid:Ve}:be==="http"||be==="https"?{value:be,valid:Ve}:{value:0,valid:Ve}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),ce("link_context_toolbar",{processor:"boolean",default:!1}),ce("link_list",{processor:be=>q(be)||Mn(be)||ln(be,se)}),ce("link_default_target",{processor:"string"}),ce("link_default_protocol",{processor:"string",default:"https"}),ce("link_target_list",{processor:be=>Fe(be)||ln(be,se),default:!0}),ce("link_rel_list",{processor:"object[]",default:[]}),ce("link_class_list",{processor:"object[]",default:[]}),ce("link_title",{processor:"boolean",default:!0}),ce("allow_unsafe_link_target",{processor:"boolean",default:!1}),ce("link_quicklink",{processor:"boolean",default:!1}),ce("link_attributes_postprocess",{processor:"function"})},vt=D("link_assume_external_targets"),Jo=D("link_context_toolbar"),fn=D("link_list"),Je=D("link_default_target"),zo=D("link_default_protocol"),wr=D("link_target_list"),Co=D("link_rel_list"),Sr=D("link_class_list"),Ge=D("link_title"),pt=D("allow_unsafe_link_target"),U=D("link_quicklink"),pl=D("link_attributes_postprocess"),ko=Object.keys,gs=Object.hasOwnProperty,Vo=(K,ce)=>{const be=ko(K);for(let Ve=0,lt=be.length;Ve<lt;Ve++){const je=be[Ve],Vt=K[je];ce(Vt,je)}},kf=K=>(ce,be)=>{K[be]=ce},gn=(K,ce,be,Ve)=>{Vo(K,(lt,je)=>{(ce(lt,je)?be:Ve)(lt,je)})},vo=(K,ce)=>{const be={};return gn(K,ce,kf(be),cn),be},hn=(K,ce)=>gs.call(K,ce),Te=(K,ce)=>hn(K,ce)&&K[ce]!==void 0&&K[ce]!==null;var Ja=tinymce.util.Tools.resolve("tinymce.util.URI"),nr=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Qt=tinymce.util.Tools.resolve("tinymce.util.Tools");const hi=K=>en(K)&&K.nodeName.toLowerCase()==="a",cs=K=>hi(K)&&!!Pr(K),bl=(K,ce)=>{if(K.collapsed)return[];{const be=K.cloneContents(),Ve=be.firstChild,lt=new nr(Ve,be),je=[];let Vt=Ve;do ce(Vt)&&je.push(Vt);while(Vt=lt.next());return je}},Cs=K=>/^\w+:/i.test(K),Pr=K=>{var ce,be;return(be=(ce=K.getAttribute("data-mce-href"))!==null&&ce!==void 0?ce:K.getAttribute("href"))!==null&&be!==void 0?be:""},Zl=(K,ce)=>{const be=["noopener"],Ve=K?K.split(/\s+/):[],lt=En=>Qt.trim(En.sort().join(" ")),je=En=>(En=Vt(En),En.length>0?En.concat(be):be),Vt=En=>En.filter(Zs=>Qt.inArray(be,Zs)===-1),$n=ce?je(Ve):Vt(Ve);return $n.length>0?lt($n):""},Ca=K=>K.replace(/\uFEFF/g,""),ks=(K,ce)=>(ce=ce||As(K.selection.getRng())[0]||K.selection.getNode(),Br(ce)?Tt.from(K.dom.select("a[href]",ce)[0]):Tt.from(K.dom.getParent(ce,"a[href]"))),Uo=(K,ce)=>ks(K,ce).isSome(),Mc=(K,ce)=>{const be=ce.fold(()=>K.getContent({format:"text"}),Ve=>Ve.innerText||Ve.textContent||"");return Ca(be)},As=K=>bl(K,cs),To=K=>Qt.grep(K,cs),jl=K=>To(K).length>0,to=K=>As(K).length>0,xr=K=>{const ce=K.schema.getTextInlineElements(),be=je=>je.nodeType===1&&!hi(je)&&!hn(ce,je.nodeName.toLowerCase());if(ks(K).exists(je=>je.hasAttribute("data-mce-block")))return!1;const lt=K.selection.getRng();return lt.collapsed?!0:bl(lt,be).length===0},Br=K=>en(K)&&K.nodeName==="FIGURE"&&/\bimage\b/i.test(K.className),vl=K=>Xo(["title","rel","class","target"],(be,Ve)=>(K[Ve].each(lt=>{be[Ve]=lt.length>0?lt:null}),be),{href:K.href}),ql=(K,ce)=>(ce==="http"||ce==="https")&&!Cs(K)?ce+"://"+K:K,is=(K,ce)=>{const be={...ce};if(Co(K).length===0&&!pt(K)){const Ve=Zl(be.rel,be.target==="_blank");be.rel=Ve||null}return Tt.from(be.target).isNone()&&wr(K)===!1&&(be.target=Je(K)),be.href=ql(be.href,vt(K)),be},Tm=(K,ce,be,Ve)=>{be.each(je=>{hn(ce,"innerText")?ce.innerText=je:ce.textContent=je}),K.dom.setAttribs(ce,Ve);const lt=K.dom.createRng();lt.setStartAfter(ce),lt.setEndAfter(ce),K.selection.setRng(lt)},bt=(K,ce,be,Ve)=>{const lt=K.dom;Br(ce)?Mo(lt,ce,Ve):be.fold(()=>{K.execCommand("mceInsertLink",!1,Ve);const je=K.selection.getEnd(),Vt=lt.createRng();Vt.setStartAfter(je),Vt.setEndAfter(je),K.selection.setRng(Vt)},je=>{K.insertContent(lt.createHTML("a",Ve,lt.encode(je)))})},Yn=(K,ce,be)=>{const Ve=K.selection.getNode(),lt=ks(K,Ve),je=is(K,vl(be)),Vt=pl(K);en(Vt)&&Vt(je),K.undoManager.transact(()=>{be.href===ce.href&&ce.attach(),lt.fold(()=>{bt(K,Ve,be.text,je)},$n=>{K.focus(),Tm(K,$n,be.text,je)})})},Ur=K=>{const ce=K.dom,be=K.selection,Ve=be.getBookmark(),lt=be.getRng().cloneRange(),je=ce.getParent(lt.startContainer,"a[href]",K.getBody()),Vt=ce.getParent(lt.endContainer,"a[href]",K.getBody());je&&lt.setStartBefore(je),Vt&&lt.setEndAfter(Vt),be.setRng(lt),K.execCommand("unlink"),be.moveToBookmark(Ve)},Wr=K=>{K.undoManager.transact(()=>{const ce=K.selection.getNode();Br(ce)?Ii(K,ce):Ur(K),K.focus()})},Nc=K=>{const{class:ce,href:be,rel:Ve,target:lt,text:je,title:Vt}=K;return vo({class:ce.getOrNull(),href:be,rel:Ve.getOrNull(),target:lt.getOrNull(),text:je.getOrNull(),title:Vt.getOrNull()},($n,En)=>Le($n)===!1)},pi=(K,ce)=>{const be=K.options.get,Ve={allow_html_data_urls:be("allow_html_data_urls"),allow_script_urls:be("allow_script_urls"),allow_svg_data_urls:be("allow_svg_data_urls")},lt=ce.href;return{...ce,href:Ja.isDomSafe(lt,"a",Ve)?lt:""}},Wo=(K,ce,be)=>{const Ve=pi(K,be);K.hasPlugin("rtc",!0)?K.execCommand("createlink",!1,Nc(Ve)):Yn(K,ce,Ve)},mc=K=>{K.hasPlugin("rtc",!0)?K.execCommand("unlink"):Wr(K)},Ii=(K,ce)=>{var be;const Ve=K.dom.select("img",ce)[0];if(Ve){const lt=K.dom.getParents(Ve,"a[href]",ce)[0];lt&&((be=lt.parentNode)===null||be===void 0||be.insertBefore(Ve,lt),K.dom.remove(lt))}},Mo=(K,ce,be)=>{var Ve;const lt=K.select("img",ce)[0];if(lt){const je=K.create("a",be);(Ve=lt.parentNode)===null||Ve===void 0||Ve.insertBefore(je,lt),je.appendChild(lt)}},an=K=>q(K.value)?K.value:"",ur=K=>q(K.text)?K.text:q(K.title)?K.title:"",bi=(K,ce)=>{const be=[];return Qt.each(K,Ve=>{const lt=ur(Ve);if(Ve.menu!==void 0){const je=bi(Ve.menu,ce);be.push({text:lt,items:je})}else{const je=ce(Ve);be.push({text:lt,value:je})}}),be},$u=(K=an)=>ce=>Tt.from(ce).map(be=>bi(be,K)),hs={sanitize:K=>$u(an)(K),sanitizeWith:$u,createUi:(K,ce)=>be=>({name:K,type:"listbox",label:ce,items:be}),getValue:an},Os=K=>Te(K,"items"),fc=(K,ce)=>pe(ce,be=>Os(be)?fc(K,be.items):Ut(be.value===K,be)),Iu=(K,ce,be,Ve)=>{const lt=Ve[ce],je=K.length>0;return lt!==void 0?fc(lt,be).map(Vt=>({url:{value:Vt.value,meta:{text:je?K:Vt.text,attach:cn}},text:je?K:Vt.text})):Tt.none()},vi=(K,ce)=>ce==="link"?K.link:ce==="anchor"?K.anchor:Tt.none(),Zo={init:(K,ce)=>{const be={text:K.text,title:K.title},Ve=En=>{var Zs;return Ut(be.title.length<=0,Tt.from((Zs=En.meta)===null||Zs===void 0?void 0:Zs.title).getOr(""))},lt=En=>{var Zs;return Ut(be.text.length<=0,Tt.from((Zs=En.meta)===null||Zs===void 0?void 0:Zs.text).getOr(En.value))},je=En=>{const Zs=lt(En.url),zn=Ve(En.url);return Zs.isSome()||zn.isSome()?Tt.some({...Zs.map(Xl=>({text:Xl})).getOr({}),...zn.map(Xl=>({title:Xl})).getOr({})}):Tt.none()},Vt=(En,Zs)=>{const zn=vi(ce,Zs).getOr([]);return Iu(be.text,Zs,zn,En)};return{onChange:(En,Zs)=>{const zn=Zs.name;return zn==="url"?je(En()):kn(["anchor","link"],zn)?Vt(En(),zn):((zn==="text"||zn==="title")&&(be[zn]=En()[zn]),Tt.none())}}},getDelta:Iu};var gc=tinymce.util.Tools.resolve("tinymce.util.Delay");const Zr=(K,ce,be)=>{const Ve=K.selection.getRng();gc.setEditorTimeout(K,()=>{K.windowManager.confirm(ce,lt=>{K.selection.setRng(Ve),be(lt)})})},km=K=>{const ce=K.href;return ce.indexOf("@")>0&&ce.indexOf("/")===-1&&ce.indexOf("mailto:")===-1?Tt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ve=>({...Ve,href:"mailto:"+ce})}):Tt.none()},Af=(K,ce)=>be=>{const Ve=be.href;return K===1&&!Cs(Ve)||K===0&&/^\s*www(\.|\d\.)/i.test(Ve)?Tt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ce}:// prefix?`,preprocess:je=>({...je,href:ce+"://"+Ve})}):Tt.none()},yl={preprocess:(K,ce)=>pe([km,Af(vt(K),zo(K))],be=>be(ce)).fold(()=>Promise.resolve(ce),be=>new Promise(Ve=>{Zr(K,be.message,lt=>{Ve(lt?be.preprocess(ce):ce)})}))},ct={getAnchors:K=>{const ce=K.dom.select("a:not([href])"),be=We(ce,Ve=>{const lt=Ve.name||Ve.id;return lt?[{text:lt,value:"#"+lt}]:[]});return be.length>0?Tt.some([{text:"None",value:""}].concat(be)):Tt.none()}},Tg={getClasses:K=>{const ce=Sr(K);return ce.length>0?hs.sanitize(ce):Tt.none()}},Td=K=>{try{return Tt.some(JSON.parse(K))}catch{return Tt.none()}},Am={getLinks:K=>{const ce=Ve=>K.convertURL(Ve.value||Ve.url||"","href"),be=fn(K);return new Promise(Ve=>{q(be)?fetch(be).then(lt=>lt.ok?lt.text().then(Td):Promise.reject()).then(Ve,()=>Ve(Tt.none())):Mn(be)?be(lt=>Ve(Tt.some(lt))):Ve(Tt.from(be))}).then(Ve=>Ve.bind(hs.sanitizeWith(ce)).map(lt=>lt.length>0?[{text:"None",value:""}].concat(lt):lt))}},wl={getRels:(K,ce)=>{const be=Co(K);if(be.length>0){const Ve=_s(ce,"_blank"),lt=pt(K)===!1,je=$n=>Zl(hs.getValue($n),Ve);return(lt?hs.sanitizeWith(je):hs.sanitize)(be)}return Tt.none()}},Ia=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ws={getTargets:K=>{const ce=wr(K);return Ee(ce)?hs.sanitize(ce).orThunk(()=>Tt.some(Ia)):ce===!1?Tt.none():Tt.some(Ia)}},wa=(K,ce,be)=>{const Ve=K.getAttrib(ce,be);return Ve!==null&&Ve.length>0?Tt.some(Ve):Tt.none()},Gl=(K,ce)=>{const be=K.dom,lt=xr(K)?Tt.some(Mc(K.selection,ce)):Tt.none(),je=ce.bind(zn=>Tt.from(be.getAttrib(zn,"href"))),Vt=ce.bind(zn=>Tt.from(be.getAttrib(zn,"target"))),$n=ce.bind(zn=>wa(be,zn,"rel")),En=ce.bind(zn=>wa(be,zn,"class")),Zs=ce.bind(zn=>wa(be,zn,"title"));return{url:je,text:lt,title:Zs,target:Vt,rel:$n,linkClass:En}},Kl={collect:(K,ce)=>Am.getLinks(K).then(be=>{const Ve=Gl(K,ce);return{anchor:Ve,catalogs:{targets:Ws.getTargets(K),rels:wl.getRels(K,Ve.target),classes:Tg.getClasses(K),anchor:ct.getAnchors(K),link:be},optNode:ce,flags:{titleEnabled:Ge(K)}}})},Qa=(K,ce)=>be=>{const Ve=be.getData();if(!Ve.url.value){mc(K),be.close();return}const lt=$n=>Tt.from(Ve[$n]).filter(En=>!_s(ce.anchor[$n],En)),je={href:Ve.url.value,text:lt("text"),target:lt("target"),rel:lt("rel"),class:lt("linkClass"),title:lt("title")},Vt={href:Ve.url.value,attach:Ve.url.meta!==void 0&&Ve.url.meta.attach?Ve.url.meta.attach:cn};yl.preprocess(K,je).then($n=>{Wo(K,Vt,$n)}),be.close()},No=K=>{const ce=ks(K);return Kl.collect(K,ce)},Rs=(K,ce)=>{const be=K.anchor,Ve=be.url.getOr("");return{url:{value:Ve,meta:{original:{value:Ve}}},text:be.text.getOr(""),title:be.title.getOr(""),anchor:Ve,link:Ve,rel:be.rel.getOr(""),target:be.target.or(ce).getOr(""),linkClass:be.linkClass.getOr("")}},dr=(K,ce,be)=>{const Ve=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],lt=K.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),je=K.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Vt=Tt.from(Je(be)),$n=Rs(K,Vt),En=K.catalogs,Zs=Zo.init($n,En);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Nn([Ve,lt,je,fo([En.anchor.map(hs.createUi("anchor","Anchors")),En.rels.map(hs.createUi("rel","Rel")),En.targets.map(hs.createUi("target","Open link in...")),En.link.map(hs.createUi("link","Link list")),En.classes.map(hs.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:$n,onChange:(Xl,{name:la})=>{Zs.onChange(Xl.getData,{name:la}).each(Ui=>{Xl.setData(Ui)})},onSubmit:ce}},Yc=K=>{No(K).then(be=>{const Ve=Qa(K,be);return dr(be,Ve,K)}).then(be=>{K.windowManager.open(be)})},ec=K=>{K.addCommand("mceLink",(ce,be)=>{(be==null?void 0:be.dialog)===!0||!U(K)?Yc(K):K.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},ca=K=>{K.addShortcut("Meta+K","",()=>{K.execCommand("mceLink")})},jo=K=>{let ce=K;return{get:()=>ce,set:lt=>{ce=lt}}},Om=K=>{const ce=jo(Tt.none()),be=()=>ce.get().each(K);return{clear:()=>{be(),ce.set(Tt.none())},isSet:()=>ce.get().isSome(),get:()=>ce.get(),set:$n=>{be(),ce.set(Tt.some($n))}}},Fi=()=>{const K=Om(cn);return{...K,on:be=>K.get().each(be)}},_d=(K,ce)=>K.substring(ce),Xn=(K,ce,be)=>ce===""||K.length>=ce.length&&K.substr(be,be+ce.length)===ce,Hi=(K,ce)=>Es(K,ce)?_d(K,ce.length):K,Es=(K,ce)=>Xn(K,ce,0);var Rm=tinymce.util.Tools.resolve("tinymce.util.VK");const Xc=(K,ce)=>{document.body.appendChild(K),K.dispatchEvent(ce),document.body.removeChild(K)},zi=K=>{const ce=document.createElement("a");ce.target="_blank",ce.href=K,ce.rel="noreferrer noopener";const be=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(be),Xc(ce,be)},$r=K=>K.altKey===!0&&K.shiftKey===!1&&K.ctrlKey===!1&&K.metaKey===!1,Lu=(K,ce)=>{if(ce){const be=Pr(ce);if(/^#/.test(be)){const Ve=K.dom.select(`${be},[name="${Hi(be,"#")}"]`);Ve.length&&K.selection.scrollIntoView(Ve[0],!0)}else zi(ce.href)}},Jc=K=>{const ce=K.selection.getRng(),be=ce.startContainer;return cs(be)&&ce.startContainer===ce.endContainer&&K.dom.select("img",be).length===1},kd=(K,ce)=>{const be=To(K.dom.getParents(ce));return Ut(be.length===1,be[0])},Dm=K=>{const ce=As(K.selection.getRng());return Ut(ce.length>0,ce[0]).or(kd(K,K.selection.getNode()))},Mm=K=>K.selection.isCollapsed()||Jc(K)?kd(K,K.selection.getStart()):Dm(K),mr=K=>{const ce=Fi(),be=()=>ce.get().or(Mm(K)),Ve=()=>be().each(lt=>Lu(K,lt));return K.on("contextmenu",lt=>{kd(K,lt.target).each(ce.set)}),K.on("SelectionChange",()=>{ce.isSet()||Mm(K).each(ce.set)}),K.on("click",lt=>{ce.clear();const je=To(K.dom.getParents(lt.target));je.length===1&&Rm.metaKeyPressed(lt)&&(lt.preventDefault(),Lu(K,je[0]))}),K.on("keydown",lt=>{ce.clear(),!lt.isDefaultPrevented()&&lt.keyCode===13&&$r(lt)&&be().each(je=>{lt.preventDefault(),Lu(K,je)})}),{gotoSelectedLink:Ve}},Vi=K=>()=>{K.execCommand("mceLink",!1,{dialog:!0})},Yl=(K,ce)=>(K.on("NodeChange",ce),()=>K.off("NodeChange",ce)),Fu=K=>ce=>{const be=()=>{ce.setActive(!K.mode.isReadOnly()&&Uo(K,K.selection.getNode())),ce.setEnabled(K.selection.isEditable())};return be(),Yl(K,be)},Nm=K=>ce=>{const be=()=>{ce.setEnabled(K.selection.isEditable())};return be(),Yl(K,be)},Qc=K=>ce=>{const be=je=>jl(je)||to(K.selection.getRng()),Ve=K.dom.getParents(K.selection.getStart()),lt=je=>{ce.setEnabled(be(je)&&K.selection.isEditable())};return lt(Ve),Yl(K,je=>lt(je.parents))},Ys=(K,ce)=>{K.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:Vi(K),onSetup:Fu(K)}),K.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:ce.gotoSelectedLink,onSetup:Qc(K)}),K.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>mc(K),onSetup:Qc(K)})},fr=(K,ce)=>{K.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:ce.gotoSelectedLink,onSetup:Qc(K)}),K.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Vi(K),onSetup:Nm(K)}),K.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>mc(K),onSetup:Qc(K)})},hc=K=>{const ce="link unlink openlink",be="link";K.ui.registry.addContextMenu("link",{update:Ve=>K.dom.isEditable(Ve)?jl(K.dom.getParents(Ve,"a"))?ce:be:""})},Hu=(K,ce)=>{const be=je=>{je.selection.collapse(!1)},Ve=je=>{const Vt=K.selection.getNode();return je.setEnabled(Uo(K,Vt)&&K.selection.isEditable()),cn},lt=je=>{const Vt=ks(K),$n=xr(K);if(Vt.isNone()&&$n){const En=Mc(K.selection,Vt);return Ut(En.length===0,je)}else return Tt.none()};K.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Fu(K)},label:"Link",predicate:je=>Jo(K)&&Uo(K,je),initValue:()=>ks(K).fold(Ae(""),Pr),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:je=>{const Vt=K.selection.getNode();return je.setActive(Uo(K,Vt)),Fu(K)(je)},onAction:je=>{const Vt=je.getValue(),$n=lt(Vt);Wo(K,{href:Vt,attach:cn},{href:Vt,text:$n,title:Tt.none(),rel:Tt.none(),target:Tt.from(Je(K)),class:Tt.none()}),be(K),je.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ve,onAction:je=>{mc(K),je.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ve,onAction:je=>{ce.gotoSelectedLink(),je.hide()}}]})},Ad=K=>{const ce=mr(K);Ys(K,ce),fr(K,ce),hc(K),Hu(K,ce)};var ia=()=>{p.add("link",K=>{_o(K),ec(K),Ad(K),ca(K)})};ia()}()),nJ}var sJ;function tse(){return sJ||(sJ=1,ese()),tJ}tse();var rJ={},aJ={},cJ;function nse(){return cJ||(cJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const S=(E,R,V)=>{var te;return V(E,R.prototype)?!0:((te=E.constructor)===null||te===void 0?void 0:te.name)===R.name},O=E=>{const R=typeof E;return E===null?"null":R==="object"&&Array.isArray(E)?"array":R==="object"&&S(E,String,(V,te)=>te.isPrototypeOf(V))?"string":R},P=E=>R=>O(R)===E,F=E=>R=>typeof R===E,Z=E=>R=>E===R,q=P("string"),se=P("array"),Ee=F("boolean"),Le=Z(void 0),Fe=E=>E==null,ut=E=>!Fe(E),en=F("function"),Mn=F("number"),ln=()=>{},cn=(E,R)=>V=>E(R(V)),Ae=E=>()=>E,On=E=>E,Tt=(E,R)=>E===R;function le(E,...R){return(...V)=>{const te=R.concat(V);return E.apply(null,te)}}const Ot=E=>{E()},Io=Ae(!1),kn=Ae(!0);class ae{constructor(R,V){this.tag=R,this.value=V}static some(R){return new ae(!0,R)}static none(){return ae.singletonNone}fold(R,V){return this.tag?V(this.value):R()}isSome(){return this.tag}isNone(){return!this.tag}map(R){return this.tag?ae.some(R(this.value)):ae.none()}bind(R){return this.tag?R(this.value):ae.none()}exists(R){return this.tag&&R(this.value)}forall(R){return!this.tag||R(this.value)}filter(R){return!this.tag||R(this.value)?this:ae.none()}getOr(R){return this.tag?this.value:R}or(R){return this.tag?this:R}getOrThunk(R){return this.tag?this.value:R()}orThunk(R){return this.tag?this:R()}getOrDie(R){if(this.tag)return this.value;throw new Error(R??"Called getOrDie on None")}static from(R){return ut(R)?ae.some(R):ae.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(R){this.tag&&R(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ae.singletonNone=new ae(!1);const bn=Object.keys,Xo=Object.hasOwnProperty,Nn=(E,R)=>{const V=bn(E);for(let te=0,he=V.length;te<he;te++){const Ue=V[te],gt=E[Ue];R(gt,Ue)}},We=E=>(R,V)=>{E[V]=R},pe=(E,R,V,te)=>{Nn(E,(he,Ue)=>{(R(he,Ue)?V:te)(he,Ue)})},_s=(E,R)=>{const V={};return pe(E,R,We(V),ln),V},fo=(E,R)=>{const V=[];return Nn(E,(te,he)=>{V.push(R(te,he))}),V},Ut=E=>fo(E,On),D=E=>bn(E).length,_o=(E,R)=>vt(E,R)?ae.from(E[R]):ae.none(),vt=(E,R)=>Xo.call(E,R),Jo=(E,R)=>vt(E,R)&&E[R]!==void 0&&E[R]!==null,fn=E=>{for(const R in E)if(Xo.call(E,R))return!1;return!0},Je=Array.prototype.indexOf,zo=Array.prototype.push,wr=(E,R)=>Je.call(E,R),Co=(E,R)=>wr(E,R)>-1,Sr=(E,R)=>{for(let V=0,te=E.length;V<te;V++){const he=E[V];if(R(he,V))return!0}return!1},Ge=(E,R)=>{const V=[];for(let te=0;te<E;te++)V.push(R(te));return V},pt=(E,R)=>{const V=E.length,te=new Array(V);for(let he=0;he<V;he++){const Ue=E[he];te[he]=R(Ue,he)}return te},U=(E,R)=>{for(let V=0,te=E.length;V<te;V++){const he=E[V];R(he,V)}},pl=(E,R)=>{for(let V=E.length-1;V>=0;V--){const te=E[V];R(te,V)}},ko=(E,R)=>{const V=[],te=[];for(let he=0,Ue=E.length;he<Ue;he++){const gt=E[he];(R(gt,he)?V:te).push(gt)}return{pass:V,fail:te}},gs=(E,R)=>{const V=[];for(let te=0,he=E.length;te<he;te++){const Ue=E[te];R(Ue,te)&&V.push(Ue)}return V},Vo=(E,R,V)=>(pl(E,(te,he)=>{V=R(V,te,he)}),V),kf=(E,R,V)=>(U(E,(te,he)=>{V=R(V,te,he)}),V),gn=(E,R,V)=>{for(let te=0,he=E.length;te<he;te++){const Ue=E[te];if(R(Ue,te))return ae.some(Ue);if(V(Ue,te))break}return ae.none()},vo=(E,R)=>gn(E,R,Io),hn=E=>{const R=[];for(let V=0,te=E.length;V<te;++V){if(!se(E[V]))throw new Error("Arr.flatten item "+V+" was not an array, input: "+E);zo.apply(R,E[V])}return R},Te=(E,R)=>hn(pt(E,R)),Ja=(E,R)=>{for(let V=0,te=E.length;V<te;++V){const he=E[V];if(R(he,V)!==!0)return!1}return!0},nr=(E,R)=>{const V={};for(let te=0,he=E.length;te<he;te++){const Ue=E[te];V[String(Ue)]=R(Ue,te)}return V},Qt=(E,R)=>R>=0&&R<E.length?ae.some(E[R]):ae.none(),hi=E=>Qt(E,0),cs=E=>Qt(E,E.length-1),bl=(E,R)=>{for(let V=0;V<E.length;V++){const te=R(E[V],V);if(te.isSome())return te}return ae.none()},Cs=8,Pr=9,Zl=11,Ca=1,ks=3,Uo=(E,R)=>{const te=(R||document).createElement("div");if(te.innerHTML=E,!te.hasChildNodes()||te.childNodes.length>1){const he="HTML does not have a single root node";throw console.error(he,E),new Error(he)}return To(te.childNodes[0])},Mc=(E,R)=>{const te=(R||document).createElement(E);return To(te)},As=(E,R)=>{const te=(R||document).createTextNode(E);return To(te)},To=E=>{if(E==null)throw new Error("Node cannot be null or undefined");return{dom:E}},to={fromHtml:Uo,fromTag:Mc,fromText:As,fromDom:To,fromPoint:(E,R,V)=>ae.from(E.dom.elementFromPoint(R,V)).map(To)},xr=(E,R)=>{const V=E.dom;if(V.nodeType!==Ca)return!1;{const te=V;if(te.matches!==void 0)return te.matches(R);if(te.msMatchesSelector!==void 0)return te.msMatchesSelector(R);if(te.webkitMatchesSelector!==void 0)return te.webkitMatchesSelector(R);if(te.mozMatchesSelector!==void 0)return te.mozMatchesSelector(R);throw new Error("Browser lacks native selectors")}},Br=E=>E.nodeType!==Ca&&E.nodeType!==Pr&&E.nodeType!==Zl||E.childElementCount===0,vl=(E,R)=>{const V=R===void 0?document:R.dom;return Br(V)?[]:pt(V.querySelectorAll(E),to.fromDom)},ql=(E,R)=>{const V=R===void 0?document:R.dom;return Br(V)?ae.none():ae.from(V.querySelector(E)).map(to.fromDom)},is=(E,R)=>E.dom===R.dom,Tm=xr;typeof window<"u"||Function("return this;")();const bt=E=>E.dom.nodeName.toLowerCase(),Yn=E=>E.dom.nodeType,Ur=E=>R=>Yn(R)===E,Wr=E=>Yn(E)===Cs||bt(E)==="#comment",Nc=Ur(Ca),pi=Ur(ks),Wo=Ur(Pr),mc=Ur(Zl),Ii=E=>R=>Nc(R)&&bt(R)===E,Mo=E=>to.fromDom(E.dom.ownerDocument),an=E=>Wo(E)?E:Mo(E),ur=E=>ae.from(E.dom.parentNode).map(to.fromDom),bi=(E,R)=>{const V=en(R)?R:Io;let te=E.dom;const he=[];for(;te.parentNode!==null&&te.parentNode!==void 0;){const Ue=te.parentNode,gt=to.fromDom(Ue);if(he.push(gt),V(gt)===!0)break;te=Ue}return he},$u=E=>ae.from(E.dom.previousSibling).map(to.fromDom),_m=E=>ae.from(E.dom.nextSibling).map(to.fromDom),Er=E=>pt(E.dom.childNodes,to.fromDom),hs=(E,R)=>{const V=E.dom.childNodes;return ae.from(V[R]).map(to.fromDom)},Os=E=>hs(E,0),fc=E=>mc(E)&&ut(E.dom.host),Iu=E=>to.fromDom(E.dom.getRootNode()),vi=E=>{const R=Iu(E);return fc(R)?ae.some(R):ae.none()},Tr=E=>to.fromDom(E.dom.host),Zo=E=>{const R=pi(E)?E.dom.parentNode:E.dom;if(R==null||R.ownerDocument===null)return!1;const V=R.ownerDocument;return vi(to.fromDom(R)).fold(()=>V.body.contains(R),cn(Zo,Tr))};var gc=(E,R,V,te,he)=>E(V,te)?ae.some(V):en(he)&&he(V)?ae.none():R(V,te,he);const Zr=(E,R,V)=>{let te=E.dom;const he=en(V)?V:Io;for(;te.parentNode;){te=te.parentNode;const Ue=to.fromDom(te);if(R(Ue))return ae.some(Ue);if(he(Ue))break}return ae.none()},km=(E,R,V)=>gc((he,Ue)=>Ue(he),Zr,E,R,V),Af=(E,R)=>{const V=he=>R(to.fromDom(he));return vo(E.dom.childNodes,V).map(to.fromDom)},Kc=(E,R,V)=>Zr(E,te=>xr(te,R),V),yl=(E,R)=>Af(E,V=>xr(V,R)),Et=(E,R)=>ql(R,E),ct=(E,R,V)=>gc((he,Ue)=>xr(he,Ue),Kc,E,R,V),Cl=E=>ct(E,"[contenteditable]"),Tg=(E,R=!1)=>Zo(E)?E.dom.isContentEditable:Cl(E).fold(Ae(R),V=>Td(V)==="true"),Td=E=>E.dom.contentEditable,Qo=E=>E.nodeName.toLowerCase(),Am=E=>to.fromDom(E.getBody()),Li=E=>R=>is(R,Am(E)),wl=E=>E?E.replace(/px$/,""):"",Ia=E=>/^\d+(\.\d+)?$/.test(E)?E+"px":E,or=E=>to.fromDom(E.selection.getStart()),Ws=E=>to.fromDom(E.selection.getEnd()),wa=E=>km(E,Ii("table")).forall(Tg),Gl=(E,R)=>gs(Er(E),R),Bs=(E,R)=>{let V=[];return U(Er(E),te=>{R(te)&&(V=V.concat([te])),V=V.concat(Bs(te,R))}),V},Kl=(E,R)=>Gl(E,V=>xr(V,R)),Qa=(E,R)=>vl(R,E),No=(E,R,V)=>{if(q(V)||Ee(V)||Mn(V))E.setAttribute(R,V+"");else throw console.error("Invalid call to Attribute.set. Key ",R,":: Value ",V,":: Element ",E),new Error("Attribute value was not simple")},Rs=(E,R,V)=>{No(E.dom,R,V)},dr=(E,R)=>{const V=E.dom;Nn(R,(te,he)=>{No(V,he,te)})},Yc=(E,R)=>{const V=E.dom.getAttribute(R);return V===null?void 0:V},ec=(E,R)=>ae.from(Yc(E,R)),ca=(E,R)=>{E.dom.removeAttribute(R)},jo=E=>kf(E.dom.attributes,(R,V)=>(R[V.name]=V.value,R),{}),Om=(E,R,V=Tt)=>E.exists(te=>V(te,R)),Fi=E=>{const R=[],V=te=>{R.push(te)};for(let te=0;te<E.length;te++)E[te].each(V);return R},_d=(E,R,V)=>E.isSome()&&R.isSome()?ae.some(V(E.getOrDie(),R.getOrDie())):ae.none(),Xn=E=>E.bind(On),Hi=(E,R)=>E?ae.some(R):ae.none(),Es=(E,R)=>E.substring(R),Rm=(E,R,V)=>R===""||E.length>=R.length&&E.substr(V,V+R.length)===R,Xc=(E,R)=>zi(E,R)?Es(E,R.length):E,zi=(E,R)=>Rm(E,R,0),Lu=(E=>R=>R.replace(E,""))(/^\s+|\s+$/g),Jc=E=>E.length>0,kd=E=>!Jc(E),Dm=(E,R=10)=>{const V=parseInt(E,R);return isNaN(V)?ae.none():ae.some(V)},Mm=E=>{const R=parseFloat(E);return isNaN(R)?ae.none():ae.some(R)},mr=E=>E.style!==void 0&&en(E.style.getPropertyValue),Vi=(E,R,V)=>{if(!q(V))throw console.error("Invalid call to CSS.set. Property ",R,":: Value ",V,":: Element ",E),new Error("CSS value must be a string: "+V);mr(E)&&E.style.setProperty(R,V)},Yl=(E,R)=>{mr(E)&&E.style.removeProperty(R)},Fu=(E,R,V)=>{const te=E.dom;Vi(te,R,V)},Nm=(E,R)=>{const V=E.dom,he=window.getComputedStyle(V).getPropertyValue(R);return he===""&&!Zo(E)?Qc(V,R):he},Qc=(E,R)=>mr(E)?E.style.getPropertyValue(R):"",Ys=(E,R)=>{const V=E.dom,te=Qc(V,R);return ae.from(te).filter(he=>he.length>0)},fr=(E,R)=>{const V=E.dom;Yl(V,R),Om(ec(E,"style").map(Lu),"")&&ca(E,"style")},hc=(E,R,V=0)=>ec(E,R).map(te=>parseInt(te,10)).getOr(V),Hu=(E,R)=>Ad(E,R,kn),Ad=(E,R,V)=>Te(Er(E),te=>xr(te,R)?V(te)?[te]:[]:Ad(te,R,V)),ia=["tfoot","thead","tbody","colgroup"],K=E=>Co(ia,E),ce=(E,R)=>({rows:E,columns:R}),be=(E,R,V)=>({element:E,rowspan:R,colspan:V}),Ve=(E,R,V,te,he,Ue)=>({element:E,rowspan:R,colspan:V,row:te,column:he,isLocked:Ue}),lt=(E,R,V)=>({element:E,cells:R,section:V}),je=(E,R,V,te)=>({startRow:E,startCol:R,finishRow:V,finishCol:te}),Vt=(E,R,V)=>({element:E,colspan:R,column:V}),$n=(E,R)=>({element:E,columns:R}),En=(E,R,V=Io)=>{if(V(R))return ae.none();if(Co(E,bt(R)))return ae.some(R);const te=he=>xr(he,"table")||V(he);return Kc(R,E.join(","),te)},Zs=(E,R)=>En(["td","th"],E,R),zn=E=>Hu(E,"th,td"),Xl=E=>xr(E,"colgroup")?Kl(E,"col"):Te(vn(E),R=>Kl(R,"col")),la=(E,R)=>ct(E,"table",R),Ui=E=>Hu(E,"tr"),vn=E=>la(E).fold(Ae([]),R=>Kl(R,"colgroup")),jr=(E,R)=>pt(E,V=>{if(bt(V)==="colgroup"){const te=pt(Xl(V),he=>{const Ue=hc(he,"span",1);return be(he,1,Ue)});return lt(V,te,"colgroup")}else{const te=pt(zn(V),he=>{const Ue=hc(he,"rowspan",1),gt=hc(he,"colspan",1);return be(he,Ue,gt)});return lt(V,te,R(V))}}),Pm=E=>ur(E).map(R=>{const V=bt(R);return K(V)?V:"tbody"}).getOr("tbody"),Qe=E=>{const R=Ui(E),te=[...vn(E),...R];return jr(te,Pm)},Sl="data-snooker-locked-cols",$s=E=>ec(E,Sl).bind(R=>ae.from(R.match(/\d+/g))).map(R=>nr(R,kn)),Bm=(E,R)=>E+","+R,Is=(E,R,V)=>ae.from(E.access[Bm(R,V)]),Zn=(E,R,V)=>{const te=tc(E,he=>V(R,he.element));return te.length>0?ae.some(te[0]):ae.none()},tc=(E,R)=>{const V=Te(E.all,te=>te.cells);return gs(V,R)},Ir=E=>{const R={};let V=0;return U(E.cells,te=>{const he=te.colspan;Ge(he,Ue=>{const gt=V+Ue;R[gt]=Vt(te.element,he,gt)}),V+=he}),R},Od=E=>{const R={},V=[],he=hi(E).map(wc=>wc.element).bind(la).bind($s).getOr({});let Ue=0,gt=0,Ht=0;const{pass:wn,fail:Bn}=ko(E,wc=>wc.section==="colgroup");U(Bn,wc=>{const Ti=[];U(wc.cells,Qu=>{let Lc=0;for(;R[Bm(Ht,Lc)]!==void 0;)Lc++;const Wd=Jo(he,Lc.toString()),jm=Ve(Qu.element,Qu.rowspan,Qu.colspan,Ht,Lc,Wd);for(let qm=0;qm<Qu.colspan;qm++)for(let rc=0;rc<Qu.rowspan;rc++){const Yh=Ht+rc,Gm=Lc+qm,Xh=Bm(Yh,Gm);R[Xh]=jm,gt=Math.max(gt,Gm+1)}Ti.push(jm)}),Ue++,V.push(lt(wc.element,Ti,wc.section)),Ht++});const{columns:wo,colgroups:So}=cs(wn).map(wc=>{const Ti=Ir(wc);return{colgroups:[$n(wc.element,Ut(Ti))],columns:Ti}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ce(Ue,gt),access:R,all:V,columns:wo,colgroups:So}},xl={fromTable:E=>{const R=Qe(E);return Od(R)},generate:Od,getAt:Is,findItem:Zn,filterItems:tc,justCells:E=>Te(E.all,R=>R.cells),justColumns:E=>Ut(E.columns),hasColumns:E=>bn(E.columns).length>0,getColumnAt:(E,R)=>ae.from(E.columns[R])};var gr=tinymce.util.Tools.resolve("tinymce.util.Tools");const qr=(E,R,V)=>{const te=E.select("td,th",R);let he;for(let Ue=0;Ue<te.length;Ue++){const gt=E.getStyle(te[Ue],V);if(Le(he)&&(he=gt),he!==gt)return""}return he},La=(E,R,V)=>{gr.each("left center right".split(" "),te=>{te!==V&&E.formatter.remove("align"+te,{},R)}),V&&E.formatter.apply("align"+V,{},R)},Jl=(E,R,V)=>{gr.each("top middle bottom".split(" "),te=>{te!==V&&E.formatter.remove("valign"+te,{},R)}),V&&E.formatter.apply("valign"+V,{},R)},Of=(E,R,V)=>{E.dispatch("TableModified",{...V,table:R})},Rn=(E,R)=>Mm(E).getOr(R),Wi=(E,R,V)=>Rn(Nm(E,R),V),El=(E,R,V,te)=>{const he=Wi(E,`padding-${V}`,0),Ue=Wi(E,`padding-${te}`,0),gt=Wi(E,`border-${V}-width`,0),Ht=Wi(E,`border-${te}-width`,0);return R-he-Ue-gt-Ht},Tl=(E,R)=>{const V=E.dom,te=V.getBoundingClientRect().width||V.offsetWidth;return El(E,te,"left","right")},es=E=>Tl(E);var _r=tinymce.util.Tools.resolve("tinymce.Env");const Vu="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",_g=Ge(5,E=>{const R=`${E+1}px`;return{title:R,value:R}}),_l=pt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],E=>({title:E,value:E.toLowerCase()})),Fa="100%",kr=E=>{var R;const V=E.dom,te=(R=V.getParent(E.selection.getStart(),V.isBlock))!==null&&R!==void 0?R:E.getBody();return es(to.fromDom(te))+"px"},ua=(E,R)=>Pd(E)||!Pc(E)?R:Df(E)?{...R,width:kr(E)}:{...R,width:Fa},Sa=(E,R)=>Pd(E)||Pc(E)?R:Df(E)?{...R,width:kr(E)}:{...R,width:Fa},js=E=>R=>R.options.get(E),Uu=E=>{const R=E.options.register;R("table_border_widths",{processor:"object[]",default:_g}),R("table_border_styles",{processor:"object[]",default:_l}),R("table_cell_advtab",{processor:"boolean",default:!0}),R("table_row_advtab",{processor:"boolean",default:!0}),R("table_advtab",{processor:"boolean",default:!0}),R("table_appearance_options",{processor:"boolean",default:!0}),R("table_grid",{processor:"boolean",default:!_r.deviceType.isTouch()}),R("table_cell_class_list",{processor:"object[]",default:[]}),R("table_row_class_list",{processor:"object[]",default:[]}),R("table_class_list",{processor:"object[]",default:[]}),R("table_toolbar",{processor:"string",default:Vu}),R("table_background_color_map",{processor:"object[]",default:[]}),R("table_border_color_map",{processor:"object[]",default:[]})},ts=js("table_sizing_mode"),Rd=js("table_border_widths"),Im=js("table_border_styles"),kl=js("table_cell_advtab"),Dd=js("table_row_advtab"),Md=js("table_advtab"),Wu=js("table_appearance_options"),Zu=js("table_grid"),Pc=js("table_style_by_css"),xa=js("table_cell_class_list"),Bh=js("table_row_class_list"),Zi=js("table_class_list"),Rf=js("table_toolbar"),Nd=js("table_background_color_map"),kg=js("table_border_color_map"),Df=E=>ts(E)==="fixed",Pd=E=>ts(E)==="responsive",Mf=E=>{const R=E.options,V=R.get("table_default_styles");return R.isSet("table_default_styles")?V:ua(E,V)},Ag=E=>{const R=E.options,V=R.get("table_default_attributes");return R.isSet("table_default_attributes")?V:Sa(E,V)},ju=(E,R)=>R.column>=E.startCol&&R.column+R.colspan-1<=E.finishCol&&R.row>=E.startRow&&R.row+R.rowspan-1<=E.finishRow,Og=(E,R)=>{let V=!0;const te=le(ju,R);for(let he=R.startRow;he<=R.finishRow;he++)for(let Ue=R.startCol;Ue<=R.finishCol;Ue++)V=V&&xl.getAt(E,he,Ue).exists(te);return V?ae.some(R):ae.none()},de=(E,R)=>je(Math.min(E.row,R.row),Math.min(E.column,R.column),Math.max(E.row+E.rowspan-1,R.row+R.rowspan-1),Math.max(E.column+E.colspan-1,R.column+R.colspan-1)),qu=(E,R,V)=>{const te=xl.findItem(E,R,is),he=xl.findItem(E,V,is);return te.bind(Ue=>he.map(gt=>de(Ue,gt)))},Ha=(E,R,V)=>qu(E,R,V).bind(te=>Og(E,te)),C1=(E,R,V)=>{const te=$h(E);return Ha(te,R,V)},$h=xl.fromTable,Ql=(E,R)=>{ur(E).each(te=>{te.dom.insertBefore(R.dom,E.dom)})},oo=(E,R)=>{_m(E).fold(()=>{ur(E).each(he=>{Gr(he,R)})},te=>{Ql(te,R)})},Ts=(E,R)=>{Os(E).fold(()=>{Gr(E,R)},te=>{E.dom.insertBefore(R.dom,te.dom)})},Gr=(E,R)=>{E.dom.appendChild(R.dom)},Al=(E,R)=>{Ql(E,R),Gr(R,E)},Rg=(E,R)=>{U(R,(V,te)=>{const he=te===0?E:R[te-1];oo(he,V)})},Gu=(E,R)=>{U(R,V=>{Gr(E,V)})},Ea=E=>{const R=E.dom;R.parentNode!==null&&R.parentNode.removeChild(R)},Nf=E=>{const R=Er(E);R.length>0&&Rg(E,R),Ea(E)},eu=((E,R)=>{const V=Ue=>{if(!E(Ue))throw new Error("Can only get "+R+" value of a "+R+" node");return te(Ue).getOr("")},te=Ue=>E(Ue)?ae.from(Ue.dom.nodeValue):ae.none();return{get:V,getOption:te,set:(Ue,gt)=>{if(!E(Ue))throw new Error("Can only set raw "+R+" value of a "+R+" node");Ue.dom.nodeValue=gt}}})(pi,"text"),tu=E=>eu.get(E),Lm=(E,R)=>eu.set(E,R);var Bc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Fm=()=>{const E=Bn=>to.fromDom(Bn.dom.cloneNode(!1)),R=Bn=>an(Bn).dom,V=Bn=>Nc(Bn)?bt(Bn)==="body"?!0:Co(Bc,bt(Bn)):!1,te=Bn=>Nc(Bn)?Co(["br","img","hr","input"],bt(Bn)):!1,he=Bn=>Nc(Bn)&&Yc(Bn,"contenteditable")==="false",Ue=(Bn,wo)=>Bn.dom.compareDocumentPosition(wo.dom),gt=(Bn,wo)=>{const So=jo(Bn);dr(wo,So)},Ht=Bn=>{const wo=bt(Bn);return Co(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],wo)},wn=Bn=>Nc(Bn)?ec(Bn,"lang"):ae.none();return{up:Ae({selector:Kc,closest:ct,predicate:Zr,all:bi}),down:Ae({selector:Qa,predicate:Bs}),styles:Ae({get:Nm,getRaw:Ys,set:Fu,remove:fr}),attrs:Ae({get:Yc,set:Rs,remove:ca,copyTo:gt}),insert:Ae({before:Ql,after:oo,afterAll:Rg,append:Gr,appendAll:Gu,prepend:Ts,wrap:Al}),remove:Ae({unwrap:Nf,remove:Ea}),create:Ae({nu:to.fromTag,clone:E,text:to.fromText}),query:Ae({comparePosition:Ue,prevSibling:$u,nextSibling:_m}),property:Ae({children:Er,name:bt,parent:ur,document:R,isText:pi,isComment:Wr,isElement:Nc,isSpecial:Ht,getLanguage:wn,getText:tu,setText:Lm,isBoundary:V,isEmptyTag:te,isNonEditable:he}),eq:is,is:Tm}};const Lr=(E,R,V,te)=>{const he=V[0],Ue=V.slice(1);return te(E,R,he,Ue)},nu=(E,R,V)=>V.length>0?Lr(E,R,V,yi):ae.none(),yi=(E,R,V,te)=>{const he=R(E,V);return Vo(te,(Ue,gt)=>{const Ht=R(E,gt);return Ta(E,Ue,Ht)},he)},Ta=(E,R,V)=>R.bind(te=>V.filter(le(E.eq,te))),Ku=nu,w1=Fm(),Bf=(E,R)=>Ku(w1,(V,te)=>E(te),R),ji=E=>Kc(E,"table"),Bd=(E,R)=>{const V=Qa(E,R);return V.length>0?ae.some(V):ae.none()},Ih=(E,R,V)=>Et(E,R).bind(te=>Et(E,V).bind(he=>Bf(ji,[te,he]).map(Ue=>({first:te,last:he,table:Ue})))),$f=(E,R)=>Bd(E,R),Lh=(E,R,V)=>Ih(E,R,V).bind(te=>{const he=wn=>is(E,wn),Ue="thead,tfoot,tbody,table",gt=Kc(te.first,Ue,he),Ht=Kc(te.last,Ue,he);return gt.bind(wn=>Ht.bind(Bn=>is(wn,Bn)?C1(te.table,te.first,te.last):ae.none()))}),Fh=E=>pt(E,to.fromDom),Hh="data-mce-selected",qi="data-mce-first-selected",Dg="td["+qi+"],th["+qi+"]",Ci="data-mce-last-selected",ws="td["+Ci+"],th["+Ci+"]",Xs={selected:Hh,firstSelectedSelector:Dg,lastSelectedSelector:ws},pc=E=>la(E).bind(R=>$f(R,Xs.firstSelectedSelector)).fold(Ae(E),R=>R[0]),$d=E=>(R,V)=>{const te=bt(R),he=te==="col"||te==="colgroup"?pc(R):R;return ct(he,E,V)},Id=$d("th,td,caption"),hr=$d("th,td"),Wt=E=>Fh(E.model.table.getSelectedCells()),Mg=(E,R)=>{const V=hr(E),te=V.bind(he=>la(he)).map(he=>Ui(he));return _d(V,te,(he,Ue)=>gs(Ue,gt=>Sr(Fh(gt.dom.cells),Ht=>Yc(Ht,R)==="1"||is(Ht,he)))).getOr([])},wi=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],bc=E=>({value:zm(E)}),go=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Yu=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Hm=E=>go.test(E)||Yu.test(E),zm=E=>Xc(E,"#").toUpperCase(),zh=E=>Hm(E)?ae.some({value:zm(E)}):ae.none(),Tn=E=>{const R=E.toString(16);return(R.length===1?"0"+R:R).toUpperCase()},Ls=E=>{const R=Tn(E.red)+Tn(E.green)+Tn(E.blue);return bc(R)},Ld=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,nc=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,_a=(E,R,V,te)=>({red:E,green:R,blue:V,alpha:te}),vc=(E,R,V,te)=>{const he=parseInt(E,10),Ue=parseInt(R,10),gt=parseInt(V,10),Ht=parseFloat(te);return _a(he,Ue,gt,Ht)},Ar=E=>{const R=Ld.exec(E);if(R!==null)return ae.some(vc(R[1],R[2],R[3],"1"));const V=nc.exec(E);return V!==null?ae.some(vc(V[1],V[2],V[3],V[4])):ae.none()},za=E=>zh(E).orThunk(()=>Ar(E).map(Ls)).getOrThunk(()=>{const R=document.createElement("canvas");R.height=1,R.width=1;const V=R.getContext("2d");V.clearRect(0,0,R.width,R.height),V.fillStyle="#FFFFFF",V.fillStyle=E,V.fillRect(0,0,1,1);const te=V.getImageData(0,0,1,1).data,he=te[0],Ue=te[1],gt=te[2],Ht=te[3];return Ls(_a(he,Ue,gt,Ht))}),$c=E=>Ar(E).map(Ls).map(R=>"#"+R.value).getOr(E),Fd=E=>{let R=E;return{get:()=>R,set:he=>{R=he}}},ps=E=>{const R=Fd(ae.none()),V=()=>R.get().each(E);return{clear:()=>{V(),R.set(ae.none())},isSet:()=>R.get().isSome(),get:()=>R.get(),set:Ht=>{V(),R.set(ae.some(Ht))}}},If=()=>ps(E=>E.unbind()),qs=(E,R,V)=>te=>{const he=If(),Ue=kd(V),gt=()=>{const Ht=Wt(E),wn=Bn=>E.formatter.match(R,{value:V},Bn.dom,Ue);Ue?(te.setActive(!Sr(Ht,wn)),he.set(E.formatter.formatChanged(R,Bn=>te.setActive(!Bn),!0))):(te.setActive(Ja(Ht,wn)),he.set(E.formatter.formatChanged(R,te.setActive,!1,{value:V})))};return E.initialized?gt():E.on("init",gt),he.clear},Gi=E=>Jo(E,"menu"),Ki=E=>pt(E,R=>{const V=R.text||R.title||"";return Gi(R)?{text:V,items:Ki(R.menu)}:{text:V,value:R.value}}),Ao=E=>E.length?ae.some(Ki([{text:"Select...",value:"mce-no-match"},...E])):ae.none(),oc=(E,R,V,te)=>pt(R,he=>{const Ue=he.text||he.title;return Gi(he)?{type:"nestedmenuitem",text:Ue,getSubmenuItems:()=>oc(E,he.menu,V,te)}:{text:Ue,type:"togglemenuitem",onAction:()=>te(he.value),onSetup:qs(E,V,he.value)}}),Vm=(E,R)=>V=>{E.execCommand("mceTableApplyCellStyle",!1,{[R]:V})},Xu=E=>Te(E,R=>Gi(R)?[{...R,menu:Xu(R.menu)}]:Jc(R.value)?[R]:[]),ns=(E,R,V,te)=>he=>he(oc(E,R,V,te)),ou=(E,R,V)=>{const te=pt(R,he=>({text:he.title,value:"#"+za(he.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:te.length>0?te:void 0,allowCustomColors:!1},onAction:he=>{const Ue=he.value==="remove"?"":he.value;E.execCommand("mceTableApplyCellStyle",!1,{[V]:Ue})}}]},Si=E=>()=>{const V=E.queryCommandValue("mceTableRowType")==="header"?"body":"header";E.execCommand("mceTableRowType",!1,{type:V})},Vn=E=>()=>{const V=E.queryCommandValue("mceTableColType")==="th"?"td":"th";E.execCommand("mceTableColType",!1,{type:V})},Hd=E=>Ao(xa(E)).map(R=>({name:"class",type:"listbox",label:"Class",items:R})),Lf=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:wi}],_=E=>Lf.concat(Hd(E).toArray()),$=(E,R)=>{const te=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Ki(Im(E)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:R==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(te):te}},ue={normal:(E,R)=>{const V=E.dom;return{setAttrib:(gt,Ht)=>{V.setAttrib(R,gt,Ht)},setStyle:(gt,Ht)=>{V.setStyle(R,gt,Ht)},setFormat:(gt,Ht)=>{Ht===""?E.formatter.remove(gt,{value:null},R,!0):E.formatter.apply(gt,{value:Ht},R)}}}},ge=Ii("th"),tt=(E,R)=>E&&R?"sectionCells":E?"section":"cells",sn=E=>{const R=E.section==="thead",V=Om(Dn(E.cells),"th");return E.section==="tfoot"?{type:"footer"}:R||V?{type:"header",subType:tt(R,V)}:{type:"body"}},Dn=E=>{const R=gs(E,V=>ge(V.element));return R.length===0?ae.some("td"):R.length===E.length?ae.some("th"):ae.none()},An=E=>{const R=pt(E,he=>sn(he).type),V=Co(R,"header"),te=Co(R,"footer");if(!V&&!te)return ae.some("body");{const he=Co(R,"body");return V&&!he&&!te?ae.some("header"):!V&&!he&&te?ae.some("footer"):ae.none()}},Zt=E=>{let R=!1,V;return(...te)=>(R||(R=!0,V=E.apply(null,te)),V)},os=(E,R)=>bl(E.all,V=>vo(V.cells,te=>is(R,te.element))),Ds=(E,R,V)=>{const te=pt(R.selection,Ue=>Zs(Ue).bind(gt=>os(E,gt)).filter(V)),he=Fi(te);return Hi(he.length>0,he)},Ic=(E,R)=>R.mergable,yc=(E,R)=>R.unmergable,Vh=(E,R)=>Ds(E,R,kn),Um=(E,R)=>os(E,R).exists(V=>!V.isLocked),Ng=(E,R)=>Ja(R,V=>Um(E,V)),ka=(E,R)=>Ic(E,R).filter(V=>Ng(E,V.cells)),Uh=(E,R)=>yc(E,R).filter(V=>Ng(E,V));({...{generate:E=>{if(!se(E))throw new Error("cases must be an array");if(E.length===0)throw new Error("there must be at least one case");const R=[],V={};return U(E,(te,he)=>{const Ue=bn(te);if(Ue.length!==1)throw new Error("one and only one name per case");const gt=Ue[0],Ht=te[gt];if(V[gt]!==void 0)throw new Error("duplicate key detected:"+gt);if(gt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!se(Ht))throw new Error("case arguments must be an array");R.push(gt),V[gt]=(...wn)=>{const Bn=wn.length;if(Bn!==Ht.length)throw new Error("Wrong number of arguments to case "+gt+". Expected "+Ht.length+" ("+Ht+"), got "+Bn);return{fold:(...So)=>{if(So.length!==E.length)throw new Error("Wrong number of arguments to fold. Expected "+E.length+", got "+So.length);return So[he].apply(null,wn)},match:So=>{const bs=bn(So);if(R.length!==bs.length)throw new Error("Wrong number of arguments to match. Expected: "+R.join(",")+`
Actual: `+bs.join(","));if(!Ja(R,Ti=>Co(bs,Ti)))throw new Error("Not all branches were specified when using match. Specified: "+bs.join(", ")+`
Required: `+R.join(", "));return So[gt].apply(null,wn)},log:So=>{console.log(So,{constructors:R,constructor:gt,params:wn})}}}}),V}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const rr=(E,R)=>{const V=xl.fromTable(E);return Vh(V,R).bind(he=>{const Ue=he[he.length-1],gt=he[0].row,Ht=Ue.row+Ue.rowspan,wn=V.all.slice(gt,Ht);return An(wn)}).getOr("")},Ff=E=>zi(E,"rgb")?$c(E):E,Aa=E=>{const R=to.fromDom(E);return{borderwidth:Ys(R,"border-width").getOr(""),borderstyle:Ys(R,"border-style").getOr(""),bordercolor:Ys(R,"border-color").map(Ff).getOr(""),backgroundcolor:Ys(R,"background-color").map(Ff).getOr("")}},mn=E=>{const R=E[0],V=E.slice(1);return U(V,te=>{U(bn(R),he=>{Nn(te,(Ue,gt)=>{const Ht=R[he];Ht!==""&&he===gt&&Ht!==Ue&&(R[he]=he==="class"?"mce-no-match":"")})})}),R},xi=(E,R,V,te)=>vo(E,he=>!Le(V.formatter.matchNode(te,R+he))).getOr(""),zd=le(xi,["left","center","right"],"align"),jh=le(xi,["top","middle","bottom"],"valign"),m0=(E,R)=>{const V=Mf(E),te=Ag(E),he=()=>({borderstyle:_o(V,"border-style").getOr(""),bordercolor:Ff(_o(V,"border-color").getOr("")),backgroundcolor:Ff(_o(V,"background-color").getOr(""))}),Ue={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},gt=()=>{const wo=V["border-width"];return Pc(E)&&wo?{border:wo}:_o(te,"border").fold(()=>({}),So=>({border:So}))},Ht=R?he():{},wn=()=>{const wo=_o(V,"border-spacing").or(_o(te,"cellspacing")).fold(()=>({}),bs=>({cellspacing:bs})),So=_o(V,"border-padding").or(_o(te,"cellpadding")).fold(()=>({}),bs=>({cellpadding:bs}));return{...wo,...So}};return{...Ue,...V,...te,...Ht,...gt(),...wn()}},qh=E=>la(to.fromDom(E)).map(R=>{const V={selection:Fh(E.cells)};return rr(R,V)}).getOr(""),Yi=(E,R,V)=>{const te=(Ht,wn)=>{const Bn=Ys(to.fromDom(wn),"border-width");return Pc(E)&&Bn.isSome()?Bn.getOr(""):Ht.getAttrib(wn,"border")||qr(E.dom,wn,"border-width")||qr(E.dom,wn,"border")||""},he=E.dom,Ue=Pc(E)?he.getStyle(R,"border-spacing")||he.getAttrib(R,"cellspacing"):he.getAttrib(R,"cellspacing")||he.getStyle(R,"border-spacing"),gt=Pc(E)?qr(he,R,"padding")||he.getAttrib(R,"cellpadding"):he.getAttrib(R,"cellpadding")||qr(he,R,"padding");return{width:he.getStyle(R,"width")||he.getAttrib(R,"width"),height:he.getStyle(R,"height")||he.getAttrib(R,"height"),cellspacing:Ue??"",cellpadding:gt??"",border:te(he,R),caption:!!he.select("caption",R)[0],class:he.getAttrib(R,"class",""),align:zd(E,R),...V?Aa(R):{}}},su=(E,R,V)=>{const te=E.dom;return{height:te.getStyle(R,"height")||te.getAttrib(R,"height"),class:te.getAttrib(R,"class",""),type:qh(R),align:zd(E,R),...V?Aa(R):{}}},Vd=(E,R,V,te)=>{const he=E.dom,Ue=te.getOr(R);return{width:((Ht,wn)=>he.getStyle(Ht,wn)||he.getAttrib(Ht,wn))(Ue,"width"),scope:he.getAttrib(R,"scope"),celltype:Qo(R),class:he.getAttrib(R,"class",""),halign:zd(E,R),valign:jh(E,R),...V?Aa(R):{}}},_t=(E,R)=>{const V=xl.fromTable(E),te=xl.justCells(V),he=gs(te,Ue=>Sr(R,gt=>is(Ue.element,gt)));return pt(he,Ue=>({element:Ue.element.dom,column:xl.getColumnAt(V,Ue.column).map(gt=>gt.element.dom)}))},Ei=(E,R,V,te)=>{te("scope")&&E.setAttrib("scope",V.scope),te("class")&&V.class!=="mce-no-match"&&E.setAttrib("class",V.class),te("width")&&R.setStyle("width",Ia(V.width))},S1=(E,R,V)=>{V("backgroundcolor")&&E.setFormat("tablecellbackgroundcolor",R.backgroundcolor),V("bordercolor")&&E.setFormat("tablecellbordercolor",R.bordercolor),V("borderstyle")&&E.setFormat("tablecellborderstyle",R.borderstyle),V("borderwidth")&&E.setFormat("tablecellborderwidth",Ia(R.borderwidth))},Wm=(E,R,V,te)=>{const he=R.length===1;U(R,Ue=>{const gt=Ue.element,Ht=he?kn:te,wn=ue.normal(E,gt),Bn=Ue.column.map(wo=>ue.normal(E,wo)).getOr(wn);Ei(wn,Bn,V,Ht),kl(E)&&S1(wn,V,Ht),te("halign")&&La(E,gt,V.halign),te("valign")&&Jl(E,gt,V.valign)})},Xi=(E,R)=>{E.execCommand("mceTableCellType",!1,{type:R.celltype,no_events:!0})},Pg=(E,R,V,te)=>{const he=_s(te,(Ue,gt)=>V[gt]!==Ue);D(he)>0&&R.length>=1&&la(R[0]).each(Ue=>{const gt=_t(Ue,R),Ht=D(_s(he,(Bn,wo)=>wo!=="scope"&&wo!=="celltype"))>0,wn=vt(he,"celltype");(Ht||vt(he,"scope"))&&Wm(E,gt,te,le(vt,he)),wn&&Xi(E,te),Of(E,Ue.dom,{structure:wn,style:Ht})})},Ud=(E,R,V,te)=>{const he=te.getData();te.close(),E.undoManager.transact(()=>{Pg(E,R,V,he),E.focus()})},Zm=(E,R)=>{const V=la(R[0]).map(te=>pt(_t(te,R),he=>Vd(E,he.element,kl(E),he.column)));return mn(V.getOrDie())},Bg=E=>{const R=Wt(E);if(R.length===0)return;const V=Zm(E,R),te={type:"tabpanel",tabs:[{title:"General",name:"general",items:_(E)},$(E,"cell")]},he={type:"panel",items:[{type:"grid",columns:2,items:_(E)}]};E.windowManager.open({title:"Cell Properties",size:"normal",body:kl(E)?te:he,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:V,onSubmit:le(Ud,E,R,V)})},Ol=E=>Ao(Bh(E)).map(R=>({name:"class",type:"listbox",label:"Class",items:R})),f0=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Ss=E=>f0.concat(Ol(E).toArray()),rt=(E,R,V)=>{V("class")&&R.class!=="mce-no-match"&&E.setAttrib("class",R.class),V("height")&&E.setStyle("height",Ia(R.height))},sc=(E,R,V)=>{V("backgroundcolor")&&E.setStyle("background-color",R.backgroundcolor),V("bordercolor")&&E.setStyle("border-color",R.bordercolor),V("borderstyle")&&E.setStyle("border-style",R.borderstyle)},Rl=(E,R,V,te)=>{const Ue=R.length===1?kn:te;U(R,gt=>{const Ht=Kl(to.fromDom(gt),"td,th"),wn=ue.normal(E,gt);rt(wn,V,Ue),Dd(E)&&sc(wn,V,Ue),te("height")&&U(Ht,Bn=>{E.dom.setStyle(Bn.dom,"height",null)}),te("align")&&La(E,gt,V.align)})},Or=(E,R)=>{E.execCommand("mceTableRowType",!1,{type:R.type,no_events:!0})},Hf=(E,R,V,te)=>{const he=_s(te,(Ue,gt)=>V[gt]!==Ue);if(D(he)>0){const Ue=vt(he,"type"),gt=Ue?D(he)>1:!0;gt&&Rl(E,R,te,le(vt,he)),Ue&&Or(E,te),la(to.fromDom(R[0])).each(Ht=>Of(E,Ht.dom,{structure:Ue,style:gt}))}},Rr=(E,R,V,te)=>{const he=te.getData();te.close(),E.undoManager.transact(()=>{Hf(E,R,V,he),E.focus()})},co=E=>{const R=Mg(or(E),Xs.selected);if(R.length===0)return;const V=pt(R,gt=>su(E,gt.dom,Dd(E))),te=mn(V),he={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ss(E)},$(E,"row")]},Ue={type:"panel",items:[{type:"grid",columns:2,items:Ss(E)}]};E.windowManager.open({title:"Row Properties",size:"normal",body:Dd(E)?he:Ue,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:te,onSubmit:le(Rr,E,pt(R,gt=>gt.dom),te)})},Gh=(E,R,V)=>{const te=V?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],he=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Ue=Wu(E)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],gt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Ht=R.length>0?[{name:"class",type:"listbox",label:"Class",items:R}]:[];return te.concat(he).concat(Ue).concat(gt).concat(Ht)},Ze=(E,R,V,te)=>{if(R.tagName==="TD"||R.tagName==="TH")q(V)&&ut(te)?E.setStyle(R,V,te):E.setStyles(R,V);else if(R.children)for(let he=0;he<R.children.length;he++)Ze(E,R.children[he],V,te)},io=(E,R,V,te)=>{const he=E.dom,Ue={},gt={},Ht=Pc(E),wn=Md(E),Bn=parseFloat(V.border)===0;if(!Le(V.class)&&V.class!=="mce-no-match"&&(Ue.class=V.class),gt.height=Ia(V.height),Ht?gt.width=Ia(V.width):he.getAttrib(R,"width")&&(Ue.width=wl(V.width)),Ht?(Bn?(Ue.border=0,gt["border-width"]=""):(gt["border-width"]=Ia(V.border),Ue.border=1),gt["border-spacing"]=Ia(V.cellspacing)):(Ue.border=Bn?0:V.border,Ue.cellpadding=V.cellpadding,Ue.cellspacing=V.cellspacing),Ht&&R.children){const wo={};if(Bn?wo["border-width"]="":te.border&&(wo["border-width"]=Ia(V.border)),te.cellpadding&&(wo.padding=Ia(V.cellpadding)),wn&&te.bordercolor&&(wo["border-color"]=V.bordercolor),!fn(wo))for(let So=0;So<R.children.length;So++)Ze(he,R.children[So],wo)}if(wn){const wo=V;gt["background-color"]=wo.backgroundcolor,gt["border-color"]=wo.bordercolor,gt["border-style"]=wo.borderstyle}he.setStyles(R,{...Mf(E),...gt}),he.setAttribs(R,{...Ag(E),...Ue})},x1=(E,R,V,te)=>{const he=E.dom,Ue=te.getData(),gt=_s(Ue,(Ht,wn)=>V[wn]!==Ht);te.close(),E.undoManager.transact(()=>{if(!R){const Ht=Dm(Ue.cols).getOr(1),wn=Dm(Ue.rows).getOr(1);E.execCommand("mceInsertTable",!1,{rows:wn,columns:Ht}),R=hr(or(E),Li(E)).bind(Bn=>la(Bn,Li(E))).map(Bn=>Bn.dom).getOrDie()}if(D(gt)>0){const Ht={border:vt(gt,"border"),bordercolor:vt(gt,"bordercolor"),cellpadding:vt(gt,"cellpadding")};io(E,R,Ue,Ht);const wn=he.select("caption",R)[0];(wn&&!Ue.caption||!wn&&Ue.caption)&&E.execCommand("mceTableToggleCaption"),La(E,R,Ue.align)}if(E.focus(),E.addVisual(),D(gt)>0){const Ht=vt(gt,"caption"),wn=Ht?D(gt)>1:!0;Of(E,R,{structure:Ht,style:wn})}})},Gs=(E,R)=>{const V=E.dom;let te,he=m0(E,Md(E));R?(he.cols="1",he.rows="1",Md(E)&&(he.borderstyle="",he.bordercolor="",he.backgroundcolor="")):(te=V.getParent(E.selection.getStart(),"table",E.getBody()),te?he=Yi(E,te,Md(E)):Md(E)&&(he.borderstyle="",he.bordercolor="",he.backgroundcolor=""));const Ue=Ao(Zi(E));Ue.isSome()&&he.class&&(he.class=he.class.replace(/\s*mce\-item\-table\s*/g,""));const gt={type:"grid",columns:2,items:Gh(E,Ue.getOr([]),R)},Ht=()=>({type:"panel",items:[gt]}),wn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[gt]},$(E,"table")]}),Bn=Md(E)?wn():Ht();E.windowManager.open({title:"Table Properties",size:"normal",body:Bn,onSubmit:le(x1,E,te,he),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:he})},Ji=E=>{const R=V=>{wa(or(E))&&V()};Nn({mceTableProps:le(Gs,E,!1),mceTableRowProps:le(co,E),mceTableCellProps:le(Bg,E),mceInsertTableDialog:le(Gs,E,!0)},(V,te)=>E.addCommand(te,()=>R(V)))},Kr=(E,R)=>yl(E,R).isSome(),_y=On,ru=E=>{const R=(te,he)=>ec(te,he).exists(Ue=>parseInt(Ue,10)>1),V=te=>R(te,"rowspan")||R(te,"colspan");return E.length>0&&Ja(E,V)?ae.some(E):ae.none()},g0=(E,R,V)=>R.length<=1?ae.none():Lh(E,V.firstSelectedSelector,V.lastSelectedSelector).map(te=>({bounds:te,cells:R})),Cc=E=>({element:E,mergable:ae.none(),unmergable:ae.none(),selection:[E]}),lo=(E,R,V)=>({element:V,mergable:g0(R,E,Xs),unmergable:ru(E),selection:_y(E)}),au=E=>{const R=Fd(ae.none()),V=Fd([]);let te=ae.none();const he=Ii("caption"),Ue=jn=>te.forall(ls=>!ls[jn]),gt=()=>Id(or(E),Li(E)),Ht=()=>Id(Ws(E),Li(E)),wn=()=>gt().bind(jn=>Xn(_d(la(jn),Ht().bind(la),(ls,pr)=>is(ls,pr)?he(jn)?ae.some(Cc(jn)):ae.some(lo(Wt(E),ls,jn)):ae.none()))),Bn=jn=>la(jn.element).map(pr=>{const _i=xl.fromTable(pr),Fc=Vh(_i,jn).getOr([]),Jh=kf(Fc,(Zd,jd)=>(jd.isLocked&&(Zd.onAny=!0,jd.column===0?Zd.onFirst=!0:jd.column+jd.colspan>=_i.grid.columns&&(Zd.onLast=!0)),Zd),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:ka(_i,jn).isSome(),unmergeable:Uh(_i,jn).isSome(),locked:Jh}}),wo=()=>{R.set(Zt(wn)()),te=R.get().bind(Bn),U(V.get(),Ot)},So=jn=>(jn(),V.set(V.get().concat([jn])),()=>{V.set(gs(V.get(),ls=>ls!==jn))}),bs=(jn,ls)=>So(()=>R.get().fold(()=>{jn.setEnabled(!1)},pr=>{jn.setEnabled(!ls(pr)&&E.selection.isEditable())})),wc=(jn,ls,pr)=>So(()=>R.get().fold(()=>{jn.setEnabled(!1),jn.setActive(!1)},_i=>{jn.setEnabled(!ls(_i)&&E.selection.isEditable()),jn.setActive(pr(_i))})),Ti=jn=>te.exists(ls=>ls.locked[jn]),Qu=jn=>bs(jn,ls=>!1),Lc=jn=>bs(jn,ls=>he(ls.element)),Wd=jn=>ls=>bs(ls,pr=>he(pr.element)||Ti(jn)),jm=jn=>ls=>bs(ls,pr=>he(pr.element)||jn().isNone()),qm=(jn,ls)=>pr=>bs(pr,_i=>he(_i.element)||jn().isNone()||Ti(ls)),rc=jn=>bs(jn,ls=>Ue("mergeable")),Yh=jn=>bs(jn,ls=>Ue("unmergeable")),Gm=jn=>wc(jn,Io,ls=>la(ls.element,Li(E)).exists(_i=>Kr(_i,"caption"))),Xh=(jn,ls)=>pr=>wc(pr,_i=>he(_i.element),()=>E.queryCommandValue(jn)===ls),h0=Xh("mceTableRowType","header"),Fr=Xh("mceTableColType","th");return E.on("NodeChange ExecCommand TableSelectorChange",wo),{onSetupTable:Qu,onSetupCellOrRow:Lc,onSetupColumn:Wd,onSetupPasteable:jm,onSetupPasteableColumn:qm,onSetupMergeable:rc,onSetupUnmergeable:Yh,resetTargets:wo,onSetupTableWithCaption:Gm,onSetupTableRowHeaders:h0,onSetupTableColumnHeaders:Fr,targets:R.get}};var $g=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Ms="x-tinymce/dom-table-",Kh=Ms+"rows",Ju=Ms+"columns",E1=E=>{var R;const V=(R=$g.read())!==null&&R!==void 0?R:[];return bl(V,te=>ae.from(te.getType(E)))},Oa=()=>E1(Kh),ei=()=>E1(Ju),Se=E=>R=>{const V=()=>{R.setEnabled(E.selection.isEditable())};return E.on("NodeChange",V),V(),()=>{E.off("NodeChange",V)}},ti=(E,R)=>{E.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Se(E),fetch:Ht=>Ht("inserttable | cell row column | advtablesort | tableprops deletetable")});const V=Ht=>()=>E.execCommand(Ht),te=(Ht,wn)=>{E.queryCommandSupported(wn.command)&&E.ui.registry.addButton(Ht,{...wn,onAction:en(wn.onAction)?wn.onAction:V(wn.command)})},he=(Ht,wn)=>{E.queryCommandSupported(wn.command)&&E.ui.registry.addToggleButton(Ht,{...wn,onAction:en(wn.onAction)?wn.onAction:V(wn.command)})};te("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:R.onSetupTable}),te("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:R.onSetupTable}),te("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:R.onSetupCellOrRow}),te("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:R.onSetupMergeable}),te("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:R.onSetupUnmergeable}),te("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:R.onSetupCellOrRow}),te("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:R.onSetupCellOrRow}),te("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:R.onSetupCellOrRow}),te("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:R.onSetupCellOrRow}),te("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:R.onSetupColumn("onFirst")}),te("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:R.onSetupColumn("onLast")}),te("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:R.onSetupColumn("onAny")}),te("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:R.onSetupCellOrRow}),te("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:R.onSetupCellOrRow}),te("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:R.onSetupPasteable(Oa)}),te("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:R.onSetupPasteable(Oa)}),te("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:R.onSetupColumn("onAny")}),te("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:R.onSetupColumn("onAny")}),te("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:R.onSetupPasteableColumn(ei,"onFirst")}),te("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:R.onSetupPasteableColumn(ei,"onLast")}),te("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Se(E)});const Ue=Xu(Zi(E));Ue.length!==0&&E.queryCommandSupported("mceTableToggleClass")&&E.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:ns(E,Ue,"tableclass",Ht=>E.execCommand("mceTableToggleClass",!1,Ht)),onSetup:R.onSetupTable});const gt=Xu(xa(E));gt.length!==0&&E.queryCommandSupported("mceTableCellToggleClass")&&E.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:ns(E,gt,"tablecellclass",Ht=>E.execCommand("mceTableCellToggleClass",!1,Ht)),onSetup:R.onSetupCellOrRow}),E.queryCommandSupported("mceTableApplyCellStyle")&&(E.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:ns(E,wi,"tablecellverticalalign",Vm(E,"vertical-align")),onSetup:R.onSetupCellOrRow}),E.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:ns(E,Rd(E),"tablecellborderwidth",Vm(E,"border-width")),onSetup:R.onSetupCellOrRow}),E.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:ns(E,Im(E),"tablecellborderstyle",Vm(E,"border-style")),onSetup:R.onSetupCellOrRow}),E.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Ht=>Ht(ou(E,Nd(E),"background-color")),onSetup:R.onSetupCellOrRow}),E.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Ht=>Ht(ou(E,kg(E),"border-color")),onSetup:R.onSetupCellOrRow})),he("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:R.onSetupTableWithCaption}),he("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Si(E),onSetup:R.onSetupTableRowHeaders}),he("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Vn(E),onSetup:R.onSetupTableColumnHeaders})},Dr=E=>{const R=te=>E.dom.is(te,"table")&&E.getBody().contains(te)&&E.dom.isEditable(te.parentNode),V=Rf(E);V.length>0&&E.ui.registry.addContextToolbar("table",{predicate:R,items:V,scope:"node",position:"node"})},ss=E=>R=>{const V=()=>{R.setEnabled(E.selection.isEditable())};return E.on("NodeChange",V),V(),()=>{E.off("NodeChange",V)}},Qi=(E,R)=>{const V=So=>()=>E.execCommand(So),te=(So,bs)=>E.queryCommandSupported(bs.command)?(E.ui.registry.addMenuItem(So,{...bs,onAction:en(bs.onAction)?bs.onAction:V(bs.command)}),!0):!1,he=(So,bs)=>{E.queryCommandSupported(bs.command)&&E.ui.registry.addToggleMenuItem(So,{...bs,onAction:en(bs.onAction)?bs.onAction:V(bs.command)})},Ue=So=>{E.execCommand("mceInsertTable",!1,{rows:So.numRows,columns:So.numColumns})},gt=[te("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:R.onSetupCellOrRow}),te("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:R.onSetupCellOrRow}),te("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:R.onSetupCellOrRow}),te("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:R.onSetupCellOrRow}),te("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:R.onSetupCellOrRow}),te("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:R.onSetupCellOrRow}),te("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:R.onSetupPasteable(Oa)}),te("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:R.onSetupPasteable(Oa)})],Ht=[te("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:R.onSetupColumn("onFirst")}),te("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:R.onSetupColumn("onLast")}),te("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:R.onSetupColumn("onAny")}),te("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:R.onSetupColumn("onAny")}),te("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:R.onSetupColumn("onAny")}),te("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:R.onSetupPasteableColumn(ei,"onFirst")}),te("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:R.onSetupPasteableColumn(ei,"onLast")})],wn=[te("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:R.onSetupCellOrRow}),te("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:R.onSetupMergeable}),te("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:R.onSetupUnmergeable})];Zu(E)?E.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Ue}],onSetup:ss(E)}):E.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:V("mceInsertTableDialog"),onSetup:ss(E)}),E.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:V("mceInsertTableDialog"),onSetup:ss(E)}),te("tableprops",{text:"Table properties",onSetup:R.onSetupTable,command:"mceTableProps"}),te("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:R.onSetupTable,command:"mceTableDelete"}),Co(gt,!0)&&E.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Ae("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),Co(Ht,!0)&&E.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Ae("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),Co(wn,!0)&&E.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ae("tablecellprops tablemergecells tablesplitcells")}),E.ui.registry.addContextMenu("table",{update:()=>(R.resetTargets(),R.targets().fold(Ae(""),So=>bt(So.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Bn=Xu(Zi(E));Bn.length!==0&&E.queryCommandSupported("mceTableToggleClass")&&E.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>oc(E,Bn,"tableclass",So=>E.execCommand("mceTableToggleClass",!1,So)),onSetup:R.onSetupTable});const wo=Xu(xa(E));wo.length!==0&&E.queryCommandSupported("mceTableCellToggleClass")&&E.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>oc(E,wo,"tablecellclass",So=>E.execCommand("mceTableCellToggleClass",!1,So)),onSetup:R.onSetupCellOrRow}),E.queryCommandSupported("mceTableApplyCellStyle")&&(E.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>oc(E,wi,"tablecellverticalalign",Vm(E,"vertical-align")),onSetup:R.onSetupCellOrRow}),E.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>oc(E,Rd(E),"tablecellborderwidth",Vm(E,"border-width")),onSetup:R.onSetupCellOrRow}),E.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>oc(E,Im(E),"tablecellborderstyle",Vm(E,"border-style")),onSetup:R.onSetupCellOrRow}),E.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>ou(E,Nd(E),"background-color"),onSetup:R.onSetupCellOrRow}),E.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>ou(E,kg(E),"border-color"),onSetup:R.onSetupCellOrRow})),he("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:R.onSetupTableWithCaption}),he("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Si(E),onSetup:R.onSetupTableRowHeaders}),he("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Vn(E),onSetup:R.onSetupTableRowHeaders})},Fs=E=>{const R=au(E);Uu(E),Ji(E),Qi(E,R),ti(E,R),Dr(E)};var Po=()=>{p.add("table",Fs)};Po()}()),aJ}var iJ;function ose(){return iJ||(iJ=1,nse()),rJ}ose();var lJ={},uJ={},dJ;function sse(){return dJ||(dJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const S=(_,$,j)=>{var ue;return j(_,$.prototype)?!0:((ue=_.constructor)===null||ue===void 0?void 0:ue.name)===$.name},O=_=>{const $=typeof _;return _===null?"null":$==="object"&&Array.isArray(_)?"array":$==="object"&&S(_,String,(j,ue)=>ue.isPrototypeOf(j))?"string":$},P=_=>$=>O($)===_,F=_=>$=>typeof $===_,Z=P("string"),q=P("object"),se=P("array"),Ee=F("boolean"),Le=_=>_==null,Fe=_=>!Le(_),ut=F("function"),en=F("number"),Mn=()=>{},ln=(_,$)=>j=>_($(j)),cn=_=>()=>_,Ae=(_,$)=>_===$;function On(_,...$){return(...j)=>{const ue=$.concat(j);return _.apply(null,ue)}}const Tt=_=>$=>!_($),le=cn(!1);class Ot{constructor($,j){this.tag=$,this.value=j}static some($){return new Ot(!0,$)}static none(){return Ot.singletonNone}fold($,j){return this.tag?j(this.value):$()}isSome(){return this.tag}isNone(){return!this.tag}map($){return this.tag?Ot.some($(this.value)):Ot.none()}bind($){return this.tag?$(this.value):Ot.none()}exists($){return this.tag&&$(this.value)}forall($){return!this.tag||$(this.value)}filter($){return!this.tag||$(this.value)?this:Ot.none()}getOr($){return this.tag?this.value:$}or($){return this.tag?this:$}getOrThunk($){return this.tag?this.value:$()}orThunk($){return this.tag?this:$()}getOrDie($){if(this.tag)return this.value;throw new Error($??"Called getOrDie on None")}static from($){return Fe($)?Ot.some($):Ot.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each($){this.tag&&$(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ot.singletonNone=new Ot(!1);const Io=Array.prototype.slice,kn=Array.prototype.indexOf,ae=Array.prototype.push,bn=(_,$)=>kn.call(_,$),Xo=(_,$)=>bn(_,$)>-1,Nn=(_,$)=>{for(let j=0,ue=_.length;j<ue;j++){const ge=_[j];if($(ge,j))return!0}return!1},We=(_,$)=>{const j=_.length,ue=new Array(j);for(let ge=0;ge<j;ge++){const tt=_[ge];ue[ge]=$(tt,ge)}return ue},pe=(_,$)=>{for(let j=0,ue=_.length;j<ue;j++){const ge=_[j];$(ge,j)}},_s=(_,$)=>{const j=[];for(let ue=0,ge=_.length;ue<ge;ue++){const tt=_[ue];$(tt,ue)&&j.push(tt)}return j},fo=(_,$)=>{if(_.length===0)return[];{let j=$(_[0]);const ue=[];let ge=[];for(let tt=0,sn=_.length;tt<sn;tt++){const Dn=_[tt],An=$(Dn);An!==j&&(ue.push(ge),ge=[]),j=An,ge.push(Dn)}return ge.length!==0&&ue.push(ge),ue}},Ut=(_,$,j)=>(pe(_,(ue,ge)=>{j=$(j,ue,ge)}),j),D=(_,$,j)=>{for(let ue=0,ge=_.length;ue<ge;ue++){const tt=_[ue];if($(tt,ue))return Ot.some(tt);if(j(tt,ue))break}return Ot.none()},_o=(_,$)=>D(_,$,le),vt=_=>{const $=[];for(let j=0,ue=_.length;j<ue;++j){if(!se(_[j]))throw new Error("Arr.flatten item "+j+" was not an array, input: "+_);ae.apply($,_[j])}return $},Jo=(_,$)=>vt(We(_,$)),fn=_=>{const $=Io.call(_,0);return $.reverse(),$},Je=(_,$)=>$>=0&&$<_.length?Ot.some(_[$]):Ot.none(),zo=_=>Je(_,0),wr=_=>Je(_,_.length-1),Co=(_,$)=>{const j=[],ue=ut($)?ge=>Nn(j,tt=>$(tt,ge)):ge=>Xo(j,ge);for(let ge=0,tt=_.length;ge<tt;ge++){const sn=_[ge];ue(sn)||j.push(sn)}return j},Sr=(_,$,j=Ae)=>_.exists(ue=>j(ue,$)),Ge=(_,$,j=Ae)=>pt(_,$,j).getOr(_.isNone()&&$.isNone()),pt=(_,$,j)=>_.isSome()&&$.isSome()?Ot.some(j(_.getOrDie(),$.getOrDie())):Ot.none(),U=8,pl=11,ko=1,gs=3,Vo=(_,$)=>{const ue=($||document).createElement("div");if(ue.innerHTML=_,!ue.hasChildNodes()||ue.childNodes.length>1){const ge="HTML does not have a single root node";throw console.error(ge,_),new Error(ge)}return vo(ue.childNodes[0])},kf=(_,$)=>{const ue=($||document).createElement(_);return vo(ue)},gn=(_,$)=>{const ue=($||document).createTextNode(_);return vo(ue)},vo=_=>{if(_==null)throw new Error("Node cannot be null or undefined");return{dom:_}},Te={fromHtml:Vo,fromTag:kf,fromText:gn,fromDom:vo,fromPoint:(_,$,j)=>Ot.from(_.dom.elementFromPoint($,j)).map(vo)},Ja=(_,$)=>{const j=_.dom;if(j.nodeType!==ko)return!1;{const ue=j;if(ue.matches!==void 0)return ue.matches($);if(ue.msMatchesSelector!==void 0)return ue.msMatchesSelector($);if(ue.webkitMatchesSelector!==void 0)return ue.webkitMatchesSelector($);if(ue.mozMatchesSelector!==void 0)return ue.mozMatchesSelector($);throw new Error("Browser lacks native selectors")}},nr=(_,$)=>_.dom===$.dom,Qt=(_,$)=>{const j=_.dom,ue=$.dom;return j===ue?!1:j.contains(ue)},hi=Ja,cs=typeof window<"u"?window:Function("return this;")(),bl=(_,$)=>{let j=$??cs;for(let ue=0;ue<_.length&&j!==void 0&&j!==null;++ue)j=j[_[ue]];return j},Cs=(_,$)=>{const j=_.split(".");return bl(j,$)},Pr=(_,$)=>Cs(_,$),Zl=(_,$)=>{const j=Pr(_,$);if(j==null)throw new Error(_+" not available on this browser");return j},Ca=Object.getPrototypeOf,ks=_=>Zl("HTMLElement",_),Uo=_=>{const $=Cs("ownerDocument.defaultView",_);return q(_)&&(ks($).prototype.isPrototypeOf(_)||/^HTML\w*Element$/.test(Ca(_).constructor.name))},Mc=_=>_.dom.nodeName.toLowerCase(),As=_=>_.dom.nodeType,To=_=>$=>As($)===_,jl=_=>As(_)===U||Mc(_)==="#comment",to=_=>xr(_)&&Uo(_.dom),xr=To(ko),Br=To(gs),vl=To(pl),ql=_=>$=>xr($)&&Mc($)===_,is=_=>Ot.from(_.dom.parentNode).map(Te.fromDom),Tm=_=>Ot.from(_.dom.parentElement).map(Te.fromDom),bt=_=>Ot.from(_.dom.nextSibling).map(Te.fromDom),Yn=_=>We(_.dom.childNodes,Te.fromDom),Ur=(_,$)=>{const j=_.dom.childNodes;return Ot.from(j[$]).map(Te.fromDom)},Wr=_=>Ur(_,0),Nc=_=>Ur(_,_.dom.childNodes.length-1),pi=_=>vl(_)&&Fe(_.dom.host),Wo=_=>Te.fromDom(_.dom.getRootNode()),mc=_=>{const $=Wo(_);return pi($)?Ot.some($):Ot.none()},Ii=_=>Te.fromDom(_.dom.host),Mo=_=>{const $=Br(_)?_.dom.parentNode:_.dom;if($==null||$.ownerDocument===null)return!1;const j=$.ownerDocument;return mc(Te.fromDom($)).fold(()=>j.body.contains($),ln(Mo,Ii))};var an=(_,$,j,ue,ge)=>_(j,ue)?Ot.some(j):ut(ge)&&ge(j)?Ot.none():$(j,ue,ge);const ur=(_,$,j)=>{let ue=_.dom;const ge=ut(j)?j:le;for(;ue.parentNode;){ue=ue.parentNode;const tt=Te.fromDom(ue);if($(tt))return Ot.some(tt);if(ge(tt))break}return Ot.none()},bi=(_,$,j)=>an((ge,tt)=>tt(ge),ur,_,$,j),$u=(_,$,j)=>ur(_,ue=>Ja(ue,$),j),_m=(_,$,j)=>an((ge,tt)=>Ja(ge,tt),$u,_,$,j),Er=_=>_m(_,"[contenteditable]"),hs=(_,$=!1)=>Mo(_)?_.dom.isContentEditable:Er(_).fold(cn($),j=>Os(j)==="true"),Os=_=>_.dom.contentEditable,fc=(_,$)=>{is(_).each(ue=>{ue.dom.insertBefore($.dom,_.dom)})},Iu=(_,$)=>{bt(_).fold(()=>{is(_).each(ge=>{Tr(ge,$)})},ue=>{fc(ue,$)})},vi=(_,$)=>{Wr(_).fold(()=>{Tr(_,$)},ue=>{_.dom.insertBefore($.dom,ue.dom)})},Tr=(_,$)=>{_.dom.appendChild($.dom)},Zo=(_,$)=>{pe($,j=>{fc(_,j)})},gc=(_,$)=>{pe($,j=>{Tr(_,j)})},Zr=_=>{_.dom.textContent="",pe(Yn(_),$=>{km($)})},km=_=>{const $=_.dom;$.parentNode!==null&&$.parentNode.removeChild($)};var Af=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Kc=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),yl=tinymce.util.Tools.resolve("tinymce.util.VK");const Et=_=>We(_,Te.fromDom),ct=Object.keys,Cl=(_,$)=>{const j=ct(_);for(let ue=0,ge=j.length;ue<ge;ue++){const tt=j[ue],sn=_[tt];$(sn,tt)}},Tg=_=>($,j)=>{_[j]=$},Td=(_,$,j,ue)=>{Cl(_,(ge,tt)=>{($(ge,tt)?j:ue)(ge,tt)})},Qo=(_,$)=>{const j={};return Td(_,$,Tg(j),Mn),j},Am=(_,$,j)=>{if(Z(j)||Ee(j)||en(j))_.setAttribute($,j+"");else throw console.error("Invalid call to Attribute.set. Key ",$,":: Value ",j,":: Element ",_),new Error("Attribute value was not simple")},Li=(_,$)=>{const j=_.dom;Cl($,(ue,ge)=>{Am(j,ge,ue)})},wl=_=>Ut(_.dom.attributes,($,j)=>($[j.name]=j.value,$),{}),Ia=(_,$)=>Te.fromDom(_.dom.cloneNode($)),or=_=>Ia(_,!0),Ws=(_,$)=>{const j=Te.fromTag($),ue=wl(_);return Li(j,ue),j},wa=(_,$)=>{const j=Ws(_,$);Iu(_,j);const ue=Yn(_);return gc(j,ue),km(_),j};var Gl=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Bs=tinymce.util.Tools.resolve("tinymce.util.Tools");const Kl=_=>$=>Fe($)&&$.nodeName.toLowerCase()===_,Qa=_=>$=>Fe($)&&_.test($.nodeName),No=_=>Fe(_)&&_.nodeType===3,Rs=_=>Fe(_)&&_.nodeType===1,dr=Qa(/^(OL|UL|DL)$/),Yc=Qa(/^(OL|UL)$/),ec=Kl("ol"),ca=Qa(/^(LI|DT|DD)$/),jo=Qa(/^(DT|DD)$/),Om=Qa(/^(TH|TD)$/),Fi=Kl("br"),_d=_=>{var $;return(($=_.parentNode)===null||$===void 0?void 0:$.firstChild)===_},Xn=(_,$)=>Fe($)&&$.nodeName in _.schema.getTextBlockElements(),Hi=(_,$)=>Fe(_)&&_.nodeName in $,Es=(_,$)=>Fe($)&&$.nodeName in _.schema.getVoidElements(),Rm=(_,$)=>Fi($)?_.isBlock($.nextSibling)&&!Fi($.previousSibling):!1,Xc=(_,$,j)=>{const ue=_.isEmpty($);return j&&_.select("span[data-mce-type=bookmark]",$).length>0?!1:ue},zi=(_,$)=>_.isChildOf($,_.getRoot()),$r=_=>$=>$.options.get(_),Lu=_=>{const $=_.options.register;$("lists_indent_on_tab",{processor:"boolean",default:!0})},Jc=$r("lists_indent_on_tab"),kd=$r("forced_root_block"),Dm=$r("forced_root_block_attrs"),Mm=(_,$,j={})=>{const ue=_.dom,ge=_.schema.getBlockElements(),tt=ue.createFragment(),sn=kd(_),Dn=Dm(_);let An,Zt,os=!1;for(Zt=ue.create(sn,{...Dn,...j.style?{style:j.style}:{}}),Hi($.firstChild,ge)||tt.appendChild(Zt);An=$.firstChild;){const Ds=An.nodeName;!os&&(Ds!=="SPAN"||An.getAttribute("data-mce-type")!=="bookmark")&&(os=!0),Hi(An,ge)?(tt.appendChild(An),Zt=null):(Zt||(Zt=ue.create(sn,Dn),tt.appendChild(Zt)),Zt.appendChild(An))}return!os&&Zt&&Zt.appendChild(ue.create("br",{"data-mce-bogus":"1"})),tt},mr=Gl.DOM,Vi=(_,$,j)=>{const ue=Zt=>{const os=Zt.parentNode;os&&Bs.each(ge,Ds=>{os.insertBefore(Ds,j.parentNode)}),mr.remove(Zt)},ge=mr.select('span[data-mce-type="bookmark"]',$),tt=Mm(_,j),sn=mr.createRng();sn.setStartAfter(j),sn.setEndAfter($);const Dn=sn.extractContents();for(let Zt=Dn.firstChild;Zt;Zt=Zt.firstChild)if(Zt.nodeName==="LI"&&_.dom.isEmpty(Zt)){mr.remove(Zt);break}_.dom.isEmpty(Dn)||mr.insertAfter(Dn,$),mr.insertAfter(tt,$);const An=j.parentElement;An&&Xc(_.dom,An)&&ue(An),mr.remove(j),Xc(_.dom,$)&&mr.remove($)},Yl=ql("dd"),Fu=ql("dt"),Nm=(_,$)=>{Yl($)?wa($,"dt"):Fu($)&&Tm($).each(j=>Vi(_,j.dom,$.dom))},Qc=_=>{Fu(_)&&wa(_,"dd")},Ys=(_,$,j)=>{$==="Indent"?pe(j,Qc):pe(j,ue=>Nm(_,ue))},fr=(_,$)=>{if(No(_))return{container:_,offset:$};const j=Af.getNode(_,$);return No(j)?{container:j,offset:$>=_.childNodes.length?j.data.length:0}:j.previousSibling&&No(j.previousSibling)?{container:j.previousSibling,offset:j.previousSibling.data.length}:j.nextSibling&&No(j.nextSibling)?{container:j.nextSibling,offset:0}:{container:_,offset:$}},hc=_=>{const $=_.cloneRange(),j=fr(_.startContainer,_.startOffset);$.setStart(j.container,j.offset);const ue=fr(_.endContainer,_.endOffset);return $.setEnd(ue.container,ue.offset),$},Hu=["OL","UL","DL"],Ad=Hu.join(","),ia=(_,$)=>{const j=$||_.selection.getStart(!0);return _.dom.getParent(j,Ad,En(_,j))},K=(_,$)=>Fe(_)&&$.length===1&&$[0]===_,ce=_=>_s(_.querySelectorAll(Ad),dr),be=_=>{const $=ia(_),j=_.selection.getSelectedBlocks();return K($,j)?ce($):_s(j,ue=>dr(ue)&&$!==ue)},Ve=(_,$)=>{const j=Bs.map($,ue=>{const ge=_.dom.getParent(ue,"li,dd,dt",En(_,ue));return ge||ue});return Co(j)},lt=_=>{const $=_.selection.getSelectedBlocks();return _s(Ve(_,$),ca)},je=_=>_s(lt(_),jo),Vt=(_,$)=>{const j=_.dom.getParents($,"TD,TH");return j.length>0?j[0]:_.getBody()},$n=(_,$)=>!dr($)&&!ca($)&&Nn(Hu,j=>_.isValidChild($.nodeName,j)),En=(_,$)=>{const j=_.dom.getParents($,_.dom.isBlock),ue=tt=>tt.nodeName.toLowerCase()!==kd(_);return _o(j,tt=>ue(tt)&&$n(_.schema,tt)).getOr(_.getBody())},Zs=_=>is(_).exists($=>ca($.dom)&&Wr($).exists(j=>!dr(j.dom))&&Nc($).exists(j=>!dr(j.dom))),zn=(_,$)=>{const j=_.dom.getParents($,"ol,ul",En(_,$));return wr(j)},Xl=_=>{const $=zn(_,_.selection.getStart()),j=_s(_.selection.getSelectedBlocks(),Yc);return $.toArray().concat(j)},la=_=>{const $=_.selection.getStart();return _.dom.getParents($,"ol,ul",En(_,$))},Ui=_=>{const $=Xl(_),j=la(_);return _o(j,ue=>Zs(Te.fromDom(ue))).fold(()=>vn(_,$),ue=>[ue])},vn=(_,$)=>{const j=We($,ue=>zn(_,ue).getOr(ue));return Co(j)},jr=_=>/\btox\-/.test(_.className),Pm=(_,$)=>D(_,dr,Om).exists(j=>j.nodeName===$&&!jr(j)),Qe=(_,$)=>$!==null&&!_.dom.isEditable($),Sl=_=>{const $=ia(_);return Qe(_,$)||!_.selection.isEditable()},$s=(_,$)=>{const j=_.dom.getParent($,"ol,ul,dl");return Qe(_,j)||!_.selection.isEditable()},Bm=(_,$)=>{const j=_.selection.getNode();return $({parents:_.dom.getParents(j),element:j}),_.on("NodeChange",$),()=>_.off("NodeChange",$)},Is=(_,$)=>{const ue=document.createDocumentFragment();return pe(_,ge=>{ue.appendChild(ge.dom)}),Te.fromDom(ue)},Zn=(_,$,j)=>_.dispatch("ListMutation",{action:$,element:j}),Ir=(_=>$=>$.replace(_,""))(/^\s+|\s+$/g),Od=_=>_.length>0,sr=_=>!Od(_),zu=_=>_.style!==void 0&&ut(_.style.getPropertyValue),Ph=(_,$,j)=>{if(!Z(j))throw console.error("Invalid call to CSS.set. Property ",$,":: Value ",j,":: Element ",_),new Error("CSS value must be a string: "+j);zu(_)&&_.style.setProperty($,j)},y1=(_,$,j)=>{const ue=_.dom;Ph(ue,$,j)},qo=_=>hi(_,"OL,UL"),xl=_=>hi(_,"LI"),gr=_=>Wr(_).exists(qo),qr=_=>Nc(_).exists(qo),La=_=>"listAttributes"in _,Jl=_=>"isComment"in _,Of=_=>"isFragment"in _,Rn=_=>_.depth>0,Wi=_=>_.isSelected,El=_=>{const $=Yn(_),j=qr(_)?$.slice(0,-1):$;return We(j,or)},Tl=(_,$,j)=>is(_).filter(xr).map(ue=>({depth:$,dirty:!1,isSelected:j,content:El(_),itemAttributes:wl(_),listAttributes:wl(ue),listType:Mc(ue),isInPreviousLi:!1})),$m=(_,$)=>{Tr(_.item,$.list)},es=_=>{for(let $=1;$<_.length;$++)$m(_[$-1],_[$])},_r=(_,$)=>{pt(wr(_),zo($),$m)},Vu=(_,$)=>{const j={list:Te.fromTag($,_),item:Te.fromTag("li",_)};return Tr(j.list,j.item),j},_g=(_,$,j)=>{const ue=[];for(let ge=0;ge<j;ge++)ue.push(Vu(_,La($)?$.listType:$.parentListType));return ue},_l=(_,$)=>{for(let j=0;j<_.length-1;j++)y1(_[j].item,"list-style-type","none");wr(_).each(j=>{La($)&&(Li(j.list,$.listAttributes),Li(j.item,$.itemAttributes)),gc(j.item,$.content)})},Fa=(_,$)=>{Mc(_.list)!==$.listType&&(_.list=wa(_.list,$.listType)),Li(_.list,$.listAttributes)},kr=(_,$,j)=>{const ue=Te.fromTag("li",_);return Li(ue,$),gc(ue,j),ue},ua=(_,$)=>{Tr(_.list,$),_.item=$},Sa=(_,$,j)=>{const ue=$.slice(0,j.depth);return wr(ue).each(ge=>{if(La(j)){const tt=kr(_,j.itemAttributes,j.content);ua(ge,tt),Fa(ge,j)}else if(Of(j))gc(ge.item,j.content);else{const tt=Te.fromHtml(`<!--${j.content}-->`);Tr(ge.list,tt)}}),ue},js=(_,$,j)=>{const ue=_g(_,j,j.depth-$.length);return es(ue),_l(ue,j),_r($,ue),$.concat(ue)},Uu=(_,$)=>{let j=Ot.none();const ue=Ut($,(ge,tt,sn)=>Jl(tt)?sn===0?(j=Ot.some(tt),ge):Sa(_,ge,tt):tt.depth>ge.length?js(_,ge,tt):Sa(_,ge,tt),[]);return j.each(ge=>{const tt=Te.fromHtml(`<!--${ge.content}-->`);zo(ue).each(sn=>{vi(sn.list,tt)})}),zo(ue).map(ge=>ge.list)},ts=(_,$)=>{switch(_){case"Indent":$.depth++;break;case"Outdent":$.depth--;break;case"Flatten":$.depth=0}$.dirty=!0},Rd=(_,$)=>{La(_)&&La($)&&(_.listType=$.listType,_.listAttributes={...$.listAttributes})},Im=_=>{_.listAttributes=Qo(_.listAttributes,($,j)=>j!=="start")},kl=(_,$)=>{const j=_[$].depth,ue=tt=>tt.depth===j&&!tt.dirty,ge=tt=>tt.depth<j;return D(fn(_.slice(0,$)),ue,ge).orThunk(()=>D(_.slice($+1),ue,ge))},Dd=_=>(pe(_,($,j)=>{kl(_,j).fold(()=>{$.dirty&&La($)&&Im($)},ue=>Rd($,ue))}),_),Md=_=>{let $=_;return{get:()=>$,set:ge=>{$=ge}}},Wu=(_,$,j,ue)=>{var ge;if(jl(ue))return[{depth:_+1,content:(ge=ue.dom.nodeValue)!==null&&ge!==void 0?ge:"",dirty:!1,isSelected:!1,isComment:!0}];$.each(Dn=>{nr(Dn.start,ue)&&j.set(!0)});const tt=Tl(ue,_,j.get());$.each(Dn=>{nr(Dn.end,ue)&&j.set(!1)});const sn=Nc(ue).filter(qo).map(Dn=>Pc(_,$,j,Dn)).getOr([]);return tt.toArray().concat(sn)},Zu=(_,$,j,ue)=>Wr(ue).filter(qo).fold(()=>Wu(_,$,j,ue),ge=>{const tt=Ut(Yn(ue),(sn,Dn,An)=>{if(An===0)return sn;if(xl(Dn))return sn.concat(Wu(_,$,j,Dn));{const Zt={isFragment:!0,depth:_,content:[Dn],isSelected:!1,dirty:!1,parentListType:Mc(ge)};return sn.concat(Zt)}},[]);return Pc(_,$,j,ge).concat(tt)}),Pc=(_,$,j,ue)=>Jo(Yn(ue),ge=>{const tt=qo(ge)?Pc:Zu,sn=_+1;return tt(sn,$,j,ge)}),xa=(_,$)=>{const j=Md(!1),ue=0;return We(_,ge=>({sourceList:ge,entries:Pc(ue,$,j,ge)}))},Bh=(_,$)=>{const j=Dd($);return We(j,ue=>{const ge=Jl(ue)?Is([Te.fromHtml(`<!--${ue.content}-->`)]):Is(ue.content),tt=La(ue)?ue.itemAttributes:{};return Te.fromDom(Mm(_,ge.dom,tt))})},Zi=(_,$)=>{const j=Dd($);return Uu(_.contentDocument,j).toArray()},Rf=(_,$)=>Jo(fo($,Rn),j=>zo(j).exists(Rn)?Zi(_,j):Bh(_,j)),Nd=(_,$)=>{pe(_s(_,Wi),j=>ts($,j))},kg=_=>{const $=We(lt(_),Te.fromDom);return pt(_o($,Tt(gr)),_o(fn($),Tt(gr)),(j,ue)=>({start:j,end:ue}))},Df=(_,$,j)=>{const ue=xa($,kg(_));pe(ue,ge=>{Nd(ge.entries,j);const tt=Rf(_,ge.entries);pe(tt,sn=>{Zn(_,j==="Indent"?"IndentList":"OutdentList",sn.dom)}),Zo(ge.sourceList,tt),km(ge.sourceList)})},Pd=(_,$)=>{const j=Et(Ui(_)),ue=Et(je(_));let ge=!1;if(j.length||ue.length){const tt=_.selection.getBookmark();Df(_,j,$),Ys(_,$,ue),_.selection.moveToBookmark(tt),_.selection.setRng(hc(_.selection.getRng())),_.nodeChanged(),ge=!0}return ge},Mf=(_,$)=>!Sl(_)&&Pd(_,$),Ag=_=>Mf(_,"Indent"),ju=_=>Mf(_,"Outdent"),Og=_=>Mf(_,"Flatten"),de="\uFEFF",qu=_=>_===de,Ha=(_,$,j)=>ur(_,$,j).isSome(),C1=(_,$)=>Ha(_,On(nr,$));var $h=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Ql=Gl.DOM,oo=_=>{const $={},j=ue=>{let ge=_[ue?"startContainer":"endContainer"],tt=_[ue?"startOffset":"endOffset"];if(Rs(ge)){const sn=Ql.create("span",{"data-mce-type":"bookmark"});ge.hasChildNodes()?(tt=Math.min(tt,ge.childNodes.length-1),ue?ge.insertBefore(sn,ge.childNodes[tt]):Ql.insertAfter(sn,ge.childNodes[tt])):ge.appendChild(sn),ge=sn,tt=0}$[ue?"startContainer":"endContainer"]=ge,$[ue?"startOffset":"endOffset"]=tt};return j(!0),_.collapsed||j(),$},Ts=_=>{const $=ue=>{const ge=Dn=>{var An;let Zt=(An=Dn.parentNode)===null||An===void 0?void 0:An.firstChild,os=0;for(;Zt;){if(Zt===Dn)return os;(!Rs(Zt)||Zt.getAttribute("data-mce-type")!=="bookmark")&&os++,Zt=Zt.nextSibling}return-1};let tt=_[ue?"startContainer":"endContainer"],sn=_[ue?"startOffset":"endOffset"];if(tt){if(Rs(tt)&&tt.parentNode){const Dn=tt;sn=ge(tt),tt=tt.parentNode,Ql.remove(Dn),!tt.hasChildNodes()&&Ql.isBlock(tt)&&tt.appendChild(Ql.create("br"))}_[ue?"startContainer":"endContainer"]=tt,_[ue?"startOffset":"endOffset"]=sn}};$(!0),$();const j=Ql.createRng();return j.setStart(_.startContainer,_.startOffset),_.endContainer&&j.setEnd(_.endContainer,_.endOffset),hc(j)},Gr=_=>{switch(_){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Al=(_,$,j)=>{const ue=j["list-style-type"]?j["list-style-type"]:null;_.setStyle($,"list-style-type",ue)},Rg=(_,$)=>{Bs.each($,(j,ue)=>{_.setAttribute(ue,j)})},Gu=(_,$,j)=>{Rg($,j["list-attributes"]),Bs.each(_.select("li",$),ue=>{Rg(ue,j["list-item-attributes"])})},Ea=(_,$,j)=>{Al(_,$,j),Gu(_,$,j)},Nf=(_,$,j)=>{Bs.each(j,ue=>_.setStyle($,ue,""))},Pf=(_,$)=>Fe($)&&!Hi($,_.schema.getBlockElements()),eu=(_,$,j,ue)=>{let ge=$[j?"startContainer":"endContainer"];const tt=$[j?"startOffset":"endOffset"];Rs(ge)&&(ge=ge.childNodes[Math.min(tt,ge.childNodes.length-1)]||ge),!j&&Fi(ge.nextSibling)&&(ge=ge.nextSibling);const sn=An=>{for(;!_.dom.isBlock(An)&&An.parentNode&&ue!==An;)An=An.parentNode;return An},Dn=(An,Zt)=>{var os;const Ds=new Kc(An,sn(An)),Ic=Zt?"next":"prev";let yc;for(;yc=Ds[Ic]();)if(!(Es(_,yc)||qu(yc.textContent)||((os=yc.textContent)===null||os===void 0?void 0:os.length)===0))return Ot.some(yc);return Ot.none()};if(j&&No(ge))if(qu(ge.textContent))ge=Dn(ge,!1).getOr(ge);else for(ge.parentNode!==null&&Pf(_,ge.parentNode)&&(ge=ge.parentNode);ge.previousSibling!==null&&(Pf(_,ge.previousSibling)||No(ge.previousSibling));)ge=ge.previousSibling;if(!j&&No(ge))if(qu(ge.textContent))ge=Dn(ge,!0).getOr(ge);else for(ge.parentNode!==null&&Pf(_,ge.parentNode)&&(ge=ge.parentNode);ge.nextSibling!==null&&(Pf(_,ge.nextSibling)||No(ge.nextSibling));)ge=ge.nextSibling;for(;ge.parentNode!==ue;){const An=ge.parentNode;if(Xn(_,ge)||/^(TD|TH)$/.test(An.nodeName))return ge;ge=An}return ge},tu=(_,$,j)=>{const ue=[],ge=_.dom,tt=eu(_,$,!0,j),sn=eu(_,$,!1,j);let Dn;const An=[];for(let Zt=tt;Zt&&(An.push(Zt),Zt!==sn);Zt=Zt.nextSibling);return Bs.each(An,Zt=>{var os;if(Xn(_,Zt)){ue.push(Zt),Dn=null;return}if(ge.isBlock(Zt)||Fi(Zt)){Fi(Zt)&&ge.remove(Zt),Dn=null;return}const Ds=Zt.nextSibling;if($h.isBookmarkNode(Zt)&&(dr(Ds)||Xn(_,Ds)||!Ds&&Zt.parentNode===j)){Dn=null;return}Dn||(Dn=ge.create("p"),(os=Zt.parentNode)===null||os===void 0||os.insertBefore(Dn,Zt),ue.push(Dn)),Dn.appendChild(Zt)}),ue},Lm=(_,$,j)=>{const ue=_.getStyle($,"list-style-type");let ge=j?j["list-style-type"]:"";return ge=ge===null?"":ge,ue===ge},Bc=(_,$)=>{const j=_.selection.getStart(!0),ue=eu(_,$,!0,_.getBody());return C1(Te.fromDom(ue),Te.fromDom($.commonAncestorContainer))?$.commonAncestorContainer:j},Fm=(_,$,j)=>{const ue=_.selection.getRng();let ge="LI";const tt=En(_,Bc(_,ue)),sn=_.dom;if(sn.getContentEditable(_.selection.getNode())==="false")return;$=$.toUpperCase(),$==="DL"&&(ge="DT");const Dn=oo(ue),An=_s(tu(_,ue,tt),_.dom.isEditable);Bs.each(An,Zt=>{let os;const Ds=Zt.previousSibling,Ic=Zt.parentNode;ca(Ic)||(Ds&&dr(Ds)&&Ds.nodeName===$&&Lm(sn,Ds,j)?(os=Ds,Zt=sn.rename(Zt,ge),Ds.appendChild(Zt)):(os=sn.create($),Ic.insertBefore(os,Zt),os.appendChild(Zt),Zt=sn.rename(Zt,ge)),Nf(sn,Zt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Ea(sn,os,j),Ku(_.dom,os))}),_.selection.setRng(Ts(Dn))},Lr=(_,$)=>dr(_)&&_.nodeName===($==null?void 0:$.nodeName),nu=(_,$,j)=>{const ue=_.getStyle($,"list-style-type",!0),ge=_.getStyle(j,"list-style-type",!0);return ue===ge},yi=(_,$)=>_.className===$.className,Ta=(_,$,j)=>Lr($,j)&&nu(_,$,j)&&yi($,j),Ku=(_,$)=>{let j,ue=$.nextSibling;if(Ta(_,$,ue)){const ge=ue;for(;j=ge.firstChild;)$.appendChild(j);_.remove(ge)}if(ue=$.previousSibling,Ta(_,$,ue)){const ge=ue;for(;j=ge.lastChild;)$.insertBefore(j,$.firstChild);_.remove(ge)}},w1=(_,$,j,ue)=>{if($.nodeName!==j){const ge=_.dom.rename($,j);Ea(_.dom,ge,ue),Zn(_,Gr(j),ge)}else Ea(_.dom,$,ue),Zn(_,Gr(j),$)},Bf=(_,$,j,ue)=>{if($.classList.forEach((ge,tt,sn)=>{ge.startsWith("tox-")&&(sn.remove(ge),sn.length===0&&$.removeAttribute("class"))}),$.nodeName!==j){const ge=_.dom.rename($,j);Ea(_.dom,ge,ue),Zn(_,Gr(j),ge)}else Ea(_.dom,$,ue),Zn(_,Gr(j),$)},ji=(_,$,j,ue,ge)=>{const tt=dr($);if(tt&&$.nodeName===ue&&!Bd(ge)&&!jr($))Og(_);else{Fm(_,ue,ge);const sn=oo(_.selection.getRng()),Dn=tt?[$,...j]:j,An=tt&&jr($)?Bf:w1;Bs.each(Dn,Zt=>{An(_,Zt,ue,ge)}),_.selection.setRng(Ts(sn))}},Bd=_=>"list-style-type"in _,Ih=(_,$,j,ue)=>{if($!==_.getBody())if($)if($.nodeName===j&&!Bd(ue)&&!jr($))Og(_);else{const ge=oo(_.selection.getRng());jr($)&&$.classList.forEach((sn,Dn,An)=>{sn.startsWith("tox-")&&(An.remove(sn),An.length===0&&$.removeAttribute("class"))}),Ea(_.dom,$,ue);const tt=_.dom.rename($,j);Ku(_.dom,tt),_.selection.setRng(Ts(ge)),Fm(_,j,ue),Zn(_,Gr(j),tt)}else Fm(_,j,ue),Zn(_,Gr(j),$)},$f=(_,$,j)=>{const ue=ia(_);if($s(_,ue))return;const ge=be(_),tt=q(j)?j:{};ge.length>0?ji(_,ue,ge,$,tt):Ih(_,ue,$,tt)},Lh=Gl.DOM,Fh=(_,$)=>{const j=$.parentElement;if(j&&j.nodeName==="LI"&&j.firstChild===$){const ue=j.previousSibling;ue&&ue.nodeName==="LI"?(ue.appendChild($),Xc(_,j)&&Lh.remove(j)):Lh.setStyle(j,"listStyleType","none")}if(dr(j)){const ue=j.previousSibling;ue&&ue.nodeName==="LI"&&ue.appendChild($)}},Hh=(_,$)=>{const j=Bs.grep(_.select("ol,ul",$));Bs.each(j,ue=>{Fh(_,ue)})},qi=(_,$,j,ue)=>{let ge=$.startContainer;const tt=$.startOffset;if(No(ge)&&(j?tt<ge.data.length:tt>0))return ge;const sn=_.schema.getNonEmptyElements();Rs(ge)&&(ge=Af.getNode(ge,tt));const Dn=new Kc(ge,ue);j&&Rm(_.dom,ge)&&Dn.next();const An=j?Dn.next.bind(Dn):Dn.prev2.bind(Dn);for(;ge=An();)if(ge.nodeName==="LI"&&!ge.hasChildNodes()||sn[ge.nodeName]||No(ge)&&ge.data.length>0)return ge;return null},Dg=(_,$)=>{const j=$.childNodes;return j.length===1&&!dr(j[0])&&_.isBlock(j[0])},Ci=_=>Ot.from(_).map(Te.fromDom).filter(to).exists($=>hs($)&&!Xo(["details"],Mc($))),ws=(_,$)=>{Dg(_,$)&&Ci($.firstChild)&&_.remove($.firstChild,!0)},Xs=(_,$,j)=>{let ue;const ge=Dg(_,j)?j.firstChild:j;if(ws(_,$),!Xc(_,$,!0))for(;ue=$.firstChild;)ge.appendChild(ue)},pc=(_,$,j)=>{let ue;const ge=$.parentNode;if(!zi(_,$)||!zi(_,j))return;dr(j.lastChild)&&(ue=j.lastChild),ge===j.lastChild&&Fi(ge.previousSibling)&&_.remove(ge.previousSibling);const tt=j.lastChild;tt&&Fi(tt)&&$.hasChildNodes()&&_.remove(tt),Xc(_,j,!0)&&Zr(Te.fromDom(j)),Xs(_,$,j),ue&&j.appendChild(ue);const Dn=Qt(Te.fromDom(j),Te.fromDom($))?_.getParents($,dr,j):[];_.remove($),pe(Dn,An=>{Xc(_,An)&&An!==_.getRoot()&&_.remove(An)})},$d=(_,$,j)=>{Zr(Te.fromDom(j)),pc(_.dom,$,j),_.selection.setCursorLocation(j,0)},Id=(_,$,j,ue)=>{const ge=_.dom;if(ge.isEmpty(ue))$d(_,j,ue);else{const tt=oo($);pc(ge,j,ue),_.selection.setRng(Ts(tt))}},hr=(_,$,j,ue)=>{const ge=oo($);pc(_.dom,j,ue);const tt=Ts(ge);_.selection.setRng(tt)},Wt=(_,$)=>{const j=_.dom,ue=_.selection,ge=ue.getStart(),tt=Vt(_,ge),sn=j.getParent(ue.getStart(),"LI",tt);if(sn){const Dn=sn.parentElement;if(Dn===_.getBody()&&Xc(j,Dn))return!0;const An=hc(ue.getRng()),Zt=j.getParent(qi(_,An,$,tt),"LI",tt),os=Zt&&($?j.isChildOf(sn,Zt):j.isChildOf(Zt,sn));if(Zt&&Zt!==sn&&!os)return _.undoManager.transact(()=>{$?Id(_,An,Zt,sn):_d(sn)?ju(_):hr(_,An,sn,Zt)}),!0;if(os&&!$&&Zt!==sn){const Ds=An.commonAncestorContainer.parentElement;return!Ds||j.isChildOf(Zt,Ds)?!1:(_.undoManager.transact(()=>{const Ic=oo(An);Xs(j,Ds,Zt),Ds.remove();const yc=Ts(Ic);_.selection.setRng(yc)}),!0)}else if(!Zt&&!$&&An.startOffset===0&&An.endOffset===0)return _.undoManager.transact(()=>{Og(_)}),!0}return!1},Mg=(_,$,j)=>{const ue=_.getParent($.parentNode,_.isBlock,j);_.remove($),ue&&_.isEmpty(ue)&&_.remove(ue)},wi=(_,$)=>{const j=_.dom,ue=_.selection.getStart(),ge=Vt(_,ue),tt=j.getParent(ue,j.isBlock,ge);if(tt&&j.isEmpty(tt,void 0,{checkRootAsContent:!0})){const sn=hc(_.selection.getRng()),Dn=qi(_,sn,$,ge),An=j.getParent(Dn,"LI",ge);if(Dn&&An){const Zt=yc=>Xo(["td","th","caption"],Mc(yc)),os=yc=>yc.dom===ge,Ds=bi(Te.fromDom(An),Zt,os),Ic=bi(Te.fromDom(sn.startContainer),Zt,os);return Ge(Ds,Ic,nr)?(_.undoManager.transact(()=>{const yc=An.parentNode;Mg(j,tt,ge),Ku(j,yc),_.selection.select(Dn,!0),_.selection.collapse($)}),!0):!1}}return!1},bc=(_,$)=>Wt(_,$)||wi(_,$),go=_=>{const $=_.selection.getStart(),j=Vt(_,$);return _.dom.getParent($,"LI,DT,DD",j)||lt(_).length>0},Yu=_=>go(_)?(_.undoManager.transact(()=>{let $=!0;const j=()=>$=!1;_.on("input",j),_.execCommand("Delete"),_.off("input",j),$&&_.dispatch("input"),Hh(_.dom,_.getBody())}),!0):!1,Hm=(_,$)=>{const j=_.selection;return!$s(_,j.getNode())&&(j.isCollapsed()?bc(_,$):Yu(_))},zm=_=>{_.on("ExecCommand",$=>{const j=$.command.toLowerCase();(j==="delete"||j==="forwarddelete")&&go(_)&&Hh(_.dom,_.getBody())}),_.on("keydown",$=>{$.keyCode===yl.BACKSPACE?Hm(_,!1)&&$.preventDefault():$.keyCode===yl.DELETE&&Hm(_,!0)&&$.preventDefault()})},zh=_=>({backspaceDelete:$=>{Hm(_,$)}}),Tn=(_,$)=>{const j=ia(_);j===null||$s(_,j)||_.undoManager.transact(()=>{q($.styles)&&_.dom.setStyles(j,$.styles),q($.attrs)&&Cl($.attrs,(ue,ge)=>_.dom.setAttrib(j,ge,ue))})},Ls=_=>{const $=fn(Ir(_).split("")),j=We($,(ue,ge)=>{const tt=ue.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,ge)*tt});return Ut(j,(ue,ge)=>ue+ge,0)},Ld=_=>{if(_--,_<0)return"";{const $=_%26,j=Math.floor(_/26),ue=Ld(j),ge=String.fromCharCode(65+$);return ue+ge}},nc=_=>/^[A-Z]+$/.test(_),_a=_=>/^[a-z]+$/.test(_),vc=_=>/^[0-9]+$/.test(_),Ar=_=>vc(_)?2:nc(_)?0:_a(_)?1:sr(_)?3:4,za=_=>{switch(Ar(_)){case 2:return Ot.some({listStyleType:Ot.none(),start:_});case 0:return Ot.some({listStyleType:Ot.some("upper-alpha"),start:Ls(_).toString()});case 1:return Ot.some({listStyleType:Ot.some("lower-alpha"),start:Ls(_).toString()});case 3:return Ot.some({listStyleType:Ot.none(),start:""});case 4:return Ot.none()}},$c=_=>{const $=parseInt(_.start,10);return Sr(_.listStyleType,"upper-alpha")?Ld($):Sr(_.listStyleType,"lower-alpha")?Ld($).toLowerCase():_.start},Fd=_=>{const $=ia(_);!ec($)||$s(_,$)||_.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:$c({start:_.dom.getAttrib($,"start","1"),listStyleType:Ot.from(_.dom.getStyle($,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:j=>{const ue=j.getData();za(ue.start).each(ge=>{_.execCommand("mceListUpdate",!1,{attrs:{start:ge.start==="1"?"":ge.start},styles:{"list-style-type":ge.listStyleType.getOr("")}})}),j.close()}})},ps=(_,$)=>()=>{const j=ia(_);return Fe(j)&&j.nodeName===$},If=_=>{_.addCommand("mceListProps",()=>{Fd(_)})},qs=_=>{_.on("BeforeExecCommand",$=>{const j=$.command.toLowerCase();j==="indent"?Ag(_):j==="outdent"&&ju(_)}),_.addCommand("InsertUnorderedList",($,j)=>{$f(_,"UL",j)}),_.addCommand("InsertOrderedList",($,j)=>{$f(_,"OL",j)}),_.addCommand("InsertDefinitionList",($,j)=>{$f(_,"DL",j)}),_.addCommand("RemoveList",()=>{Og(_)}),If(_),_.addCommand("mceListUpdate",($,j)=>{q(j)&&Tn(_,j)}),_.addQueryStateHandler("InsertUnorderedList",ps(_,"UL")),_.addQueryStateHandler("InsertOrderedList",ps(_,"OL")),_.addQueryStateHandler("InsertDefinitionList",ps(_,"DL"))};var Gi=tinymce.util.Tools.resolve("tinymce.html.Node");const Ki=_=>_.type===3,Ao=_=>_.length===0,oc=_=>{const $=(ge,tt)=>{const sn=Gi.create("li");pe(ge,Dn=>sn.append(Dn)),tt?_.insert(sn,tt,!0):_.append(sn)},j=(ge,tt)=>Ki(tt)?[...ge,tt]:!Ao(ge)&&!Ki(tt)?($(ge,tt),[]):ge,ue=Ut(_.children(),j,[]);Ao(ue)||$(ue)},Vm=_=>{_.on("PreInit",()=>{const{parser:$}=_;$.addNodeFilter("ul,ol",j=>pe(j,oc))})},Xu=_=>{_.on("keydown",$=>{$.keyCode!==yl.TAB||yl.metaKeyPressed($)||_.undoManager.transact(()=>{($.shiftKey?ju(_):Ag(_))&&$.preventDefault()})})},ns=_=>{Jc(_)&&Xu(_),zm(_)},ou=(_,$)=>j=>{const ue=ge=>{j.setActive(Pm(ge.parents,$)),j.setEnabled(!$s(_,ge.element)&&_.selection.isEditable())};return j.setEnabled(_.selection.isEditable()),Bm(_,ue)},Si=_=>{const $=j=>()=>_.execCommand(j);_.hasPlugin("advlist")||(_.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:$("InsertOrderedList"),onSetup:ou(_,"OL")}),_.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:$("InsertUnorderedList"),onSetup:ou(_,"UL")}))},Vn=(_,$)=>j=>Bm(_,ge=>j.setEnabled(Pm(ge.parents,$)&&!$s(_,ge.element))),Hd=_=>{const $={text:"List properties...",icon:"ordered-list",onAction:()=>_.execCommand("mceListProps"),onSetup:Vn(_,"OL")};_.ui.registry.addMenuItem("listprops",$),_.ui.registry.addContextMenu("lists",{update:j=>{const ue=ia(_,j);return ec(ue)?["listprops"]:[]}})};var Lf=()=>{p.add("lists",_=>(Lu(_),Vm(_),_.hasPlugin("rtc",!0)?If(_):(ns(_),qs(_)),Si(_),Hd(_),zh(_)))};Lf()}()),uJ}var mJ;function rse(){return mJ||(mJ=1,sse()),lJ}rse();var fJ={},gJ={},hJ;function ase(){return hJ||(hJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const S=(se,Ee)=>{se.focus(),se.undoManager.transact(()=>{se.setContent(Ee)}),se.selection.setCursorLocation(),se.nodeChanged()},O=se=>se.getContent({source_view:!0}),P=se=>{const Ee=O(se);se.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Ee},onSubmit:Le=>{S(se,Le.getData().code),Le.close()}})},F=se=>{se.addCommand("mceCodeEditor",()=>{P(se)})},Z=se=>{const Ee=()=>se.execCommand("mceCodeEditor");se.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Ee}),se.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Ee})};var q=()=>{p.add("code",se=>(F(se),Z(se),{}))};q()}()),gJ}var pJ;function cse(){return pJ||(pJ=1,ase()),fJ}cse();window.Alpine=JQ;JQ.start();window.switchTab=function(p){document.querySelectorAll(".tab-content").forEach(P=>{P.classList.add("hidden")}),document.querySelectorAll('[id^="tab-"]').forEach(P=>{P.classList.remove("border-purple","text-purple"),P.classList.add("border-transparent","text-gray-dark")});const S=document.getElementById("tab-"+p);S&&(S.classList.add("border-purple","text-purple"),S.classList.remove("border-transparent","text-gray-dark"));const O=document.getElementById("content-"+p);O&&O.classList.remove("hidden")};function ise(){const p=document.getElementById("menu-toggle"),S=document.getElementById("close-menu"),O=document.getElementById("mobile-menu"),P=document.getElementById("mobile-overlay"),F=document.getElementById("mobile-content"),Z=document.querySelectorAll(".mobile-link");if(!p||!O)return;function q(){O.classList.remove("hidden"),setTimeout(()=>{F.classList.remove("translate-x-full")},10),document.body.classList.add("overflow-hidden")}function se(){F.classList.add("translate-x-full"),setTimeout(()=>{O.classList.add("hidden"),document.body.classList.remove("overflow-hidden")},300)}p.addEventListener("click",q),S.addEventListener("click",se),P.addEventListener("click",se),Z.forEach(Ee=>{Ee.addEventListener("click",function(){se()})})}document.addEventListener("DOMContentLoaded",function(){AOS.init({once:!0,duration:800,offset:50}),ise();const p=document.querySelectorAll(".service-filter"),S=document.querySelectorAll("[data-category]");if(p.forEach(Ee=>{Ee.addEventListener("click",function(Le){Le.preventDefault(),p.forEach(ut=>{ut.classList.remove("bg-purple","text-white","border-purple"),ut.classList.add("bg-white","text-dark","border-purple/20")}),this.classList.add("bg-purple","text-white","border-purple"),this.classList.remove("bg-white","text-dark","border-purple/20");const Fe=this.getAttribute("data-category");S.forEach(ut=>{Fe==="all"||ut.getAttribute("data-category")===Fe?(ut.style.display="",ut.classList.add("animate-fadeIn"),setTimeout(()=>{ut.classList.remove("animate-fadeIn")},500)):ut.style.display="none"})})}),typeof Lenis<"u"){let Ee=function(Le){window.lenis.raf(Le),requestAnimationFrame(Ee)};var se=Ee;window.lenis=new Lenis({duration:1.2,easing:Le=>Math.min(1,1.001-Math.pow(2,-10*Le)),direction:"vertical",smooth:!0}),requestAnimationFrame(Ee)}lse(),use(),dse(),mse(),document.getElementById("tab-medical")&&window.switchTab("medical"),setTimeout(()=>{fse(),gse()},500);const O=document.querySelectorAll(".service-filter"),P=document.querySelectorAll("[data-category]");O.forEach(Ee=>{Ee.addEventListener("click",function(Le){Le.preventDefault(),O.forEach(ut=>{ut.classList.remove("bg-purple","text-white","border-purple"),ut.classList.add("bg-white","text-dark","border-purple/20")}),this.classList.remove("bg-white","text-dark","border-purple/20"),this.classList.add("bg-purple","text-white","border-purple");const Fe=this.getAttribute("href").substring(1);P.forEach(ut=>{Fe==="all"||ut.dataset.category===Fe?(ut.style.display="",ut.classList.add("animate-fadeIn"),setTimeout(()=>{ut.classList.remove("animate-fadeIn")},500)):ut.style.display="none"})})});const F=document.getElementById("scroll-left"),Z=document.getElementById("scroll-right"),q=document.querySelector(".service-filter-container");F&&Z&&q&&(F.addEventListener("click",()=>{q.scrollBy({left:-200,behavior:"smooth"})}),Z.addEventListener("click",()=>{q.scrollBy({left:200,behavior:"smooth"})}))});function lse(){const p={value1:{timer:null,seconds:0},value2:{timer:null,seconds:0},value3:{timer:null,seconds:0}};function S(P,F,Z){var se;const q=document.getElementById(F);q&&((se=p[F])!=null&&se.timer&&clearInterval(p[F].timer),p[F].seconds=0,p[F].timer=setInterval(()=>{p[F].seconds<P?(p[F].seconds++,q.innerText=p[F].seconds):clearInterval(p[F].timer)},Z))}function O(P,F){const Z=document.querySelector(P);if(!Z)return;new IntersectionObserver(se=>{se.forEach(Ee=>{Ee.isIntersecting?Object.entries(F).forEach(([Le,Fe])=>{S(Fe.value,Le,Fe.interval)}):Object.entries(F).forEach(([Le])=>{var Fe;if((Fe=p[Le])!=null&&Fe.timer){clearInterval(p[Le].timer);const ut=document.getElementById(Le);ut&&(ut.innerText="0")}})})},{threshold:.2}).observe(Z)}O("#value1",{value1:{value:47,interval:50},value2:{value:128,interval:25},value3:{value:12,interval:80}})}function use(){document.querySelectorAll('a[href^="#"]').forEach(S=>{S.addEventListener("click",function(O){const P=this.getAttribute("href");if(P==="#")return;O.preventDefault();const F=document.querySelector(P);if(F){if(window.lenis)window.lenis.scrollTo(F,{offset:-100,duration:1.2});else{const se=F.getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:se,behavior:"smooth"})}const q=document.querySelectorAll(".service-filter");q.length>0&&(q.forEach(se=>{se.classList.remove("bg-purple","text-white"),se.classList.add("bg-gray-light","text-dark")}),this.classList.remove("bg-gray-light","text-dark"),this.classList.add("bg-purple","text-white"))}})});function p(){const S=document.querySelectorAll("section[id], div[id].tab-content div[id]");if(S.length===0)return;let O="";const P=window.scrollY+200;S.forEach(F=>{const Z=F.offsetTop,q=F.offsetHeight;P>=Z&&P<Z+q&&(O=F.getAttribute("id"))}),O&&document.querySelectorAll('a[href^="#"]:not(footer a)').forEach(Z=>{Z.getAttribute("href")===`#${O}`?(Z.classList.remove("bg-gray-light","text-dark"),Z.classList.add("bg-purple","text-white")):(Z.classList.remove("bg-purple","text-white"),Z.classList.add("bg-gray-light","text-dark"))})}window.addEventListener("scroll",p)}function dse(){const p=document.getElementById("backToTop");p&&(window.addEventListener("scroll",function(){window.scrollY>300?(p.classList.remove("hidden"),p.classList.add("flex","items-center","justify-center")):(p.classList.add("hidden"),p.classList.remove("flex","items-center","justify-center"))}),p.addEventListener("click",function(){window.lenis?window.lenis.scrollTo(0):window.scrollTo({top:0,behavior:"smooth"})}))}function mse(){function p(S,O,P){const F=document.getElementById(S);F&&(document.addEventListener("keydown",function(Z){Z.key==="Escape"&&!F.classList.contains("hidden")&&F.classList.add("hidden")}),F.addEventListener("click",function(Z){Z.target===F&&F.classList.add("hidden")}))}document.getElementById("organigrammeModal")&&p("organigrammeModal")}function fse(){if(typeof Swiper>"u"){console.warn("Swiper n'est pas charg, les carrousels ne fonctionneront pas.");return}const p={slidesPerView:1,spaceBetween:15,loop:!0,speed:800,observer:!0,observeParents:!0,preventInteractionOnTransition:!0,autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{clickable:!0},breakpoints:{540:{slidesPerView:2,spaceBetween:15},768:{slidesPerView:3,spaceBetween:15}}},S=(O,P={})=>{try{document.querySelectorAll(O).forEach(Z=>{const q={...p,...P};if(q.pagination&&!q.pagination.el){const se=Z.querySelector(".swiper-pagination");se&&(q.pagination.el=se)}if(q.navigation){if(!q.navigation.nextEl){const se=Z.querySelector(".swiper-button-next");se&&(q.navigation.nextEl=se)}if(!q.navigation.prevEl){const se=Z.querySelector(".swiper-button-prev");se&&(q.navigation.prevEl=se)}}new Swiper(Z,q)})}catch(F){console.error(`Erreur lors de l'initialisation du carrousel ${O}:`,F)}};S(".former-directors-carousel",{navigation:{nextEl:".former-directors-carousel .swiper-button-next",prevEl:".former-directors-carousel .swiper-button-prev"}}),S(".team-carousel",{navigation:{nextEl:".team-carousel .swiper-button-next",prevEl:".team-carousel .swiper-button-prev"}})}function gse(){if(typeof Chart>"u"){console.warn("Chart.js n'est pas charg, les graphiques ne fonctionneront pas.");return}const p=document.getElementById("staffChart");if(p)try{const S=p.getContext("2d"),O=S.createLinearGradient(0,0,0,300);O.addColorStop(0,"rgba(142, 46, 155, 0.4)"),O.addColorStop(1,"rgba(142, 46, 155, 0.05)");const P=S.createLinearGradient(0,0,0,300);P.addColorStop(0,"rgba(94, 204, 193, 0.4)"),P.addColorStop(1,"rgba(94, 204, 193, 0.05)"),new Chart(S,{type:"line",data:{labels:["2018","2019","2020","2021","2022","2023"],datasets:[{label:"Mdecins",data:[32,35,38,42,45,47],borderColor:"#8E2E9B",backgroundColor:O,borderWidth:2,tension:.4,fill:!0,pointBackgroundColor:"#8E2E9B",pointRadius:4,pointHoverRadius:6},{label:"Infirmiers",data:[85,92,98,110,122,128],borderColor:"#5ECCC1",backgroundColor:P,borderWidth:2,tension:.4,fill:!0,pointBackgroundColor:"#5ECCC1",pointRadius:4,pointHoverRadius:6}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"top",labels:{boxWidth:12,usePointStyle:!0,padding:20,font:{size:12,family:"'Poppins', sans-serif"}}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.9)",titleColor:"#333",bodyColor:"#666",titleFont:{size:14,weight:"bold",family:"'Poppins', sans-serif"},bodyFont:{size:13,family:"'Rubik', sans-serif"},padding:12,borderColor:"#ddd",borderWidth:1,displayColors:!1,callbacks:{label:function(F){return F.dataset.label+": "+F.raw+" personnes"}}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(200, 200, 200, 0.2)",drawBorder:!1},ticks:{stepSize:20,font:{size:11,family:"'Rubik', sans-serif"}}},x:{grid:{display:!1},ticks:{font:{size:11,family:"'Rubik', sans-serif"}}}}}})}catch(S){console.error("Erreur lors de l'initialisation du graphique:",S)}}const hse=p=>{const S=document.querySelector("#video iframe");p?(S.src="https://www.youtube.com/embed/0f49AuWqZiI?autoplay=1",document.querySelector("#video").classList.remove("pointer-events-none")):setTimeout(()=>{S.src="",document.querySelector("#video").classList.add("pointer-events-none")},1e3)};document.getElementById("video-check").addEventListener("change",p=>hse(p.target.checked));
